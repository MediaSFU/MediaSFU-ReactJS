!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@fortawesome/free-brands-svg-icons"),require("@fortawesome/free-solid-svg-icons"),require("@fortawesome/react-fontawesome"),require("@mediapipe/selfie_segmentation"),require("mediasoup-client"),require("react"),require("react-dom"),require("react/jsx-runtime"),require("socket.io-client"),require("universal-cookie")):"function"==typeof define&&define.amd?define(["@fortawesome/free-brands-svg-icons","@fortawesome/free-solid-svg-icons","@fortawesome/react-fontawesome","@mediapipe/selfie_segmentation","mediasoup-client","React","ReactDOM","react/jsx-runtime","socket.io-client","universal-cookie"],t):"object"==typeof exports?exports.MediasfuReactJS=t(require("@fortawesome/free-brands-svg-icons"),require("@fortawesome/free-solid-svg-icons"),require("@fortawesome/react-fontawesome"),require("@mediapipe/selfie_segmentation"),require("mediasoup-client"),require("react"),require("react-dom"),require("react/jsx-runtime"),require("socket.io-client"),require("universal-cookie")):e.MediasfuReactJS=t(e.FontAwesome["free-brands-svg-icons"],e.FontAwesome["free-solid-svg-icons"],e.FontAwesome["react-fontawesome"],e.SelfieSegmentation,e.mediasoupClient,e.React,e.ReactDOM,e.React.jsxRuntime,e.io,e.UniversalCookie)}(this,(e,t,r,a,n,o,s,i,c,d)=>(()=>{"use strict";var l={63:e=>{e.exports=t},67:e=>{e.exports=d},156:e=>{e.exports=o},310:e=>{e.exports=i},318:e=>{e.exports=s},575:e=>{e.exports=r},609:t=>{t.exports=e},659:e=>{e.exports=n},884:e=>{e.exports=a},985:e=>{e.exports=c}},u={};function p(e){var t=u[e];if(void 0!==t)return t.exports;var r=u[e]={exports:{}};return l[e](r,r.exports,p),r.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var r in t)p.o(t,r)&&!p.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var m={};p.r(m),p.d(m,{AlertComponent:()=>Xo,AnimatedGradientBackground:()=>Vi,AnimatedIconButton:()=>Ti,Animations:()=>it,AudioCard:()=>pn,AudioGrid:()=>ht,BackgroundModal:()=>Hs,Borders:()=>dt,BreakoutRoomsModal:()=>Us,CardVideoDisplay:()=>ea,CoHostModal:()=>ds,Colors:()=>Me,ConfigureWhiteboardModal:()=>_s,ConfirmExitModal:()=>xs,ConfirmHereModal:()=>vs,ControlButtonsAltComponent:()=>ve,ControlButtonsComponent:()=>he,ControlButtonsComponentTouch:()=>Ce,DEFAULT_RENDER_MODE:()=>$i,DisplaySettingsModal:()=>is,EventSettingsModal:()=>cs,FlexibleGrid:()=>Ks,FlexibleVideo:()=>Xs,GlassmorphicContainer:()=>It,GlowContainer:()=>ji,GradientCard:()=>Ci,INLINE_RENDER_MODE:()=>Wi,LoadingModal:()=>Ko,MainAspectComponent:()=>ge,MainContainerComponent:()=>He,MainGridComponent:()=>Ee,MainScreenComponent:()=>$e,MediaSettingsModal:()=>ys,MediasfuAnimations:()=>st,MediasfuBorders:()=>ct,MediasfuBroadcast:()=>ui,MediasfuChat:()=>gi,MediasfuColors:()=>Pe,MediasfuConference:()=>mi,MediasfuGeneric:()=>li,MediasfuSpacing:()=>rt,MediasfuTypography:()=>nt,MediasfuWebinar:()=>pi,MeetingProgressTimer:()=>Ve,MenuModal:()=>as,MessagesModal:()=>bs,MiniAudio:()=>jt,MiniAudioPlayer:()=>yn,MiniCard:()=>sn,MiniCardAudio:()=>Si,ModernAlertComponent:()=>Ft,ModernAudioCard:()=>aa,ModernBackgroundModal:()=>Mr,ModernBreakoutRoomsModal:()=>Ir,ModernCoHostModal:()=>mr,ModernConfigureWhiteboardModal:()=>Ar,ModernConfirmExitModal:()=>yr,ModernConfirmHereModal:()=>xr,ModernControlButtonsComponent:()=>Ui,ModernDisplaySettingsModal:()=>ur,ModernEventSettingsModal:()=>pr,ModernFlexibleGrid:()=>Kr,ModernFlexibleVideo:()=>Xr,ModernLoadingModal:()=>At,ModernMainContainerComponent:()=>qi,ModernMediaSettingsModal:()=>br,ModernMediasfuGeneric:()=>Yo,ModernMeetingProgressTimer:()=>Zr,ModernMenuModal:()=>Lt,ModernMessagesModal:()=>hr,ModernMiniCard:()=>ra,ModernPagination:()=>$r,ModernParticipantsModal:()=>gr,ModernPollModal:()=>kr,ModernPreJoinPage:()=>wr,ModernRecordingModal:()=>ir,ModernRequestsModal:()=>dr,ModernTooltip:()=>Ie,ModernVideoCard:()=>ta,ModernWaitingModal:()=>lr,ModernWelcomePage:()=>Sr,NeumorphicContainer:()=>Pi,OtherGridComponent:()=>Be,Pagination:()=>Gs,ParticipantsModal:()=>hs,PollModal:()=>Ws,PreJoinPage:()=>Es,PremiumButton:()=>Nt,PremiumTextField:()=>Ai,PulseBorderContainer:()=>Mi,RecordingModal:()=>ns,RequestsModal:()=>os,SIDEBAR_RENDER_MODE:()=>Ei,Screenboard:()=>pt,ScreenboardModal:()=>mt,ShareEventModal:()=>Ss,ShimmerAvatar:()=>Li,ShimmerCard:()=>Di,ShimmerLoading:()=>Fi,ShimmerText:()=>Ni,SidebarPanel:()=>Bi,SoundPlayer:()=>To,Spacing:()=>at,StyledContainer:()=>Ii,SubAspectComponent:()=>We,Typography:()=>ot,VideoCard:()=>dn,WaitingRoomModal:()=>ss,WelcomePage:()=>ks,Whiteboard:()=>ut,aParams:()=>P,addVideosGrid:()=>Mn,allMembers:()=>$o,allMembersRest:()=>Eo,allWaitingRoomMembers:()=>uo,autoAdjust:()=>Gn,banParticipant:()=>mo,breakoutRoomUpdated:()=>no,calculateRowsAndColumns:()=>Pn,captureCanvasStream:()=>Uo,changeVids:()=>Tn,checkGrid:()=>Cn,checkLimitsAndMakeRequest:()=>oe,checkMediasfuURL:()=>se,checkPauseState:()=>W,checkPermission:()=>Oa,checkResumeState:()=>H,checkScreenShare:()=>Ja,clickAudio:()=>Va,clickChat:()=>Y,clickScreenShare:()=>Ba,clickVideo:()=>La,closeAndResize:()=>_n,compareActiveNames:()=>Fn,compareScreenStates:()=>Dn,confirmExit:()=>L,confirmRecording:()=>da,connectIps:()=>Qn,connectLocalIps:()=>S,connectLocalSocket:()=>ga,connectRecvTransport:()=>zn,connectSendTransport:()=>Wn,connectSendTransportAudio:()=>w,connectSendTransportScreen:()=>Sn,connectSendTransportVideo:()=>vn,connectSocket:()=>ma,consumerResume:()=>xn,controlMedia:()=>k,controlMediaHost:()=>So,createDeviceClient:()=>Na,createResponseJoinRoom:()=>Go,createRoomOnMediaSFU:()=>Rr,createSendTransport:()=>Nn,defaultModernStyleOptions:()=>Ri,disconnect:()=>Wo,disconnectSendTransportAudio:()=>$n,disconnectSendTransportScreen:()=>En,disconnectSendTransportVideo:()=>Bn,disconnectSocket:()=>ha,disconnectUserSelf:()=>wo,dispStreams:()=>Ya,formatNumber:()=>Zn,generatePageContent:()=>C,generateRandomMessages:()=>fi,generateRandomParticipants:()=>hi,generateRandomPolls:()=>xi,generateRandomRequestList:()=>bi,generateRandomWaitingRoomList:()=>yi,getDomains:()=>Io,getEstimate:()=>jn,getModalPosition:()=>T,getOverlayPosition:()=>F,getPipedProducersAlt:()=>On,getProducersPiped:()=>j,getRenderModeForContext:()=>Hi,getVideos:()=>gn,hParams:()=>M,handleCreatePoll:()=>to,handleEndPoll:()=>ao,handleVotePoll:()=>ro,hostRequestResponse:()=>Bo,initialValuesState:()=>me,injectModernAnimations:()=>Mt,joinConRoom:()=>f,joinConsumeRoom:()=>b,joinLocalRoom:()=>ie,joinRoom:()=>Z,joinRoomClient:()=>fa,joinRoomOnMediaSFU:()=>Q,launchBackground:()=>ii,launchBreakoutRooms:()=>ci,launchCoHost:()=>ei,launchConfigureWhiteboard:()=>di,launchConfirmExit:()=>la,launchDisplaySettings:()=>ti,launchMediaSettings:()=>ia,launchMenuModal:()=>Zs,launchMessages:()=>oi,launchParticipants:()=>ni,launchPoll:()=>si,launchRecording:()=>sa,launchRequests:()=>ai,launchSettings:()=>ri,launchWaiting:()=>Qs,meetingEnded:()=>Ro,meetingStillThere:()=>jo,meetingTimeRemaining:()=>Co,mergeStyleOptions:()=>wi,messageParticipants:()=>B,mixStreams:()=>Ga,modifyCoHostSettings:()=>D,modifyDisplaySettings:()=>N,modifySettings:()=>G,muteParticipants:()=>$,newPipeProducer:()=>x,onScreenChanges:()=>In,participantRequested:()=>ho,personJoined:()=>lo,pollUpdated:()=>eo,prepopulateUserMedia:()=>mn,processConsumerTransports:()=>Rn,processConsumerTransportsAudio:()=>_o,producerClosed:()=>v,producerMediaClosed:()=>vo,producerMediaPaused:()=>yo,producerMediaResumed:()=>xo,reInitiateRecording:()=>Mo,rePort:()=>hn,reUpdateInter:()=>Un,readjust:()=>kn,receiveAllPipedTransports:()=>Vn,receiveMessage:()=>ko,receiveRoomMessages:()=>Xn,recordPauseTimer:()=>O,recordResumeTimer:()=>U,recordStartTimer:()=>q,recordUpdateTimer:()=>z,recordingNotice:()=>Fo,removeParticipants:()=>E,reorderStreams:()=>Qa,requestScreenShare:()=>Za,respondToRequests:()=>_,respondToWaiting:()=>X,resumePauseAudioStreams:()=>qo,resumePauseStreams:()=>wn,resumeSendTransportAudio:()=>Ln,roomRecordParams:()=>po,screenParams:()=>I,screenProducerId:()=>fo,sendMessage:()=>V,signalNewConsumerTransport:()=>y,sleep:()=>An,startMeetingProgressTimer:()=>oo,startRecording:()=>ca,startRecords:()=>Po,startShareScreen:()=>Xa,stopRecording:()=>io,stopShareScreen:()=>Ka,stoppedRecording:()=>Vo,streamSuccessAudio:()=>Ea,streamSuccessAudioSwitch:()=>Ha,streamSuccessScreen:()=>Wa,streamSuccessVideo:()=>$a,styleOptionsToCSS:()=>ki,switchAudio:()=>K,switchUserAudio:()=>Jn,switchUserVideo:()=>Kn,switchUserVideoAlt:()=>Yn,switchVideo:()=>J,switchVideoAlt:()=>fr,timeLeftRecording:()=>Lo,trigger:()=>fn,updateConsumingDomains:()=>Ao,updateMediaSettings:()=>bo,updateMicLevel:()=>R,updateMiniCardsGrid:()=>_a,updateParticipantAudioDecibels:()=>qn,updateRecording:()=>so,updateRoomParametersClient:()=>Fa,updatedCoHost:()=>go,useSidebarState:()=>Oi,userWaiting:()=>co,vParams:()=>A,validateAlphanumeric:()=>h});let g=!1;"undefined"!=typeof window&&function(){if(g||"undefined"==typeof document)return;const e="mediasfu-critical-styles";if(document.getElementById(e))return void(g=!0);const t=document.createElement("style");t.id=e,t.textContent="\n/* MediaSFU Critical Styles - Auto-injected */\n\n/* Main container - full viewport */\n.mediasfu-main-container {\n  position: relative;\n  overflow: hidden;\n}\n\n/* Sub-aspect container - fixed at bottom for control buttons */\n.mediasfu-sub-aspect {\n  position: absolute !important;\n  bottom: 0 !important;\n  left: 0 !important;\n  width: 100% !important;\n  margin: 0 !important;\n  z-index: 10;\n}\n\n.mediasfu-sub-aspect--visible {\n  display: flex !important;\n}\n\n.mediasfu-sub-aspect--hidden {\n  display: none !important;\n}\n\n/* Control buttons container */\n.mediasfu-container {\n  display: flex;\n  width: 100%;\n  flex-direction: row;\n  margin-top: 0px;\n}\n\n.mediasfu-container .buttonContainer {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 8px;\n  border-radius: 5px;\n  margin-right: 4px;\n  font-size: medium;\n  border: none;\n}\n\n.mediasfu-container .buttonContainer:hover {\n  cursor: pointer;\n}\n\n.mediasfu-container .verticalButton {\n  flex-direction: column;\n}\n\n.mediasfu-container .buttonText {\n  font-size: 12px;\n  margin-top: 5px;\n}\n\n.mediasfu-customButtonsContainer {\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: left;\n}\n\n.mediasfu-customButtonsContainer .customButton {\n  width: 100%;\n  margin: 10px 0;\n  padding: 10px;\n  border-radius: 5px;\n  background-color: transparent;\n  align-items: left;\n  justify-content: left;\n  border: none;\n}\n\n.mediasfu-customButtonsContainer .buttonContent {\n  display: flex;\n  align-items: left;\n  justify-content: left;\n}\n\n.mediasfu-customButtonsContainer .customButtonIcon {\n  font-size: 20px;\n  color: #000000;\n  margin-right: 4px;\n}\n\n.mediasfu-customButtonsContainer .customButtonText {\n  color: #000000;\n}\n",document.head.appendChild(t),g=!0}();const h=async({str:e})=>{let t,r,a;for(r=0,a=e.length;r<a;r++)if(t=e.charCodeAt(r),!(t>47&&t<58||t>64&&t<91||t>96&&t<123))return!1;return!0};async function f({socket:e,roomName:t,islevel:r,member:a,sec:n,apiUserName:o}){return new Promise((s,i)=>{if(n&&t&&r&&o&&a){try{h({str:t}),h({str:o}),h({str:a})}catch{return void i({success:!1,rtpCapabilities:null,reason:"Invalid roomName or apiUserName or member"})}t.startsWith("s")||t.startsWith("p")||t.startsWith("d")?64===n.length&&t.length>=8&&1===r.length&&o.length>=6&&("0"==r||"1"==r||"2"==r)?e.emit("joinConRoom",{roomName:t,islevel:r,member:a,sec:n,apiUserName:o},async e=>{try{if(null==e.rtpCapabilities){if(e.banned)throw new Error("User is banned.");if(e.suspended)throw new Error("User is suspended.");if(e.noAdmin)throw new Error("Host has not joined the room yet.");s(e)}else s(e)}catch(e){console.log("Error joining room:",e),i(e)}}):i({success:!1,rtpCapabilities:null,reason:"Invalid roomName or islevel or apiUserName or secret"}):i({success:!1,rtpCapabilities:null,reason:"Invalid roomName, must start with s or p or d"})}else i({success:!1,rtpCapabilities:null,reason:"Missing required parameters"})})}const b=async({remote_sock:e,apiToken:t,apiUserName:r,parameters:a})=>{const{roomName:n,islevel:o,member:s,device:i,updateDevice:c,receiveAllPipedTransports:d,createDeviceClient:l}=a;try{const u=await f({socket:e,roomName:n,islevel:o,member:s,sec:t,apiUserName:r});if(u&&u.success){if(!i&&u.rtpCapabilities){const e=await l({rtpCapabilities:u.rtpCapabilities});e&&c(e)}await d({nsock:e,parameters:a}),setTimeout(async()=>{try{await d({nsock:e,parameters:a})}catch(e){console.log("[joinConsumeRoom] Retry receiveAllPipedTransports failed:",e)}},3e4)}return u}catch(e){throw console.error("Error in joinConsumeRoom:",e),new Error("Failed to join the consumption room or set up necessary components.")}},y=async({remoteProducerId:e,islevel:t,nsock:r,parameters:a})=>{try{let{device:n,consumingTransports:o,lock_screen:s,updateConsumingTransports:i,connectRecvTransport:c,reorderStreams:d}=a;const l=a.getUpdatedAllParams();if(n=l.device,o=l.consumingTransports,o.includes(e))return o;o.push(e),i(o),r.emit("createWebRtcTransport",{consumer:!0,islevel:t},async({params:t})=>{if(!t.error)try{const o=n.createRecvTransport({...t});o.on("connect",async({dtlsParameters:e},a,n)=>{try{r.emit("transport-recv-connect",{dtlsParameters:e,serverConsumerTransportId:t.id}),a()}catch(e){n(e)}}),o.on("connectionstatechange",async e=>{switch(e){case"connecting":case"connected":default:break;case"failed":o.close(),s?await d({add:!0,parameters:a}):await d({add:!1,parameters:a})}}),await c({consumerTransport:o,remoteProducerId:e,serverConsumerTransportId:t.id,nsock:r,parameters:a})}catch(e){return void console.log(e,"createRecvTransport error")}})}catch(e){return void console.log(e,"signalNewConsumerTransport error")}},x=async({producerId:e,islevel:t,nsock:r,parameters:a,isTranslation:n,translationMeta:o})=>{if(n&&o){const t=a.getUpdatedAllParams?a.getUpdatedAllParams():a,{startConsumingTranslation:n,translationSubscriptions:s,speakerTranslationStates:i,listenerTranslationOverrides:c,listenerTranslationPreferences:d}=t,l=o.language?.toLowerCase(),u=!0===o.isSpeakerControlled,p=i?.get(o.speakerId),m=p?.enabled&&p?.outputLanguage?.toLowerCase()===l,g=u&&p?.enabled&&p?.outputLanguage?.toLowerCase()!==l,h=`${o.speakerId}_${l}`,f=s?.has(h)||s?.has(o.speakerId);let b=!1,y=!1,x=!1;const v=d?.perSpeaker?.get(o.speakerId),S=d?.globalLanguage,R=c?.get(o.speakerId);v?v.wantOriginal?b=!0:v.language&&(v.language===l?y=!0:b=!0):S?S===l?x=!0:b=!0:R&&(R.wantOriginal?b=!0:R.preferredLanguage&&(R.preferredLanguage.toLowerCase()===l?y=!0:b=!0));const w=u&&(!p?.enabled||p?.outputLanguage?.toLowerCase()===l);if(!b&&!g&&(v||S||R||u||m||f)&&(y||x||w||m||f)&&n)try{await n(e,o.speakerId,o.language,o.originalProducerId,r)}catch(e){console.error("[newPipeProducer][Translation] startConsumingTranslation error:",e)}return}const{shareScreenStarted:s,shared:i,landScaped:c,showAlert:d,isWideScreen:l,updateFirst_round:u,updateLandScaped:p}=a;await y({remoteProducerId:e,islevel:t,nsock:r,parameters:a});let m=!1;(s||i)&&(l||c||(d&&d({message:"Please rotate your device to landscape mode for better experience",type:"success",duration:3e3}),p(!0)),m=!0,u(m))},v=async({remoteProducerId:e,parameters:t})=>{let{consumerTransports:r,closeAndResize:a,screenId:n,updateConsumerTransports:o}=t;const s=t.activeTranslationProducerIds,i=s?.has?.(e);if(i){s?.delete?.(e);const r=t.removeTranslationStream;r&&r(e)}const c=r.find(t=>t.producerId===e);if(!c)return;let d=c.consumer.kind;c.producerId===n&&(d="screenshare");try{await c.consumerTransport.close()}catch(e){console.error("Error closing consumer transport:",e)}try{c.consumer.close()}catch(e){console.error("Error closing consumer:",e)}r=r.filter(t=>t.producerId!==e),o(r),await a({producerId:e,kind:d,parameters:t})},S=async({socket:e,newProducerMethod:t=x,closedProducerMethod:r=v,parameters:a})=>{try{e.on("new-producer",async({producerId:r,islevel:n,isTranslation:o,translationMeta:s})=>{t&&await t({producerId:r,islevel:n,nsock:e,parameters:a,isTranslation:o,translationMeta:s})}),e.on("producer-closed",async({remoteProducerId:e})=>{r&&await r({remoteProducerId:e,parameters:a})}),await a.receiveAllPipedTransports({nsock:e,community:!0,parameters:a})}catch(e){console.log("ConnectLocalIps error",e)}},R=async(e,t)=>{try{setInterval(()=>{const r=e.rtpSender;r?.getStats().then(e=>{e.forEach(e=>{if("media-source"===e.type&&"audio"===e.kind&&void 0!==e.audioLevel){const r=127.5+127.5*e.audioLevel;t(r)}})})},1e3)}catch{}},w=async({parameters:e,audioParams:t,targetOption:r="all"})=>{try{let{audioProducer:a,producerTransport:n,updateAudioProducer:o,updateProducerTransport:s}=e;if("all"!==r&&"remote"!==r||(a=await n.produce(t),R(a,e.updateAudioLevel),o(a),s(n)),"all"===r||"local"===r)try{await(async({parameters:e,audioParams:t})=>{try{let{localAudioProducer:r,localProducerTransport:a,updateLocalAudioProducer:n,updateLocalProducerTransport:o}=e;a&&(r=await a.produce(t),n?.(r),o?.(a))}catch(e){throw console.error("Error connecting local audio transport:",e),e}})({parameters:e,audioParams:t}),"local"===r&&e.updateAudioLevel&&(e.localAudioProducer||(e=e.getUpdatedAllParams()),R(e.localAudioProducer,e.updateAudioLevel))}catch(e){console.error("Local audio transport connection failed:",e)}}catch(e){throw console.error("audio transport connection failed:",e),new Error("Failed to connect to audio transport.")}};async function k({participantId:e,participantName:t,type:r,socket:a,coHostResponsibility:n,participants:o,member:s,islevel:i,showAlert:c,coHost:d,roomName:l}){try{let u=!1;try{u=n.find(e=>"media"===e.name)?.value??!1}catch(e){console.log("Error retrieving media control value",e)}const p=o.find(e=>e.name===t);if(!p)return void console.log("Participant not found");"2"===i||d===s&&!0===u?(!p.muted&&"2"!==p.islevel&&"audio"===r||"2"!==p.islevel&&"video"===r&&p.videoOn)&&a.emit("controlMedia",{participantId:e,participantName:t,type:r,roomName:l}):c&&c({message:"You are not allowed to control media for other participants.",type:"danger",duration:3e3})}catch(e){console.log("controlMedia error",e)}}async function C({page:e,parameters:t,breakRoom:r=-1,inBreakRoom:a=!1}){try{let{paginatedStreams:n,currentUserPage:o,updateMainWindow:s,updateCurrentUserPage:i,updateUpdateMainWindow:c,dispStreams:d}=t;o=e="string"==typeof e?parseInt(e):e,i(o),s=!0,c(s),await d({lStreams:n[e],ind:e,parameters:t,breakRoom:r,inBreakRoom:a})}catch(e){e instanceof Error?console.log("Error generating page content:",e.message):console.log("Error generating page content:",e)}}const j=async({nsock:e,islevel:t,parameters:r})=>{try{const{member:a,signalNewConsumerTransport:n}=r;await e.emit("getProducersPipedAlt",{islevel:t,member:a},async a=>{a.length>0&&await Promise.all(a.map(a=>n({remoteProducerId:a,islevel:t,nsock:e,parameters:r})))})}catch(e){console.log("Error getting piped producers:",e.message)}},P={encodings:[{rid:"r0",maxBitrate:64e3}]},M={encodings:[{rid:"r8",maxBitrate:24e4,scalabilityMode:"L1T3",scaleResolutionDownBy:4},{rid:"r9",maxBitrate:48e4,scalabilityMode:"L1T3",scaleResolutionDownBy:2},{rid:"r10",maxBitrate:96e4,scalabilityMode:"L1T3"}],codecOptions:{videoGoogleStartBitrate:384}},I={encodings:[{rid:"r7",maxBitrate:3e6}],codecOptions:{videoGoogleStartBitrate:1e3}},A={encodings:[{rid:"r3",maxBitrate:2e5,scalabilityMode:"L1T3",scaleResolutionDownBy:4},{rid:"r4",maxBitrate:4e5,scalabilityMode:"L1T3",scaleResolutionDownBy:2},{rid:"r5",maxBitrate:8e5,scalabilityMode:"L1T3"}],codecOptions:{videoGoogleStartBitrate:320}},T=({position:e})=>{switch(e){case"center":return{justifyContent:"center",alignItems:"center"};case"topLeft":return{justifyContent:"flex-start",alignItems:"flex-start"};case"topRight":return{justifyContent:"flex-start",alignItems:"flex-end"};case"bottomLeft":return{justifyContent:"flex-end",alignItems:"flex-start"};default:return{justifyContent:"flex-end",alignItems:"flex-end"}}},F=({position:e})=>{switch(e){case"topLeft":return{top:0,left:0};case"topRight":return{top:0,right:0};case"bottomLeft":return{bottom:0,left:0};case"bottomRight":return{bottom:0,right:0};default:return{}}},D=async({roomName:e,selectedParticipant:t,coHost:r,coHostResponsibility:a,updateIsCoHostModalVisible:n,updateCoHostResponsibility:o,updateCoHost:s,socket:i})=>{let c=r;("No coHost"!==r||t&&"Select a participant"!==t)&&(t&&"Select a participant"!==t&&(c=t,s(c)),o(a),i.emit("updateCoHost",{roomName:e,coHost:c,coHostResponsibility:a})),n(!1)},N=async({parameters:e})=>{let{showAlert:t,meetingDisplayType:r,autoWave:a,forceFullDisplay:n,meetingVideoOptimized:o,islevel:s,recordStarted:i,recordResumed:c,recordStopped:d,recordPaused:l,recordingDisplayType:u,recordingVideoOptimized:p,prevForceFullDisplay:m,prevMeetingDisplayType:g,updateMeetingDisplayType:h,updateAutoWave:f,updateForceFullDisplay:b,updateMeetingVideoOptimized:y,updatePrevForceFullDisplay:x,updatePrevMeetingDisplayType:v,updateIsDisplaySettingsModalVisible:S,updateFirstAll:R,updateUpdateMainWindow:w,breakOutRoomStarted:k,breakOutRoomEnded:C,onScreenChanges:j}=e;if(f(a),b(n),"2"===s&&(i||c)&&!d&&!l){if("video"===u&&"video"===r&&o&&!p)return t?.({message:"Meeting display type can be either video, media, or all when recording display type is non-optimized video.",type:"danger",duration:3e3}),r=u,h(r),o=p,void y(o);if("media"===u&&"video"===r)return t?.({message:"Meeting display type can be either media or all when recording display type is media.",type:"danger",duration:3e3}),r=u,void h(r);if("all"===u&&("video"===r||"media"===r))return t?.({message:"Meeting display type can be only all when recording display type is all.",type:"danger",duration:3e3}),r=u,void h(r)}if(h(r),y(o),S(!1),g!==r||m!==n){if(k&&!C&&"all"!==r)return t?.({message:"Breakout room is active. Display type can only be all.",type:"danger"}),r=g,void h(g);R("all"!==r),w(!0),await j({changed:!0,parameters:{...e,meetingDisplayType:r,forceFullDisplay:n}}),x(n),v(r)}},L=async({socket:e,localSocket:t,member:r,roomName:a,ban:n=!1})=>{e.emit("disconnectUser",{member:r,roomName:a,ban:n}),t&&t.id&&t.emit("disconnectUser",{member:r,roomName:a,ban:n})},V=async({member:e,islevel:t,showAlert:r,coHostResponsibility:a,coHost:n,chatSetting:o,message:s,roomName:i,messagesLength:c,receivers:d,group:l,sender:u,socket:p})=>{let m=!1;if(c>100&&i.startsWith("d")||c>500&&i.startsWith("s")||c>1e5&&i.startsWith("p"))return void r?.({message:"You have reached the maximum number of messages allowed.",type:"danger",duration:3e3});if(!s||!d||!e&&!u)return void r?.({message:"Message is not valid.",type:"danger",duration:3e3});const g={sender:u||e,receivers:d,message:s,timestamp:(new Date).toLocaleTimeString(),group:null!=l&&l};try{m=a.find(e=>"chat"===e.name)?.value??!1}catch(e){console.error(e)}if("2"===t||n===e&&!0===m);else if(!o)return void r?.({message:"You are not allowed to send a message in this event room",type:"danger",duration:3e3});p.emit("sendMessage",{messageObject:g,roomName:i})},B=({coHostResponsibility:e,participant:t,member:r,islevel:a,showAlert:n,coHost:o,updateIsMessagesModalVisible:s,updateDirectMessageDetails:i,updateStartDirectMessage:c})=>{let d=!1;try{d=e.find(e=>"chat"===e.name)?.value??!1}catch(e){console.error(e)}"2"===a||o===r&&!0===d?"2"!==t.islevel?(i(t),c(!0),s(!0)):n?.({message:"You cannot direct message the host",type:"danger",duration:3e3}):n?.({message:"You are not allowed to send this message",type:"danger",duration:3e3})},$=async({socket:e,coHostResponsibility:t,participant:r,member:a,islevel:n,showAlert:o,coHost:s,roomName:i})=>{let c=!1;try{c=t.find(e=>"media"===e.name)?.value??!1}catch(e){console.error(e)}if("2"===n||s===a&&c){if(!r.muted&&"2"!==r.islevel){const t=r.id;e.emit("controlMedia",{participantId:t,participantName:r.name,type:"all",roomName:i})}}else o?.({message:"You are not allowed to mute other participants",type:"danger",duration:3e3})},E=async({coHostResponsibility:e,participant:t,member:r,islevel:a,showAlert:n,coHost:o,participants:s,socket:i,roomName:c,updateParticipants:d})=>{let l=!1;try{l=e.find(e=>"participants"===e.name)?.value??!1}catch{l=!1}if("2"===a||o===r&&!0===l){if("2"!==t.islevel){const e=t.id;i.emit("disconnectUserInitiate",{member:t.name,roomName:c,id:e});const r=s.findIndex(e=>e.name===t.name);-1!==r&&s.splice(r,1),d(s)}}else n?.({message:"You are not allowed to remove other participants",type:"danger",duration:3e3})},W=async({recordingMediaOptions:e,recordingVideoPausesLimit:t,recordingAudioPausesLimit:r,pauseRecordCount:a,showAlert:n})=>a<("video"===e?t:r)||(n?.({message:"You have reached the limit of pauses - you can choose to stop recording.",type:"danger",duration:3e3}),!1),H=async({recordingMediaOptions:e,recordingVideoPausesLimit:t,recordingAudioPausesLimit:r,pauseRecordCount:a})=>a<=("video"===e?t:r);function O({stop:e=!1,isTimerRunning:t,canPauseResume:r,showAlert:a}){if(t&&r)return!0;{const t=e?"Can only stop after 15 seconds of starting or pausing or resuming recording":"Can only pause or resume after 15 seconds of starting or pausing or resuming recording";return a?.({message:t,type:"danger"}),!1}}function z({recordElapsedTime:e,recordStartTime:t,updateRecordElapsedTime:r,updateRecordingProgressTime:a}){function n(e){return e.toString().padStart(2,"0")}const o=(new Date).getTime();r(e=Math.floor((o-t)/1e3));const s=Math.floor(e/3600),i=Math.floor(e%3600/60),c=e%60;a(n(s)+":"+n(i)+":"+n(c))}async function U({parameters:e}){let{getUpdatedAllParams:t}=e;e=t();let{isTimerRunning:r,canPauseResume:a,recordElapsedTime:n,recordStartTime:o,recordTimerInterval:s,showAlert:i,updateRecordStartTime:c,updateRecordTimerInterval:d,updateIsTimerRunning:l,updateCanPauseResume:u}=e;return!r&&a?(o=(new Date).getTime()-1e3*n,c(o),s=setInterval(()=>{z({recordElapsedTime:n,recordStartTime:o,updateRecordElapsedTime:e.updateRecordElapsedTime,updateRecordingProgressTime:e.updateRecordingProgressTime}),((e=t()).recordPaused||e.recordStopped||""===e.roomName||null===e.roomName)&&(clearInterval(s),d(null),r=!1,l(r),a=!1,u(a))},1e3),d(s),r=!0,l(r),a=!1,u(a),!0):(i?.({type:"danger",message:"Can only pause or resume after 15 seconds of starting or pausing or resuming recording"}),!1)}async function q({parameters:e}){let{getUpdatedAllParams:t}=e;e=t();let{recordStartTime:r,recordTimerInterval:a,isTimerRunning:n,canPauseResume:o,recordChangeSeconds:s,updateRecordStartTime:i,updateRecordTimerInterval:c,updateIsTimerRunning:d,updateCanPauseResume:l}=e;n||(r=(new Date).getTime(),i(r),a=setInterval(()=>{z({recordElapsedTime:e.recordElapsedTime,recordStartTime:r,updateRecordElapsedTime:e.updateRecordElapsedTime,updateRecordingProgressTime:e.updateRecordingProgressTime}),((e=t()).recordPaused||e.recordStopped||""==e.roomName||null==e.roomName)&&(clearInterval(a),c(null),n=!1,d(n),o=!1,l(o))},1e3),c(a),n=!0,d(n),o=!1,l(o),setTimeout(function(){o=!0,l(o)},s))}const _=async({socket:e,request:t,updateRequestList:r,requestList:a,action:n,roomName:o})=>{r(a.filter(e=>!(e.id===t.id&&e.icon===t.icon&&e.name===t.name)));const s={id:t.id,name:t.name,type:t.icon,action:n};e.emit("updateUserofRequestStatus",{requestResponse:s,roomName:o})},G=async({roomName:e,audioSet:t,videoSet:r,screenshareSet:a,chatSet:n,socket:o,updateAudioSetting:s,updateVideoSetting:i,updateScreenshareSetting:c,updateChatSetting:d,updateIsSettingsModalVisible:l})=>{t&&s(t),r&&i(r),a&&c(a),n&&d(n);const u=[t,r,a,n];o.emit("updateSettingsForRequests",{settings:u,roomName:e}),l(!1)},Y=async({isMessagesModalVisible:e,updateIsMessagesModalVisible:t,chatSetting:r,islevel:a,showAlert:n})=>{e?t(!1):"allow"!==r&&"2"!==a?(t(!1),n?.({message:"Chat is disabled for this event.",type:"danger",duration:3e3})):t(!0)},K=async({audioPreference:e,parameters:t})=>{let{defAudioID:r,userDefaultAudioInputDevice:a,prevAudioInputDevice:n,updateUserDefaultAudioInputDevice:o,updatePrevAudioInputDevice:s,switchUserAudio:i}=t;e!==r&&(n=a,s(n),a=e,o(a),r&&await i({audioPreference:e,parameters:t}))},J=async({videoPreference:e,parameters:t})=>{let{recordStarted:r,recordResumed:a,recordStopped:n,recordPaused:o,recordingMediaOptions:s,videoAlreadyOn:i,userDefaultVideoInputDevice:c,defVideoID:d,allowed:l,updateDefVideoID:u,updatePrevVideoInputDevice:p,updateUserDefaultVideoInputDevice:m,updateIsMediaSettingsModalVisible:g,showAlert:h,switchUserVideo:f}=t,b=!1;if(!r&&!a||n||o||"video"===s&&(b=!0),l){if(b){if(i)return void h?.({message:"Please turn off your video before switching.",type:"danger",duration:3e3})}else if(!i)return void h?.({message:"Please turn on your video before switching.",type:"danger",duration:3e3});d||(d=c??"default",u(d)),e!==d&&(p(c),c=e,m(c),d&&(g(!1),await f({videoPreference:e,checkoff:b,parameters:t})))}else h?.({message:"Allow access to your camera by starting it for the first time.",type:"danger",duration:3e3})},X=async({participantId:e,participantName:t,updateWaitingList:r,waitingList:a,type:n,roomName:o,socket:s})=>{r(a.filter(e=>e.name!==t));const i="true"===n||!0===n?"true":"false";s.emit("allowUserIn",{participantId:e,participantName:t,type:i,roomName:o})};async function Z({socket:e,roomName:t,islevel:r,member:a,sec:n,apiUserName:o}){return new Promise((s,i)=>{if(n&&t&&r&&o&&a){try{h({str:t}),h({str:o}),h({str:a})}catch{return void i({success:!1,rtpCapabilities:null,reason:"Invalid roomName or apiUserName or member"})}t.startsWith("s")||t.startsWith("p")||t.startsWith("d")?64===n.length&&t.length>=8&&1===r.length&&o.length>=6&&("0"===r||"1"===r||"2"===r)?e.emit("joinRoom",{roomName:t,islevel:r,member:a,sec:n,apiUserName:o},async e=>{try{if(null===e.rtpCapabilities){if(e.banned)throw new Error("User is banned.");if(e.suspended)throw new Error("User is suspended.");if(e.noAdmin)throw new Error("Host has not joined the room yet.");s(e)}else s(e)}catch(e){console.log("Error joining room:",e),i(e)}}):i({success:!1,rtpCapabilities:null,reason:"Invalid roomName or islevel or apiUserName or secret"}):i({success:!1,rtpCapabilities:null,reason:"Invalid roomName, must start with s or p or d"})}else i({success:!1,rtpCapabilities:null,reason:"Missing required parameters"})})}const Q=async({payload:e,apiUserName:t,apiKey:r,localLink:a=""})=>{try{if(!t||!r||"yourAPIUSERNAME"===t||"yourAPIKEY"===r||64!==r.length||t.length<6)return{data:{error:"Invalid credentials"},success:!1};let n="https://mediasfu.com/v1/rooms/";a&&""!==a.trim()&&!a.includes("mediasfu.com")&&(n=(a=a.replace(/\/$/,""))+"/joinRoom");const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}:${r}`},body:JSON.stringify(e)});if(!o.ok)throw new Error(`HTTP error! Status: ${o.status}`);return{data:await o.json(),success:!0}}catch(e){return{data:{error:`Unable to join room, ${e.reason?e.reason:"unknown error"}`},success:!1}}};var ee=p(985),te=p.n(ee),re=p(67),ae=p.n(re);const ne=new(ae()),oe=async({apiUserName:e,apiToken:t,link:r,apiKey:a="",userName:n,parameters:o,validate:s=!0})=>{let i=parseInt(ne.get("unsuccessfulAttempts"))||0,c=parseInt(ne.get("lastRequestTimestamp"))||0;if(i>=10&&Date.now()-c<108e5)o.showAlert?.({message:"Too many unsuccessful attempts. Please try again later.",type:"danger",duration:3e3});else{i=0,ne.set("unsuccessfulAttempts",i.toString()),ne.set("lastRequestTimestamp",Date.now().toString());try{o.updateIsLoadingModalVisible(!0);const c=await o.connectSocket({apiUserName:e,apiKey:a,apiToken:t,link:r}),d=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timed out")),1e4)),l=await Promise.race([c,d]);l&&l instanceof ee.Socket&&l.id?(i=0,ne.set("unsuccessfulAttempts",i.toString()),ne.set("lastRequestTimestamp",Date.now().toString()),s?o.updateSocket(l):o.updateLocalSocket?.(l),o.updateApiUserName(e),o.updateApiToken(t),o.updateLink(r),o.updateRoomName(e),o.updateMember(n),s&&o.updateValidated(!0)):(i+=1,ne.set("unsuccessfulAttempts",i.toString()),o.updateIsLoadingModalVisible(!1),o.showAlert?.({message:"Invalid credentials.",type:"danger",duration:3e3}))}catch{o.showAlert?.({message:"Unable to connect. Check your credentials and try again.",type:"danger",duration:3e3}),i+=1,ne.set("unsuccessfulAttempts",i.toString()),o.updateIsLoadingModalVisible(!1)}}};async function se({data:e,member:t,roomName:r,islevel:a,socket:n,parameters:o,joinMediaSFURoom:s=Q,localLink:i=""}){if(e.mediasfuURL&&""!==e.mediasfuURL&&e.mediasfuURL.length>10){let a,n;try{let t=["/meet/","/chat/","/broadcast/"].find(t=>e.mediasfuURL.includes(t))||"/meet/";const r=e.mediasfuURL.split(t);a=r[0],n=r[1].split("/")[1]}catch{return void(a=e.mediasfuURL)}return void await oe({apiUserName:r,apiToken:n,link:a,apiKey:"",userName:t,parameters:o,validate:!1})}if((!e.mediasfuURL||e.mediasfuURL.length<10)&&"2"!==a&&e.allowRecord&&(!0===e.allowRecord||"true"===e.allowRecord)&&e.apiKey&&64===e.apiKey.length&&e.apiUserName&&e.apiUserName.length>5&&(r.startsWith("s")||r.startsWith("p"))){const a={action:"join",meetingID:r,userName:t},c=await s({payload:a,apiKey:e.apiKey,apiUserName:e.apiUserName,localLink:i});if(c.success&&c.data&&"roomName"in c.data){try{n.emit("updateMediasfuURL",{eventID:r,mediasfuURL:c.data.publicURL},async()=>{})}catch{}await oe({apiUserName:c.data.roomName,apiToken:c.data.secret,link:c.data.link,userName:t,parameters:o,validate:!1}),o.updateApiToken(c.data.secret)}return}}async function ie({socket:e,roomName:t,islevel:r,member:a,sec:n,apiUserName:o,parameters:s,checkConnect:i=!1,joinMediaSFURoom:c=Q,localLink:d=""}){return new Promise((l,u)=>{if(n&&t&&r&&o&&a){try{h({str:t}),h({str:o}),h({str:a})}catch{return void u({success:!1,rtpCapabilities:null,reason:"Invalid roomName or apiUserName or member"})}t.startsWith("s")||t.startsWith("p")||t.startsWith("m")||t.startsWith("d")?32===n.length&&t.length>=8&&1===r.length&&o.length>=6&&("0"===r||"1"===r||"2"===r)?e.emit("joinRoom",{roomName:t,islevel:r,member:a,sec:n,apiUserName:o},async n=>{try{if(null===n.rtpCapabilities){if(n.isBanned)throw new Error("User is banned.");if(n.hostNotJoined)throw new Error("Host has not joined the room yet.");l(n)}else{if(i)await se({data:n,member:a,roomName:t,islevel:r,socket:e,parameters:s,joinMediaSFURoom:c,localLink:d});else if(n.mediasfuURL&&""!==n.mediasfuURL&&n.mediasfuURL.length>10){let e,t=["/meet/","/chat/","/broadcast/"].find(e=>n.mediasfuURL.includes(e))||"/meet/";e=n.mediasfuURL.split(t)[1].split("/")[1],s.updateApiToken(e)}l(n)}}catch(e){console.log("Error joining room:",e),u(e)}}):u({success:!1,rtpCapabilities:null,reason:"Invalid roomName or islevel or apiUserName or secret"}):u({success:!1,rtpCapabilities:null,reason:"Invalid roomName, must start with s or p or m or d"})}else u({success:!1,rtpCapabilities:null,reason:"Missing required parameters"})})}var ce=p(310),de=p(156),le=p.n(de),ue=p(575),pe=p(63);const me={roomName:"",member:"",adminPasscode:"",islevel:"1",coHost:"No coHost",coHostResponsibility:[{name:"participants",value:!1,dedicated:!1},{name:"media",value:!1,dedicated:!1},{name:"waiting",value:!1,dedicated:!1},{name:"chat",value:!1,dedicated:!1}],youAreCoHost:!1,youAreHost:!1,confirmedToRecord:!1,meetingDisplayType:"media",meetingVideoOptimized:!1,eventType:"webinar",participants:[],filteredParticipants:[],participantsCounter:0,participantsFilter:"",validated:!1,localUIMode:!1,socket:{},localSocket:void 0,roomData:null,device:null,apiKey:"",apiUserName:"",apiToken:"",link:"",consume_sockets:[],rtpCapabilities:null,roomRecvIPs:[],meetingRoomParams:null,itemPageLimit:4,audioOnlyRoom:!1,addForBasic:!1,screenPageLimit:4,shareScreenStarted:!1,shared:!1,targetOrientation:"landscape",targetResolution:"sd",targetResolutionHost:"sd",vidCons:{width:640,height:360},frameRate:10,hParams:{},vParams:{},screenParams:{},aParams:{},recordingAudioPausesLimit:0,recordingAudioPausesCount:0,recordingAudioSupport:!1,recordingAudioPeopleLimit:0,recordingAudioParticipantsTimeLimit:0,recordingVideoPausesCount:0,recordingVideoPausesLimit:0,recordingVideoSupport:!1,recordingVideoPeopleLimit:0,recordingVideoParticipantsTimeLimit:0,recordingAllParticipantsSupport:!1,recordingVideoParticipantsSupport:!1,recordingAllParticipantsFullRoomSupport:!1,recordingVideoParticipantsFullRoomSupport:!1,recordingPreferredOrientation:"landscape",recordingSupportForOtherOrientation:!1,recordingMultiFormatsSupport:!1,userRecordingParams:{mainSpecs:{mediaOptions:"video",audioOptions:"all",videoOptions:"all",videoType:"fullDisplay",videoOptimized:!1,recordingDisplayType:"media",addHLS:!1},dispSpecs:{nameTags:!0,backgroundColor:"#000000",nameTagsColor:"#ffffff",orientationVideo:"portrait"}},canRecord:!1,startReport:!1,endReport:!1,recordTimerInterval:null,recordStartTime:0,recordElapsedTime:0,isTimerRunning:!1,canPauseResume:!1,recordChangeSeconds:15e3,pauseLimit:0,pauseRecordCount:0,canLaunchRecord:!0,stopLaunchRecord:!1,participantsAll:[],firstAll:!1,updateMainWindow:!1,first_round:!1,landScaped:!1,lock_screen:!1,screenId:"",allVideoStreams:[],newLimitedStreams:[],newLimitedStreamsIDs:[],activeSounds:[],screenShareIDStream:"",screenShareNameStream:"",adminIDStream:"",adminNameStream:"",youYouStream:[],youYouStreamIDs:[],localStream:null,recordStarted:!1,recordResumed:!1,recordPaused:!1,recordStopped:!1,adminRestrictSetting:!1,videoRequestState:null,videoRequestTime:0,videoAction:!1,localStreamVideo:null,userDefaultVideoInputDevice:"",currentFacingMode:"user",prevFacingMode:"user",defVideoID:"",allowed:!1,dispActiveNames:[],activeNames:[],prevActiveNames:[],p_activeNames:[],p_dispActiveNames:[],membersReceived:!1,deferScreenReceived:!1,hostFirstSwitch:!1,micAction:!1,screenAction:!1,chatAction:!1,audioRequestState:null,screenRequestState:null,chatRequestState:null,audioRequestTime:0,screenRequestTime:0,chatRequestTime:0,updateRequestIntervalSeconds:240,oldSoundIds:[],hostLabel:"Host",mainScreenFilled:!1,localStreamScreen:null,screenAlreadyOn:!1,chatAlreadyOn:!1,redirectURL:"",oldAllStreams:[],adminVidID:"",streamNames:[],non_alVideoStreams:[],sortAudioLoudness:!1,audioDecibels:[],mixed_alVideoStreams:[],non_alVideoStreams_muted:[],paginatedStreams:[],localStreamAudio:null,defAudioID:"",userDefaultAudioInputDevice:"",userDefaultAudioOutputDevice:"",prevAudioInputDevice:"",prevVideoInputDevice:"",audioPaused:!1,mainScreenPerson:"",adminOnMainScreen:!1,screenStates:[{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}],prevScreenStates:[{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}],updateDateState:null,lastUpdate:null,nForReadjustRecord:0,fixedPageLimit:4,removeAltGrid:!1,nForReadjust:0,reorderInterval:3e4,fastReorderInterval:1e4,lastReorderTime:0,audStreamNames:[],currentUserPage:0,mainHeightWidth:0,prevMainHeightWidth:0,prevDoPaginate:!1,doPaginate:!1,shareEnded:!1,lStreams:[],chatRefStreams:[],controlHeight:0,isWideScreen:!1,isMediumScreen:!1,isSmallScreen:!1,addGrid:!1,addAltGrid:!1,gridRows:0,gridCols:0,altGridRows:0,altGridCols:0,numberPages:0,currentStreams:[],showMiniView:!1,nStream:null,defer_receive:!1,allAudioStreams:[],remoteScreenStream:[],screenProducer:null,localScreenProducer:null,gotAllVids:!1,paginationHeightWidth:40,paginationDirection:"horizontal",gridSizes:{gridWidth:0,gridHeight:0,altGridWidth:0,altGridHeight:0},screenForceFullDisplay:!1,mainGridStream:[],otherGridStreams:[[],[]],audioOnlyStreams:[],videoInputs:[],audioInputs:[],meetingProgressTime:"00:00:00",meetingElapsedTime:0,ref_participants:[],messages:[],startDirectMessage:!1,directMessageDetails:null,showMessagesBadge:!1,audioSetting:"allow",videoSetting:"allow",screenshareSetting:"allow",chatSetting:"allow",displayOption:"media",autoWave:!0,forceFullDisplay:!0,prevForceFullDisplay:!1,prevMeetingDisplayType:"video",waitingRoomFilter:"",waitingRoomList:[],waitingRoomCounter:0,filteredWaitingRoomList:[],requestFilter:"",requestList:[],requestCounter:0,filteredRequestList:[],totalReqWait:0,alertVisible:!1,alertMessage:"",alertType:"success",alertDuration:3e3,progressTimerVisible:!0,progressTimerValue:0,isMenuModalVisible:!1,isRecordingModalVisible:!1,isSettingsModalVisible:!1,isRequestsModalVisible:!1,isWaitingModalVisible:!1,isCoHostModalVisible:!1,isMediaSettingsModalVisible:!1,isDisplaySettingsModalVisible:!1,isParticipantsModalVisible:!1,isMessagesModalVisible:!1,isConfirmExitModalVisible:!1,isConfirmHereModalVisible:!1,isShareEventModalVisible:!1,isLoadingModalVisible:!1,recordingMediaOptions:"video",recordingAudioOptions:"all",recordingVideoOptions:"all",recordingVideoType:"fullDisplay",recordingVideoOptimized:!1,recordingDisplayType:"video",recordingAddHLS:!0,recordingNameTags:!0,recordingBackgroundColor:"#83c0e9",recordingNameTagsColor:"#ffffff",recordingAddText:!1,recordingCustomText:"Add Text",recordingCustomTextPosition:"top",recordingCustomTextColor:"#ffffff",recordingOrientationVideo:"landscape",clearedToResume:!0,clearedToRecord:!0,recordState:"green",showRecordButtons:!1,recordingProgressTime:"00:00:00",audioSwitching:!1,videoSwitching:!1,videoAlreadyOn:!1,audioAlreadyOn:!1,componentSizes:{mainHeight:0,otherHeight:0,mainWidth:0,otherWidth:0},hasCameraPermission:!1,hasAudioPermission:!1,transportCreated:!1,localTransportCreated:!1,transportCreatedVideo:!1,transportCreatedAudio:!1,transportCreatedScreen:!1,producerTransport:null,localProducerTransport:null,videoProducer:null,localVideoProducer:null,params:{},videoParams:{},audioParams:{},audioProducer:null,localAudioProducer:null,consumerTransports:[],consumingTransports:[],polls:[],poll:null,isPollModalVisible:!1,customImage:"",selectedImage:"",segmentVideo:null,selfieSegmentation:null,pauseSegmentation:!1,processedStream:null,keepBackground:!1,backgroundHasChanged:!1,virtualStream:null,mainCanvas:null,prevKeepBackground:!1,appliedBackground:!1,isBackgroundModalVisible:!1,autoClickBackground:!1,breakoutRooms:[],currentRoomIndex:0,canStartBreakout:!1,breakOutRoomStarted:!1,breakOutRoomEnded:!1,hostNewRoom:-1,limitedBreakRoom:[],mainRoomsLength:0,memberRoom:-1,isBreakoutRoomsModalVisible:!1,whiteboardUsers:[],currentWhiteboardIndex:0,canStartWhiteboard:!1,whiteboardStarted:!1,whiteboardEnded:!1,whiteboardLimit:4,isWhiteboardModalVisible:!1,isConfigureWhiteboardModalVisible:!1,shapes:[],useImageBackground:!0,redoStack:[],undoStack:[],canvasStream:null,canvasWhiteboard:null,canvasScreenboard:null,processedScreenStream:null,annotateScreenStream:!1,mainScreenCanvas:null,isScreenboardModalVisible:!1,micActive:!1,videoActive:!1,screenShareActive:!1,endCallActive:!1,participantsActive:!1,menuActive:!1,commentsActive:!1,permissionConfig:null,panelistsFocused:!1,panelistFocusChanged:!1,panelists:[],muteOthersMic:!1,muteOthersCamera:!1},ge=({backgroundColor:e="transparent",children:t,showControls:r=!0,containerWidthFraction:a=1,containerHeightFraction:n=1,defaultFraction:o=.94,updateIsWideScreen:s,updateIsMediumScreen:i,updateIsSmallScreen:c,containerProps:d,renderContent:l,renderContainer:u})=>{const p=()=>"undefined"==typeof window?{width:0,height:0}:{width:window.innerWidth,height:window.innerHeight},m=e=>{const{width:t,height:s}=e,i=r?Math.floor(n*s*o):Math.floor(n*s);return{width:Math.floor(a*t),height:i}},[g,h]=(0,de.useState)(()=>m(p()));(0,de.useEffect)(()=>{const e=()=>{const e=p(),t=m(e),r=t.width,a=t.height;let n=r>=768;const o=r>=576&&r<768,d=r<576;!n&&r>1.5*(a||1)&&(n=!0),s(n),i(o),c(d),h(t)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[r,n,a,o,s,i,c]);const{className:f,style:b,...y}=d??{},x=((...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0})("mediasfu-main-aspect",f),v={backgroundColor:e,height:g.height,width:g.width,overflow:"hidden",position:"relative",transition:"width 0.2s ease, height 0.2s ease",...b},S=(0,de.useMemo)(()=>({width:g.width,height:g.height}),[g.height,g.width]),R=l?l({defaultContent:t,dimensions:S}):t,w=(0,ce.jsx)("div",{className:x,style:v,...y,children:R}),k=u?u({defaultContainer:w,dimensions:S}):w;return(0,ce.jsx)(ce.Fragment,{children:k})},he=({buttons:e,buttonColor:t,buttonBackgroundColor:r,alignment:a="flex-start",vertical:n=!1,buttonsContainerStyle:o,alternateIconComponent:s,containerProps:i,buttonProps:c,buttonStyle:d,buttonClassName:l,iconWrapperProps:u,textProps:p,contentWrapperProps:m,renderButton:g,renderButtonContent:h,gap:f})=>{const{className:b,style:y,onClick:x,type:v,...S}=c??{},{className:R,style:w,...k}=i??{},C=["mediasfu-container",R].filter(Boolean).join(" "),j={..."center"===a?{justifyContent:"center"}:"flex-end"===a?{justifyContent:"flex-end"}:"space-between"===a?{justifyContent:"space-between"}:"space-around"===a?{justifyContent:"space-around"}:"space-evenly"===a?{justifyContent:"space-evenly"}:{justifyContent:"flex-start"},...n?{flexDirection:"column"}:{},...void 0!==f?{gap:f}:{},...o,...w},{style:P,className:M,...I}=m??{},{style:A,className:T,...F}=u??{},{style:D,className:N,...L}=p??{};return(0,ce.jsx)("div",{...k,className:C,style:j,children:e.map((e,a)=>{const{buttonProps:o,style:i,className:c,iconWrapperProps:u,textProps:p,contentWrapperProps:m}=e,{onClick:f,style:R,className:w,type:k,...C}=o??{},{style:j,className:V,...B}=m??{},$=["mediasfu-button-content",M,V].filter(Boolean).join(" ")||void 0,E={display:"flex",alignItems:"center",gap:n?6:8,...P,...j},W={...I,...B,className:$,style:E},{style:H,className:O,...z}=u??{},U=["mediasfu-button-icon",T,O].filter(Boolean).join(" ")||void 0,q={display:"flex",alignItems:"center",...A,...H},_={...F,...z,className:U,style:q},{style:G,className:Y,...K}=p??{},J=["buttonText",N,Y].filter(Boolean).join(" ")||void 0,X={color:e.color||t||"#ffffff",...D,...G},Z={...L,...K,className:J,style:X},Q=e.activeColor||t||"#ffffff",ee=e.inActiveColor||t||"#ffffff",te=(()=>{if(e.customComponent)return e.customComponent;if(e.icon){if(e.active){if(e.alternateIconComponent)return e.alternateIconComponent;if(e.alternateIcon)return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.alternateIcon,size:"lg",color:Q});if(s)return s}return e.iconComponent?e.iconComponent:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon,size:"lg",color:ee})}return s||null})(),re=te?(0,ce.jsx)("span",{..._,children:te}):null,ae=e.name?(0,ce.jsx)("span",{...Z,children:e.name}):null,ne=(0,ce.jsxs)("div",{...W,children:[re,ae]}),oe={...S,...C,disabled:e.disabled??C?.disabled??S?.disabled},se=!1!==e.show,ie={backgroundColor:(()=>{const t=e.backgroundColor?.pressed||r?.pressed,a=e.backgroundColor?.default||r?.default;return se?e.active&&t?t:a||y?.backgroundColor||d?.backgroundColor||i?.backgroundColor||"transparent":"transparent"})(),...n?{flexDirection:"column"}:{},display:se?"flex":"none",...y,...d,...R,...i};se&&!ie.display&&(ie.display="flex");const de={...oe,className:["buttonContainer",b,l,w,c].filter(Boolean).join(" ")||void 0,style:ie,type:k||v||"button",onClick:t=>{f?.(t),x?.(t),t.defaultPrevented||e.onPress?.()}},pe=((e,t,r,a,n,o)=>e.renderContent?e.renderContent({index:t,isActive:!!e.active,defaultIcon:a,defaultLabel:n,defaultContent:o,vertical:r}):h?h({index:t,button:e,defaultIcon:a,defaultLabel:n,defaultContent:o,vertical:r}):o)(e,a,n,re,ae,ne);return g?(0,ce.jsx)(le().Fragment,{children:g({index:a,button:e,defaultButton:(0,ce.jsx)("button",{...de,children:pe}),defaultProps:de,vertical:n})},a):(0,ce.jsx)("button",{...de,children:pe},a)})})},fe={display:"flex",marginTop:5,marginBottom:5,elevation:9,zIndex:9},be={alignItems:"center",justifyContent:"center",padding:10,borderRadius:5,marginLeft:5,marginRight:5,cursor:"pointer",border:"none",backgroundColor:"transparent"},ye={flexDirection:"column"},xe={fontSize:12,marginTop:5},ve=({buttons:e,position:t="left",location:r="top",direction:a="horizontal",buttonsContainerStyle:n,alternateIconComponent:o,iconComponent:s,showAspect:i=!1,containerProps:c,buttonProps:d,buttonStyle:l,buttonClassName:u,iconWrapperProps:p,textProps:m,contentWrapperProps:g,renderButton:h,renderButtonContent:f,gap:b})=>{const y="vertical"===a,{className:x,style:v,...S}=c??{},R=["mediasfu-alt-buttons",x].filter(Boolean).join(" ")||void 0,w={...fe,...(()=>{const e={};return"left"!==t&&"right"!==t&&"middle"!==t||(e.justifyContent="left"===t?"flex-start":"right"===t?"flex-end":"center"),"top"!==r&&"bottom"!==r&&"center"!==r||(e.alignItems="top"===r?"flex-start":"bottom"===r?"flex-end":"center"),e.flexDirection=y?"column":"row",e})(),...void 0!==b?{gap:b}:{},...n,...v};i?w.display||(w.display="flex"):w.display="none";const{className:k,style:C,type:j,onClick:P,...M}=d??{},{style:I,className:A,...T}=p??{},{style:F,className:D,...N}=m??{},{style:L,className:V,...B}=g??{};return(0,ce.jsx)("div",{...S,className:R,style:w,children:e.map((e,t)=>{const{buttonProps:r,style:n,className:i,iconWrapperProps:c,textProps:d,contentWrapperProps:p}=e,{onClick:m,style:g,className:b,type:x,...v}=r??{},S=!1!==e.show,R={...M,...v,disabled:e.disabled??v?.disabled??M?.disabled},w=S?g?.backgroundColor??n?.backgroundColor??l?.backgroundColor??C?.backgroundColor??e.backgroundColor?.default??be.backgroundColor??"transparent":"transparent",$={...be,...S?{}:{display:"none"},...y?ye:{},backgroundColor:w,...C,...l,...g,...n};S&&!$.display&&($.display="flex");const E=["mediasfu-alt-button",k,u,b,i].filter(Boolean).join(" ")||void 0,W=x||j||"button",{style:H,className:O,...z}=p??{},U=["mediasfu-alt-button-content",V,O].filter(Boolean).join(" ")||void 0,q={display:"flex",alignItems:"center",gap:y?6:8,...L,...H},_={...B,...z,className:U,style:q},{style:G,className:Y,...K}=c??{},J=["mediasfu-alt-button-icon",A,Y].filter(Boolean).join(" ")||void 0,X={display:"flex",alignItems:"center",...I,...G},Z={...T,...K,className:J,style:X},{style:Q,className:ee,...te}=d??{},re=["mediasfu-alt-button-text",D,ee].filter(Boolean).join(" ")||void 0,ae={...xe,color:e.color||F?.color||"#ffffff",...F,...Q},ne={...N,...te,className:re,style:ae},oe=e.activeColor||e.color||"#ffffff",se=e.inActiveColor||e.color||"#ffffff",ie=(()=>{if(e.customComponent)return e.customComponent;if(e.icon){if(e.active){if(e.alternateIconComponent)return e.alternateIconComponent;if(e.alternateIcon)return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.alternateIcon,size:"lg",color:oe});if(o)return o}return e.iconComponent?e.iconComponent:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon,size:"lg",color:se})}return s||null})(),de=ie?(0,ce.jsx)("span",{...Z,children:ie}):null,pe=e.name?(0,ce.jsx)("span",{...ne,children:e.name}):null,me=(0,ce.jsxs)("div",{..._,children:[de,pe]}),ge=e.renderContent?e.renderContent({index:t,isActive:!!e.active,defaultIcon:de,defaultLabel:pe,defaultContent:me,direction:a}):f?f({index:t,button:e,defaultIcon:de,defaultLabel:pe,defaultContent:me,direction:a}):me,he={...R,className:E,style:$,type:W,onClick:t=>{m?.(t),P?.(t),t.defaultPrevented||e.onPress?.()}},fe=(0,ce.jsx)("button",{...he,children:ge},t);return e.renderButton?(0,ce.jsx)(le().Fragment,{children:e.renderButton({index:t,button:e,defaultButton:fe,defaultProps:he,direction:a})},t):h?(0,ce.jsx)(le().Fragment,{children:h({index:t,button:e,defaultButton:fe,defaultProps:he,direction:a})},t):fe})})},Se={position:"absolute",bottom:0,left:0,right:0,marginTop:5,marginBottom:5,elevation:9,zIndex:9,backgroundColor:"transparent"},Re={alignItems:"center",padding:10,borderRadius:5,marginRight:5,marginLeft:5,marginBottom:5,marginTop:5,cursor:"pointer",backgroundColor:"transparent",border:"none"},we={flexDirection:"column"},ke={fontSize:12,marginTop:5},Ce=({buttons:e,position:t="left",location:r="top",direction:a="horizontal",buttonsContainerStyle:n,alternateIconComponent:o,iconComponent:s,showAspect:i=!1,containerProps:c,buttonProps:d,buttonStyle:l,buttonClassName:u,iconWrapperProps:p,textProps:m,textStyle:g,contentWrapperProps:h,renderButton:f,renderButtonContent:b,gap:y})=>{const x="vertical"===a,{className:v,style:S,...R}=c??{},w=["mediasfu-touch-buttons",v].filter(Boolean).join(" ")||void 0,k={...Se,...(()=>{const e={};if(e.flexDirection=x?"column":"row","left"===t||"right"===t||"middle"===t){const r="left"===t?"flex-start":"right"===t?"flex-end":"center";x?e.alignItems=r:e.justifyContent=r}if("top"===r||"bottom"===r||"center"===r){const t="top"===r?"flex-start":"bottom"===r?"flex-end":"center";x?e.justifyContent=t:e.alignItems=t}return e})(),...void 0!==y?{gap:y}:{},...n,...S};i?k.display||(k.display="flex"):k.display="none";const{className:C,style:j,type:P,onClick:M,...I}=d??{},{style:A,className:T,...F}=p??{},{style:D,className:N,...L}=m??{},V={...D,...g},{style:B,className:$,...E}=h??{};return(0,ce.jsx)("div",{...R,className:w,style:k,children:e.map((e,t)=>{const{buttonProps:r,style:n,className:i,iconWrapperProps:c,textProps:d,contentWrapperProps:p}=e,{onClick:m,style:h,className:y,type:v,...S}=r??{},R="transparent"===e.inActiveColor&&"transparent"===e.activeColor,w=!1!==e.show,k=w||R,D={...I,...S,disabled:e.disabled??S?.disabled??I?.disabled},W=w?"rgba(255, 255, 255, 0.25)":"transparent",H=k?h?.backgroundColor??n?.backgroundColor??l?.backgroundColor??j?.backgroundColor??e.backgroundColor?.default??W:"transparent",O={...Re,...x?we:{},...k?{}:{display:"none"},backgroundColor:H,...j,...l,...h,...n};k&&!O.display&&(O.display="flex");const z=["mediasfu-touch-button",C,u,y,i].filter(Boolean).join(" ")||void 0,U=v||P||"button",{style:q,className:_,...G}=p??{},Y=["mediasfu-touch-button-content",$,_].filter(Boolean).join(" ")||void 0,K={display:"flex",alignItems:"center",justifyContent:"center",gap:x?6:8,...B,...q},J={...E,...G,className:Y,style:K},{style:X,className:Z,...Q}=c??{},ee=["mediasfu-touch-button-icon",T,Z].filter(Boolean).join(" ")||void 0,te={display:"flex",alignItems:"center",justifyContent:"center",...A,...X},re={...F,...Q,className:ee,style:te},{style:ae,className:ne,...oe}=d??{},se=["mediasfu-touch-button-text",N,ne].filter(Boolean).join(" ")||void 0,ie={...ke,color:e.color||V?.color||"transparent",...V,...g,...ae},de={...L,...oe,className:se,style:ie},pe=e.activeColor||e.color||"transparent",me=e.inActiveColor||e.color||"transparent",ge=(()=>{if(e.customComponent)return e.customComponent;if(e.icon){if(e.active){if(e.alternateIconComponent)return e.alternateIconComponent;if(e.alternateIcon)return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.alternateIcon,size:"lg",color:pe});if(o)return o}return e.iconComponent?e.iconComponent:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon,size:"lg",color:me})}return s||null})(),he=ge?(0,ce.jsx)("span",{...re,children:ge}):null,fe=e.name?(0,ce.jsx)("span",{...de,children:e.name}):null,be=(0,ce.jsxs)("div",{...J,children:[he,fe]}),ye=e.renderContent?e.renderContent({index:t,isActive:!!e.active,defaultIcon:he,defaultLabel:fe,defaultContent:be,direction:a}):b?b({index:t,button:e,defaultIcon:he,defaultLabel:fe,defaultContent:be,direction:a}):be,xe={...D,className:z,style:O,type:U,onClick:t=>{m?.(t),M?.(t),t.defaultPrevented||e.onPress?.()}},ve=(0,ce.jsx)("button",{...xe,children:ye},t);return e.renderButton?(0,ce.jsx)(le().Fragment,{children:e.renderButton({index:t,button:e,defaultButton:ve,defaultProps:xe,direction:a})},t):f?(0,ce.jsx)(le().Fragment,{children:f({index:t,button:e,defaultButton:ve,defaultProps:xe,direction:a})},t):ve})})};var je=p(318);class Pe{constructor(){}static brandGradient(e=!1){const t=e?["#818CF8","#60A5FA","#22D3EE"]:["#6366F1","#3B82F6","#06B6D4"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 50%, ${t[2]} 100%)`}static simpleBrandGradient(e=!1){const t=e?["#818CF8","#60A5FA"]:["#6366F1","#3B82F6"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 100%)`}static accentGradient(e=!1){const t=e?["#22D3EE","#818CF8"]:["#06B6D4","#6366F1"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 100%)`}static metallicGradient(e=!1){const t=e?["#64748B","#94A3B8","#CBD5E1","#94A3B8","#64748B"]:["#E2E8F0","#F1F5F9","#FFFFFF","#F1F5F9","#E2E8F0"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 25%, ${t[2]} 50%, ${t[3]} 75%, ${t[4]} 100%)`}static iridescentGradient(e=!1){const t=e?["#818CF8","#60A5FA","#22D3EE","#2DD4BF","#34D399"]:["#6366F1","#3B82F6","#06B6D4","#14B8A6","#10B981"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 25%, ${t[2]} 50%, ${t[3]} 75%, ${t[4]} 100%)`}static auroraGradient(e=!1){const t=e?["#10B981","#22D3EE","#60A5FA","#818CF8"]:["#059669","#06B6D4","#3B82F6","#6366F1"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 33%, ${t[2]} 66%, ${t[3]} 100%)`}static sunsetGradient(e=!1){const t=e?["#FBBF24","#FB923C","#F87171"]:["#F59E0B","#F97316","#EF4444"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 50%, ${t[2]} 100%)`}static oceanGradient(e=!1){const t=e?["#3B82F6","#22D3EE","#10B981"]:["#2563EB","#06B6D4","#059669"];return`linear-gradient(135deg, ${t[0]} 0%, ${t[1]} 50%, ${t[2]} 100%)`}static radialBrandGradient(e=!1){const t=e?["#818CF8","#60A5FA","#0F172A"]:["#6366F1","#3B82F6","#F8FAFC"];return`radial-gradient(circle, ${t[0]} 0%, ${t[1]} 50%, ${t[2]} 100%)`}static sweepGradient(e=!1){const t=e?["#818CF8","#22D3EE","#60A5FA","#818CF8"]:["#6366F1","#06B6D4","#3B82F6","#6366F1"];return`conic-gradient(from 0deg, ${t[0]} 0%, ${t[1]} 33%, ${t[2]} 66%, ${t[3]} 100%)`}static elevation(e=2,t=!1){const r=t?.35:.15;switch(e){case 1:return`0 1px 4px rgba(0, 0, 0, ${t?.25:.05}), 0 1px 2px rgba(0, 0, 0, ${t?.15:.03})`;case 2:return`0 2px 8px rgba(0, 0, 0, ${t?.3:.07}), 0 1px 3px rgba(0, 0, 0, ${t?.15:.04})`;case 3:return`0 4px 16px rgba(0, 0, 0, ${t?.35:.1}), 0 2px 6px rgba(0, 0, 0, ${t?.2:.06})`;case 4:return`0 8px 24px rgba(0, 0, 0, ${t?.4:.12}), 0 4px 10px rgba(0, 0, 0, ${t?.25:.08})`;case 5:return`0 12px 32px rgba(0, 0, 0, ${t?.45:.15}), 0 6px 14px rgba(0, 0, 0, ${t?.3:.1})`;default:return`0 12px 18px rgba(0, 0, 0, ${r})`}}static coloredElevation(e,t=2){switch(t){case 1:return`0 2px 8px ${this.hexToRgba(e,.2)}`;case 2:return`0 4px 16px ${this.hexToRgba(e,.25)}, 0 2px 6px ${this.hexToRgba(e,.15)}`;default:return`0 8px 24px ${this.hexToRgba(e,.3)}, 0 4px 10px ${this.hexToRgba(e,.2)}`}}static get glowPrimary(){return this.glowShadow(this.primary,.6)}static get glowSecondary(){return this.glowShadow(this.secondary,.5)}static get glowAccent(){return this.glowShadow(this.accent,.5)}static get glowSuccess(){return this.glowShadow(this.success,.5)}static get glowDanger(){return this.glowShadow(this.danger,.5)}static glowShadow(e,t=.5){const r=Math.max(0,Math.min(1,t));return`0 0 32px 4px ${this.hexToRgba(e,.15*r)}, 0 0 16px 2px ${this.hexToRgba(e,.25*r)}, 0 0 8px ${this.hexToRgba(e,.4*r)}`}static subtleGlow(e,t=!1){const r=t?.2:.15;return`0 0 20px 1px ${this.hexToRgba(e,r)}`}static pulseGlow(e,t){const r=.3+.3*t;return`0 0 ${24+8*t}px ${2+2*t}px ${this.hexToRgba(e,.5*r)}, 0 0 ${12+4*t}px ${this.hexToRgba(e,r)}`}static neonGlow(e){return`0 0 40px 8px ${this.hexToRgba(e,.1)}, 0 0 20px 4px ${this.hexToRgba(e,.3)}, 0 0 10px 1px ${this.hexToRgba(e,.5)}, 0 0 4px ${this.hexToRgba(e,.8)}`}static neumorphicShadow(e=!1,t=!1){return e?t?"-2px -2px 4px rgba(0, 0, 0, 0.5), 2px 2px 4px rgba(45, 58, 79, 0.3)":"4px 4px 8px rgba(0, 0, 0, 0.6), -4px -4px 8px rgba(45, 58, 79, 0.4)":t?"-2px -2px 4px rgba(0, 0, 0, 0.1), 2px 2px 4px rgba(255, 255, 255, 0.7)":"4px 4px 8px rgba(0, 0, 0, 0.12), -4px -4px 8px rgba(255, 255, 255, 0.9)"}static innerShadowGradient(e=!1){return e?"linear-gradient(135deg, rgba(0, 0, 0, 0.2) 0%, transparent 50%, rgba(45, 58, 79, 0.1) 100%)":"linear-gradient(135deg, rgba(0, 0, 0, 0.08) 0%, transparent 50%, rgba(255, 255, 255, 0.5) 100%)"}static glassBackground(e=!1){return e?"rgba(255, 255, 255, 0.06)":"rgba(0, 0, 0, 0.06)"}static glassBorder(e=!1){return e?"rgba(255, 255, 255, 0.08)":"rgba(255, 255, 255, 0.35)"}static frostedGlass(e=!1,t=20){return{backgroundColor:e?"rgba(255, 255, 255, 0.06)":"rgba(255, 255, 255, 0.75)",borderRadius:`${t}px`,border:e?"1.5px solid rgba(255, 255, 255, 0.12)":"1.5px solid rgba(255, 255, 255, 0.8)",boxShadow:`0 8px 24px rgba(0, 0, 0, ${e?.3:.08})`,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)"}}static glassGradientBorder(e=!1){return e?"linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%)":"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.4) 100%)"}static hoverColor(e,t=!1){const r=t?.1:.08,a=t?"#FFFFFF":"#000000";return this.mixColors(e,a,r)}static pressedColor(e,t=!1){const r=t?.2:.15,a=t?"#FFFFFF":"#000000";return this.mixColors(e,a,r)}static disabledColor(e){return this.hexToRgba(e,.4)}static focusRing(e=!1){return e?this.hexToRgba(this.primaryDark,.5):this.hexToRgba(this.primary,.4)}static modalBackdrop(e=!1){return e?"rgba(0, 0, 0, 0.7)":"rgba(0, 0, 0, 0.4)"}static scrim(e=!1,t=.5){return`rgba(0, 0, 0, ${e?t:.6*t})`}static shimmerBase(e=!1){return e?"#334155":"#E2E8F0"}static shimmerHighlight(e=!1){return e?"#475569":"#F8FAFC"}static fromRgb(e,t,r){return`#${((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1)}`}static hexToRgba(e,t){const r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return r?`rgba(${parseInt(r[1],16)}, ${parseInt(r[2],16)}, ${parseInt(r[3],16)}, ${t})`:`rgba(0, 0, 0, ${t})`}static hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}static mixColors(e,t,r){const a=this.hexToRgb(e),n=this.hexToRgb(t);if(!a||!n)return e;const o=Math.round(a.r+(n.r-a.r)*r),s=Math.round(a.g+(n.g-a.g)*r),i=Math.round(a.b+(n.b-a.b)*r);return this.fromRgb(o,s,i)}static adjustBrightness(e,t){const r=Math.max(-1,Math.min(1,t)),a=r>0?"#FFFFFF":"#000000";return this.mixColors(e,a,Math.abs(r))}static contrastingText(e){const t=this.hexToRgb(e);return t?(.299*t.r+.587*t.g+.114*t.b)/255>.5?this.textPrimary:this.textPrimaryDark:this.textPrimary}static dropdownBackground(e=!1){return e?"#1E293B":"#FFFFFF"}static dropdownItemHover(e=!1){return e?this.hexToRgba(this.primary,.15):this.hexToRgba(this.primary,.08)}static dropdownBorder(e=!1){return e?this.hexToRgba(this.primary,.3):this.hexToRgba(this.primary,.2)}static dropdownStyles(e=!1,t=!1){return{backgroundColor:e?this.hexToRgba(this.surfaceElevatedDark,.8):"rgba(255, 255, 255, 0.95)",borderRadius:"12px",border:t?`2px solid ${e?this.primaryDark:this.primary}`:"1px solid "+(e?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"),boxShadow:t?`0 0 8px ${this.hexToRgba(e?this.primaryDark:this.primary,.2)}`:void 0}}static tooltipBackground(e=!1){return e?"#334155":"#1E293B"}static tooltipText(e=!1){return"#FFFFFF"}static tooltipStyles(e=!1){return{backgroundColor:this.tooltipBackground(e),borderRadius:"8px",border:`1px solid ${this.hexToRgba(this.primary,.3)}`,boxShadow:`0 4px 12px rgba(0, 0, 0, 0.3), 0 0 8px ${this.hexToRgba(this.primary,.1)}`,color:this.tooltipText(e)}}static alertBackdrop(e=!1){return e?"rgba(0, 0, 0, 0.25)":"rgba(0, 0, 0, 0.15)"}static themedSurface(e=!1,t=0){if(e)switch(t){case 0:return this.backgroundDark;case 1:return this.surfaceDark;case 2:return this.surfaceElevatedDark;default:return this.cardHoverDark}else switch(t){case 0:return this.background;case 1:return this.surface;case 2:return this.surfaceElevated;default:return this.cardHover}}static themedText(e=!1){return e?this.textPrimaryDark:this.textPrimary}static themedSecondaryText(e=!1){return e?this.textSecondaryDark:this.textSecondary}static themedIcon(e=!1){return e?this.textPrimaryDark:this.textPrimary}static controlButtonInactive(e=!1){return e?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.87)"}static controlButtonActive(e=!1){return e?this.primaryDark:this.primary}static controlTextColor(e=!1){return e?"#FFFFFF":"rgba(0, 0, 0, 0.87)"}static get recordingActive(){return this.danger}static get recordingPaused(){return this.warning}static get recordingStopped(){return this.success}}Pe.primary="#6366F1",Pe.primaryVariant="#4F46E5",Pe.primaryLight="#818CF8",Pe.secondary="#3B82F6",Pe.secondaryLight="#60A5FA",Pe.secondaryDark="#2563EB",Pe.accent="#06B6D4",Pe.accentLight="#22D3EE",Pe.accentDarkVariant="#0891B2",Pe.surface="#FFFFFF",Pe.surfaceElevated="#F1F5F9",Pe.background="#F8FAFC",Pe.card="#FFFFFF",Pe.cardHover="#F1F5F9",Pe.divider="#E2E8F0",Pe.primaryDark="#818CF8",Pe.primaryDarkVariant="#6366F1",Pe.primaryLightDark="#A5B4FC",Pe.secondaryDarkMode="#60A5FA",Pe.secondaryLightDark="#93C5FD",Pe.accentDark="#22D3EE",Pe.accentLightDark="#67E8F9",Pe.surfaceDark="#1E293B",Pe.surfaceElevatedDark="#334155",Pe.backgroundDark="#0F172A",Pe.cardDark="#1E293B",Pe.cardHoverDark="#334155",Pe.dividerDark="#334155",Pe.success="#34D399",Pe.successLight="#6EE7B7",Pe.successDark="#10B981",Pe.successBackground="#ECFDF5",Pe.successBackgroundDark="#064E3B",Pe.warning="#FBBF24",Pe.warningLight="#FDE68A",Pe.warningDark="#F59E0B",Pe.warningBackground="#FFFBEB",Pe.warningBackgroundDark="#78350F",Pe.danger="#FB7185",Pe.dangerLight="#FDA4AF",Pe.dangerDark="#F43F5E",Pe.dangerBackground="#FFF1F2",Pe.dangerBackgroundDark="#881337",Pe.info="#38BDF8",Pe.infoLight="#7DD3FC",Pe.infoDark="#0EA5E9",Pe.infoBackground="#F0F9FF",Pe.infoBackgroundDark="#0C4A6E",Pe.textPrimary="#0F172A",Pe.textSecondary="#475569",Pe.textMuted="#94A3B8",Pe.textDisabled="#CBD5E1",Pe.textPrimaryDark="#F8FAFC",Pe.textSecondaryDark="#CBD5E1",Pe.textMutedDark="#94A3B8",Pe.textDisabledDark="#64748B";const Me=Pe,Ie=le().memo(({message:e,isDarkMode:t=!0,position:r="top",children:a,delay:n=300,style:o,usePortal:s=!1})=>{const[i,c]=(0,de.useState)(!1),[d,l]=(0,de.useState)({top:0,left:0}),u=(0,de.useRef)(null),p=(0,de.useRef)(null),m=(0,de.useCallback)(()=>{if(p.current&&s){const e=p.current.getBoundingClientRect();let t=0,a=0;switch(r){case"top":t=e.top-8,a=e.left+e.width/2;break;case"bottom":t=e.bottom+8,a=e.left+e.width/2;break;case"left":t=e.top+e.height/2,a=e.left-8;break;case"right":t=e.top+e.height/2,a=e.right+8}l({top:t,left:a})}},[r,s]),g=(0,de.useCallback)(()=>{m(),u.current=setTimeout(()=>{c(!0)},n)},[n,m]),h=(0,de.useCallback)(()=>{u.current&&(clearTimeout(u.current),u.current=null),c(!1)},[]);(0,de.useEffect)(()=>{if(i&&s)return window.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{window.removeEventListener("scroll",m),window.removeEventListener("resize",m)}},[i,s,m]);const f=Pe.tooltipStyles(t),b=(()=>{if(s)switch(r){case"top":return{top:d.top,left:d.left,transform:"translate(-50%, -100%)"};case"bottom":return{top:d.top,left:d.left,transform:"translate(-50%, 0)"};case"left":return{top:d.top,left:d.left,transform:"translate(-100%, -50%)"};case"right":return{top:d.top,left:d.left,transform:"translate(0, -50%)"};default:return{}}switch(r){case"top":return{bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"8px"};case"bottom":return{top:"100%",left:"50%",transform:"translateX(-50%)",marginTop:"8px"};case"left":return{right:"100%",top:"50%",transform:"translateY(-50%)",marginRight:"8px"};case"right":return{left:"100%",top:"50%",transform:"translateY(-50%)",marginLeft:"8px"};default:return{}}})(),y=(()=>{const e={position:"absolute",width:0,height:0},a=t?"rgba(30, 41, 59, 0.95)":"rgba(248, 250, 252, 0.95)";switch(r){case"top":return{...e,top:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:`6px solid ${a}`};case"bottom":return{...e,bottom:"100%",left:"50%",transform:"translateX(-50%)",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:`6px solid ${a}`};case"left":return{...e,left:"100%",top:"50%",transform:"translateY(-50%)",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderLeft:`6px solid ${a}`};case"right":return{...e,right:"100%",top:"50%",transform:"translateY(-50%)",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderRight:`6px solid ${a}`};default:return e}})(),x={position:"relative",display:"inline-block",...o},v={position:s?"fixed":"absolute",...b,...f,whiteSpace:"normal",maxWidth:"280px",textAlign:"center",zIndex:99999,pointerEvents:"none",opacity:i?1:0,transition:"opacity 200ms ease-in-out",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.4), 0 0 12px "+(t?"rgba(79, 172, 254, 0.15)":"rgba(102, 126, 234, 0.15)")};if(!e)return(0,ce.jsx)(ce.Fragment,{children:a});const S=(0,ce.jsxs)("div",{style:v,children:[e,(0,ce.jsx)("div",{style:y})]});return(0,ce.jsxs)("div",{ref:p,style:x,onMouseEnter:g,onMouseLeave:h,onFocus:g,onBlur:h,children:[a,s?(0,je.createPortal)(S,document.body):S]})}),Ae=e=>{const{position:t="right",location:r="bottom",direction:a="vertical",buttonsContainerStyle:n}=e,o={...(()=>{const e={left:"50%",right:"auto",width:"fit-content",transform:"translateX(-50%)"};return"right"===t?(e.right=0,e.left="auto",e.transform=void 0):"left"===t&&(e.left=0,e.transform=void 0),e})(),backgroundColor:"rgba(0, 0, 0, 0.25)",borderRadius:12,padding:8,marginTop:10,marginBottom:10,marginLeft:10,marginRight:10,display:"flex",flexDirection:"vertical"===a?"column":"row",alignItems:"center",justifyContent:"center",gap:4,...n},s={fontSize:14,fontWeight:"600",marginTop:5,display:"none",...e.textStyle||{}},i="vertical"===a?"left"===t?"right":"left":"top"===r?"bottom":"top",c={backgroundColor:"transparent",width:48,height:48,padding:0,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,..."undefined"!=typeof window&&window.innerWidth>768?{transform:"scale(1.1)"}:{},...e.buttonStyle||{}},d={style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},...e.contentWrapperProps},l={style:{display:"flex",alignItems:"center",justifyContent:"center"},...e.iconWrapperProps};return(0,ce.jsx)(Ce,{...e,position:t,location:r,direction:a,buttons:e.buttons,buttonsContainerStyle:o,textStyle:s,buttonStyle:c,contentWrapperProps:d,iconWrapperProps:l,renderButton:({button:e,defaultButton:t})=>(0,ce.jsx)(Ie,{message:e.name||"",position:i,children:t})})},Te=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Fe={topLeft:{position:"absolute",top:0,left:0},topRight:{position:"absolute",top:0,right:0},bottomLeft:{position:"absolute",bottom:0,left:0},bottomRight:{position:"absolute",bottom:0,right:0}},De={padding:5,position:"relative",zIndex:1e3},Ne={backgroundColor:"green",padding:5,borderRadius:5,color:"white"},Le={color:"black"},Ve=({meetingProgressTime:e,initialBackgroundColor:t="green",position:r="topLeft",textStyle:a={},showTimer:n=!0,containerProps:o,badgeProps:s,textProps:i,renderBadge:c,renderContainer:d})=>{const{className:l,style:u,...p}=o??{},m=Te("mediasfu-meeting-progress__container",l),g={...De,...Fe[r]??Fe.topLeft,...u},{className:h,style:f,...b}=s??{},y=Te("mediasfu-meeting-progress__badge",h),x={...Ne,backgroundColor:t,display:n?"block":"none",...f},{className:v,style:S,...R}=i??{},w=Te("mediasfu-meeting-progress__text",v),k={...Le,...a,...S},C=(0,ce.jsx)("div",{className:y,style:x,...b,children:(0,ce.jsx)("span",{className:w,style:k,...R,children:e})}),j=c?c({defaultBadge:C,showTimer:n}):C,P=(0,ce.jsx)("div",{className:m,style:g,...p,children:j}),M=d?d({defaultContainer:P}):P;return(0,ce.jsx)(ce.Fragment,{children:M})},Be=({backgroundColor:e,children:t,width:r,height:a,showAspect:n=!0,timeBackgroundColor:o,showTimer:s,meetingProgressTime:i,timerComponent:c=Ve})=>(0,ce.jsxs)("div",{style:{backgroundColor:e,width:r,height:a,display:n?"block":"none",overflow:"hidden",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:12,boxShadow:"0 4px 24px rgba(0, 0, 0, 0.15)",margin:0,padding:0},children:[s&&(0,ce.jsx)(c,{meetingProgressTime:i,initialBackgroundColor:o,showTimer:s}),t]}),$e=({children:e,mainSize:t,doStack:r,containerWidthFraction:a=1,containerHeightFraction:n=1,sidebarWidth:o=0,updateComponentSizes:s,defaultFraction:i=.94,showControls:c,componentSizes:d,containerProps:l,renderChild:u,renderChildren:p,renderContainer:m})=>{const g=(0,de.useCallback)(()=>{if("undefined"==typeof window)return{width:0,height:0};const e=window.innerWidth*a-o,t=c?window.innerHeight*n*i:window.innerHeight*n;return{width:Math.max(e,0),height:Math.max(t,0)}},[a,n,i,c,o]),[h,f]=(0,de.useState)(()=>g());(0,de.useEffect)(()=>{const e=()=>f(g());return e(),"undefined"!=typeof window&&(window.addEventListener("resize",e),window.addEventListener("orientationchange",e)),()=>{"undefined"!=typeof window&&(window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e))}},[g]);const b=(0,de.useMemo)(()=>{const{width:e,height:t}=h;return e>=768||e>1.5*(t||1)},[h]),y=(0,de.useCallback)(()=>{const{width:e,height:a}=h;return r?b?{mainHeight:a,otherHeight:a,mainWidth:Math.floor(t/100*e),otherWidth:Math.floor((100-t)/100*e)}:{mainHeight:Math.floor(t/100*a),otherHeight:Math.floor((100-t)/100*a),mainWidth:e,otherWidth:e}:{mainHeight:a,otherHeight:a,mainWidth:e,otherWidth:e}},[h,r,b,t]);(0,de.useEffect)(()=>{const e=y();s(e,!1)},[y,s]);const{mainHeight:x,otherHeight:v,mainWidth:S,otherWidth:R}=d,{className:w,style:k,...C}=l??{},j=((...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0})("mediasfu-main-screen",w),P={display:"flex",flex:1,flexDirection:b?"row":"column",width:h.width,height:h.height,padding:0,margin:0,position:"relative",...k},M=le().Children.map(e,(e,a)=>{if(!(e=>e&&"object"==typeof e.props)(e))return null;const n=r?0===a?{height:x,width:S}:{height:v,width:R}:{height:x,width:S},o=le().cloneElement(e,{mainSize:t,isWideScreen:b,style:{...n,...e.props.style},key:a});return u?u({child:o,index:a,mainSize:t,isWideScreen:b,doStack:r,computedStyle:n,componentSizes:d}):o}),I=p?p({defaultChildren:M,isWideScreen:b,doStack:r,componentSizes:d}):M,A=(0,ce.jsx)("div",{className:j,style:P,...C,children:I}),T=m?m({defaultContainer:A,isWideScreen:b,dimensions:h}):A;return(0,ce.jsx)(ce.Fragment,{children:T})},Ee=({children:e,backgroundColor:t,height:r,width:a,showAspect:n=!0,timeBackgroundColor:o="transparent",showTimer:s=!0,meetingProgressTime:i,timerComponent:c=Ve})=>{const d={display:n?"flex":"none",backgroundColor:t,height:r,width:a,flexDirection:"row",justifyContent:"center",alignItems:"center",borderRadius:12,border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 24px rgba(0, 0, 0, 0.15)",overflow:"hidden",position:"relative"};return(0,ce.jsxs)("div",{style:d,children:[(0,ce.jsx)(c,{meetingProgressTime:i,initialBackgroundColor:o,showTimer:s}),e]})},We=({backgroundColor:e,children:t,showControls:r=!0,containerWidthFraction:a,containerHeightFraction:n,defaultFractionSub:o=0,containerProps:s,renderContainer:i,renderContent:c})=>{const d="undefined"!=typeof window,l=(0,de.useCallback)(()=>{if(!d)return{width:a&&a>0?0*a:0,height:r?40:0};const e=window.innerWidth,t=window.innerHeight;let s=0;return r&&(s="number"==typeof n?n*t:o>0?o*t:40),{width:a?a*e:e,height:s}},[n,a,o,d,r]),[u,p]=(0,de.useState)(()=>{const{width:e,height:t}=l();return{width:e,height:t}});(0,de.useEffect)(()=>{if(p(l()),!d)return;const e=()=>{p(l())};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[l,d]);const{className:m,style:g,...h}=s??{},f=["mediasfu-sub-aspect",r?"mediasfu-sub-aspect--visible":"mediasfu-sub-aspect--hidden",m].filter(Boolean).join(" ").trim()||void 0,b={position:"absolute",bottom:0,left:0,margin:0,backgroundColor:e,display:r?"flex":"none",width:"100%",height:u.height,...g},y=c?c({defaultContent:t,showControls:r}):t,x=(0,ce.jsx)("div",{className:f,style:b,...h,children:y});return i?i({defaultContainer:x,styles:b,showControls:r}):x},He=({backgroundColor:e="transparent",children:t,containerWidthFraction:r=1,containerHeightFraction:a=1,marginLeft:n=0,marginRight:o=0,marginTop:s=0,marginBottom:i=0,padding:c=0,containerProps:d,renderContent:l,renderContainer:u})=>{const p=()=>"undefined"==typeof window?{width:0,height:0}:{width:window.innerWidth,height:window.innerHeight},m=e=>{const{width:t,height:n}=e,o=Math.floor(a*n),s=Math.floor(r*t);return{height:o,width:s,maxHeight:o,maxWidth:s}},[g,h]=(0,de.useState)(()=>m(p()));(0,de.useEffect)(()=>{const e=()=>{const e=m(p());h(e)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[a,r]);const{className:f,style:b,...y}=d??{},x=((...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0})("mediasfu-main-container",f),v={backgroundColor:e,marginLeft:n,marginRight:o,marginTop:s,marginBottom:i,padding:c,overflow:"hidden",...g,...b},S=(0,de.useMemo)(()=>({width:g.width,height:g.height}),[g.width,g.height]),R=l?l({defaultContent:t,dimensions:S}):t,w=(0,ce.jsx)("div",{className:x,style:v,...y,children:R}),k=u?u({defaultContainer:w,dimensions:S}):w;return(0,ce.jsx)(ce.Fragment,{children:k})};var Oe=p(609);const ze=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Ue={marginTop:"10px",maxWidth:"300px",width:"100%",marginBottom:"10px"},qe={fontWeight:"bold",fontSize:"16px",color:"#000000",marginBottom:"5px"},_e={display:"flex",alignItems:"center"},Ge={flex:1,border:"1px solid gray",padding:"10px",backgroundColor:"#f0f0f0",color:"black",borderRadius:"5px",fontSize:"16px",marginRight:"5px"},Ye={padding:"10px",border:"none",backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},Ke={fontSize:"20px",color:"#0F0F10FF"},Je=({meetingID:e="",labelText:t,containerProps:r,labelProps:a,inputContainerProps:n,inputProps:o,buttonProps:s,iconProps:i,copyIconColors:c,renderContainer:d,renderLabel:l,renderInput:u,renderCopyButton:p,renderIcon:m,renderInputGroup:g,renderContent:h})=>{const[f,b]=(0,de.useState)(!1),y=(0,de.useCallback)(async()=>{try{await navigator.clipboard.writeText(e),b(!0),setTimeout(()=>b(!1),2e3)}catch{}},[e]),{className:x,style:v,...S}=r??{},{className:R,style:w,children:k,...C}=a??{},{className:j,style:P,...M}=n??{},{className:I,style:A,value:T,readOnly:F,...D}=o??{},{className:N,style:L,onClick:V,type:B,...$}=s??{},{className:E,style:W,icon:H,...O}=i??{},z=(0,ce.jsx)(ue.FontAwesomeIcon,{icon:H??pe.faCopy,className:ze(void 0,E),style:{...Ke,...W,color:W?.color??(f?c?.copied??"#4CAF50":c?.default??"#0F0F10FF")},...O}),U=m?m({defaultIcon:z,isCopied:f,meetingID:e}):z,q=(0,ce.jsx)("button",{type:B??"button",onClick:async e=>{await Promise.resolve(V?.(e)),e.defaultPrevented||await y()},className:ze(void 0,N),style:{...Ye,...L},"aria-label":$["aria-label"]??"Copy Event ID",...$,children:U}),_=p?p({defaultButton:q,isCopied:f,meetingID:e}):q,G=(0,ce.jsx)("input",{className:ze(void 0,I),style:{...Ge,...A},value:T??e,readOnly:F??!0,"aria-label":"Event ID",...D}),Y=u?u({defaultInput:G,isCopied:f,meetingID:e}):G,K=(0,ce.jsxs)("div",{className:ze(void 0,j),style:{..._e,...P},...M,children:[Y,_]}),J=g?g({defaultGroup:K,isCopied:f,meetingID:e}):K,X=(0,ce.jsx)("label",{className:ze(void 0,R),style:{...qe,...w},...C,children:k??t??"Event ID:"}),Z=l?l({defaultLabel:X,isCopied:f,meetingID:e}):X,Q=(0,ce.jsxs)(ce.Fragment,{children:[Z,J]}),ee=h?h({defaultContent:Q,isCopied:f,meetingID:e}):Q,te=(0,ce.jsx)("div",{className:ze(void 0,x),style:{...Ue,...v},...S,children:ee});return d?d({defaultContainer:te,isCopied:f,meetingID:e}):te},Xe=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Ze={marginTop:"10px",maxWidth:"300px"},Qe={fontWeight:"bold"},et={borderWidth:"1px",borderColor:"gray",padding:"10px",marginTop:"5px",backgroundColor:"#f0f0f0",color:"black",width:"100%",borderRadius:"5px"},tt=({meetingPasscode:e="",labelText:t,containerProps:r,labelProps:a,inputProps:n,renderContainer:o,renderLabel:s,renderInput:i,renderContent:c})=>{const{className:d,style:l,...u}=r??{},{className:p,style:m,children:g,...h}=a??{},{className:f,style:b,value:y,readOnly:x,...v}=n??{},S=(0,ce.jsx)("label",{className:Xe(void 0,p),style:{...Qe,...m},...h,children:g??t??"Event Passcode (Host):"}),R=s?s({defaultLabel:S,meetingPasscode:e}):S,w=(0,ce.jsx)("input",{className:Xe(void 0,f),style:{...et,...b},value:y??e,readOnly:x??!0,...v}),k=i?i({defaultInput:w,meetingPasscode:e}):w,C=(0,ce.jsxs)(ce.Fragment,{children:[R,k]}),j=c?c({defaultContent:C,meetingPasscode:e}):C,P=(0,ce.jsx)("div",{className:Xe(void 0,d),style:{...Ze,...l},...u,children:j});return o?o({defaultContainer:P,meetingPasscode:e}):P};class rt{constructor(){}static insetAll(e){return{padding:`${e}px`}}static insetSymmetric(e=0,t=0){return{padding:`${t}px ${e}px`}}static insetHorizontal(e){return{paddingLeft:`${e}px`,paddingRight:`${e}px`}}static insetVertical(e){return{paddingTop:`${e}px`,paddingBottom:`${e}px`}}static inset(e,t,r,a){return{padding:`${e}px ${t}px ${r}px ${a}px`}}static marginAll(e){return{margin:`${e}px`}}static marginSymmetric(e=0,t=0){return{margin:`${t}px ${e}px`}}static marginHorizontal(e){return{marginLeft:`${e}px`,marginRight:`${e}px`}}static marginVertical(e){return{marginTop:`${e}px`,marginBottom:`${e}px`}}static margin(e,t,r,a){return{margin:`${e}px ${t}px ${r}px ${a}px`}}static gap(e){return{gap:`${e}px`}}static rowGap(e){return{rowGap:`${e}px`}}static columnGap(e){return{columnGap:`${e}px`}}static px(e){return`${e}px`}static rem(e){return e/16+"rem"}static multiply(e,t){return e*t}static get cardPadding(){return this.insetAll(this.md)}static get modalPadding(){return this.insetAll(this.lg)}static get buttonPadding(){return this.insetSymmetric(this.md,this.sm)}static get inputPadding(){return this.insetSymmetric(this.md,this.sm)}static get listItemPadding(){return this.insetSymmetric(this.md,this.sm)}static get sectionSpacing(){return this.marginVertical(this.xl)}}rt.xs=4,rt.sm=8,rt.md=16,rt.lg=24,rt.xl=32,rt.xxl=48;const at=rt;class nt{constructor(){}static toStyle(e,t){return{fontSize:`${e.fontSize}px`,fontWeight:e.fontWeight,letterSpacing:e.letterSpacing?`${e.letterSpacing}px`:void 0,lineHeight:e.lineHeight,fontFamily:e.fontFamily,color:t}}static getDisplayLarge(e=!1){return this.toStyle(this.displayLarge,e?Pe.textPrimaryDark:Pe.textPrimary)}static getDisplayMedium(e=!1){return this.toStyle(this.displayMedium,e?Pe.textPrimaryDark:Pe.textPrimary)}static getHeadlineLarge(e=!1){return this.toStyle(this.headlineLarge,e?Pe.textPrimaryDark:Pe.textPrimary)}static getHeadlineMedium(e=!1){return this.toStyle(this.headlineMedium,e?Pe.textPrimaryDark:Pe.textPrimary)}static getHeadlineSmall(e=!1){return this.toStyle(this.headlineSmall,e?Pe.textPrimaryDark:Pe.textPrimary)}static getTitleLarge(e=!1){return this.toStyle(this.titleLarge,e?Pe.textPrimaryDark:Pe.textPrimary)}static getTitleMedium(e=!1){return this.toStyle(this.titleMedium,e?Pe.textPrimaryDark:Pe.textPrimary)}static getTitleSmall(e=!1){return this.toStyle(this.titleSmall,e?Pe.textPrimaryDark:Pe.textPrimary)}static getBodyLarge(e=!1){return this.toStyle(this.bodyLarge,e?Pe.textSecondaryDark:Pe.textSecondary)}static getBodyMedium(e=!1){return this.toStyle(this.bodyMedium,e?Pe.textSecondaryDark:Pe.textSecondary)}static getBodySmall(e=!1){return this.toStyle(this.bodySmall,e?Pe.textMutedDark:Pe.textMuted)}static getLabelLarge(e=!1){return this.toStyle(this.labelLarge,e?Pe.textPrimaryDark:Pe.textPrimary)}static getLabelMedium(e=!1){return this.toStyle(this.labelMedium,e?Pe.textSecondaryDark:Pe.textSecondary)}static getLabelSmall(e=!1){return this.toStyle(this.labelSmall,e?Pe.textMutedDark:Pe.textMuted)}static getErrorText(e=!1){return{...this.toStyle(this.bodySmall),color:e?Pe.dangerLight:Pe.danger}}static getSuccessText(e=!1){return{...this.toStyle(this.bodySmall),color:e?Pe.successLight:Pe.success}}static getWarningText(e=!1){return{...this.toStyle(this.bodySmall),color:e?Pe.warningLight:Pe.warning}}static getInfoText(e=!1){return{...this.toStyle(this.bodySmall),color:e?Pe.infoLight:Pe.info}}static getLinkText(e=!1){return{...this.toStyle(this.bodyMedium),color:e?Pe.primaryDark:Pe.primary,textDecoration:"none",cursor:"pointer"}}static getMutedText(e=!1){return{...this.toStyle(this.bodyMedium),color:e?Pe.textMutedDark:Pe.textMuted}}static getCodeText(e=!1){return{fontSize:"13px",fontWeight:400,fontFamily:this.monoFontFamily,color:e?Pe.accentDark:Pe.accent,backgroundColor:e?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",padding:"2px 6px",borderRadius:"4px"}}static truncate(e=1){return 1===e?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}}static align(e){return{textAlign:e}}static transform(e){return{textTransform:e}}static weight(e){return{fontWeight:e}}}nt.fontFamily="'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif",nt.monoFontFamily="'JetBrains Mono', 'Fira Code', 'SF Mono', Consolas, monospace",nt.displayLarge={fontSize:57,fontWeight:600,letterSpacing:-.25,lineHeight:1.05,fontFamily:nt.fontFamily},nt.displayMedium={fontSize:45,fontWeight:600,letterSpacing:0,lineHeight:1.1,fontFamily:nt.fontFamily},nt.displaySmall={fontSize:36,fontWeight:600,letterSpacing:0,lineHeight:1.15,fontFamily:nt.fontFamily},nt.headlineLarge={fontSize:32,fontWeight:600,letterSpacing:0,lineHeight:1.2,fontFamily:nt.fontFamily},nt.headlineMedium={fontSize:28,fontWeight:600,letterSpacing:0,lineHeight:1.25,fontFamily:nt.fontFamily},nt.headlineSmall={fontSize:24,fontWeight:600,letterSpacing:0,lineHeight:1.3,fontFamily:nt.fontFamily},nt.titleLarge={fontSize:22,fontWeight:600,letterSpacing:0,lineHeight:1.3,fontFamily:nt.fontFamily},nt.titleMedium={fontSize:18,fontWeight:600,letterSpacing:.1,lineHeight:1.35,fontFamily:nt.fontFamily},nt.titleSmall={fontSize:16,fontWeight:600,letterSpacing:.1,lineHeight:1.4,fontFamily:nt.fontFamily},nt.bodyLarge={fontSize:16,fontWeight:400,letterSpacing:.5,lineHeight:1.4,fontFamily:nt.fontFamily},nt.bodyMedium={fontSize:14,fontWeight:400,letterSpacing:.25,lineHeight:1.45,fontFamily:nt.fontFamily},nt.bodySmall={fontSize:12,fontWeight:400,letterSpacing:.4,lineHeight:1.5,fontFamily:nt.fontFamily},nt.labelLarge={fontSize:14,fontWeight:600,letterSpacing:.1,lineHeight:1.4,fontFamily:nt.fontFamily},nt.labelMedium={fontSize:12,fontWeight:600,letterSpacing:.5,lineHeight:1.4,fontFamily:nt.fontFamily},nt.labelSmall={fontSize:11,fontWeight:600,letterSpacing:.5,lineHeight:1.4,fontFamily:nt.fontFamily};const ot=nt;class st{constructor(){}static transition(e,t=this.normal,r=this.smooth,a=0){return(Array.isArray(e)?e:[e]).map(e=>`${e} ${t}ms ${r}${a?` ${a}ms`:""}`).join(", ")}static transitionAll(e=this.normal,t=this.smooth){return`all ${e}ms ${t}`}static get transitionOpacity(){return this.transition("opacity",this.fast,this.smooth)}static get transitionTransform(){return this.transition("transform",this.normal,this.snappy)}static get transitionColors(){return this.transition(["background-color","border-color","color"],this.fast,this.smooth)}static get transitionShadow(){return this.transition("box-shadow",this.normal,this.smooth)}static staggerDelay(e,t=50,r=500){const a=t*e;return Math.min(a,r)}static staggerStyle(e,t=50){return{animationDelay:`${this.staggerDelay(e,t)}ms`}}static staggerInterval(e,t,r=.5){if(t<=1)return{start:0,end:1};const a=1/t,n=a*r,o=Math.min(1,e*a*(1-r));return{start:o,end:Math.min(1,o+a+n)}}static fadeIn(e=this.normal,t=0){return{animation:`fadeIn ${e}ms ${this.smooth} ${t}ms forwards`}}static fadeOut(e=this.fast,t=0){return{animation:`fadeOut ${e}ms ${this.accelerate} ${t}ms forwards`}}static scaleUp(e=this.normal,t=0){return{animation:`scaleUp ${e}ms ${this.overshoot} ${t}ms forwards`}}static slideFromBottom(e=this.normal,t=0){return{animation:`slideFromBottom ${e}ms ${this.smooth} ${t}ms forwards`}}static slideFromTop(e=this.normal,t=0){return{animation:`slideFromTop ${e}ms ${this.smooth} ${t}ms forwards`}}static slideFromLeft(e=this.normal,t=0){return{animation:`slideFromLeft ${e}ms ${this.smooth} ${t}ms forwards`}}static slideFromRight(e=this.normal,t=0){return{animation:`slideFromRight ${e}ms ${this.smooth} ${t}ms forwards`}}static pulse(e=this.slow){return{animation:`pulse ${e}ms ${this.easeInOut} infinite`}}static heartbeat(e=this.cinematic){return{animation:`heartbeat ${e}ms ${this.easeInOut} infinite`}}static spin(e=this.cinematic){return{animation:`spin ${e}ms ${this.linear} infinite`}}static shimmer(e=1500){return{animation:`shimmer ${e}ms ${this.linear} infinite`,backgroundSize:"200% 100%"}}static bounceAnimation(e=this.slow){return{animation:`bounce ${e}ms ${this.easeInOut} infinite`}}static shake(e=500){return{animation:`shake ${e}ms ${this.easeInOut}`}}static modalEnter(e=this.normal){return{animation:`modalEnter ${e}ms ${this.snappy} forwards`}}static modalExit(e=this.fast){return{animation:`modalExit ${e}ms ${this.accelerate} forwards`}}static backdropEnter(e=this.normal){return{animation:`backdropEnter ${e}ms ${this.smooth} forwards`}}static getAllKeyframes(){return`\n      ${this.fadeInKeyframes}\n      ${this.fadeOutKeyframes}\n      ${this.scaleUpKeyframes}\n      ${this.scaleDownKeyframes}\n      ${this.slideFromBottomKeyframes}\n      ${this.slideFromTopKeyframes}\n      ${this.slideFromLeftKeyframes}\n      ${this.slideFromRightKeyframes}\n      ${this.pulseKeyframes}\n      ${this.heartbeatKeyframes}\n      ${this.spinKeyframes}\n      ${this.shimmerKeyframes}\n      ${this.bounceKeyframes}\n      ${this.shakeKeyframes}\n      ${this.modalEnterKeyframes}\n      ${this.modalExitKeyframes}\n      ${this.backdropEnterKeyframes}\n    `}}st.instant=50,st.fast=150,st.normal=300,st.slow=500,st.slower=700,st.cinematic=1e3,st.smooth="cubic-bezier(0.65, 0, 0.35, 1)",st.snappy="cubic-bezier(0.33, 1, 0.68, 1)",st.bounce="cubic-bezier(0.68, -0.55, 0.265, 1.55)",st.overshoot="cubic-bezier(0.34, 1.56, 0.64, 1)",st.decelerate="cubic-bezier(0, 0, 0.2, 1)",st.accelerate="cubic-bezier(0.4, 0, 1, 1)",st.anticipate="cubic-bezier(0.36, 0, 0.66, -0.56)",st.linear="linear",st.emphasizedEnter="cubic-bezier(0.16, 1, 0.3, 1)",st.emphasizedExit="cubic-bezier(0.7, 0, 0.84, 0)",st.easeInOut="ease-in-out",st.easeOut="ease-out",st.easeIn="ease-in",st.defaultSpring={mass:1,stiffness:300,damping:25},st.bouncySpring={mass:1,stiffness:350,damping:15},st.stiffSpring={mass:1,stiffness:500,damping:35},st.gentleSpring={mass:1.5,stiffness:200,damping:25},st.snappySpring={mass:.8,stiffness:400,damping:20},st.fadeInKeyframes="\n    @keyframes fadeIn {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n  ",st.fadeOutKeyframes="\n    @keyframes fadeOut {\n      from { opacity: 1; }\n      to { opacity: 0; }\n    }\n  ",st.scaleUpKeyframes="\n    @keyframes scaleUp {\n      from { transform: scale(0.95); opacity: 0; }\n      to { transform: scale(1); opacity: 1; }\n    }\n  ",st.scaleDownKeyframes="\n    @keyframes scaleDown {\n      from { transform: scale(1); opacity: 1; }\n      to { transform: scale(0.95); opacity: 0; }\n    }\n  ",st.slideFromBottomKeyframes="\n    @keyframes slideFromBottom {\n      from { transform: translateY(20px); opacity: 0; }\n      to { transform: translateY(0); opacity: 1; }\n    }\n  ",st.slideFromTopKeyframes="\n    @keyframes slideFromTop {\n      from { transform: translateY(-20px); opacity: 0; }\n      to { transform: translateY(0); opacity: 1; }\n    }\n  ",st.slideFromLeftKeyframes="\n    @keyframes slideFromLeft {\n      from { transform: translateX(-20px); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n  ",st.slideFromRightKeyframes="\n    @keyframes slideFromRight {\n      from { transform: translateX(20px); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n  ",st.pulseKeyframes="\n    @keyframes pulse {\n      0%, 100% { transform: scale(1); }\n      50% { transform: scale(1.05); }\n    }\n  ",st.heartbeatKeyframes="\n    @keyframes heartbeat {\n      0% { transform: scale(1); }\n      14% { transform: scale(1.15); }\n      28% { transform: scale(1); }\n      42% { transform: scale(1.1); }\n      70%, 100% { transform: scale(1); }\n    }\n  ",st.spinKeyframes="\n    @keyframes spin {\n      from { transform: rotate(0deg); }\n      to { transform: rotate(360deg); }\n    }\n  ",st.shimmerKeyframes="\n    @keyframes shimmer {\n      0% { background-position: -200% 0; }\n      100% { background-position: 200% 0; }\n    }\n  ",st.bounceKeyframes="\n    @keyframes bounce {\n      0%, 100% { transform: translateY(0); }\n      50% { transform: translateY(-10px); }\n    }\n  ",st.shakeKeyframes="\n    @keyframes shake {\n      0%, 100% { transform: translateX(0); }\n      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }\n      20%, 40%, 60%, 80% { transform: translateX(5px); }\n    }\n  ",st.modalEnterKeyframes="\n    @keyframes modalEnter {\n      from {\n        opacity: 0;\n        transform: scale(0.95) translateY(10px);\n      }\n      to {\n        opacity: 1;\n        transform: scale(1) translateY(0);\n      }\n    }\n  ",st.modalExitKeyframes="\n    @keyframes modalExit {\n      from {\n        opacity: 1;\n        transform: scale(1) translateY(0);\n      }\n      to {\n        opacity: 0;\n        transform: scale(0.95) translateY(10px);\n      }\n    }\n  ",st.backdropEnterKeyframes="\n    @keyframes backdropEnter {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n  ",st.modalEnterConfig={duration:st.normal,easing:st.snappy,fadeFrom:0,fadeTo:1,scaleFrom:.95,scaleTo:1,slideFromY:10,slideToY:0},st.modalExitConfig={duration:st.fast,easing:st.accelerate,fadeFrom:1,fadeTo:0,scaleFrom:1,scaleTo:.95,slideFromY:0,slideToY:10},st.toastEnterConfig={duration:st.fast,easing:st.overshoot,fadeFrom:0,fadeTo:1,scaleFrom:.8,scaleTo:1,slideFromY:-20,slideToY:0},st.buttonPressConfig={duration:st.instant,easing:st.easeOut,scaleFrom:1,scaleTo:.95},st.hoverScaleConfig={duration:st.fast,easing:st.easeOut,scaleFrom:1,scaleTo:1.02};const it=st;class ct{constructor(){}static circular(e){return{borderRadius:`${e}px`}}static top(e){return{borderTopLeftRadius:`${e}px`,borderTopRightRadius:`${e}px`,borderBottomLeftRadius:0,borderBottomRightRadius:0}}static bottom(e){return{borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:`${e}px`,borderBottomRightRadius:`${e}px`}}static left(e){return{borderTopLeftRadius:`${e}px`,borderTopRightRadius:0,borderBottomLeftRadius:`${e}px`,borderBottomRightRadius:0}}static right(e){return{borderTopLeftRadius:0,borderTopRightRadius:`${e}px`,borderBottomLeftRadius:0,borderBottomRightRadius:`${e}px`}}static custom(e,t,r,a){return{borderRadius:`${e}px ${t}px ${r}px ${a}px`}}static subtle(e=!1){return{border:e?"1px solid rgba(255, 255, 255, 0.08)":"1px solid rgba(0, 0, 0, 0.06)"}}static standard(e=!1){return{border:`1px solid ${e?Pe.dividerDark:Pe.divider}`}}static emphasized(e=!1,t){return{border:`2px solid ${t??(e?Pe.primaryDark:Pe.primary)}`}}static focusRing(e=!1,t,r=ct.lg){return{borderRadius:`${r}px`,border:`2px solid ${t??Pe.focusRing(e)}`,boxShadow:`0 0 8px 2px ${Pe.hexToRgba(t??(e?Pe.primaryDark:Pe.primary),.3)}`}}static error(e=!1){return{border:`2px solid ${e?Pe.dangerLight:Pe.danger}`}}static success(e=!1){return{border:`2px solid ${e?Pe.successLight:Pe.success}`}}static warning(e=!1){return{border:`2px solid ${e?Pe.warningLight:Pe.warning}`}}static info(e=!1){return{border:`2px solid ${e?Pe.infoLight:Pe.info}`}}static gradientBorder(e,t=2,r=ct.lg){return{position:"relative",borderRadius:`${r}px`,padding:`${t}px`,background:e}}static gradientBorderInner(e=!1,t=ct.lg){return{borderRadius:t-1+"px",backgroundColor:e?Pe.surfaceDark:Pe.surface,width:"100%",height:"100%"}}static brandGradientBorder(e=!1,t=2,r=ct.lg){return this.gradientBorder(Pe.brandGradient(e),t,r)}static accentGradientBorder(e=!1,t=2,r=ct.lg){return this.gradientBorder(Pe.accentGradient(e),t,r)}static focusOutline(e=!1,t){return{outline:`2px solid ${t??(e?Pe.primaryDark:Pe.primary)}`,outlineOffset:"2px"}}static noOutline(){return{outline:"none"}}static horizontalDivider(e=!1){return{width:"100%",height:"1px",backgroundColor:e?Pe.dividerDark:Pe.divider}}static verticalDivider(e=!1){return{width:"1px",height:"100%",backgroundColor:e?Pe.dividerDark:Pe.divider}}static gradientDivider(e=!1){return{width:"100%",height:"1px",background:Pe.brandGradient(e)}}}ct.none=0,ct.xs=4,ct.sm=8,ct.md=12,ct.lg=16,ct.xl=20,ct.xxl=24,ct.xxxl=32,ct.full=9999;const dt=ct,lt=({isShareEventModalVisible:e,onShareEventClose:t,position:r="topRight",roomName:a,adminPasscode:n,islevel:o,eventType:s,localLink:i,shareButtons:c=!0,isDarkMode:d=!0,enableGlassmorphism:l=!0,renderMode:u="modal",renderMeetingId:p,renderMeetingPasscode:m,renderShareButtons:g,shareButtonsComponentProps:h})=>{const[f,b]=(0,de.useState)(!1),[y,x]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>b(!0),50);return()=>clearTimeout(e)}b(!1)},[e]);const v=(0,de.useMemo)(()=>{const e=h?.getShareUrl;if(e)return e({meetingID:a,eventType:s,localLink:i});const t="chat"===s?"chat":"broadcast"===s?"broadcast":"meeting";return i&&!i.includes("mediasfu.com")?`${i}/meeting/${a}`:`https://${t}.mediasfu.com/${t}/${a}`},[s,i,a,h?.getShareUrl]),S=(0,de.useCallback)(async()=>{try{await navigator.clipboard.writeText(v),x(!0),setTimeout(()=>x(!1),2e3)}catch(e){console.error("Failed to copy link:",e)}},[v]),R=(0,de.useMemo)(()=>{const e=h?.shareButtons;return e&&e.length>0?e.filter(e=>!1!==e.show):[{icon:y?pe.faCheck:pe.faCopy,action:S,show:!0,color:y?Pe.success:Pe.primary,tooltip:y?"Copied!":"Copy link"},{icon:pe.faEnvelope,action:()=>{const e=`mailto:?subject=Join my meeting&body=Here is the link: ${v}`;window.open(e,"_blank")},show:!0,color:"#ea4335",tooltip:"Share via email"},{icon:Oe.faFacebook,action:()=>{const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(v)}`;window.open(e,"_blank","width=600,height=400")},show:!0,color:"#1877F2",tooltip:"Share on Facebook"},{icon:Oe.faTwitter,action:()=>{const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(`Join my meeting: ${v}`)}`;window.open(e,"_blank","width=600,height=400")},show:!0,color:"#1DA1F2",tooltip:"Share on Twitter"},{icon:Oe.faWhatsapp,action:()=>{const e=`https://wa.me/?text=${encodeURIComponent(`Join my meeting: ${v}`)}`;window.open(e,"_blank")},show:!0,color:"#25D366",tooltip:"Share on WhatsApp"},{icon:Oe.faTelegram,action:()=>{const e=`https://t.me/share/url?url=${encodeURIComponent(v)}&text=${encodeURIComponent("Join my meeting")}`;window.open(e,"_blank")},show:!0,color:"#0088CC",tooltip:"Share on Telegram"}]},[h?.shareButtons,v,S,y]),w=(0,de.useCallback)(async e=>{await Promise.resolve(e.action())},[]),k={display:"flex",flexDirection:"column",height:"100%",color:d?"#FFFFFF":"#1F2937"},C={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(d)}`},j={...nt.getTitleMedium(d),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},P={background:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",color:d?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},M={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.md}px`},I={background:d?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:ct.md,padding:`${rt.sm}px`,border:"1px solid "+(d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)")},A={...nt.getLabelMedium(d),color:d?"rgba(255,255,255,0.75)":"rgba(0,0,0,0.7)",marginBottom:rt.xs},T={padding:`${rt.sm}px ${rt.md}px`,background:d?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.02)",borderRadius:ct.sm,border:`1px solid ${Pe.glassBorder(d)}`},F=()=>(0,ce.jsxs)("div",{style:k,children:[(0,ce.jsxs)("div",{style:C,children:[(0,ce.jsxs)("h2",{style:j,children:[(0,ce.jsx)("div",{style:{padding:rt.xs,background:`linear-gradient(135deg, ${Pe.secondary}, ${Pe.secondary}B3)`,borderRadius:ct.sm,boxShadow:`0 4px 12px ${Pe.secondary}80`,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faShareAlt,color:"white",size:"sm"})}),"Share Event"]}),(0,ce.jsx)("button",{style:P,onClick:t,onMouseEnter:e=>{e.currentTarget.style.background=d?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.background=d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})]}),(0,ce.jsxs)("div",{style:M,children:[(0,ce.jsxs)("div",{style:I,children:[(0,ce.jsx)("div",{style:A,children:"Meeting ID"}),(0,ce.jsx)("div",{style:T,children:p?p({defaultMeetingId:(0,ce.jsx)(Je,{meetingID:a,labelProps:{style:{color:d?"rgba(255,255,255,0.7)":"#333",fontWeight:"bold"}},inputProps:{style:{color:d?"#fff":"#000",backgroundColor:d?"rgba(255,255,255,0.08)":"#f0f0f0"}},copyIconColors:{default:d?"rgba(255,255,255,0.7)":"#333",copied:Pe.success}}),roomName:a}):(0,ce.jsx)(Je,{meetingID:a,labelProps:{style:{color:d?"rgba(255,255,255,0.7)":"#333",fontWeight:"bold"}},inputProps:{style:{color:d?"#fff":"#000",backgroundColor:d?"rgba(255,255,255,0.08)":"#f0f0f0"}},copyIconColors:{default:d?"rgba(255,255,255,0.7)":"#333",copied:Pe.success}})})]}),"2"===o&&n&&(0,ce.jsxs)("div",{style:I,children:[(0,ce.jsx)("div",{style:A,children:"Admin Passcode"}),(0,ce.jsx)("div",{style:T,children:m?m({defaultMeetingPasscode:(0,ce.jsx)(tt,{meetingPasscode:n,labelProps:{style:{color:d?"rgba(255,255,255,0.7)":"#333",fontWeight:"bold"}},inputProps:{style:{color:d?"#fff":"#000",backgroundColor:d?"rgba(255,255,255,0.08)":"#f0f0f0"}}}),adminPasscode:n,isHost:!0}):(0,ce.jsx)(tt,{meetingPasscode:n,labelProps:{style:{color:d?"rgba(255,255,255,0.7)":"#333",fontWeight:"bold"}},inputProps:{style:{color:d?"#fff":"#000",backgroundColor:d?"rgba(255,255,255,0.08)":"#f0f0f0"}}})})]}),c&&(0,ce.jsxs)("div",{style:I,children:[(0,ce.jsx)("div",{style:A,children:"Share"}),g?g({defaultShareButtons:(0,ce.jsx)("div",{style:{display:"flex",gap:rt.sm,flexWrap:"wrap",justifyContent:"center"},children:R.map((e,t)=>(0,ce.jsx)(Ie,{message:e.tooltip||"Share",isDarkMode:d,position:"top",children:(0,ce.jsx)("button",{onClick:()=>w(e),style:{display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,borderRadius:ct.sm,background:`${e.color||Pe.primary}20`,border:"none",cursor:"pointer",color:e.color||Pe.primary,transition:`all ${st.fast}ms ${st.smooth}`},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.background=`${e.color||Pe.primary}30`},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.background=`${e.color||Pe.primary}20`},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon})})},t))}),hasShareButtons:!0}):(0,ce.jsx)("div",{style:{display:"flex",gap:rt.sm,flexWrap:"wrap",justifyContent:"center"},children:R.map((e,t)=>(0,ce.jsx)(Ie,{message:e.tooltip||"Share",isDarkMode:d,position:"top",children:(0,ce.jsx)("button",{onClick:()=>w(e),style:{display:"flex",alignItems:"center",justifyContent:"center",width:36,height:36,borderRadius:ct.sm,background:`${e.color||Pe.primary}20`,border:"none",cursor:"pointer",color:e.color||Pe.primary,transition:`all ${st.fast}ms ${st.smooth}`},onMouseEnter:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.background=`${e.color||Pe.primary}30`},onMouseLeave:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.background=`${e.color||Pe.primary}20`},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon})})},t))})]})]})]});if("sidebar"===u||"inline"===u)return F();if(!e)return null;const D={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(0, 0, 0, 0.05)",zIndex:999,opacity:f?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,backdropFilter:"blur(2px)"},N={position:"absolute",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[r]||e.topRight})(),width:"400px",maxWidth:"90vw",maxHeight:"80vh",backgroundColor:d?"rgba(0, 0, 0, 0.35)":"rgba(255, 255, 255, 0.45)",backdropFilter:l?"blur(20px)":"none",borderRadius:ct.lg,border:`1px solid ${Pe.glassBorder(d)}`,boxShadow:`0 20px 50px rgba(0,0,0,0.3), 0 0 0 1px ${Pe.glassBorder(d)}`,transform:f?"scale(1)":"scale(0.95)",opacity:f?1:0,transition:`all ${st.normal}ms ${st.snappy}`,overflow:"hidden"};return(0,ce.jsx)("div",{style:D,onClick:t,children:(0,ce.jsx)("div",{style:N,onClick:e=>e.stopPropagation(),children:F()})})},ut=({customWidth:e,customHeight:t,parameters:r,showAspect:a,isDarkModeValue:n})=>{const o=(0,de.useMemo)(()=>n??r.isDarkModeValue??!0,[n,r.isDarkModeValue]);let{socket:s,showAlert:i,islevel:c,roomName:d,shapes:l,useImageBackground:u,redoStack:p,undoStack:m,whiteboardStarted:g,whiteboardEnded:h,whiteboardUsers:f,participants:b,screenId:y,recordStarted:x,recordStopped:v,recordPaused:S,recordResumed:R,recordingMediaOptions:w,member:k,shareScreenStarted:C,canvasWhiteboard:j,targetResolution:P,targetResolutionHost:M,updateShapes:I,updateUseImageBackground:A,updateRedoStack:T,updateUndoStack:F,updateWhiteboardStarted:D,updateWhiteboardEnded:N,updateWhiteboardUsers:L,updateParticipants:V,updateScreenId:B,updateShareScreenStarted:$,updateCanvasWhiteboard:E,onScreenChanges:W,captureCanvasStream:H}=r;const O=(0,de.useRef)("pan"),z=(0,de.useRef)(!1),U=(0,de.useRef)(!1),q=(0,de.useRef)(!1),_=(0,de.useRef)(0),G=(0,de.useRef)(0),Y=(0,de.useRef)(0),K=(0,de.useRef)(0),J=(0,de.useRef)([]),X=(0,de.useRef)(null),Z=(0,de.useRef)(null),Q=(0,de.useRef)(!1),te=(0,de.useRef)(0),re=(0,de.useRef)(0),ae=(0,de.useRef)(1),ne=(0,de.useRef)(.25),oe=(0,de.useRef)(1.75),se=(0,de.useRef)(10),ie=(0,de.useRef)(6),le=(0,de.useRef)(6),me=(0,de.useRef)("solid"),ge=(0,de.useRef)("#000000"),he=(0,de.useRef)("Arial"),fe=(0,de.useRef)(20),be=(0,de.useRef)(null),ye=(0,de.useRef)(new Image),xe=(0,de.useRef)(!0),ve=(0,de.useRef)(null),Se=(0,de.useRef)(!0),Re=(0,de.useRef)(null),we=(0,de.useRef)(null),ke=(0,de.useRef)(null),Ce=(0,de.useRef)(null),je=(0,de.useRef)(null),Pe="https://mediasfu.com/images/svg/graph_paper.jpg",Me=(0,de.useRef)(1280),Ae=(0,de.useRef)(720),Te=(0,de.useRef)(!1);let Fe=Re.current,De=Fe?Fe.getContext("2d"):null;(0,de.useEffect)(()=>{const e=new Image;if(e.src=Pe,e.crossOrigin="anonymous",e.onload=()=>{ye.current=e,Ye()},Re.current){Fe=Re.current;try{"qhd"==P||"qhd"==M?(Me.current=1920,Ae.current=1080):"fhd"!=P&&"fhd"!=M||(Me.current=1920,Ae.current=1080),Fe.width=Me.current,Fe.height=Ae.current,Te.current=!0}catch{}De=Fe.getContext("2d"),j=Fe,E(j)}return Fe?.addEventListener("mousedown",Ee),Fe?.addEventListener("mousemove",Oe),Fe?.addEventListener("mouseup",ze),Fe?.addEventListener("wheel",Ge),Fe?.addEventListener("click",$e),Fe?.addEventListener("touchstart",Ne),Fe?.addEventListener("touchmove",Le),Fe?.addEventListener("touchend",Ve),document.addEventListener("mousedown",Be),()=>{Fe?.removeEventListener("mousedown",Ee),Fe?.removeEventListener("mousemove",Oe),Fe?.removeEventListener("mouseup",ze),Fe?.removeEventListener("wheel",Ge),Fe?.removeEventListener("click",$e),Fe?.removeEventListener("touchstart",Ne),Fe?.removeEventListener("touchmove",Le),Fe?.removeEventListener("touchend",Ve),document.removeEventListener("mousedown",Be)}},[l,te.current,re.current,ae.current]);const Ne=e=>{e.preventDefault();const t=e.touches[0],r=new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY});Fe?.dispatchEvent(r)},Le=e=>{e.preventDefault();const t=e.touches[0],r=new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY});Fe?.dispatchEvent(r)},Ve=e=>{e.preventDefault();const t=new MouseEvent("mouseup",{});Fe?.dispatchEvent(t)},Be=e=>{ve.current&&!e.target.closest(".btn-group")&&(ve.current=null)},$e=e=>{if("text"===O.current){const t=we.current;t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",t.style.display="block",t.focus(),t.addEventListener("keypress",function r(a){if("Enter"===a.key){const a=t.value;t.style.display="none",t.value="",l.push({type:"text",text:a,x:(e.offsetX-te.current)/ae.current,y:(e.offsetY-re.current)/ae.current,color:ge.current,font:he.current,fontSize:fe.current}),Ye(),I(l),t.removeEventListener("keypress",r),s.emit("updateBoardAction",{action:"text",payload:{type:"text",text:a,x:(e.offsetX-te.current)/ae.current,y:(e.offsetY-re.current)/ae.current,color:ge.current,font:he.current,fontSize:fe.current}},lt)}})}},Ee=e=>{try{z.current=!0,_.current=(e.offsetX-te.current)/ae.current,G.current=(e.offsetY-re.current)/ae.current,"erase"===O.current?Ue(_.current,G.current):"draw"===O.current||"freehand"===O.current?(De.beginPath(),De.moveTo(_.current,G.current),"freehand"===O.current&&(J.current=[{x:_.current,y:G.current}])):"pan"===O.current?(U.current=!0,q.current=!1):"select"===O.current&&(Z.current=at(_.current,G.current)??null,Z.current?(q.current=!0,Q.current=Z.current.isCenter||!1):(X.current=et(_.current,G.current)??null,X.current&&(Ye(),tt(X.current))))}catch(e){console.error("Error in startDrawing:",e)}},We=()=>{if(g&&!h){const e=f.find(e=>e.name===k);return!!(e&&e.useBoard||"2"==c)||(i?.({message:"You are not allowed to use the whiteboard. Please ask the host to assign you.",type:"danger"}),!1)}return!0},He=e=>{if("pan"===e||We()){if(O.current=e,!Fe&&Re.current)Fe=Re.current;else if(!Fe)return;Fe.style.cursor="pan"===e?"grab":"select"===e?"pointer":"crosshair","freehand"!==e&&J.current.length>0&&(l.push({type:"freehand",points:J.current,color:ge.current,thickness:ie.current}),I(l),J.current=[],Qe())}},Oe=e=>{if(!Te.current)try{"qhd"==P||"qhd"==M?(Me.current=1920,Ae.current=1080):"fhd"!=P&&"fhd"!=M||(Me.current=1920,Ae.current=1080),Fe.width=Me.current,Fe.height=Ae.current,Te.current=!0,E(Fe)}catch{}if(z.current){if(Y.current=(e.offsetX-te.current)/ae.current,K.current=(e.offsetY-re.current)/ae.current,"draw"===O.current||"freehand"===O.current||"shape"===O.current){if(Y.current>Me.current||K.current>Ae.current)return void(Se.current=!1);Se.current=!0}if("erase"===O.current)Ue(Y.current,K.current);else if("draw"===O.current)De.clearRect(0,0,Fe.width,Fe.height),Ye(),Ke(_.current,G.current,Y.current,K.current,ge.current,le.current,me.current);else if("freehand"===O.current)De.lineTo(Y.current,K.current),De.strokeStyle=ge.current,De.lineWidth=ie.current,De.stroke(),J.current.push({x:Y.current,y:K.current});else if("shape"===O.current)De.clearRect(0,0,Fe.width,Fe.height),Ye(),Ze(be.current,_.current,G.current,Y.current,K.current,ge.current,le.current,me.current);else if("pan"===O.current&&U.current){q.current=!0;const t=e.clientX-_.current,r=e.clientY-G.current;te.current+=t,re.current+=r,_.current=e.clientX,G.current=e.clientY,De.setTransform(ae.current,0,0,ae.current,te.current,re.current),Ye()}else if("select"===O.current&&X.current){if(De.clearRect(0,0,Fe.width,Fe.height),Q.current){const e=Y.current-_.current,t=K.current-G.current;ot(X.current,e,t),_.current=Y.current,G.current=K.current}else q.current&&nt(X.current,Z.current,Y.current,K.current);Ye(),tt(X.current)}}},ze=()=>{if(z.current=!1,U.current=!1,q.current=!1,De.closePath(),"draw"===O.current&&Se.current)l.push({type:"line",x1:_.current,y1:G.current,x2:Y.current,y2:K.current,color:ge.current,thickness:le.current,lineType:me.current}),I(l),Qe(),s.emit("updateBoardAction",{action:"draw",payload:{type:"line",x1:_.current,y1:G.current,x2:Y.current,y2:K.current,color:ge.current,thickness:le.current,lineType:me.current}},lt);else if("freehand"===O.current&&Se.current)l.push({type:"freehand",points:J.current,color:ge.current,thickness:ie.current}),I(l),s.emit("updateBoardAction",{action:"draw",payload:{type:"freehand",points:J.current,color:ge.current,thickness:ie.current}},lt),J.current=[],Qe();else if("shape"===O.current&&Se.current)l.push({type:be.current,x1:_.current,y1:G.current,x2:Y.current,y2:K.current,color:ge.current,thickness:le.current,lineType:me.current}),I(l),Qe(),s.emit("updateBoardAction",{action:"shape",payload:{type:be.current,x1:_.current,y1:G.current,x2:Y.current,y2:K.current,color:ge.current,thickness:le.current,lineType:me.current}},lt);else if("select"===O.current){if(X.current&&!Q.current&&!q.current){const e=et(Y.current,K.current);e&&(X.current=e,Ye(),tt(e))}X.current&&s.emit("updateBoardAction",{action:"shapes",payload:{shapes:l}},lt),Qe()}},Ue=(e,t)=>{De.save(),De.globalCompositeOperation="destination-out",De.beginPath(),De.arc(e,t,se.current/2,0,2*Math.PI,!1),De.fill(),De.restore();let r=!1;l=l.map(a=>{if("freehand"===a.type)return{...a,points:a.points.filter(a=>{const n=Math.sqrt(Math.pow(a.x-e,2)+Math.pow(a.y-t,2));return n<=se.current/2?(r=!0,!1):n>se.current/2})};if("line"===a.type){if(qe(e,t,a.x1,a.y1,a.x2,a.y2,se.current/2))return r=!0,null}else if("text"===a.type){const n=De.measureText(a.text).width;if(e>a.x&&e<a.x+n&&t>a.y-a.fontSize&&t<a.y)return r=!0,null}else if("image"===a.type){if(e>a.x1&&e<a.x2&&t>a.y1&&t<a.y2)return r=!0,null}else if(e>a.x1&&e<a.x2&&t>a.y1&&t<a.y2)return r=!0,null;return a}).filter(e=>e&&("freehand"!==e.type||e.points.length>0)),I(l),Ye(),r&&s.emit("updateBoardAction",{action:"shapes",payload:{shapes:l}},lt)},qe=(e,t,r,a,n,o,s)=>{const i=n-r,c=o-a,d=Math.sqrt(i*i+c*c),l=((e-r)*i+(t-a)*c)/(d*d),u=r+l*i,p=a+l*c;return Math.sqrt(Math.pow(e-u,2)+Math.pow(t-p,2))<=s},_e=(e,t={clientX:Fe.width/2,clientY:Fe.height/2})=>{if(10===e)ae.current=1,te.current=0,re.current=0;else{let r=ae.current*e;r<ne.current?r=ne.current:r>oe.current&&(r=oe.current);const a=Fe.getBoundingClientRect(),n=(t.clientX-a.left)/a.width,o=(t.clientY-a.top)/a.height,s=n*Fe.width*(1-e),i=o*Fe.height*(1-e);ae.current=r,te.current=te.current*e+s,re.current=re.current*e+i;const c=Fe.width*(ae.current-1)/ae.current,d=Fe.height*(ae.current-1)/ae.current;te.current=Math.min(Math.max(te.current,-c),0),re.current=Math.min(Math.max(re.current,-d),0)}De.setTransform(ae.current,0,0,ae.current,te.current,re.current),Ye()},Ge=e=>{e.preventDefault(),e.deltaY<0?_e(1.2,e):_e(.8,e)},Ye=()=>{De.clearRect(0,0,Fe.width,Fe.height),De.save(),De.setTransform(ae.current,0,0,ae.current,te.current,re.current),u?De.drawImage(ye.current,-te.current/ae.current,-re.current/ae.current,Fe.width/ae.current,Fe.height/ae.current):(De.fillStyle="#fff",De.fillRect(-te.current/ae.current,-re.current/ae.current,Fe.width/ae.current,Fe.height/ae.current)),l.forEach(e=>{"line"===e.type?Ke(e.x1,e.y1,e.x2,e.y2,e.color,e.thickness,e.lineType):"freehand"===e.type?Je(e.points,e.color,e.thickness):"text"===e.type?(De.font=`${e.fontSize}px ${e.font}`,De.fillStyle=e.color,De.fillText(e.text,e.x,e.y)):"image"===e.type?De.drawImage(e.img,e.x1,e.y1,e.x2-e.x1,e.y2-e.y1):Ze(e.type,e.x1,e.y1,e.x2,e.y2,e.color,e.thickness,e.lineType)}),De.restore(),(()=>{De.save(),De.setTransform(1,0,0,1,0,0),De.strokeStyle="red",De.lineWidth=5,De.setLineDash([]);const e=20,t=te.current,r=re.current,a=te.current+Me.current*ae.current,n=re.current+Ae.current*ae.current;De.beginPath(),De.moveTo(t,r+e),De.lineTo(t,r),De.lineTo(t+e,r),De.stroke(),De.beginPath(),De.moveTo(a-e,r),De.lineTo(a,r),De.lineTo(a,r+e),De.stroke(),De.beginPath(),De.moveTo(a,n-e),De.lineTo(a,n),De.lineTo(a-e,n),De.stroke(),De.beginPath(),De.moveTo(t+e,n),De.lineTo(t,n),De.lineTo(t,n-e),De.stroke(),De.restore()})()},Ke=(e,t,r,a,n,o,s)=>{De.beginPath(),De.strokeStyle=n,De.lineWidth=o,"dashed"===s?De.setLineDash([10,10]):"dotted"===s?De.setLineDash([2,10]):"dashDot"===s?De.setLineDash([10,5,2,5]):De.setLineDash([]),De.moveTo(e,t),De.lineTo(r,a),De.stroke(),De.setLineDash([])},Je=(e,t,r)=>{if(!(e.length<2)){De.strokeStyle=t,De.lineWidth=r,De.beginPath(),De.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)De.lineTo(e[t].x,e[t].y);De.stroke()}},Xe=(e,t,r,a,n,o)=>{const s=(r+n)/2,i=(a+o)/2,c=Math.min(Math.abs(n-r),Math.abs(o-a))/2,d=2*Math.PI/t;e.beginPath();for(let r=0;r<t;r++){const t=s+c*Math.cos(r*d-Math.PI/2),a=i+c*Math.sin(r*d-Math.PI/2);0===r?e.moveTo(t,a):e.lineTo(t,a)}e.closePath(),e.stroke()},Ze=(e,t,r,a,n,o,s,i,c=null,d=De)=>{if(d.beginPath(),d.strokeStyle=o,d.lineWidth=s,"dashed"===i?d.setLineDash([10,10]):"dotted"===i?d.setLineDash([2,10]):"dashDot"===i?d.setLineDash([10,5,2,5]):d.setLineDash([]),"rectangle"===e)d.strokeRect(t,r,a-t,n-r);else if("circle"===e){const e=Math.sqrt(Math.pow(a-t,2)+Math.pow(n-r,2));d.arc(t,r,e,0,2*Math.PI),d.stroke()}else if("rhombus"===e){const e=(t+a)/2,o=(r+n)/2;d.moveTo(e,r),d.lineTo(a,o),d.lineTo(e,n),d.lineTo(t,o),d.closePath(),d.stroke()}else if("pentagon"===e)Xe(d,5,t,r,a,n);else if("hexagon"===e)Xe(d,6,t,r,a,n);else if("triangle"===e){const e=(t+a)/2;d.moveTo(e,r),d.lineTo(a,n),d.lineTo(t,n),d.closePath(),d.stroke()}else if("square"===e)d.strokeRect(t,r,a-t,a-t);else if("octagon"===e)Xe(d,8,t,r,a,n);else if("oval"===e){const e=Math.abs(a-t)/2,o=Math.abs(n-r)/2,s=(t+a)/2,i=(r+n)/2;d.ellipse(s,i,e,o,0,0,2*Math.PI),d.stroke()}else if("parallelogram"===e){const e=(t+a)/2;d.moveTo(e,r),d.lineTo(a,n),d.lineTo(e,n),d.lineTo(t,r),d.closePath(),d.stroke()}else"image"===e&&d.drawImage(c,t,r,a-t,n-r)},Qe=()=>{m.push(JSON.stringify(l)),F(m)},et=(e,t)=>l.find(r=>{if("freehand"===r.type)return r.points.some(a=>Math.sqrt(Math.pow(a.x-e,2)+Math.pow(a.y-t,2))<r.thickness);if("text"===r.type){De.font=`${r.fontSize}px ${r.font}`;const a=De.measureText(r.text);return e>r.x&&e<r.x+a.width&&t>r.y-r.fontSize&&t<r.y}return r.type,e>r.x1&&e<r.x2&&t>r.y1&&t<r.y2}),tt=e=>{if(!e)return;const t=rt(e);if(De.strokeStyle="red",De.lineWidth=2,De.setLineDash([6,3]),"line"===e.type)De.beginPath(),De.moveTo(e.x1,e.y1),De.lineTo(e.x2,e.y2),De.stroke();else if("circle"===e.type){const t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));De.beginPath(),De.arc(e.x1,e.y1,t,0,2*Math.PI),De.stroke()}else De.strokeRect(e.x1,e.y1,e.x2-e.x1,e.y2-e.y1);De.setLineDash([]),t.forEach(e=>{De.fillStyle=e.isCenter?"blue":"red",De.fillRect(e.x-6,e.y-6,12,12)})},rt=e=>{const t=[];if("line"===e.type)t.push({x:e.x1,y:e.y1}),t.push({x:e.x2,y:e.y2});else if("circle"===e.type){const r=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));t.push({x:e.x1+r,y:e.y1}),t.push({x:e.x1-r,y:e.y1}),t.push({x:e.x1,y:e.y1+r}),t.push({x:e.x1,y:e.y1-r}),t.push({x:e.x1,y:e.y1,isCenter:!0})}else if("text"===e.type){const r=De.measureText(e.text);t.push({x:e.x,y:e.y-e.fontSize,isCenter:!0}),t.push({x:e.x+r.width,y:e.y,isCenter:!1})}else e.type,t.push({x:e.x1,y:e.y1}),t.push({x:e.x2,y:e.y1}),t.push({x:e.x2,y:e.y2}),t.push({x:e.x1,y:e.y2}),t.push({x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2,isCenter:!0});return t.map(e=>({...e,isCenter:e.isCenter||!1}))},at=(e,t)=>{if(X.current)return rt(X.current).find(r=>Math.abs(r.x-e)<6&&Math.abs(r.y-t)<6)},nt=(e,t,r,a)=>{if("line"===e.type)t.x===e.x1&&t.y===e.y1?(e.x1=r,e.y1=a):(e.x2=r,e.y2=a);else if("circle"===e.type){const t=r-e.x1,n=a-e.y1,o=Math.sqrt(t*t+n*n);e.x2=e.x1+o,e.y2=e.y1}else if("text"===e.type)if(t.isCenter)e.x=r,e.y=a;else{const t=De.measureText(e.text);e.x=r-t.width,e.y=a}else if("image"===e.type)if(t.isCenter){const t=r-(e.x1+e.x2)/2,n=a-(e.y1+e.y2)/2;ot(e,t,n)}else t.x===e.x1&&t.y===e.y1?(e.x1=r,e.y1=a):t.x===e.x2&&t.y===e.y1?(e.x2=r,e.y1=a):t.x===e.x2&&t.y===e.y2?(e.x2=r,e.y2=a):(e.x1=r,e.y2=a);else if(t.isCenter){const t=r-(e.x1+e.x2)/2,n=a-(e.y1+e.y2)/2;ot(e,t,n)}else t.x===e.x1&&t.y===e.y1?(e.x1=r,e.y1=a):t.x===e.x2&&t.y===e.y1?(e.x2=r,e.y1=a):t.x===e.x2&&t.y===e.y2?(e.x2=r,e.y2=a):(e.x1=r,e.y2=a);Ye()},ot=(e,t,r)=>{"line"===e.type||"circle"===e.type?(e.x1+=t,e.y1+=r,e.x2+=t,e.y2+=r):"freehand"===e.type?e.points.forEach(e=>{e.x+=t,e.y+=r}):"text"===e.type?(e.x+=t,e.y+=r):(e.type,e.x1+=t,e.y1+=r,e.x2+=t,e.y2+=r)},st=e=>{const t=Ce.current;t.href=e.toDataURL(),t.download="whiteboard.png",t.click()},it=(e,t=De)=>{t.beginPath(),t.strokeStyle=e.color,t.lineWidth=e.thickness||2,t.fillStyle=e.color,t.font=`${e.fontSize}px ${e.font}`;const r=e.lineType?e.lineType:"solid";switch("dashed"===r?t.setLineDash([10,10]):"dotted"===r?t.setLineDash([2,10]):"dashDot"===r?t.setLineDash([10,5,2,5]):t.setLineDash([]),e.type){case"line":t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2);break;case"freehand":try{t.moveTo(e.points[0].x,e.points[0].y),e.points.forEach(e=>t.lineTo(e.x,e.y))}catch(e){console.error(e)}break;case"text":t.fillText(e.text,e.x,e.y);break;case"image":t.drawImage(e.img,e.x1,e.y1,e.x2-e.x1,e.y2-e.y1)}t.stroke()},ct=(e=!0)=>{if(e&&!We())return;u=!u,A(u);const t=ke.current;u?(Fe.style.backgroundImage=`url('${Pe}')`,t.classList.remove("active")):(Fe.style.backgroundImage="none",Fe.style.backgroundColor="white",t.classList.add("active")),Ye(),e&&s.emit("updateBoardAction",{action:"toggleBackground",payload:u},lt)},dt=(e=!0)=>{"2"!=c&&e?i?.({message:"You do not have permission to clear the board",type:"danger"}):0!==l.length&&(l=[],I([]),Ye(),e&&s.emit("updateBoardAction",{action:"clear"},lt))},lt=e=>{e.success||i?.({message:`Whiteboard action failed: ${e.reason}`,type:"danger"})};s instanceof ee.Socket&&(s.on("whiteboardAction",e=>{const{action:t,payload:r}=e;if(!De&&Re.current&&(De=Re.current.getContext("2d"),j=Fe,E(j)),De)switch(t){case"draw":"freehand"===r.type?(Je(r.points,r.color,r.thickness),l.push({type:"freehand",points:r.points,color:r.color,thickness:r.thickness}),I(l)):(Ke(r.x1,r.y1,r.x2,r.y2,r.color,r.thickness,r.lineType),l.push({type:"line",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,color:r.color,thickness:r.thickness,lineType:r.lineType}),I(l));break;case"shape":Ze(r.type,r.x1,r.y1,r.x2,r.y2,r.color,r.thickness,r.lineType),l.push({type:r.type,x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,color:r.color,thickness:r.thickness,lineType:r.lineType}),I(l);break;case"erase":Ue(r.x,r.y);break;case"clear":dt(!1);break;case"uploadImage":{const e=new Image;e.crossOrigin="anonymous",e.onload=function(){const t={type:"image",img:e,src:r.src,x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2};l.push(t),I(l),Ye()},e.src=r.src;break}case"toggleBackground":ct(!1),Ye();break;case"undo":l.length>0&&(p.push(l.pop()),T(p),Ye());break;case"redo":p.length>0&&(l.push(p.pop()),I(l),Ye());break;case"text":l.push({type:"text",text:r.text,x:r.x,y:r.y,color:r.color,font:r.font,fontSize:r.fontSize}),I(l),Ye();break;case"deleteShape":l=l.filter(e=>e!==r),I(l),Ye();break;case"shapes":{const e=l.filter(e=>"image"===e.type);l=r.shapes.map(t=>{if("image"===t.type){const r=e.find(e=>e.src===t.src);if(r)return{...t,img:r.img};{const e=new Image;return e.src=t.src,e.crossOrigin="anonymous",{...t,img:e}}}return t}),I(l),Ye();break}}}),s.on("whiteboardUpdated",async e=>{try{"2"==c&&e.members&&(b=await e.members.filter(e=>0==e.isBanned),V(b)),f=e.whiteboardUsers,L(f);const t=!!f.find(e=>e.name==k&&e.useBoard);if("2"==c||t||h||He("pan"),e.whiteboardData&&Object.keys(e.whiteboardData).length>0){if(e.whiteboardData.shapes){const t=l.filter(e=>"image"===e.type);l=e.whiteboardData.shapes.map(e=>{if("image"===e.type){const r=t.find(t=>t.src===e.src);if(r)return{...e,img:r.img};{const t=new Image;return t.src=e.src,t.crossOrigin="anonymous",{...e,img:t}}}return e}),I(l)}null!=e.whiteboardData.useImageBackground?(u=e.whiteboardData.useImageBackground,A(u)):(u=!0,A(!0)),e.whiteboardData.redoStack&&(p=e.whiteboardData.redoStack,T(p)),e.whiteboardData.undoStack&&(m=e.whiteboardData.undoStack,F(m))}if("started"!=e.status||g)if("ended"==e.status){const e=h,t=g;h=!0,g=!1,D(!1),N(!0),"2"==c&&e||(C=!1,y="",$(!1),B(y),await W({changed:!0,parameters:r}));try{t&&"2"==c&&(x||R)&&(S||v||"video"==w&&await H({parameters:r,start:!1}))}catch(e){console.error(e)}}else"started"==e.status&&g&&(g=!0,h=!1,D(!0),N(!1),C=!0,y=`whiteboard-${d}`,$(!0),B(y),await W({changed:!0,parameters:r}));else g=!0,h=!1,y=`whiteboard-${d}`,D(!0),N(!1),B(y),"2"!=c&&(C=!0,$(C),await W({changed:!0,parameters:r}))}catch(e){console.error("Error in whiteboardUpdated:",e)}}));const ut=e=>{ve.current=ve.current===e?null:e},pt=(e,t,r)=>(0,ce.jsx)("div",{className:"dropdown-menu "+(ve.current?"show":""),children:e.map((e,a)=>(0,ce.jsx)("button",{className:"dropdown-item",onClick:()=>((e,t,r)=>{e(r),ve.current=null,["draw","freehand","shape","text","erase"].includes(t)&&He(t)})(r,t,e.value),style:{padding:"5px"},children:e.label},a))}),mt=()=>{xe.current=!xe.current},gt={backgroundColor:"rgba(229, 231, 235, 0.95)",border:"1px solid rgba(0,0,0,0.08)",borderRadius:"6px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",padding:"6px 10px",fontSize:"14px",color:"#1f2937",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease"};return(0,ce.jsx)("div",{id:"witehboard-interface",style:{position:"relative",display:a?"block":"none",justifyContent:"center",alignItems:"center",border:"1px solid "+(o?"rgba(100, 116, 139, 0.2)":"rgba(0, 0, 0, 0.1)"),backgroundColor:o?"rgba(15, 23, 42, 0.95)":"rgba(248, 250, 252, 0.98)",borderRadius:"8px",width:e,height:t},children:(0,ce.jsxs)("div",{id:"whiteboardContent",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%",overflow:"auto",backgroundColor:"transparent"},children:[xe.current&&(0,ce.jsxs)("div",{className:"toolbar mb-3",id:"toolbar",style:{position:"absolute",top:"5px",left:"140px",zIndex:1e3,backgroundColor:o?"rgba(30, 41, 59, 0.85)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px)",borderRadius:"12px",padding:"6px 10px",boxShadow:o?"0 4px 20px rgba(0,0,0,0.25)":"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid "+(o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"),display:"flex",alignItems:"center",gap:"4px"},children:[(0,ce.jsx)(Ie,{message:"Draw (line thickness)",position:"bottom",isDarkMode:o,children:(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary dropdown-toggle",id:"drawMode",onClick:()=>ut("drawMode"),style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPencilAlt})}),"drawMode"===ve.current&&pt([{label:"XX-Small (3px)",value:3},{label:"X-Small (6px)",value:6},{label:"Small (12px)",value:12},{label:"Medium (18px)",value:18},{label:"Large (24px)",value:24},{label:"X-Large (36px)",value:36}],"draw",e=>{le.current=e})]})}),(0,ce.jsx)(Ie,{message:"Freehand brush",position:"bottom",isDarkMode:o,children:(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary dropdown-toggle",id:"freehandMode",onClick:()=>ut("freehandMode"),style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPaintBrush})}),"freehandMode"===ve.current&&pt([{label:"X-Small (5px)",value:5},{label:"Small (10px)",value:10},{label:"Medium (20px)",value:20},{label:"Large (40px)",value:40},{label:"X-Large (60px)",value:60}],"freehand",e=>{ie.current=e})]})}),(0,ce.jsx)(Ie,{message:"Shapes",position:"bottom",isDarkMode:o,children:(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary dropdown-toggle",id:"shapeMode",onClick:()=>ut("shapeMode"),style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faShapes})}),"shapeMode"===ve.current&&pt([{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/square.svg",alt:"Square",className:"shape-icon"}),value:"square"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/rectangle.svg",alt:"Rectangle",className:"shape-icon"}),value:"rectangle"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/circle.svg",alt:"Circle",className:"shape-icon"}),value:"circle"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/triangle.svg",alt:"Triangle",className:"shape-icon"}),value:"triangle"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/hexagon.svg",alt:"Hexagon",className:"shape-icon"}),value:"hexagon"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/pentagon.svg",alt:"Pentagon",className:"shape-icon"}),value:"pentagon"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/rhombus.svg",alt:"Rhombus",className:"shape-icon"}),value:"rhombus"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/octagon.svg",alt:"Octagon",className:"shape-icon"}),value:"octagon"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/parallelogram.svg",alt:"Parallelogram",className:"shape-icon"}),value:"parallelogram"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/oval.svg",alt:"Oval",className:"shape-icon"}),value:"oval"}],"shape",e=>{be.current=e})]})}),(0,ce.jsx)(Ie,{message:"Select / Move",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary",id:"selectMode",onClick:()=>He("select"),style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMousePointer})})}),(0,ce.jsx)(Ie,{message:"Eraser",position:"bottom",isDarkMode:o,children:(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoard btn-danger dropdown-toggle",id:"eraseMode",onClick:()=>ut("eraseMode"),style:{...gt,background:"linear-gradient(135deg, #EF4444, #DC2626)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faEraser})}),"eraseMode"===ve.current&&pt([{label:"X-Small (5px)",value:5},{label:"Small (10px)",value:10},{label:"Medium (20px)",value:20},{label:"Large (30px)",value:30},{label:"X-Large (60px)",value:60}],"erase",e=>{se.current=e})]})}),(0,ce.jsx)(Ie,{message:"Pan canvas",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-info",id:"panMode",onClick:()=>He("pan"),style:{...gt,background:"linear-gradient(135deg, #06B6D4, #0891B2)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faHandPaper})})}),(0,ce.jsx)("div",{style:{width:1,height:24,background:"rgba(255,255,255,0.2)",margin:"0 4px"}}),(0,ce.jsx)(Ie,{message:"Zoom in",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-success",id:"zoomIn",onClick:e=>_e(1.2,e),style:{...gt,background:"linear-gradient(135deg, #10B981, #059669)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearchPlus})})}),(0,ce.jsx)(Ie,{message:"Reset zoom",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-success",id:"zoomReset",onClick:e=>_e(10,e),style:{...gt,background:"linear-gradient(135deg, #10B981, #059669)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch})})}),(0,ce.jsx)(Ie,{message:"Zoom out",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-success",id:"zoomOut",onClick:e=>_e(.8,e),style:{...gt,background:"linear-gradient(135deg, #10B981, #059669)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearchMinus})})}),(0,ce.jsx)("div",{style:{width:1,height:24,background:"rgba(255,255,255,0.2)",margin:"0 4px"}}),(0,ce.jsx)(Ie,{message:"Add text (font)",position:"bottom",isDarkMode:o,children:(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary dropdown-toggle",id:"addText",onClick:()=>ut("addText"),style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faFont})}),"addText"===ve.current&&pt([{label:"Arial",value:"Arial"},{label:"Times New Roman",value:"Times New Roman"},{label:"Courier New",value:"Courier New"},{label:"Verdana",value:"Verdana"}],"text",e=>{he.current=e})]})}),(0,ce.jsx)(Ie,{message:"Font size",position:"bottom",isDarkMode:o,children:(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary dropdown-toggle",id:"fontSize",onClick:()=>ut("fontSize"),style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTextHeight})}),"fontSize"===ve.current&&pt([{label:"X-Small (5px)",value:5},{label:"Small (10px)",value:10},{label:"Medium (20px)",value:20},{label:"Large (40px)",value:40},{label:"X-Large (60px)",value:60}],"",e=>{fe.current=e})]})}),(0,ce.jsx)("div",{style:{width:1,height:24,background:"rgba(255,255,255,0.2)",margin:"0 4px"}}),(0,ce.jsx)(Ie,{message:"Undo",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary",id:"undo",onClick:()=>{We()&&l.length>0&&(p.push(l.pop()),T(p),Ye(),s.emit("updateBoardAction",{action:"undo"},lt))},style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUndo})})}),(0,ce.jsx)(Ie,{message:"Redo",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary",id:"redo",onClick:()=>{We()&&p.length>0&&(l.push(p.pop()),I(l),Ye(),s.emit("updateBoardAction",{action:"redo"},lt))},style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faRedo})})}),(0,ce.jsx)(Ie,{message:"Save canvas",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary",id:"save",onClick:()=>{const e=je.current,t=e.getContext("2d");e.width=Fe.width,e.height=Fe.height;const r=["freehand","text","image","line"];if(u){const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{t.drawImage(a,0,0,e.width,e.height),l.forEach(e=>{r.includes(e.type)?it(e,t):Ze(e.type,e.x1,e.y1,e.x2,e.y2,e.color,e.thickness,e.lineType,null,t)}),st(e)},a.src=Pe}else t.fillStyle="white",t.fillRect(0,0,e.width,e.height),l.forEach(e=>{r.includes(e.type)?it(e,t):Ze(e.type,e.x1,e.y1,e.x2,e.y2,e.color,e.thickness,e.lineType,null,t)}),st(e)},style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSave})})}),(0,ce.jsx)(Ie,{message:"Delete selected",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-danger",id:"delete",onClick:()=>((e=!0)=>{We()&&X.current&&X.current&&(l=l.filter(e=>e!==X.current),I(l),X.current=null,e&&s.emit("updateBoardAction",{action:"shapes",payload:{shapes:l}},lt),Ye())})(),style:{...gt,background:"linear-gradient(135deg, #EF4444, #DC2626)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTrash})})}),(0,ce.jsx)(Ie,{message:"Clear canvas",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{className:"btn btnBoard btn-secondary",id:"clearCanvas",onClick:()=>dt(),style:gt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})}),(0,ce.jsx)(Ie,{message:"Toggle grid background",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{id:"toggleBackground",ref:ke,className:"btn btnBoard btn-secondary",onClick:()=>ct(),style:gt,children:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/graph.jpg",alt:"Background",className:"toggle-icon",id:"backgroundIcon",style:{width:20,height:20,borderRadius:4}})})}),(0,ce.jsx)("input",{type:"file",id:"uploadBoardImage",accept:"image/*",style:{display:"none"},onChange:e=>((e,t=!0)=>{try{if(!We())return;const r=e.target.files[0];if(r.size>1048576)return void i?.({message:"File size must be less than 1MB",type:"danger"});const a=new FileReader;a.onload=function(e){const a=new Image;a.crossOrigin="anonymous",a.onload=function(){if(a.height>600&&a.height>a.width&&!r.type.includes("jpeg"))return void i?.({message:"For better performance, please upload the image in JPG format.",type:"danger"});let n=350;const o=a.height/a.width;let c=n*o;c>600&&(c=600,n=c/o,n>600&&(n=600));const d={type:"image",img:a,src:e.target.result,x1:50,y1:50,x2:50+n,y2:50+c};l.push(d),I(l),Ye(),t&&s.emit("updateBoardAction",{action:"uploadImage",payload:d},lt)},a.onerror=function(){i?.({message:"Error loading image",type:"danger"})},a.src=e.target.result},a.onerror=function(){i?.({message:"Error reading file",type:"danger"})},a.readAsDataURL(r)}catch(e){console.error("Error in uploadImage:",e)}})(e)}),(0,ce.jsx)(Ie,{message:"Upload image",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("label",{htmlFor:"uploadBoardImage",className:"btn btnBoard btn-primary",style:{...gt,background:"linear-gradient(135deg, #3B82F6, #2563EB)",cursor:"pointer",margin:0},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUpload})})}),(0,ce.jsx)(Ie,{message:"Color picker",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("input",{type:"color",id:"colorPicker",className:"btn",value:ge.current,onChange:e=>{ge.current=e.target.value},style:{width:32,height:32,padding:2,borderRadius:6,border:"2px solid rgba(255,255,255,0.2)",cursor:"pointer"}})}),(0,ce.jsx)(Ie,{message:"Line style",position:"bottom",isDarkMode:o,children:(0,ce.jsxs)("select",{id:"lineTypePicker",className:"custom-select",style:{width:"auto",height:32,fontSize:12,borderRadius:6,background:"rgba(255,255,255,0.1)",color:"#fff",border:"1px solid rgba(255,255,255,0.2)"},onChange:e=>{me.current=e.target.value},children:[(0,ce.jsx)("option",{value:"solid",style:{color:"#000"},children:"Solid"}),(0,ce.jsx)("option",{value:"dashed",style:{color:"#000"},children:"Dashed"}),(0,ce.jsx)("option",{value:"dotted",style:{color:"#000"},children:"Dotted"}),(0,ce.jsx)("option",{value:"dashDot",style:{color:"#000"},children:"Dash-Dot"})]})}),(0,ce.jsx)("div",{style:{width:1,height:24,background:"rgba(255,255,255,0.2)",margin:"0 4px"}}),(0,ce.jsx)(Ie,{message:xe.current?"Collapse toolbar":"Expand toolbar",position:"bottom",isDarkMode:o,children:(0,ce.jsx)("button",{id:"toolbarToggle",className:"btn btnBoard",onClick:mt,style:{...gt,backgroundColor:"rgba(59, 130, 246, 0.9)",color:"#fff"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChevronLeft})})})]}),!xe.current&&(0,ce.jsx)("div",{style:{position:"absolute",top:"8px",right:"8px",zIndex:1e3},children:(0,ce.jsx)(Ie,{message:"Expand toolbar",position:"left",isDarkMode:o,children:(0,ce.jsx)("button",{id:"toolbarToggle",className:"btn btnBoard",style:{...gt,backgroundColor:"rgba(59, 130, 246, 0.9)",color:"#fff"},onClick:mt,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChevronLeft})})})}),(0,ce.jsx)("canvas",{id:"whiteboardCanvas",width:"1280",height:"720",style:{border:"1px solid "+(o?"rgba(100, 116, 139, 0.3)":"rgba(0, 0, 0, 0.15)")},ref:Re}),(0,ce.jsx)("textarea",{id:"textInput",className:"form-control",ref:we,style:{display:"none",position:"absolute"}}),(0,ce.jsx)("a",{href:"# ",ref:Ce,style:{display:"none"},children:"Download"}),(0,ce.jsx)("canvas",{ref:je,style:{display:"none"}})]})})},pt=({parameters:e,showAspect:t})=>{const{updateCanvasScreenboard:r,annotateScreenStream:a,updateIsScreenboardModalVisible:n,showAlert:o,sleep:s,updateAnnotateScreenStream:i}=e,c=(0,de.useRef)("draw"),d=(0,de.useRef)(!1),l=(0,de.useRef)(0),u=(0,de.useRef)(0),p=(0,de.useRef)(0),m=(0,de.useRef)(0),g=(0,de.useRef)([]),h=(0,de.useRef)([]),f=(0,de.useRef)(10),b=(0,de.useRef)(6),y=(0,de.useRef)(6),x=(0,de.useRef)("solid"),v=(0,de.useRef)("#000000"),S=(0,de.useRef)(null),R=(0,de.useRef)(!1),w=(0,de.useRef)(null),k=(0,de.useRef)(null),C=(0,de.useRef)(null),j=(0,de.useRef)(null);let P=k.current,M=P?P.getContext("2d"):null;(0,de.useEffect)(()=>{k.current&&(P=k.current,M=P.getContext("2d"),r(P));const e=e=>L(e,M),t=e=>V(e,M),a=()=>B(M);return P&&(P.addEventListener("mousedown",e),P.addEventListener("mousemove",t),P.addEventListener("mouseup",a),P.addEventListener("mouseout",a),P.addEventListener("touchstart",A),P.addEventListener("touchmove",T),P.addEventListener("touchend",F)),document.addEventListener("mousedown",I),()=>{P&&(P.removeEventListener("mousedown",e),P.removeEventListener("mousemove",t),P.removeEventListener("mouseup",a),P.removeEventListener("mouseout",a),P.removeEventListener("touchstart",A),P.removeEventListener("touchmove",T),P.removeEventListener("touchend",F)),document.removeEventListener("mousedown",I)}},[h.current]);const I=e=>{w.current&&!e.target.closest(".btn-group")&&(w.current=null)},A=e=>{e.preventDefault();const t=e.touches[0],r=new MouseEvent("mousedown",{clientX:t.clientX,clientY:t.clientY});P?.dispatchEvent(r)},T=e=>{e.preventDefault();const t=e.touches[0],r=new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY});P?.dispatchEvent(r)},F=e=>{e.preventDefault();const t=new MouseEvent("mouseup",{});P?.dispatchEvent(t)},D=e=>{w.current=w.current===e?null:e},N=(e,t,r)=>(0,ce.jsx)("div",{className:"dropdown-menu "+(w.current?"show":""),children:e.map((e,a)=>(0,ce.jsx)("button",{className:"dropdown-item",onClick:()=>((e,t,r)=>{e(r),w.current=null,["draw","freehand","shape","erase"].includes(t)&&(c.current=t)})(r,t,e.value),style:{padding:"5px"},children:e.label},a))}),L=(e,t)=>{t&&(d.current=!0,l.current=e.offsetX,u.current=e.offsetY,"erase"===c.current?E(e.offsetX,e.offsetY,t):"draw"!==c.current&&"freehand"!==c.current||(t.beginPath(),t.moveTo(e.offsetX,e.offsetY),"freehand"===c.current&&(g.current=[{x:e.offsetX,y:e.offsetY,color:v.current,thickness:b.current}])))},V=(e,t)=>{t&&d.current&&(p.current=e.offsetX,m.current=e.offsetY,"erase"===c.current?E(e.offsetX,e.offsetY,t):"draw"===c.current?(t.clearRect(0,0,k.current?.width??0,k.current?.height??0),W(t),H(l.current,u.current,e.offsetX,e.offsetY,v.current,y.current,x.current,t)):"freehand"===c.current?(t.lineTo(e.offsetX,e.offsetY),t.strokeStyle=v.current,t.lineWidth=b.current,t.stroke(),g.current.push({x:e.offsetX,y:e.offsetY,color:v.current,thickness:b.current})):"shape"===c.current&&(t.clearRect(0,0,k.current?.width??0,k.current?.height??0),W(t),S.current&&z(S.current,l.current,u.current,e.offsetX,e.offsetY,v.current,y.current,x.current,t)))},B=e=>{e&&(d.current=!1,"draw"===c.current?h.current.push({type:"line",x1:l.current,y1:u.current,x2:p.current,y2:m.current,color:v.current,thickness:y.current,lineType:x.current}):"freehand"===c.current?(h.current.push({type:"freehand",points:g.current,color:v.current,thickness:b.current}),g.current=[]):"shape"===c.current&&h.current.push({type:S.current,x1:l.current,y1:u.current,x2:p.current,y2:m.current,color:v.current,thickness:y.current,lineType:x.current}),setTimeout(()=>$(e),15e3))},$=e=>{try{h.current.shift(),W(e)}catch{}},E=(e,t,r)=>{r.save(),r.globalCompositeOperation="destination-out",r.beginPath(),r.arc(e,t,f.current/2,0,2*Math.PI,!1),r.fill(),r.restore(),h.current=h.current.map(a=>{if("freehand"===a.type)return{...a,points:a.points.filter(r=>Math.sqrt(Math.pow(r.x-e,2)+Math.pow(r.y-t,2))>f.current/2)};if("line"===a.type){if(((e,t,r,a,n,o,s)=>{const i=n-r,c=o-a,d=Math.sqrt(i*i+c*c),l=((e-r)*i+(t-a)*c)/(d*d),u=r+l*i,p=a+l*c;return Math.sqrt(Math.pow(e-u,2)+Math.pow(t-p,2))<=s})(e,t,a.x1,a.y1,a.x2,a.y2,f.current/2))return null}else if("text"===a.type){const n=r.measureText(a.text).width;if(e>a.x&&e<a.x+n&&t>a.y-a.fontSize&&t<a.y)return null}else if(e>a.x1&&e<a.x2&&t>a.y1&&t<a.y2)return null;return a}).filter(e=>e&&("freehand"!==e.type||e.points.length>0))},W=e=>{e.clearRect(0,0,k.current?.width??0,k.current?.height??0),h.current.forEach(t=>{"line"===t.type?H(t.x1,t.y1,t.x2,t.y2,t.color,t.thickness,t.lineType,e):"freehand"===t.type?O(t.points,t.color,t.thickness,e):z(t.type,t.x1,t.y1,t.x2,t.y2,t.color,t.thickness,t.lineType,e)})},H=(e,t,r,a,n,o,s,i)=>{i.beginPath(),i.strokeStyle=n,i.lineWidth=o,"dashed"===s?i.setLineDash([10,10]):"dotted"===s?i.setLineDash([2,10]):"dashDot"===s?i.setLineDash([10,5,2,5]):i.setLineDash([]),i.moveTo(e,t),i.lineTo(r,a),i.stroke(),i.setLineDash([])},O=(e,t,r,a)=>{if(!(e.length<2)){a.strokeStyle=t,a.lineWidth=r,a.beginPath(),a.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)a.lineTo(e[t].x,e[t].y);a.stroke()}},z=(e,t,r,a,n,o,s,i,c)=>{if(c.beginPath(),c.strokeStyle=o,c.lineWidth=s,"dashed"===i?c.setLineDash([10,10]):"dotted"===i?c.setLineDash([2,10]):"dashDot"===i?c.setLineDash([10,5,2,5]):c.setLineDash([]),"rectangle"===e)c.strokeRect(t,r,a-t,n-r);else if("circle"===e){const e=Math.sqrt(Math.pow(a-t,2)+Math.pow(n-r,2));c.arc(t,r,e,0,2*Math.PI),c.stroke()}else if("rhombus"===e){const e=(t+a)/2,o=(r+n)/2;c.moveTo(e,r),c.lineTo(a,o),c.lineTo(e,n),c.lineTo(t,o),c.closePath(),c.stroke()}else if("pentagon"===e)U(c,5,t,r,a,n);else if("hexagon"===e)U(c,6,t,r,a,n);else if("triangle"===e){const e=(t+a)/2;c.moveTo(e,r),c.lineTo(a,n),c.lineTo(t,n),c.closePath(),c.stroke()}else if("square"===e)c.strokeRect(t,r,a-t,a-t);else if("octagon"===e)U(c,8,t,r,a,n);else if("oval"===e){const e=Math.abs(a-t)/2,o=Math.abs(n-r)/2,s=(t+a)/2,i=(r+n)/2;c.ellipse(s,i,e,o,0,0,2*Math.PI),c.stroke()}else if("parallelogram"===e){const e=(t+a)/2;c.moveTo(e,r),c.lineTo(a,n),c.lineTo(e,n),c.lineTo(t,r),c.closePath(),c.stroke()}c.setLineDash([])},U=(e,t,r,a,n,o)=>{const s=(r+n)/2,i=(a+o)/2,c=Math.min(Math.abs(n-r),Math.abs(o-a))/2,d=2*Math.PI/t;e.beginPath();for(let r=0;r<t;r++){const t=s+c*Math.cos(r*d-Math.PI/2),a=i+c*Math.sin(r*d-Math.PI/2);0===r?e.moveTo(t,a):e.lineTo(t,a)}e.closePath(),e.stroke()};return(0,ce.jsx)("div",{id:"screenboard-interface",style:{position:"relative",display:t?"block":"none",justifyContent:"center",alignItems:"center",backgroundColor:"transparent",zIndex:1e3,width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%",overflow:"auto"},ref:C,children:(0,ce.jsxs)("div",{id:"screenboardContent",style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",overflow:"hidden",top:0,left:0},ref:j,children:[(0,ce.jsx)("button",{id:"annotateScreen",className:"btn btn-primary btnBoardScreen annotateScreenBtn",style:{position:"absolute",top:"5px",right:"10px",zIndex:1e3},onClick:async()=>{const e=!a;i(e),e?(R.current=!0,o?.({message:"You can now annotate the screen. If you cannot see your annotation controls (on top), try minimizing your screen by using 'Cmd' + '-' (on Mac) or 'Ctrl' + '-' (on Windows).",type:"success",duration:9e3})):R.current=!1,n(!0),await s({ms:500}),n(!1)},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPencilAlt,color:a?"red":"green"})}),a&&(0,ce.jsx)("button",{id:"toolbarToggleScreen",className:"btn btnBoardScreen btn-primary",style:{position:"absolute",top:"5px",right:"55px",zIndex:1e3},onClick:()=>{R.current=!R.current},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:R.current?pe.faChevronRight:pe.faChevronLeft})}),(0,ce.jsxs)("div",{className:"toolbarScreen mb-3",id:"toolbarScreen",style:{position:"absolute",top:"5px",right:"105px",zIndex:1e3,backgroundColor:"transparent",display:R.current?"block":"none"},children:[(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoardScreen btn-secondary dropdown-toggle",id:"drawModeScreen",onClick:()=>D("drawModeScreen"),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPencilAlt})}),"drawModeScreen"===w.current&&N([{label:"XX-Small (3px)",value:3},{label:"X-Small (6px)",value:6},{label:"Small (12px)",value:12},{label:"Medium (18px)",value:18},{label:"Large (24px)",value:24},{label:"X-Large (36px)",value:36}],"draw",e=>y.current=e)]}),(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoardScreen btn-dark dropdown-toggle",id:"freehandModeScreen",onClick:()=>D("freehandModeScreen"),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPaintBrush})}),"freehandModeScreen"===w.current&&N([{label:"X-Small (5px)",value:5},{label:"Small (10px)",value:10},{label:"Medium (20px)",value:20},{label:"Large (40px)",value:40},{label:"X-Large (60px)",value:60}],"freehand",e=>b.current=e)]}),(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoardScreen btn-dark dropdown-toggle",id:"shapeModeScreen",onClick:()=>D("shapeModeScreen"),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faShapes})}),"shapeModeScreen"===w.current&&N([{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/square.svg",alt:"Square",className:"shape-icon"}),value:"square"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/rectangle.svg",alt:"Rectangle",className:"shape-icon"}),value:"rectangle"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/circle.svg",alt:"Circle",className:"shape-icon"}),value:"circle"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/triangle.svg",alt:"Triangle",className:"shape-icon"}),value:"triangle"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/hexagon.svg",alt:"Hexagon",className:"shape-icon"}),value:"hexagon"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/pentagon.svg",alt:"Pentagon",className:"shape-icon"}),value:"pentagon"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/rhombus.svg",alt:"Rhombus",className:"shape-icon"}),value:"rhombus"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/octagon.svg",alt:"Octagon",className:"shape-icon"}),value:"octagon"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/parallelogram.svg",alt:"Parallelogram",className:"shape-icon"}),value:"parallelogram"},{label:(0,ce.jsx)("img",{src:"https://mediasfu.com/images/svg/oval.svg",alt:"Oval",className:"shape-icon"}),value:"oval"}],"shape",e=>S.current=e)]}),(0,ce.jsxs)("div",{className:"btn-group",role:"group",children:[(0,ce.jsx)("button",{className:"btn btnBoardScreen btn-danger dropdown-toggle",id:"eraseModeScreen",onClick:()=>D("eraseModeScreen"),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faEraser})}),"eraseModeScreen"===w.current&&N([{label:"X-Small (5px)",value:5},{label:"Small (10px)",value:10},{label:"Medium (20px)",value:20},{label:"Large (30px)",value:30},{label:"X-Large (60px)",value:60}],"erase",e=>f.current=e)]}),(0,ce.jsx)("button",{className:"btn btnBoard btn-success",id:"zoomResetScreen",style:{display:"none"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch})}),(0,ce.jsx)("label",{htmlFor:"colorPickerScreen"}),(0,ce.jsx)("input",{type:"color",className:"btn",id:"colorPickerScreen",value:v.current,onChange:e=>v.current=e.target.value}),(0,ce.jsx)("label",{htmlFor:"lineTypePickerScreen"}),(0,ce.jsxs)("select",{id:"lineTypePickerScreen",className:"custom-select",style:{width:"auto"},onChange:e=>x.current=e.target.value,children:[(0,ce.jsx)("option",{value:"solid",children:"Solid"}),(0,ce.jsx)("option",{value:"dashed",children:"Dashed"}),(0,ce.jsx)("option",{value:"dotted",children:"Dotted"}),(0,ce.jsx)("option",{value:"dashDot",children:"Dash-Dot"})]})]}),(0,ce.jsx)("canvas",{id:"screenboardCanvas",width:"1280",height:"720",style:{padding:0,margin:0,display:a?"block":"none"},ref:k})]})})},mt=({parameters:e,isVisible:t,onClose:r,position:a="topRight",backgroundColor:n="#83c0e9"})=>{e=e.getUpdatedAllParams();let{localStreamScreen:o,shared:s,createSendTransport:i,disconnectSendTransportScreen:c,connectSendTransportScreen:d,stopShareScreen:l,prepopulateUserMedia:u,hostLabel:p,annotateScreenStream:m,processedScreenStream:g,mainScreenCanvas:h,canvasScreenboard:f,transportCreated:b,sleep:y,screenProducer:x,updateLocalStreamScreen:v,updateProcessedScreenStream:S,updateMainScreenCanvas:R}=e;const w=(0,de.useRef)(null),k=(0,de.useRef)(null),C=(0,de.useRef)(null),j=(0,de.useRef)(null);(0,de.useEffect)(()=>{t?(async()=>{const t=m,r=C.current;try{t&&s?(r?.classList.remove("d-none"),P(),setTimeout(async()=>{if(b){try{await M(),await y({ms:250})}catch(e){console.error(e)}await d({stream:g,parameters:e})}else await i({option:"screen",parameters:e});await u({name:p,parameters:e})},100)):r?.classList.add("d-none")}catch(e){console.error(e)}})():(async()=>{const t=m,r=C.current;try{if(!t){try{await I()}catch{}if(s)if(b){try{await c({parameters:e}),await y({ms:500})}catch(e){console.error(e)}o&&o.getVideoTracks().length>0&&"ended"===o.getVideoTracks()[0].readyState&&(o.removeTrack(o.getVideoTracks()[0]),o.addTrack(k.current.getVideoTracks()[0].clone()),v(o)),k.current.getVideoTracks()[0].onended=async()=>{await c({parameters:e}),await l({parameters:e})},await d({stream:o,parameters:e})}else await i({option:"screen",parameters:e});else await A();await u({name:p,parameters:e})}r?.classList.add("d-none"),h&&j.current?.classList.add("d-none")}catch(e){console.error(e,"Error stopping the video stream")}})()},[t]);const P=()=>{const t=C.current;if(!h){const e=j.current;h=e,R(e)}const r=m;if(r&&(!k.current||k.current&&k.current.getVideoTracks().length>0&&"ended"===k.current.getVideoTracks()[0].readyState)){const e=o.getVideoTracks()[0],t=e.getSettings(),r=e.clone();r.applyConstraints({width:t.width,height:t.height,frameRate:t.frameRate,aspectRatio:t.aspectRatio}),k.current=new MediaStream([r])}k.current&&o&&o.getVideoTracks().length>0&&"ended"===o.getVideoTracks()[0].readyState&&(o.removeTrack(o.getVideoTracks()[0]),o.addTrack(k.current.getVideoTracks()[0].clone())),k.current&&(k.current.getVideoTracks()[0].onended=async()=>{await c({parameters:e}),await l({parameters:e})});const a=h,n=a.getContext("2d");a.width=o.getVideoTracks()[0].getSettings().width,a.height=o.getVideoTracks()[0].getSettings().height,r||(g=null,S(null));const s=k.current;s&&r&&(t.style.width=`${s.getVideoTracks()[0].getSettings().width}px`,t.style.height=`${s.getVideoTracks()[0].getSettings().height}px`,t.srcObject=s,async function(){g=await async function(){const e=a.captureStream(30);return w.current=window.setInterval(()=>{n.clearRect(0,0,i.width,i.height),n.drawImage(t,0,0,i.width,i.height),n.drawImage(i,0,0,i.width,i.height),n.restore()},30),e}(),S(g)}());const i=f;i.width=a.width,i.height=a.height},M=async()=>{o.getVideoTracks().length>0&&o.getVideoTracks()[0].id===x?.track.id&&(k.current&&k.current.getVideoTracks().length>0&&"ended"===k.current.getVideoTracks()[0].readyState&&(k.current.removeTrack(k.current.getVideoTracks()[0]),k.current.addTrack(o.getVideoTracks()[0].clone())),o.removeTrack(o.getVideoTracks()[0]),o.addTrack(k.current.getVideoTracks()[0].clone())),await c({parameters:e})},I=async()=>{w.current&&(clearInterval(w.current),w.current=null),g&&(g.getTracks().forEach(e=>e.stop()),g=null,S(null)),h&&h.getContext("2d")?.clearRect(0,0,h.width,h.height)},A=async()=>{try{o&&o.getVideoTracks().length>0&&(o.getVideoTracks().forEach(e=>e.stop()),o=null,v(null))}catch(e){console.error(e)}try{k.current&&k.current.getVideoTracks().length>0&&k.current.getVideoTracks().forEach(e=>e.stop())}catch(e){console.error(e)}try{g&&(g.getTracks().forEach(e=>e.stop()),g=null,S(null))}catch(e){console.error(e)}k.current=null},T={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:t?"block":"none",zIndex:999};let F=.8*window.innerWidth;F>500&&(F=500);const D={position:"fixed",backgroundColor:n,borderRadius:10,padding:10,width:F,maxWidth:F,maxHeight:"75%",overflowY:"auto",overflowX:"hidden",top:a.includes("top")?10:"auto",bottom:a.includes("bottom")?10:"auto",left:a.includes("Left")?10:"auto",right:a.includes("Right")?10:"auto"};return(0,ce.jsx)("div",{style:T,children:(0,ce.jsxs)("div",{style:D,children:[(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:[(0,ce.jsx)("div",{style:{fontSize:18,fontWeight:"bold",color:"black"},children:"Screen Annotation"}),(0,ce.jsx)("div",{onClick:r,style:{padding:5},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,style:{fontSize:20,color:"black"}})})]}),(0,ce.jsx)("hr",{style:{height:1,backgroundColor:"black",marginTop:5,marginBottom:5}}),(0,ce.jsxs)("div",{style:{flex:1},children:[(0,ce.jsx)("video",{ref:C,className:"d-none",autoPlay:!0,muted:!0}),(0,ce.jsx)("canvas",{id:"screenCanvas",ref:j})]})]})})},gt=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},ht=({componentsToRender:e,containerProps:t,itemWrapperProps:r,renderItem:a,renderContainer:n})=>{const{className:o,style:s,...i}=t??{},c=gt("mediasfu-audio-grid",o),d={display:"grid",gap:1,zIndex:9,...s},{className:l,style:u,...p}=r??{},m=gt("mediasfu-audio-grid__item",l),g={zIndex:9,display:"contents",...u},h=e.map((e,t)=>{const r=(0,ce.jsx)("div",{className:m,style:g,...p,children:e},t),n=a?a({component:e,index:t,defaultItem:r}):r;return le().isValidElement(n)?le().cloneElement(n,{key:n.key??t}):(0,ce.jsx)(le().Fragment,{children:n},t)}),f=(0,ce.jsx)("div",{className:c,style:d,...i,children:h}),b=n?n({defaultContainer:f,items:h}):f;return(0,ce.jsx)(ce.Fragment,{children:b})},ft=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},bt=[474,433,407,458,400,427,441,419,487],yt={position:"absolute",top:0,right:0,padding:0,margin:0,width:100,height:100,justifyContent:"center",alignItems:"center",backgroundColor:"transparent",zIndex:8,elevation:8},xt={width:"100%",height:"100%",margin:0,padding:0,background:"linear-gradient(145deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.98))",backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",borderRadius:12,border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.05) inset",overflow:"hidden",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},vt={position:"absolute",top:0,left:0,right:0,bottom:24,display:"flex",alignItems:"center",justifyContent:"center"},St={fontSize:11,color:"rgba(255, 255, 255, 0.95)",fontWeight:600,justifyContent:"center",alignItems:"center",background:"linear-gradient(to top, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.4))",backdropFilter:"blur(4px)",width:"100%",display:"flex",paddingTop:6,paddingBottom:6,paddingLeft:4,paddingRight:4,textAlign:"center",position:"absolute",bottom:0,left:0,borderBottomLeftRadius:12,borderBottomRightRadius:12,textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)",letterSpacing:"0.2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Rt={display:"flex",alignItems:"center",justifyContent:"center",width:70,height:70,borderRadius:"50%",position:"relative"},wt={position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"50%",border:"2px solid",opacity:.6,animation:"miniAudioPulse 1.5s ease-in-out infinite"},kt={width:52,height:52,borderRadius:"50%",objectFit:"cover",border:"2px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",position:"relative",zIndex:1},Ct={borderRadius:"50%"},jt=({visible:e=!0,customStyle:t,name:r,showWaveform:a=!1,overlayPosition:n,barColor:o="red",textColor:s="white",nameTextStyling:i,imageSource:c,roundedImage:d=!1,imageStyle:l,wrapperProps:u,draggableContainerProps:p,cardProps:m,overlayProps:g,waveformContainerProps:h,nameContainerProps:f,nameTextProps:b,imageProps:y,renderWrapper:x,renderContainer:v,renderCard:S,renderWaveform:R})=>{const[w,k]=(0,de.useState)(()=>Array.from({length:bt.length},()=>0)),C=(0,de.useRef)([]),j=(0,de.useRef)([]),[P,M]=(0,de.useState)(!1),[I,A]=(0,de.useState)({x:0,y:0}),[T,D]=(0,de.useState)({x:0,y:0}),N=(0,de.useCallback)(()=>{"undefined"!=typeof window&&(C.current.forEach(e=>{window.clearInterval(e)}),C.current=[])},[]),L=(0,de.useCallback)(()=>{"undefined"!=typeof window&&(j.current.forEach(e=>{window.clearTimeout(e)}),j.current=[])},[]),V=(0,de.useCallback)(()=>{k(Array.from({length:bt.length},()=>0)),N(),L()},[N,L]),B=(0,de.useCallback)(e=>bt[e]??0,[]),$=(0,de.useCallback)(e=>{if(k(t=>{const r=[...t];return r[e]=1,r}),"undefined"==typeof window)return;const t=window.setTimeout(()=>{k(t=>{const r=[...t];return r[e]=0,r})},B(e));j.current.push(t)},[B]);(0,de.useEffect)(()=>{if(a){if("undefined"!=typeof window)return N(),L(),C.current=Array.from({length:bt.length},(e,t)=>window.setInterval(()=>$(t),2*B(t))),()=>{N(),L()}}else V()},[$,N,L,B,a]),(0,de.useEffect)(()=>()=>{N(),L()},[N,L]);const E=(0,de.useCallback)(e=>{M(!0),D({x:e.clientX-I.x,y:e.clientY-I.y})},[I.x,I.y]),W=(0,de.useCallback)(e=>{P&&A({x:e.clientX-T.x,y:e.clientY-T.y})},[T.x,T.y,P]);(0,de.useEffect)(()=>{if(!P)return;if("undefined"==typeof document)return;const e=()=>{M(!1),document.removeEventListener("mouseup",e)};return document.addEventListener("mouseup",e),()=>{document.removeEventListener("mouseup",e)}},[P]);const H=(0,de.useMemo)(()=>{if(n)return F({position:n})},[n]),{className:O,style:z,...U}=u??{},q=ft("mediasfu-mini-audio__wrapper",O),{className:_,style:G,...Y}=p??{},K=ft("mediasfu-mini-audio__draggable",_),J={transform:`translate(${I.x}px, ${I.y}px)`,...yt,...G},{className:X,style:Z,...Q}=m??{},ee=ft("mediasfu-mini-audio__card",X),te={...xt,...t,...Z},{className:re,style:ae,...ne}=g??{},oe=ft("mediasfu-mini-audio__overlay",re),se={...vt,...H,...ae,display:a?"grid":"none"},{className:ie,style:le,...ue}=h??{},pe=ft("mediasfu-mini-audio__waveform",ie),me={...Rt,...le},{className:ge,style:he,...fe}=f??{},be=ft("mediasfu-mini-audio__name-container",ge),ye={...St,color:s,...i,...he},{className:xe,style:ve,...Se}=b??{},Re=ft("mediasfu-mini-audio__name-text",xe),we={...ve},ke=Boolean(c),Ce=a?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:{...wt,borderColor:o,animationDelay:"0s"}}),(0,ce.jsx)("div",{style:{...wt,borderColor:o,animationDelay:"0.5s"}})]}):null,je=ke?(0,ce.jsx)("img",{src:c,style:{...kt,...d?Ct:void 0,...l,...y?.style??{}},alt:y?.alt??"Background",...y}):null,Pe=(0,ce.jsx)("div",{className:be,style:ye,...fe,children:(0,ce.jsx)("span",{className:Re,style:we,...Se,children:r})}),Me=(0,ce.jsxs)("div",{className:pe,style:me,...ue,children:[Ce,je]}),Ie=R?R({defaultWaveform:Me,showWaveform:a,animations:w}):Me,Ae=(0,ce.jsxs)("div",{className:ee,style:te,...Q,children:[(0,ce.jsx)("div",{className:oe,style:se,...ne,children:Ie}),Pe,(0,ce.jsx)("style",{children:"\n          @keyframes miniAudioPulse {\n            0% {\n              transform: scale(1);\n              opacity: 0.6;\n            }\n            50% {\n              transform: scale(1.15);\n              opacity: 0.3;\n            }\n            100% {\n              transform: scale(1.3);\n              opacity: 0;\n            }\n          }\n        "})]}),Te=S?S({defaultCard:Ae,hasImage:ke}):Ae,Fe=(0,ce.jsx)("div",{className:K,style:J,onMouseDown:E,onMouseMove:W,...Y,children:Te}),De=v?v({defaultContainer:Fe,isDragging:P,position:I}):Fe,Ne={display:e?"block":"none",...z},Le=(0,ce.jsx)("div",{className:q,style:Ne,...U,children:De}),Ve=x?x({defaultWrapper:Le,isVisible:e}):Le;return(0,ce.jsx)(ce.Fragment,{children:Ve})};let Pt=!1;function Mt(){if(Pt||"undefined"==typeof document)return;const e="mediasfu-modern-animations";if(document.getElementById(e))return void(Pt=!0);const t=document.createElement("style");t.id=e,t.textContent=st.getAllKeyframes(),document.head.appendChild(t),Pt=!0}const It=({children:e,borderRadius:t=24,blur:r=16,padding:a,gradient:n,onClick:o,isDarkMode:s=!0,className:i,style:c,hoverEffect:d=!0,backgroundColor:l,borderColor:u,borderWidth:p=1,elevation:m=1,animateOnMount:g=!1,animationDuration:h=st.normal})=>{const[f,b]=(0,de.useState)(!1),[y,x]=(0,de.useState)(!g);(0,de.useEffect)(()=>{if(Mt(),g){const e=setTimeout(()=>x(!0),10);return()=>clearTimeout(e)}},[g]);const v=l||(n?void 0:`linear-gradient(135deg, ${Pe.glassBackground(s)}, ${Pe.hexToRgba(s?"#FFFFFF":"#000000",.024)})`),S=u||Pe.glassBorder(s),R={...a?"number"==typeof a?{padding:`${a}px`}:"string"==typeof a?{padding:a}:a:{padding:`${rt.md}px`},background:n||v,backgroundColor:n?void 0:l,borderRadius:`${t}px`,border:`${p}px solid ${S}`,boxShadow:Pe.elevation(m,s),backdropFilter:`blur(${r}px)`,WebkitBackdropFilter:`blur(${r}px)`,transition:`all ${h}ms ${st.smooth}`,cursor:o?"pointer":"default",opacity:y?1:0,transform:y?f&&d&&o?"scale(1.01)":"scale(1)":"scale(0.98)",...c},w=f&&d&&o?{boxShadow:Pe.elevation(Math.min(m+1,5),s),border:`${p}px solid ${s?"rgba(255, 255, 255, 0.15)":"rgba(255, 255, 255, 0.5)"}`}:{},k=(0,de.useCallback)(()=>{d&&b(!0)},[d]),C=(0,de.useCallback)(()=>{d&&b(!1)},[d]),j=(0,de.useCallback)(()=>{o&&o()},[o]),P=(0,de.useCallback)(e=>{!o||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o())},[o]);return(0,ce.jsx)("div",{className:i,style:{...R,...w},onClick:j,onMouseEnter:k,onMouseLeave:C,onKeyDown:o?P:void 0,role:o?"button":void 0,tabIndex:o?0:void 0,children:e})},At=({options:e,isVisible:t,loadingText:r,showSpinner:a,isDarkMode:n=!0,onClose:o,closeOnBackdropClick:s=!1})=>{const i=e?.isVisible??t??!1,c=e?.loadingText??r??"Loading...",d=e?.showSpinner??a??!0,l=e?.spinner,u=e?.spinnerTextSpacing??rt.md,[p,m]=(0,de.useState)(!1),[g,h]=(0,de.useState)(!1),[f,b]=(0,de.useState)(0),[y,x]=(0,de.useState)(0),v=(0,de.useRef)(null),S=(0,de.useRef)(null);if((0,de.useEffect)(()=>{Mt()},[]),(0,de.useEffect)(()=>{if(i){h(!0);const e=setTimeout(()=>m(!0),10);return()=>clearTimeout(e)}{m(!1);const e=setTimeout(()=>h(!1),st.normal);return()=>clearTimeout(e)}},[i]),(0,de.useEffect)(()=>{if(!i||!d)return;let e=null;const t=r=>{e||(e=r);const a=(r-e)%1500/1500,n=Math.sin(a*Math.PI);b(.8+.2*n),v.current=requestAnimationFrame(t)};return v.current=requestAnimationFrame(t),()=>{v.current&&cancelAnimationFrame(v.current)}},[i,d]),(0,de.useEffect)(()=>{if(!i||!d)return;let e=null;const t=r=>{e||(e=r),x((r-e)%1e3/1e3*360),S.current=requestAnimationFrame(t)};return S.current=requestAnimationFrame(t),()=>{S.current&&cancelAnimationFrame(S.current)}},[i,d]),!g)return null;const R={position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.75)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",opacity:p?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:9999},w={transform:p?"scale(1)":"scale(0.8)",opacity:p?1:0,transition:`all ${st.normal}ms ${st.snappy}`},k={width:56,height:56,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",background:Pe.brandGradient(n),boxShadow:Pe.glowPrimary,transform:`scale(${f})`,transition:"transform 50ms linear"},C={width:48,height:48,borderRadius:"50%",border:"3px solid rgba(255, 255, 255, 0.2)",borderTopColor:"#FFFFFF",transform:`rotate(${y}deg)`},j={...nt.getTitleMedium(n),background:Pe.brandGradient(n),WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontWeight:600,letterSpacing:"0.5px"},P={boxShadow:`0 0 30px ${Pe.hexToRgba(Pe.primary,.2)}`,borderRadius:24};return(0,ce.jsx)("div",{style:R,onClick:()=>{s&&o&&o()},children:(0,ce.jsx)("div",{style:w,onClick:e=>e.stopPropagation(),children:(0,ce.jsx)("div",{style:P,children:(0,ce.jsx)(It,{borderRadius:24,blur:25,padding:rt.xl,isDarkMode:n,children:(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:`${u}px`},children:[d&&(l||(0,ce.jsx)("div",{style:k,children:(0,ce.jsx)("div",{style:C})})),(0,ce.jsx)("span",{style:j,children:c})]})})})})})},Tt={success:(0,ce.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,ce.jsx)("path",{d:"M16.667 5L7.5 14.167L3.333 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),error:(0,ce.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,ce.jsx)("path",{d:"M15 5L5 15M5 5L15 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),warning:(0,ce.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,ce.jsx)("path",{d:"M10 6V10M10 14H10.01M18 10C18 14.418 14.418 18 10 18C5.582 18 2 14.418 2 10C2 5.582 5.582 2 10 2C14.418 2 18 5.582 18 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),info:(0,ce.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,ce.jsx)("path",{d:"M10 14V10M10 6H10.01M18 10C18 14.418 14.418 18 10 18C5.582 18 2 14.418 2 10C2 5.582 5.582 2 10 2C14.418 2 18 5.582 18 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},Ft=({options:e,visible:t,message:r,type:a,duration:n,onHide:o,position:s,isDarkMode:i=!0,icon:c,action:d})=>{const l=e?.visible??t??!1,u=e?.message??r??"",p=(e=>"danger"===e?"error":"success"===e||"error"===e||"warning"===e||"info"===e?e:"success")(e?.type??a),m=e?.duration??n??3e3,g=e?.onHide??o,h=e?.position??s??"top-right",f=e?.contentDismissible??!0,b=e?.onContentTap,[y,x]=(0,de.useState)(!1),[v,S]=(0,de.useState)(!1),[R,w]=(0,de.useState)(.2),k=(0,de.useRef)(null),C=(0,de.useRef)(null);(0,de.useEffect)(()=>{Mt()},[]),(0,de.useEffect)(()=>{if(l){S(!0);const e=setTimeout(()=>x(!0),10);return()=>clearTimeout(e)}{x(!1);const e=setTimeout(()=>S(!1),250);return()=>clearTimeout(e)}},[l]),(0,de.useEffect)(()=>(l&&m>0&&(k.current=setTimeout(()=>{g?.()},m)),()=>{k.current&&clearTimeout(k.current)}),[l,m,g]),(0,de.useEffect)(()=>{if(!l)return;let e=null;const t=r=>{e||(e=r);const a=(r-e)%2e3/2e3,n=Math.sin(a*Math.PI);w(.2+.2*n),C.current=requestAnimationFrame(t)};return C.current=requestAnimationFrame(t),()=>{C.current&&cancelAnimationFrame(C.current)}},[l]);const j=(0,de.useCallback)(()=>{k.current&&(clearTimeout(k.current),k.current=null),g?.()},[g]),P=(0,de.useCallback)(()=>{let e=!0;b&&!1===b()&&(e=!1),e&&f&&j()},[b,f,j]);if(!v)return null;const M=((e,t)=>({success:{bg:t?"rgba(34, 197, 94, 0.15)":"rgba(34, 197, 94, 0.1)",border:t?"rgba(34, 197, 94, 0.4)":"rgba(34, 197, 94, 0.3)",glow:"rgba(34, 197, 94, 0.3)",icon:"#22C55E"},error:{bg:t?"rgba(239, 68, 68, 0.15)":"rgba(239, 68, 68, 0.1)",border:t?"rgba(239, 68, 68, 0.4)":"rgba(239, 68, 68, 0.3)",glow:"rgba(239, 68, 68, 0.3)",icon:"#EF4444"},warning:{bg:t?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)",border:t?"rgba(245, 158, 11, 0.4)":"rgba(245, 158, 11, 0.3)",glow:"rgba(245, 158, 11, 0.3)",icon:"#F59E0B"},info:{bg:t?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",border:t?"rgba(59, 130, 246, 0.4)":"rgba(59, 130, 246, 0.3)",glow:"rgba(59, 130, 246, 0.3)",icon:"#3B82F6"}}[e]))(p,i),I={position:"fixed",zIndex:1e4,...{top:{top:20,left:"50%",transform:"translateX(-50%)"},bottom:{bottom:20,left:"50%",transform:"translateX(-50%)"},"top-right":{top:20,right:20},"top-left":{top:20,left:20},"bottom-right":{bottom:20,right:20},"bottom-left":{bottom:20,left:20},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}[h]},A={transform:`${y?"translate(0, 0)":"center"===h?"scale(0.8)":h.includes("right")?"translateX(100px)":h.includes("left")?"translateX(-100px)":h.includes("top")?"translateY(-100px)":"translateY(100px)"} scale(${y?1:.95})`,opacity:y?1:0,transition:`all 250ms ${st.snappy}`,boxShadow:`0 0 20px ${M.glow.replace(/[\d.]+\)$/,`${R})`)}`,borderRadius:16,cursor:f?"pointer":"default"},T={display:"flex",alignItems:"center",gap:`${rt.sm}px`,minWidth:200,maxWidth:400},F={width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:M.bg,color:M.icon,flexShrink:0},D={...nt.getBodyMedium(i),flex:1,color:i?"#FFFFFF":"#1F2937"},N={width:24,height:24,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",backgroundColor:"transparent",border:"none",cursor:"pointer",color:i?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.5)",transition:`all ${st.fast}ms ${st.smooth}`,flexShrink:0};return(0,ce.jsx)("div",{style:I,children:(0,ce.jsx)("div",{style:A,onClick:P,role:"alert",children:(0,ce.jsx)(It,{borderRadius:16,blur:20,padding:rt.md,isDarkMode:i,borderColor:M.border,children:(0,ce.jsxs)("div",{style:T,children:[(0,ce.jsx)("div",{style:F,children:c||Tt[p]}),(0,ce.jsx)("span",{style:D,children:u}),d,(0,ce.jsx)("button",{style:N,onClick:e=>{e.stopPropagation(),j()},"aria-label":"Close alert",children:(0,ce.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:(0,ce.jsx)("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})})})},Dt={xs:{height:28,fontSize:12,iconSize:14,paddingHorizontal:10,borderRadius:6},sm:{height:32,fontSize:13,iconSize:16,paddingHorizontal:12,borderRadius:8},md:{height:40,fontSize:14,iconSize:18,paddingHorizontal:16,borderRadius:10},lg:{height:48,fontSize:15,iconSize:20,paddingHorizontal:20,borderRadius:12},xl:{height:56,fontSize:16,iconSize:22,paddingHorizontal:24,borderRadius:14}},Nt=({children:e,onPress:t,variant:r="filled",size:a="md",disabled:n=!1,loading:o=!1,icon:s,suffixIcon:i,isDarkMode:c=!0,backgroundColor:d,textColor:l,borderColor:u,gradient:p,className:m,style:g,fullWidth:h=!1,borderRadius:f,animateOnMount:b=!1,type:y="button",ariaLabel:x,tooltip:v})=>{const[S,R]=(0,de.useState)(!1),[w,k]=(0,de.useState)(!1),[C,j]=(0,de.useState)(!b);(0,de.useEffect)(()=>{if(Mt(),b){const e=setTimeout(()=>j(!0),10);return()=>clearTimeout(e)}},[b]);const P=Dt[a],M=n||o,I={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:`${rt.xs}px`,height:`${P.height}px`,padding:`0 ${P.paddingHorizontal}px`,borderRadius:`${f??P.borderRadius}px`,fontSize:`${P.fontSize}px`,fontWeight:600,fontFamily:nt.fontFamily,cursor:M?"not-allowed":"pointer",opacity:M?.5:C?1:0,transform:C?S?"scale(0.97)":w?"translateY(-1px)":"scale(1)":"scale(0.95)",transition:`all ${st.fast}ms ${st.smooth}`,outline:"none",userSelect:"none",whiteSpace:"nowrap",width:h?"100%":"auto",...(()=>{const e=d||Pe.primary,t=l,a=u||Pe.primary;switch(r){case"filled":return{background:e,color:t||"#FFFFFF",border:"none",boxShadow:S?"none":w?Pe.elevation(2,c):Pe.elevation(1,c)};case"outlined":return{background:"transparent",color:t||a,border:`2px solid ${a}`,boxShadow:"none"};case"ghost":return{background:w?Pe.hexToRgba(e,.1):"transparent",color:t||e,border:"none",boxShadow:"none"};case"gradient":return{background:p||Pe.brandGradient(c),color:t||"#FFFFFF",border:"none",boxShadow:S?"none":w?Pe.elevation(3,c):Pe.elevation(2,c)};case"glass":return{background:Pe.glassBackground(c),color:t||(c?"#FFFFFF":"#1F2937"),border:`1px solid ${Pe.glassBorder(c)}`,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",boxShadow:w?Pe.elevation(2,c):Pe.elevation(1,c)};case"glow":return{background:p||Pe.brandGradient(c),color:t||"#FFFFFF",border:"none",boxShadow:w?`${Pe.glowPrimary}, ${Pe.elevation(2,c)}`:Pe.glowPrimary};case"neumorphic":{const e=c?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.8)",r=c?"rgba(0, 0, 0, 0.5)":"rgba(163, 177, 198, 0.6)";return{background:c?"#1E1E2E":"#E0E5EC",color:t||(c?"#FFFFFF":"#374151"),border:"none",boxShadow:S?`inset 3px 3px 6px ${r}, inset -3px -3px 6px ${e}`:`5px 5px 10px ${r}, -5px -5px 10px ${e}`}}default:return{}}})(),...g},A={width:`${P.iconSize}px`,height:`${P.iconSize}px`,border:"2px solid transparent",borderTopColor:"currentColor",borderRadius:"50%",animation:"spin 0.8s linear infinite"},T=(0,de.useCallback)(()=>{M||R(!0)},[M]),F=(0,de.useCallback)(()=>{R(!1)},[]),D=(0,de.useCallback)(()=>{M||k(!0)},[M]),N=(0,de.useCallback)(()=>{k(!1),R(!1)},[]),L=(0,de.useCallback)(()=>{!M&&t&&t()},[M,t]),V={display:"flex",alignItems:"center",justifyContent:"center",width:`${P.iconSize}px`,height:`${P.iconSize}px`};return(0,ce.jsx)("button",{type:y,className:m,style:I,onClick:L,onMouseDown:T,onMouseUp:F,onMouseEnter:D,onMouseLeave:N,disabled:M,"aria-label":x,"aria-busy":o,"aria-disabled":M,title:v,children:o?(0,ce.jsx)("span",{style:A}):(0,ce.jsxs)(ce.Fragment,{children:[s&&(0,ce.jsx)("span",{style:V,children:s}),e,i&&(0,ce.jsx)("span",{style:V,children:i})]})})};if("undefined"!=typeof document){const e="mediasfu-premium-button-styles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent="\n      @keyframes spin {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n    ",document.head.appendChild(t)}}const Lt=({isVisible:e,onClose:t,customButtons:r=[],shareButtons:a=!0,position:n="topRight",roomName:o,adminPasscode:s,islevel:i,localLink:c,eventType:d,shareButtonsComponentProps:l,title:u,isDarkMode:p=!0,onToggleTheme:m,renderMode:g="modal",enableGlassmorphism:h=!0,enableGlow:f=!0,renderHeader:b,renderCustomButtons:y,renderMeetingPasscode:x,renderMeetingId:v,renderShareButtons:S,renderBody:R,renderContent:w})=>{const[k,C]=(0,de.useState)(!1),[j,P]=(0,de.useState)(!1),[M,I]=(0,de.useState)(!1),[A,T]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>C(!0),50);return()=>clearTimeout(e)}C(!1)},[e]);const F=(0,de.useMemo)(()=>"2"===i,[i]),D=(0,de.useMemo)(()=>{const e=l?.getShareUrl;if(e)return e({meetingID:o,eventType:d,localLink:c});const t="chat"===d?"chat":"broadcast"===d?"broadcast":"meeting";return c&&!c.includes("mediasfu.com")?`${c}/meeting/${o}`:`https://${t}.mediasfu.com/${t}/${o}`},[d,c,o,l?.getShareUrl]),N=(0,de.useCallback)(async()=>{try{await navigator.clipboard.writeText(o),P(!0),setTimeout(()=>P(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},[o]),L=(0,de.useCallback)(async()=>{try{await navigator.clipboard.writeText(s),I(!0),setTimeout(()=>I(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},[s]),V=(0,de.useCallback)(async()=>{try{await navigator.clipboard.writeText(D)}catch(e){console.error("Failed to copy link:",e)}},[D]),B=(0,de.useMemo)(()=>{const e=l?.shareButtons;return e&&e.length>0?e.filter(e=>!1!==e.show):[{icon:pe.faCopy,action:async()=>{try{await navigator.clipboard.writeText(D)}catch(e){console.error("Failed to copy link:",e)}},show:!0,color:"#6b7280"},{icon:pe.faEnvelope,action:()=>{const e=`mailto:?subject=Join my meeting&body=Here is the link: ${D}`;window.open(e,"_blank")},show:!0,color:"#ea4335"},{icon:Oe.faFacebook,action:()=>{const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(D)}`;window.open(e,"_blank","width=600,height=400")},show:!0,color:"#1877F2"},{icon:Oe.faTwitter,action:()=>{const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(`Join my meeting: ${D}`)}`;window.open(e,"_blank","width=600,height=400")},show:!0,color:"#1DA1F2"},{icon:Oe.faWhatsapp,action:()=>{const e=`https://wa.me/?text=${encodeURIComponent(`Join my meeting: ${D}`)}`;window.open(e,"_blank")},show:!0,color:"#25D366"},{icon:Oe.faTelegram,action:()=>{const e=`https://t.me/share/url?url=${encodeURIComponent(D)}&text=${encodeURIComponent("Join my meeting")}`;window.open(e,"_blank")},show:!0,color:"#0088CC"},{icon:pe.faLink,action:V,show:!0,color:Pe.primary}]},[l?.shareButtons,D,V]),$=(0,de.useMemo)(()=>{const e=l?.shareButtons;return e&&e.length>0?B.map(()=>"Share"):["Copy meeting link","Share via email","Share on Facebook","Share on Twitter","Share on WhatsApp","Share on Telegram","Copy link"]},[l?.shareButtons,B]),E=(0,de.useCallback)(async e=>{await Promise.resolve(e.action())},[]),W={display:"flex",flexDirection:"column",gap:`${rt.xs}px`},H={...nt.getLabelMedium(p),color:p?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)",marginBottom:rt.xs},O={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:p?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:ct.sm},z={...nt.getBodyMedium(p),fontFamily:"monospace",color:p?"#FFFFFF":"#1F2937"},U={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.xs,color:Pe.primary,transition:`all ${st.fast}ms ${st.smooth}`},q={display:"flex",gap:`${rt.sm}px`,flexWrap:"wrap"},_={display:"flex",flexDirection:"column",gap:`${rt.sm}px`},G=(0,ce.jsxs)("div",{style:W,children:[(0,ce.jsx)("span",{style:H,children:"Meeting ID"}),(0,ce.jsxs)("div",{style:O,children:[(0,ce.jsx)("span",{style:z,children:o}),(0,ce.jsx)(Ie,{message:"Copy ID",isDarkMode:p,position:"top",children:(0,ce.jsx)("button",{style:U,onClick:N,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:j?pe.faCheck:pe.faCopy})})})]})]}),Y=F?(0,ce.jsxs)("div",{style:W,children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.xs},children:[(0,ce.jsx)("span",{style:H,children:"Admin Passcode"}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:10,color:Pe.danger,background:`${Pe.danger}15`,padding:"2px 6px",borderRadius:4,fontWeight:"bold"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faShieldAlt,size:"xs"}),(0,ce.jsx)("span",{children:"Private"})]})]}),(0,ce.jsxs)("div",{style:O,children:[(0,ce.jsx)("span",{style:z,children:A?s:"".repeat(s.length||8)}),(0,ce.jsxs)("div",{style:{display:"flex",gap:rt.xs},children:[(0,ce.jsx)(Ie,{message:A?"Hide":"Show",isDarkMode:p,position:"top",children:(0,ce.jsx)("button",{style:U,onClick:()=>T(!A),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:A?pe.faEyeSlash:pe.faEye})})}),(0,ce.jsx)(Ie,{message:"Copy Passcode",isDarkMode:p,position:"top",children:(0,ce.jsx)("button",{style:U,onClick:L,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:M?pe.faCheck:pe.faCopy})})})]})]}),(0,ce.jsx)("div",{style:{fontSize:11,color:p?Pe.textSecondaryDark:Pe.textSecondary,marginTop:4,fontStyle:"italic"},children:"Others with this passcode can join as host with full privileges."})]}):null,K=a?(0,ce.jsxs)("div",{style:W,children:[(0,ce.jsx)("span",{style:H,children:"Share Meeting"}),(0,ce.jsx)("div",{style:q,children:B.map((e,t)=>{const r=e.color||Pe.primary,a=e.iconColor||"currentColor",n=e.tooltip||$[t]||"Share";return(0,ce.jsx)(Ie,{message:n,isDarkMode:p,position:"top",children:(0,ce.jsx)("button",{style:(o=r,{display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40,borderRadius:ct.sm,background:`${o}20`,border:"none",cursor:"pointer",color:o,transition:`all ${st.fast}ms ${st.smooth}`}),onClick:()=>E(e),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon,size:"lg",color:a})})},t);var o})})]}):null,J=r.filter(e=>!1!==e.show),X=J.length>0?(0,ce.jsxs)("div",{style:W,children:[(0,ce.jsx)("span",{style:H,children:"Actions"}),(0,ce.jsx)("div",{style:_,children:J.map((e,t)=>{if(e.customComponent&&!1===e.renderAsButton)return(0,ce.jsx)(le().Fragment,{children:e.customComponent},t);const r=(0,ce.jsx)(Nt,{variant:"glass",size:"md",fullWidth:!0,onPress:e.action,isDarkMode:p,icon:e.icon?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon}):void 0,children:e.text},t),a=e.tooltip||e.text;return a?(0,ce.jsx)(Ie,{message:a,isDarkMode:p,position:"top",children:r},t):r})})]}):null,Z=m?(0,ce.jsxs)("div",{style:W,children:[(0,ce.jsx)("span",{style:H,children:"Theme"}),(0,ce.jsxs)("div",{style:{display:"flex",gap:`${rt.sm}px`},children:[(0,ce.jsx)(Nt,{variant:p?"filled":"outlined",size:"sm",onPress:()=>m(!0),isDarkMode:p,children:"Dark"}),(0,ce.jsx)(Nt,{variant:p?"outlined":"filled",size:"sm",onPress:()=>m(!1),isDarkMode:p,children:"Light"})]})]}):null,Q={padding:`${rt.md}px`,overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:`${rt.md}px`},ee={display:"flex",alignItems:"center",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(p)}`,...nt.getTitleMedium(p)};if("sidebar"===g||"inline"===g)return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsxs)("div",{style:ee,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBars}),(0,ce.jsx)("span",{style:{flex:1},children:u||"Menu"}),(0,ce.jsx)("button",{onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:p?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",color:p?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.7)",cursor:"pointer",fontSize:"18px",fontWeight:300,transition:"background-color 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=p?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=p?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},children:""})]}),(0,ce.jsxs)("div",{style:Q,children:[Z,y?y({defaultCustomButtons:X,buttons:r}):X,v?v({defaultMeetingId:G,roomName:o}):G,x?x({defaultMeetingPasscode:Y,adminPasscode:s,isHost:F}):Y,S?S({defaultShareButtons:K,hasShareButtons:a}):K]})]});if(!e)return null;const te={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(p),backdropFilter:h?"blur(2px)":void 0,WebkitBackdropFilter:h?"blur(2px)":void 0,opacity:k?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},re={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[n]||e.topRight})(),width:"min(400px, calc(100vw - 32px))",maxHeight:"calc(100vh - 100px)",opacity:k?1:0,transform:k?"center"===n?"translate(-50%, -50%) scale(1)":"scale(1) translateY(0)":"center"===n?"translate(-50%, -50%) scale(0.95)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},ae={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(p)}`},ne={...nt.getTitleMedium(p),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},oe={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:p?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},se={padding:`${rt.md}px`,overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:`${rt.md}px`},ie=(0,ce.jsxs)("div",{style:ae,children:[(0,ce.jsxs)("h2",{style:ne,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBars}),u||"Menu"]}),(0,ce.jsx)("button",{style:oe,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),me=(0,ce.jsxs)("div",{style:se,children:[Z,y?y({defaultCustomButtons:X,buttons:r}):X,v?v({defaultMeetingId:G,roomName:o}):G,x?x({defaultMeetingPasscode:Y,adminPasscode:s,isHost:F}):Y,S?S({defaultShareButtons:K,hasShareButtons:a}):K]}),ge=(0,ce.jsxs)(It,{isDarkMode:p,borderRadius:ct.xl,blur:h?20:0,padding:0,elevation:4,style:{...re,backgroundColor:p?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:f?`${Pe.elevation(4,p)}, ${Pe.glowPrimary}`:Pe.elevation(4,p)},children:[b?b({defaultHeader:ie,onClose:t}):ie,R?R({defaultBody:me}):me]});return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:te,onClick:t}),w?w({defaultContent:ge}):ge]})},Vt=[{value:"video",label:"Record Video",tooltip:"Record audio and video"},{value:"audio",label:"Record Audio Only",tooltip:"Record audio without video"}],Bt=[{value:"all",label:"Add All",tooltip:"Include all participant audios"},{value:"onScreen",label:"Add All On Screen",tooltip:"Include only on-screen audios"},{value:"host",label:"Add Host Only",tooltip:"Include host audio only"}],$t=[{value:"all",label:"Add All",tooltip:"Include all participant videos"},{value:"mainScreen",label:"Big Screen Only (includes screenshare)",tooltip:"Use the main screen feed"}],Et=[{value:"true",label:"True",tooltip:"Enable HLS"},{value:"false",label:"False",tooltip:"Disable HLS"}],Wt=({parameters:e})=>{const{recordingMediaOptions:t,recordingAudioOptions:r,recordingVideoOptions:a,recordingAddHLS:n,updateRecordingMediaOptions:o,updateRecordingAudioOptions:s,updateRecordingVideoOptions:i,updateRecordingAddHLS:c,eventType:d}=e,[l,u]=(0,de.useState)(t),[p,m]=(0,de.useState)(r),[g,h]=(0,de.useState)(a),[f,b]=(0,de.useState)(n),y=e=>(0,ce.jsx)("option",{value:e.value,title:e.tooltip||e.label,children:e.label},e.value);return(0,ce.jsxs)("div",{children:[(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Media Options:"}),(0,ce.jsx)("select",{value:l,onChange:e=>{u(e.target.value),o(e.target.value)},children:Vt.map(y)})]}),(0,ce.jsx)("hr",{}),"broadcast"!==d&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Specific Audios:"}),(0,ce.jsx)("select",{value:p,onChange:e=>{m(e.target.value),s(e.target.value)},children:Bt.map(y)})]}),(0,ce.jsx)("hr",{}),(0,ce.jsxs)("div",{id:"conditionalConference",children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Specific Videos:"}),(0,ce.jsx)("select",{value:g,onChange:e=>{h(e.target.value),i(e.target.value)},children:$t.map(y)})]}),(0,ce.jsx)("hr",{})]}),(0,ce.jsxs)("div",{id:"addHLSPart",children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Add HLS:"}),(0,ce.jsx)("select",{value:f.toString(),onChange:e=>{const t="true"===e.target.value;b(t),c(t)},children:Et.map(y)})]}),(0,ce.jsx)("hr",{})]})},Ht=e=>({...nt.getBodyMedium(e),fontWeight:700,marginBottom:6}),Ot=e=>({width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:e?"#0f172a":"#f8fafc",border:`1px solid ${Pe.glassBorder(e)}`,borderRadius:ct.md,color:e?"#f8fafc":"#0f172a",outline:"none",appearance:"none",boxShadow:e?"0 1px 4px rgba(0,0,0,0.4)":"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer"}),zt=e=>({backgroundColor:e?"#0b1221":"#ffffff",color:e?"#f8fafc":"#0f172a"}),Ut=(e,t)=>e.find(e=>e.value===t)?.tooltip||e.find(e=>e.value===t)?.label||"",qt=e=>({padding:rt.md,background:e?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`1px solid ${Pe.glassBorder(e)}`,borderRadius:ct.md}),_t=({parameters:e,isDarkMode:t=!0})=>{const{recordingMediaOptions:r,recordingAudioOptions:a,recordingVideoOptions:n,recordingAddHLS:o,updateRecordingMediaOptions:s,updateRecordingAudioOptions:i,updateRecordingVideoOptions:c,updateRecordingAddHLS:d,eventType:l}=e,[u,p]=(0,de.useState)(r),[m,g]=(0,de.useState)(a),[h,f]=(0,de.useState)(n),[b,y]=(0,de.useState)(o),x=e=>(0,ce.jsx)("option",{value:e.value,title:e.tooltip||e.label,style:zt(t),children:e.label},e.value);return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:rt.sm},children:[(0,ce.jsxs)("div",{style:qt(t),children:[(0,ce.jsx)("div",{style:Ht(t),children:"Media Options"}),(0,ce.jsx)(Ie,{message:Ut(Vt,u),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Recording media options",value:u,onChange:e=>{p(e.target.value),s(e.target.value)},style:Ot(t),children:Vt.map(x)})})})]}),"broadcast"!==l&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:qt(t),children:[(0,ce.jsx)("div",{style:Ht(t),children:"Specific Audios"}),(0,ce.jsx)(Ie,{message:Ut(Bt,m),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Recording audio options",value:m,onChange:e=>{g(e.target.value),i(e.target.value)},style:Ot(t),children:Bt.map(x)})})})]}),(0,ce.jsxs)("div",{style:qt(t),children:[(0,ce.jsx)("div",{style:Ht(t),children:"Specific Videos"}),(0,ce.jsx)(Ie,{message:Ut($t,h),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Recording video options",value:h,onChange:e=>{f(e.target.value),c(e.target.value)},style:Ot(t),children:$t.map(x)})})})]})]}),(0,ce.jsxs)("div",{style:qt(t),children:[(0,ce.jsx)("div",{style:Ht(t),children:"Add HLS"}),(0,ce.jsx)(Ie,{message:Ut(Et,b.toString()),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Recording HLS option",value:b.toString(),onChange:e=>{const t="true"===e.target.value;y(t),d(t)},style:Ot(t),children:Et.map(x)})})})]})]})},Gt=[{value:"fullDisplay",label:"Full Display (no background)",tooltip:"Use the full incoming display"},{value:"bestDisplay",label:"Full Video",tooltip:"Optimized full video feed"},{value:"all",label:"All",tooltip:"Mix all displays"}],Yt=[{value:"video",label:"Only Video Participants",tooltip:"Include participants with video"},{value:"media",label:"Participants with media",tooltip:"Include participants with media"},{value:"all",label:"All Participants",tooltip:"Include everyone"}],Kt=[{value:"top",label:"Top",tooltip:"Place custom text at the top"},{value:"middle",label:"Middle",tooltip:"Place custom text in the middle"},{value:"bottom",label:"Bottom",tooltip:"Place custom text at the bottom"}],Jt=[{value:"true",label:"Show",tooltip:"Display name tags"},{value:"false",label:"Hide",tooltip:"Hide name tags"}],Xt=[{value:"landscape",label:"Landscape",tooltip:"Horizontal orientation"},{value:"portrait",label:"Portrait",tooltip:"Vertical orientation"},{value:"all",label:"All",tooltip:"Choose orientation automatically"}],Zt=({parameters:e})=>{const{recordingVideoType:t,recordingDisplayType:r,recordingBackgroundColor:a,recordingNameTagsColor:n,recordingOrientationVideo:o,recordingNameTags:s,recordingAddText:i,recordingCustomText:c,recordingCustomTextPosition:d,recordingCustomTextColor:l,updateRecordingVideoType:u,updateRecordingDisplayType:p,updateRecordingBackgroundColor:m,updateRecordingNameTagsColor:g,updateRecordingOrientationVideo:h,updateRecordingNameTags:f,updateRecordingAddText:b,updateRecordingCustomText:y,updateRecordingCustomTextPosition:x,updateRecordingCustomTextColor:v,eventType:S}=e,[R,w]=(0,de.useState)(o),[k,C]=(0,de.useState)(s),[j,P]=(0,de.useState)(t),[M,I]=(0,de.useState)(r),[A,T]=(0,de.useState)(i),[F,D]=(0,de.useState)(c),[N,L]=(0,de.useState)(d);(0,de.useEffect)(()=>{w(o)},[o]);const V=(e,t)=>{switch(e){case"backgroundColor":m(t);break;case"customTextColor":v(t);break;case"nameTagsColor":g(t)}},B=e=>(0,ce.jsx)("option",{value:e.value,title:e.tooltip||e.label,children:e.label},e.value);return(0,ce.jsxs)("div",{children:[(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Video Type:"}),(0,ce.jsx)("select",{value:j,onChange:e=>{u(e.target.value),P(e.target.value)},children:Gt.map(B)})]}),(0,ce.jsx)("hr",{}),"broadcast"!==S&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Display Type:"}),(0,ce.jsx)("select",{value:M,onChange:e=>{const t=e.target.value;p(t),I(t)},children:Yt.map(B)})]}),(0,ce.jsx)("hr",{}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Background Color:"}),(0,ce.jsx)("div",{style:{backgroundColor:a,padding:"5px",marginBottom:"10px"},children:a}),(0,ce.jsx)("input",{type:"color",value:a,onChange:e=>V("backgroundColor",e.target.value)})," ",(0,ce.jsx)("span",{style:{marginLeft:"10px",fontWeight:"bold"},children:"Click to select color"})]}),(0,ce.jsx)("hr",{}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Add Text:"}),(0,ce.jsxs)("select",{value:A.toString(),onChange:e=>(e=>{const t="true"===e||!0===e;T(t),b(t)})(e.target.value),children:[(0,ce.jsx)("option",{value:"true",children:"True"}),(0,ce.jsx)("option",{value:"false",children:"False"})]})]}),(0,ce.jsx)("hr",{}),A&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Custom Text:"}),(0,ce.jsx)("input",{type:"text",value:F,onChange:e=>{var t;(0===(t=e.target.value).length||/^[a-zA-Z0-9\s]{1,40}$/.test(t))&&(y(t),D(t))}}),(0,ce.jsx)("hr",{})]}),A&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Custom Text Position:"}),(0,ce.jsx)("select",{value:N,onChange:e=>{x(e.target.value),L(e.target.value)},children:Kt.map(B)}),(0,ce.jsx)("hr",{})]}),A&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Custom Text Color:"}),(0,ce.jsx)("div",{style:{backgroundColor:l,padding:"5px",marginBottom:"10px"},children:l}),(0,ce.jsx)("input",{type:"color",value:l,onChange:e=>V("customTextColor",e.target.value)})," ",(0,ce.jsx)("span",{style:{marginLeft:"10px",fontWeight:"bold"},children:"Click to select color"}),(0,ce.jsx)("hr",{})]}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Add Name Tags:"}),(0,ce.jsx)("select",{value:k.toString(),onChange:e=>{f("true"===e.target.value),C("true"===e.target.value)},children:Jt.map(B)})]}),(0,ce.jsx)("hr",{}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Name Tags Color:"}),(0,ce.jsx)("div",{style:{backgroundColor:n,padding:"5px",marginBottom:"10px"},children:n}),(0,ce.jsx)("input",{type:"color",value:n,onChange:e=>V("nameTagsColor",e.target.value)})," ",(0,ce.jsx)("span",{style:{marginLeft:"10px",fontWeight:"bold"},children:"Click to select color"})]}),(0,ce.jsx)("hr",{}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{marginRight:"10px",fontWeight:"bold"},children:"Orientation (Video):"}),(0,ce.jsx)("select",{value:R,onChange:e=>{h(e.target.value),w(e.target.value)},children:Xt.map(B)})]}),(0,ce.jsx)("hr",{})]})},Qt=e=>({padding:rt.md,background:e?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`1px solid ${Pe.glassBorder(e)}`,borderRadius:ct.md}),er=e=>({...nt.getBodyMedium(e),fontWeight:700,marginBottom:6}),tr=e=>({width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:e?"#0f172a":"#f8fafc",border:`1px solid ${Pe.glassBorder(e)}`,borderRadius:ct.md,color:e?"#f8fafc":"#0f172a",outline:"none",appearance:"none",boxShadow:e?"0 1px 4px rgba(0,0,0,0.4)":"0 1px 4px rgba(0,0,0,0.08)",cursor:"pointer"}),rr=e=>({...tr(e)}),ar=e=>({fontSize:12,opacity:.7,marginTop:4,color:e?"rgba(255,255,255,0.75)":"rgba(15,23,42,0.75)"}),nr=e=>({backgroundColor:e?"#0b1221":"#ffffff",color:e?"#f8fafc":"#0f172a"}),or=(e,t)=>e.find(e=>e.value===t)?.tooltip||e.find(e=>e.value===t)?.label||"",sr=({parameters:e,isDarkMode:t=!0})=>{const{recordingVideoType:r,recordingDisplayType:a,recordingBackgroundColor:n,recordingNameTagsColor:o,recordingOrientationVideo:s,recordingNameTags:i,recordingAddText:c,recordingCustomText:d,recordingCustomTextPosition:l,recordingCustomTextColor:u,updateRecordingVideoType:p,updateRecordingDisplayType:m,updateRecordingBackgroundColor:g,updateRecordingNameTagsColor:h,updateRecordingOrientationVideo:f,updateRecordingNameTags:b,updateRecordingAddText:y,updateRecordingCustomText:x,updateRecordingCustomTextPosition:v,updateRecordingCustomTextColor:S,eventType:R}=e,[w,k]=(0,de.useState)(s),[C,j]=(0,de.useState)(i),[P,M]=(0,de.useState)(r),[I,A]=(0,de.useState)(a),[T,F]=(0,de.useState)(c),[D,N]=(0,de.useState)(d),[L,V]=(0,de.useState)(l);(0,de.useEffect)(()=>{k(s)},[s]);const B=(e,t)=>{switch(e){case"backgroundColor":g(t);break;case"customTextColor":S(t);break;case"nameTagsColor":h(t)}},$=e=>(0,ce.jsx)("option",{value:e.value,title:e.tooltip||e.label,style:nr(t),children:e.label},e.value);return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:rt.sm},children:[(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Video Type"}),(0,ce.jsx)(Ie,{message:or(Gt,P),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Recording video type",value:P,onChange:e=>{p(e.target.value),M(e.target.value)},style:tr(t),children:Gt.map($)})})})]}),"broadcast"!==R&&(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Display Type"}),(0,ce.jsx)(Ie,{message:or(Yt,I),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Recording display type",value:I,onChange:e=>{const t=e.target.value;m(t),A(t)},style:tr(t),children:Yt.map($)})})})]}),(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Background Color"}),(0,ce.jsx)("div",{style:{backgroundColor:n,padding:"6px 10px",borderRadius:ct.sm,border:`1px solid ${Pe.glassBorder(t)}`,marginBottom:rt.xs},children:n}),(0,ce.jsx)("input",{type:"color",value:n,onChange:e=>B("backgroundColor",e.target.value),style:{width:50,height:32,cursor:"pointer",border:"none"}})]}),(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Add Text"}),(0,ce.jsx)(Ie,{message:T?"Disable custom overlay text":"Enable custom overlay text",isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Toggle custom text",value:T.toString(),onChange:e=>(e=>{const t="true"===e||!0===e;F(t),y(t)})(e.target.value),style:tr(t),children:["true","false"].map(e=>(0,ce.jsx)("option",{value:e,style:nr(t),children:"true"===e?"True":"False"},e))})})})]}),T&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Custom Text"}),(0,ce.jsx)("input",{type:"text",value:D,onChange:e=>{var t;(0===(t=e.target.value).length||/^[a-zA-Z0-9\s]{1,40}$/.test(t))&&(x(t),N(t))},style:rr(t),maxLength:40}),(0,ce.jsx)("div",{style:ar(t),children:"Alphanumeric, max 40 chars"})]}),(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Text Position"}),(0,ce.jsx)(Ie,{message:or(Kt,L),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Custom text position",value:L,onChange:e=>{V(e.target.value),v(e.target.value)},style:tr(t),children:Kt.map($)})})})]}),(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Text Color"}),(0,ce.jsx)("input",{type:"color",value:u,onChange:e=>B("customTextColor",e.target.value),style:{width:50,height:32,cursor:"pointer",border:"none"}})]})]}),(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Name Tags"}),(0,ce.jsx)(Ie,{message:or(Jt,C.toString()),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Name tags toggle",value:C.toString(),onChange:e=>{const t="true"===e.target.value;j(t),b(t)},style:tr(t),children:Jt.map($)})})})]}),(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Name Tags Color"}),(0,ce.jsx)("input",{type:"color",value:o,onChange:e=>B("nameTagsColor",e.target.value),style:{width:50,height:32,cursor:"pointer",border:"none"}})]}),(0,ce.jsxs)("div",{style:Qt(t),children:[(0,ce.jsx)("div",{style:er(t),children:"Orientation"}),(0,ce.jsx)(Ie,{message:or(Xt,w),isDarkMode:t,children:(0,ce.jsx)("div",{style:{width:"100%"},children:(0,ce.jsx)("select",{"aria-label":"Recording orientation",value:w,onChange:e=>{k(e.target.value),f(e.target.value)},style:tr(t),children:Xt.map($)})})})]})]})},ir=({isRecordingModalVisible:e,onClose:t,backgroundColor:r="#83c0e9",position:a="topRight",confirmRecording:n,startRecording:o,parameters:s,title:i,overlayProps:c,contentProps:d,headerProps:l,titleProps:u,closeButtonProps:p,headerDividerProps:m,bodyProps:g,panelsWrapperProps:h,panelsScrollProps:f,panelsContainerProps:b,panelsActionsDividerProps:y,actionsWrapperProps:x,confirmButtonProps:v,startButtonProps:S,confirmButtonLabel:R="Confirm",startButtonLabel:w=(0,ce.jsxs)(ce.Fragment,{children:["Start ",(0,ce.jsx)("i",{className:"fas fa-play"})]}),isDarkMode:k=!0,enableGlassmorphism:C=!0,enableGlow:j=!0,renderMode:P="modal",renderHeader:M,renderPanels:I,renderBody:A,renderContent:T})=>{const[F,D]=(0,de.useState)(!1),[N,L]=(0,de.useState)("standard"),[V,B]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>D(!0),50);return()=>clearTimeout(e)}D(!1)},[e]);const $=s?.getUpdatedAllParams?.()||s,E=(0,de.useCallback)(async()=>{n&&(await n({parameters:$}),B(!0),setTimeout(()=>B(!1),2e3))},[n,$]),W=(0,de.useCallback)(async()=>{o&&(await o({parameters:$}),t())},[o,$,t]);if("sidebar"!==P&&"inline"!==P&&!e)return null;const{className:H,style:O,onClick:z,...U}=c??{},q=["mediasfu-recording-modal",H].filter(Boolean).join(" ").trim()||void 0,_={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(k),backdropFilter:C?"blur(2px)":void 0,WebkitBackdropFilter:C?"blur(2px)":void 0,opacity:F?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3,...O},{className:G,style:Y,...K}=d??{},J={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[a]||e.topRight})(),width:"min(500px, calc(100vw - 32px))",maxHeight:"calc(100vh - 100px)",opacity:F?1:0,transform:F?"center"===a?"translate(-50%, -50%) scale(1)":"scale(1) translateY(0)":"center"===a?"translate(-50%, -50%) scale(0.95)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column",background:r,...Y},{className:X,style:Z,...Q}=l??{},ee=["modal-header",X].filter(Boolean).join(" ").trim()||void 0,te={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(k)}`,...Z},{className:re,style:ae,...ne}=u??{},oe=["modal-title",re].filter(Boolean).join(" ").trim()||void 0,se={...nt.getTitleMedium(k),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0,color:Pe.danger,...ae},{className:ie,style:le,onClick:me,...ge}=p??{},he=["btn-close-recording",ie].filter(Boolean).join(" ").trim()||void 0,fe={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:k?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`,...le},{style:be,...ye}=m??{},xe={height:1,backgroundColor:Pe.glassBorder(k),marginTop:5,marginBottom:5,border:"none",...be},{className:ve,style:Se,...Re}=g??{},we=["modal-body",ve].filter(Boolean).join(" ").trim()||void 0,ke={padding:`${rt.md}px`,overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:`${rt.md}px`,minHeight:0,...Se},Ce={display:"flex",gap:`${rt.xs}px`,padding:`${rt.xs}px`,background:k?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:ct.md},je=e=>({flex:1,padding:`${rt.sm}px ${rt.md}px`,background:e?Pe.brandGradient(k):"transparent",border:"none",borderRadius:ct.sm,cursor:"pointer",color:e?"#FFFFFF":k?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontWeight:e?600:400,fontSize:14,transition:`all ${st.fast}ms ${st.smooth}`,display:"flex",alignItems:"center",justifyContent:"center",gap:`${rt.xs}px`}),Me={display:"flex",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(k)}`},Ie=(0,ce.jsxs)("div",{className:ee,style:te,...Q,children:[(0,ce.jsxs)("h2",{className:oe,style:se,...ne,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCircle,className:"pulse"}),i||"Recording Settings"]}),(0,ce.jsx)("button",{className:he,style:fe,onClick:e=>{me?.(e),e.defaultPrevented||t()},...ge,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),Ae={display:"flex",flexDirection:"column",gap:rt.md,...h?.style},Te={overflowY:"auto",maxHeight:"100%",...f?.style},Fe={display:"flex",flexDirection:"column",gap:rt.sm,...b?.style},De=(0,ce.jsxs)("div",{className:h?.className,style:Ae,...h,children:[(0,ce.jsxs)("div",{style:Ce,children:[(0,ce.jsxs)("button",{style:je("standard"===N),onClick:()=>L("standard"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVideo}),"Standard"]}),(0,ce.jsxs)("button",{style:je("advanced"===N),onClick:()=>L("advanced"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCog}),"Advanced"]})]}),(0,ce.jsx)("div",{className:f?.className,style:Te,...f,children:(0,ce.jsx)("div",{className:b?.className,style:Fe,...b,children:"standard"===N?(0,ce.jsx)(_t,{parameters:$}):(0,ce.jsx)(sr,{parameters:$})})})]}),Ne={height:1,backgroundColor:Pe.glassBorder(k),marginTop:0,marginBottom:0,...y?.style},Le=(0,ce.jsxs)("div",{className:x?.className,style:{...Me,...x?.style},...x,children:[(0,ce.jsx)(Nt,{variant:V?"filled":"outlined",backgroundColor:V?Pe.success:void 0,size:"md",fullWidth:!0,onPress:()=>{const e=v?.onClick;e?.(void 0),E()},isDarkMode:k,icon:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck}),...v,children:V?"Confirmed!":R}),!$?.recordPaused&&(0,ce.jsx)(Nt,{variant:"glow",size:"md",fullWidth:!0,onPress:()=>{const e=S?.onClick;e?.(void 0),W()},isDarkMode:k,icon:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlay}),backgroundColor:Pe.danger,...S,children:w})]}),Ve=(0,ce.jsxs)("div",{className:we,style:ke,...Re,children:[I?I({defaultPanels:De,parameters:$}):De,(0,ce.jsx)("div",{className:y?.className,style:Ne,...y})]});if("sidebar"===P||"inline"===P){const e=(0,ce.jsxs)("div",{className:G,style:{display:"flex",flexDirection:"column",height:"100%",...Y},...K,children:[M?M({defaultHeader:Ie,onClose:t}):Ie,(0,ce.jsx)("hr",{style:xe,...ye}),A?A({defaultBody:Ve}):Ve,Le]});return T?(0,ce.jsx)(ce.Fragment,{children:T({defaultContent:e})}):e}const Be=(0,ce.jsxs)(It,{className:G,isDarkMode:k,borderRadius:ct.xl,blur:C?20:0,padding:0,elevation:4,style:{...J,backgroundColor:k?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:j?`${Pe.elevation(4,k)}, 0 0 30px ${Pe.hexToRgba(Pe.danger,.3)}`:Pe.elevation(4,k)},children:[M?M({defaultHeader:Ie,onClose:t}):Ie,(0,ce.jsx)("hr",{style:xe,...ye}),A?A({defaultBody:Ve}):Ve,Le]});return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{className:q,style:_,onClick:z,...U}),T?T({defaultContent:Be}):Be]})},cr=({request:e,onRequestItemPress:t,requestList:r,updateRequestList:a,roomName:n,socket:o,isDarkMode:s=!1,showTooltips:i=!0,accentColor:c="#6366F1"})=>{const d={"fa-microphone":pe.faMicrophone,"fa-desktop":pe.faDesktop,"fa-video":pe.faVideo,"fa-comments":pe.faComments}[e.icon]||pe.faComments,l=s?"#E0E7FF":"#4338CA",u=c??l,p={display:"flex",alignItems:"center",gap:12,padding:"10px 12px",borderRadius:12,background:s?"rgba(255,255,255,0.06)":"rgba(15,23,42,0.03)",border:"1px solid "+(s?"rgba(255,255,255,0.14)":"rgba(15,23,42,0.08)"),boxShadow:s?"0 6px 18px rgba(0,0,0,0.35)":"0 6px 16px rgba(15,23,42,0.08)"},m={width:36,height:36,minWidth:36,borderRadius:10,display:"flex",alignItems:"center",justifyContent:"center",background:s?"rgba(99,102,241,0.15)":"rgba(99,102,241,0.12)",color:l},g={color:s?"#F8FAFC":"#0F172A",fontWeight:600,fontSize:15,lineHeight:1.3},h={color:s?"rgba(248,250,252,0.7)":"rgba(15,23,42,0.7)",fontSize:12,marginTop:2},f=e=>({width:36,height:36,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:10,border:"none",cursor:"pointer",color:"#FFFFFF",background:e?"linear-gradient(135deg, #10B981, #059669)":"linear-gradient(135deg, #F87171, #DC2626)",boxShadow:e?s?"0 8px 16px rgba(16,185,129,0.25)":"0 8px 16px rgba(16,185,129,0.2)":s?"0 8px 16px rgba(248,113,113,0.25)":"0 8px 16px rgba(248,113,113,0.2)",transition:"transform 120ms ease, box-shadow 160ms ease"}),b=s=>{t({request:e,updateRequestList:a,requestList:r,action:s,roomName:n,socket:o})},y=t=>i?`${"accepted"===t?"Accept":"Reject"} ${e.name??"request"}`:void 0,x=i?e.name??"Request":void 0;return(0,ce.jsxs)("div",{style:p,children:[(0,ce.jsx)(Ie,{message:x||"",isDarkMode:s,children:(0,ce.jsx)("div",{style:m,"aria-label":e.name,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:d,size:"lg",color:u||l})})}),(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:2},children:[(0,ce.jsx)("span",{style:g,children:e.name}),(0,ce.jsx)("span",{style:h,children:e.icon?.replace(/^fa-/,"").replace(/-/g," ")||"request"})]}),(0,ce.jsxs)("div",{style:{display:"flex",gap:8,marginLeft:"auto"},children:[(0,ce.jsx)(Ie,{message:y("accepted")||"",isDarkMode:s,children:(0,ce.jsx)("button",{onClick:()=>b("accepted"),style:f(!0),"aria-label":y("accepted"),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck})})}),(0,ce.jsx)(Ie,{message:y("rejected")||"",isDarkMode:s,children:(0,ce.jsx)("button",{onClick:()=>b("rejected"),style:f(!1),"aria-label":y("rejected"),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})})]})]},e.id)},dr=({isRequestsModalVisible:e,onRequestClose:t,requestCounter:r,onRequestFilterChange:a,onRequestItemPress:n=_,requestList:o,updateRequestList:s,roomName:i,socket:c,renderRequestComponent:d=cr,emptyState:l,renderHeader:u,renderSearch:p,renderRequest:m,renderBody:g,renderContent:h,parameters:f,position:b="topRight",title:y,isDarkMode:x=!0,enableGlassmorphism:v=!0,enableGlow:S=!0,renderMode:R="modal",requestTooltips:w=!0,requestAccentColor:k})=>{const[C,j]=(0,de.useState)(!1),[P,M]=(0,de.useState)(""),I=(0,de.useMemo)(()=>f?.getUpdatedAllParams?f.getUpdatedAllParams().filteredRequestList:f?.filteredRequestList?f.filteredRequestList:o,[f,o]),[A,T]=(0,de.useState)(I),[F,D]=(0,de.useState)(f?.filteredRequestList?.length??r),[N,L]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(f?.getUpdatedAllParams){const e=f.getUpdatedAllParams();return T(e.filteredRequestList),void D(e.filteredRequestList.length)}if(f?.filteredRequestList)return T(f.filteredRequestList),void D(f.filteredRequestList.length);T(o),D(o.length)},[f,o,N]);const V=(0,de.useMemo)(()=>{const e=f.getUpdatedAllParams?.(),t=e?.filteredRequestList||A;return P.trim()?t.filter(e=>(e.name??"").toLowerCase().includes(P.toLowerCase())):t},[f,A,P]);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>j(!0),50);return()=>clearTimeout(e)}j(!1)},[e]);const B=(0,de.useCallback)(e=>{M(e),a(e),L(e=>!e)},[a]),$=(0,de.useCallback)(async(e,t)=>{await n({request:e,updateRequestList:s,requestList:A,action:t,roomName:i,socket:c})},[n,s,A,i,c]);if("sidebar"!==R&&"inline"!==R&&!e)return null;const E={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(x),backdropFilter:v?"blur(2px)":void 0,WebkitBackdropFilter:v?"blur(2px)":void 0,opacity:C?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},W={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[b]||e.topRight})(),width:"min(400px, calc(100vw - 32px))",maxHeight:"min(500px, calc(100vh - 100px))",opacity:C?1:0,transform:C?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},H={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(x)}`},O={...nt.getTitleMedium(x),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},z={background:Pe.brandGradient(x),color:"#FFFFFF",borderRadius:ct.full,padding:`2px ${rt.sm}px`,fontSize:12,fontWeight:600},U={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:x?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},q={padding:`${rt.sm}px ${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(x)}`},G={width:"100%",padding:`${rt.sm}px ${rt.md}px`,paddingLeft:36,background:x?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(x?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,color:x?"#FFFFFF":"#1F2937",fontSize:14,outline:"none"},Y={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.sm}px`},K={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:x?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:"1px solid "+(x?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")},J={...nt.getBodyMedium(x),flex:1},X={display:"flex",gap:`${rt.xs}px`},Z=e=>({width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",background:e?"linear-gradient(135deg, #10B981, #059669)":"linear-gradient(135deg, #EF4444, #DC2626)",border:"none",borderRadius:ct.sm,cursor:"pointer",color:"#FFFFFF",transition:`all ${st.fast}ms ${st.smooth}`}),Q={flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:x?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",padding:rt.xl,textAlign:"center"},ee=(0,ce.jsxs)("div",{style:H,children:[(0,ce.jsxs)("h2",{style:O,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faHandPaper}),y||"Requests",F>0&&(0,ce.jsx)("span",{style:z,children:F})]}),(0,ce.jsx)("button",{style:U,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),te=u?u({defaultHeader:ee,counter:F,onClose:t}):ee,re=(0,ce.jsx)("div",{style:q,children:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:x?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"}}),(0,ce.jsx)("input",{type:"text",placeholder:"Search requests...",value:P,onChange:e=>B(e.target.value),style:G})]})}),ae=p?p({defaultSearch:re,onFilter:B}):re,ne=(0,ce.jsx)("div",{style:Y,children:0===V.length?"function"==typeof l?l({counter:F}):l||(0,ce.jsx)("div",{style:Q,children:"No pending requests"}):V.map((e,t)=>{if(d&&!m){const r=d({request:e,onRequestItemPress:n,requestList:A,updateRequestList:s,roomName:i,socket:c,isDarkMode:x,showTooltips:w,accentColor:k});return(0,ce.jsx)("div",{style:{marginTop:5},children:r},`${e.id}-${t}`)}return((e,t)=>{const r=t=>$(e,t),a=(0,ce.jsxs)("div",{style:K,children:[(0,ce.jsx)("span",{style:J,children:e.name}),(0,ce.jsxs)("div",{style:X,children:[(0,ce.jsx)(Ie,{message:w?`Accept ${e.name??"request"}`:"",isDarkMode:x,children:(0,ce.jsx)("button",{style:Z(!0),onClick:()=>r("accepted"),"aria-label":w?`Accept ${e.name??"request"}`:void 0,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck})})}),(0,ce.jsx)(Ie,{message:w?`Reject ${e.name??"request"}`:"",isDarkMode:x,children:(0,ce.jsx)("button",{style:Z(!1),onClick:()=>r("rejected"),"aria-label":w?`Reject ${e.name??"request"}`:void 0,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBan})})})]})]},`${e.id}-${t}`),n=m?m({request:e,index:t,defaultRequest:a,handleRespond:r}):a;return le().isValidElement(n)?le().cloneElement(n,{key:`${e.id}-${t}`}):(0,ce.jsx)(le().Fragment,{children:n},`${e.id}-${t}`)})(e,t)})}),oe=(0,ce.jsx)("div",{style:Y,children:ne}),se=g?g({defaultBody:oe,counter:F}):oe;if("sidebar"===R||"inline"===R){const e=(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[te,ae,se]});return h?h({defaultContent:e,counter:F}):e}const ie=(0,ce.jsxs)(It,{isDarkMode:x,borderRadius:ct.xl,blur:v?20:0,padding:0,elevation:4,style:{...W,backgroundColor:x?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:S?`${Pe.elevation(4,x)}, ${Pe.glowPrimary}`:Pe.elevation(4,x)},children:[te,ae,se]}),me=h?h({defaultContent:ie,counter:F}):ie;return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:E,onClick:t}),me]})},lr=({isWaitingModalVisible:e,onWaitingRoomClose:t,waitingRoomCounter:r,onWaitingRoomFilterChange:a,onWaitingRoomItemPress:n=X,waitingRoomList:o,updateWaitingList:s,roomName:i,socket:c,parameters:d,position:l="topRight",title:u,isDarkMode:p=!0,enableGlassmorphism:m=!0,enableGlow:g=!0,renderMode:h="modal"})=>{const[f,b]=(0,de.useState)(!1),[y,x]=(0,de.useState)(""),v=(0,de.useMemo)(()=>{const e=d.getUpdatedAllParams?.(),t=e?.filteredWaitingRoomList||o;return y.trim()?t.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())):t},[d,o,y]);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>b(!0),50);return()=>clearTimeout(e)}b(!1)},[e]);const S=(0,de.useCallback)(e=>{x(e),a(e)},[a]),R=(0,de.useCallback)(async(e,t)=>{await n({participantId:e.id,participantName:e.name,updateWaitingList:s,waitingList:o,type:t,roomName:i,socket:c})},[n,s,o,i,c]);if("sidebar"!==h&&"inline"!==h&&!e)return null;const w={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(p),backdropFilter:m?"blur(2px)":void 0,WebkitBackdropFilter:m?"blur(2px)":void 0,opacity:f?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},k={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[l]||e.topRight})(),width:"min(400px, calc(100vw - 32px))",maxHeight:"min(500px, calc(100vh - 100px))",opacity:f?1:0,transform:f?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},C={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(p)}`},j={...nt.getTitleMedium(p),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},P={background:Pe.brandGradient(p),color:"#FFFFFF",borderRadius:ct.full,padding:`2px ${rt.sm}px`,fontSize:12,fontWeight:600},M={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:p?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},I={padding:`${rt.sm}px ${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(p)}`},A={width:"100%",padding:`${rt.sm}px ${rt.md}px`,paddingLeft:36,background:p?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(p?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,color:p?"#FFFFFF":"#1F2937",fontSize:14,outline:"none"},T={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.sm}px`},F={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:p?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:"1px solid "+(p?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")},D={...nt.getBodyMedium(p),flex:1},N={display:"flex",gap:`${rt.xs}px`},L=e=>({width:32,height:32,display:"flex",alignItems:"center",justifyContent:"center",background:e?"linear-gradient(135deg, #10B981, #059669)":"linear-gradient(135deg, #EF4444, #DC2626)",border:"none",borderRadius:ct.sm,cursor:"pointer",color:"#FFFFFF",transition:`all ${st.fast}ms ${st.smooth}`}),V={flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:p?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",padding:rt.xl,textAlign:"center"},B=(0,ce.jsxs)("div",{style:C,children:[(0,ce.jsxs)("h2",{style:j,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faClock}),u||"Waiting Room",r>0&&(0,ce.jsx)("span",{style:P,children:r})]}),(0,ce.jsx)("button",{style:M,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),$=(0,ce.jsx)("div",{style:I,children:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:p?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"}}),(0,ce.jsx)("input",{type:"text",placeholder:"Search waiting list...",value:y,onChange:e=>S(e.target.value),style:A})]})}),E=(0,ce.jsx)("div",{style:T,children:0===v.length?(0,ce.jsx)("div",{style:V,children:"No one is waiting"}):v.map((e,t)=>(0,ce.jsxs)("div",{style:F,children:[(0,ce.jsx)("span",{style:D,children:e.name}),(0,ce.jsxs)("div",{style:N,children:[(0,ce.jsx)(Ie,{message:`Admit ${e.name}`,isDarkMode:p,children:(0,ce.jsx)("button",{style:L(!0),onClick:()=>R(e,!0),"aria-label":`Admit ${e.name}`,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck})})}),(0,ce.jsx)(Ie,{message:`Reject ${e.name}`,isDarkMode:p,children:(0,ce.jsx)("button",{style:L(!1),onClick:()=>R(e,!1),"aria-label":`Reject ${e.name}`,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBan})})})]})]},`${e.id}-${t}`))});return"sidebar"===h||"inline"===h?(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[B,$,E]}):(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:w,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:p,borderRadius:ct.xl,blur:m?20:0,padding:0,elevation:4,style:{...k,backgroundColor:p?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:g?`${Pe.elevation(4,p)}, ${Pe.glowPrimary}`:Pe.elevation(4,p)},children:[B,$,E]})]})},ur=({isDisplaySettingsModalVisible:e,onDisplaySettingsClose:t,onModifyDisplaySettings:r=N,parameters:a,position:n="topRight",isDarkMode:o=!0,enableGlassmorphism:s=!0,enableGlow:i=!0,renderMode:c="modal"})=>{const[d,l]=(0,de.useState)(!1),[u,p]=(0,de.useState)(a.meetingDisplayType),[m,g]=(0,de.useState)(a.autoWave),[h,f]=(0,de.useState)(a.forceFullDisplay),[b,y]=(0,de.useState)(a.meetingVideoOptimized),x=le().useRef(!1);(0,de.useEffect)(()=>{e&&!x.current?(p(a.meetingDisplayType),g(a.autoWave),f(a.forceFullDisplay),y(a.meetingVideoOptimized),x.current=!0):e||(x.current=!1)},[e]),(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>l(!0),50);return()=>clearTimeout(e)}l(!1)},[e]);const v=(0,de.useCallback)(async()=>{await r({parameters:{...a,meetingDisplayType:u,autoWave:m,forceFullDisplay:h,meetingVideoOptimized:b}}),t()},[r,a,u,m,h,b,t]);if("sidebar"===c||"inline"===c){const e=[{value:"video",label:"Video Only",icon:pe.faVideo},{value:"media",label:"Media",icon:pe.faDisplay},{value:"all",label:"All Participants",icon:pe.faExpand}],r={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},a={...nt.getTitleMedium(o),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},n={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},s={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.lg}px`},i={display:"flex",flexDirection:"column",gap:`${rt.sm}px`},c={...nt.getLabelLarge(o),marginBottom:rt.xs},d={display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:`${rt.sm}px`},l=e=>({padding:`${rt.md}px ${rt.sm}px`,background:e?Pe.brandGradient(o):o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:"1px solid "+(e?"transparent":o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),borderRadius:ct.md,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:`${rt.xs}px`,transition:`all ${st.fast}ms ${st.smooth}`,color:e||o?"#FFFFFF":"#1F2937",fontSize:12,fontWeight:e?600:400}),x={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:"1px solid "+(o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")},S={display:"flex",alignItems:"center",gap:`${rt.sm}px`,color:o?"#FFFFFF":"#1F2937",fontSize:14},R=e=>({width:48,height:24,borderRadius:12,background:e?Pe.brandGradient(o):o?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.2)",position:"relative",cursor:"pointer",transition:`all ${st.fast}ms ${st.smooth}`}),w=e=>({width:20,height:20,borderRadius:"50%",background:"#FFFFFF",position:"absolute",top:2,left:e?26:2,transition:`left ${st.fast}ms ${st.smooth}`,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}),k={padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(o)}`};return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsxs)("div",{style:r,children:[(0,ce.jsxs)("h2",{style:a,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDisplay}),"Display Settings"]}),(0,ce.jsx)("button",{style:n,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:s,children:[(0,ce.jsxs)("div",{style:i,children:[(0,ce.jsx)("label",{style:c,children:"Display Type"}),(0,ce.jsx)("div",{style:d,children:e.map(e=>(0,ce.jsxs)("div",{style:l(u===e.value),onClick:()=>p(e.value),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon,size:"lg"}),(0,ce.jsx)("span",{children:e.label})]},e.value))})]}),(0,ce.jsxs)("div",{style:i,children:[(0,ce.jsx)("label",{style:c,children:"Display Options"}),(0,ce.jsxs)("div",{style:x,children:[(0,ce.jsxs)("div",{style:S,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faWaveSquare}),"Audio Visualization"]}),(0,ce.jsx)("div",{style:R(m),onClick:()=>g(!m),children:(0,ce.jsx)("div",{style:w(m)})})]}),(0,ce.jsxs)("div",{style:x,children:[(0,ce.jsxs)("div",{style:S,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faExpand}),"Force Full Display"]}),(0,ce.jsx)("div",{style:R(h),onClick:()=>f(!h),children:(0,ce.jsx)("div",{style:w(h)})})]}),(0,ce.jsxs)("div",{style:x,children:[(0,ce.jsxs)("div",{style:S,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faGaugeHigh}),"Video Optimization"]}),(0,ce.jsx)("div",{style:R(b),onClick:()=>y(!b),children:(0,ce.jsx)("div",{style:w(b)})})]})]})]}),(0,ce.jsx)("div",{style:k,children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:v,isDarkMode:o,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{marginRight:rt.sm}}),"Apply Settings"]})})]})}if(!e)return null;const S=[{value:"video",label:"Video Only",icon:pe.faVideo},{value:"media",label:"Media",icon:pe.faDisplay},{value:"all",label:"All Participants",icon:pe.faExpand}],R={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(o),backdropFilter:s?"blur(2px)":void 0,WebkitBackdropFilter:s?"blur(2px)":void 0,opacity:d?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},w={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[n]||e.topRight})(),width:"min(380px, calc(100vw - 32px))",maxHeight:"min(500px, calc(100vh - 100px))",opacity:d?1:0,transform:d?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},k={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},C={...nt.getTitleMedium(o),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},j={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},P={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.lg}px`},M={display:"flex",flexDirection:"column",gap:`${rt.sm}px`},I={...nt.getLabelLarge(o),marginBottom:rt.xs},A={display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:`${rt.sm}px`},T={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:"1px solid "+(o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")},F={display:"flex",alignItems:"center",gap:`${rt.sm}px`,color:o?"#FFFFFF":"#1F2937",fontSize:14},D=e=>({width:48,height:24,borderRadius:12,background:e?Pe.brandGradient(o):o?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.2)",position:"relative",cursor:"pointer",transition:`all ${st.fast}ms ${st.smooth}`}),L=e=>({width:20,height:20,borderRadius:"50%",background:"#FFFFFF",position:"absolute",top:2,left:e?26:2,transition:`left ${st.fast}ms ${st.smooth}`,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"}),V={padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(o)}`};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:R,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:o,borderRadius:ct.xl,blur:s?20:0,padding:0,elevation:4,style:{...w,backgroundColor:o?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:i?`${Pe.elevation(4,o)}, ${Pe.glowPrimary}`:Pe.elevation(4,o)},children:[(0,ce.jsxs)("div",{style:k,children:[(0,ce.jsxs)("h2",{style:C,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDisplay}),"Display Settings"]}),(0,ce.jsx)("button",{style:j,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:P,children:[(0,ce.jsxs)("div",{style:M,children:[(0,ce.jsx)("label",{style:I,children:"Display Type"}),(0,ce.jsx)("div",{style:A,children:S.map(e=>{return(0,ce.jsxs)("div",{style:(t=u===e.value,{padding:`${rt.md}px ${rt.sm}px`,background:t?Pe.brandGradient(o):o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:"1px solid "+(t?"transparent":o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),borderRadius:ct.md,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:`${rt.xs}px`,transition:`all ${st.fast}ms ${st.smooth}`,color:t||o?"#FFFFFF":"#1F2937",fontSize:12,fontWeight:t?600:400}),onClick:()=>p(e.value),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon,size:"lg"}),(0,ce.jsx)("span",{children:e.label})]},e.value);var t})})]}),(0,ce.jsxs)("div",{style:M,children:[(0,ce.jsx)("label",{style:I,children:"Display Options"}),(0,ce.jsxs)("div",{style:T,children:[(0,ce.jsxs)("div",{style:F,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faWaveSquare}),"Audio Visualization"]}),(0,ce.jsx)("div",{style:D(m),onClick:()=>g(!m),children:(0,ce.jsx)("div",{style:L(m)})})]}),(0,ce.jsxs)("div",{style:T,children:[(0,ce.jsxs)("div",{style:F,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faExpand}),"Force Full Display"]}),(0,ce.jsx)("div",{style:D(h),onClick:()=>f(!h),children:(0,ce.jsx)("div",{style:L(h)})})]}),(0,ce.jsxs)("div",{style:T,children:[(0,ce.jsxs)("div",{style:F,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faGaugeHigh}),"Video Optimization"]}),(0,ce.jsx)("div",{style:D(b),onClick:()=>y(!b),children:(0,ce.jsx)("div",{style:L(b)})})]})]})]}),(0,ce.jsx)("div",{style:V,children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:v,isDarkMode:o,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{marginRight:rt.sm}}),"Apply Settings"]})})]})]})},pr=({isEventSettingsModalVisible:e,onEventSettingsClose:t,onModifyEventSettings:r=G,position:a="topRight",audioSetting:n,videoSetting:o,screenshareSetting:s,chatSetting:i,updateAudioSetting:c,updateVideoSetting:d,updateScreenshareSetting:l,updateChatSetting:u,updateIsSettingsModalVisible:p,roomName:m,socket:g,showAlert:h,title:f,isDarkMode:b=!0,enableGlassmorphism:y=!0,enableGlow:x=!0,renderMode:v="modal"})=>{const[S,R]=(0,de.useState)(!1),[w,k]=(0,de.useState)(n),[C,j]=(0,de.useState)(o),[P,M]=(0,de.useState)(s),[I,A]=(0,de.useState)(i);(0,de.useEffect)(()=>{k(n),j(o),M(s),A(i)},[n,o,s,i]),(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>R(!0),50);return()=>clearTimeout(e)}R(!1)},[e]);const T=(0,de.useCallback)(async()=>{await r({audioSet:w,videoSet:C,screenshareSet:P,chatSet:I,updateAudioSetting:c,updateVideoSetting:d,updateScreenshareSetting:l,updateChatSetting:u,updateIsSettingsModalVisible:p,roomName:m,socket:g,showAlert:h}),t()},[r,w,C,P,I,c,d,l,u,p,m,g,h,t]);if("sidebar"===v||"inline"===v){const e=[{value:"allow",label:"Allow",icon:pe.faCheckCircle},{value:"approval",label:"Approval",icon:pe.faLock},{value:"disallow",label:"Disallow",icon:pe.faBan}],r=[{key:"audio",label:"Audio",icon:pe.faMicrophone,value:w,setValue:k},{key:"video",label:"Video",icon:pe.faVideo,value:C,setValue:j},{key:"screenshare",label:"Screen Share",icon:pe.faDesktop,value:P,setValue:M},{key:"chat",label:"Chat",icon:pe.faComments,value:I,setValue:A}],a={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(b)}`},n={...nt.getTitleMedium(b),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},o={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:b?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},s={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.md}px`},i={background:b?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderRadius:ct.md,padding:`${rt.md}px`,border:"1px solid "+(b?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")},c={display:"flex",alignItems:"center",gap:`${rt.sm}px`,marginBottom:rt.sm,color:b?"#FFFFFF":"#1F2937",fontWeight:600},d={display:"flex",gap:`${rt.xs}px`},l=e=>({flex:1,padding:`${rt.sm}px`,background:e?Pe.brandGradient(b):"transparent",border:"1px solid "+(e?"transparent":b?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)"),borderRadius:ct.sm,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:`${rt.xs}px`,transition:`all ${st.fast}ms ${st.smooth}`,color:e?"#FFFFFF":b?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontSize:11,fontWeight:e?600:400}),u={padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(b)}`};return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsxs)("div",{style:a,children:[(0,ce.jsxs)("h2",{style:n,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCog}),f||"Event Settings"]}),(0,ce.jsx)("button",{style:o,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsx)("div",{style:s,children:r.map(t=>(0,ce.jsxs)("div",{style:i,children:[(0,ce.jsxs)("div",{style:c,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:t.icon}),t.label]}),(0,ce.jsx)("div",{style:d,children:e.map(e=>(0,ce.jsxs)("div",{style:l(t.value===e.value),onClick:()=>t.setValue(e.value),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon}),(0,ce.jsx)("span",{children:e.label})]},e.value))})]},t.key))}),(0,ce.jsx)("div",{style:u,children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:T,isDarkMode:b,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{marginRight:rt.sm}}),"Save Settings"]})})]})}if(!e)return null;const F=[{value:"allow",label:"Allow",icon:pe.faCheckCircle},{value:"approval",label:"Approval",icon:pe.faLock},{value:"disallow",label:"Disallow",icon:pe.faBan}],D=[{key:"audio",label:"Audio",icon:pe.faMicrophone,value:w,setValue:k},{key:"video",label:"Video",icon:pe.faVideo,value:C,setValue:j},{key:"screenshare",label:"Screen Share",icon:pe.faDesktop,value:P,setValue:M},{key:"chat",label:"Chat",icon:pe.faComments,value:I,setValue:A}],N={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(b),backdropFilter:y?"blur(2px)":void 0,WebkitBackdropFilter:y?"blur(2px)":void 0,opacity:S?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},L={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[a]||e.topRight})(),width:"min(420px, calc(100vw - 32px))",maxHeight:"min(600px, calc(100vh - 100px))",opacity:S?1:0,transform:S?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},V={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(b)}`},B={...nt.getTitleMedium(b),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},$={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:b?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},E={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.md}px`},W={background:b?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderRadius:ct.md,padding:`${rt.md}px`,border:"1px solid "+(b?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")},H={display:"flex",alignItems:"center",gap:`${rt.sm}px`,marginBottom:rt.sm,color:b?"#FFFFFF":"#1F2937",fontWeight:600},O={display:"flex",gap:`${rt.xs}px`},z={padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(b)}`};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:N,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:b,borderRadius:ct.xl,blur:y?20:0,padding:0,elevation:4,style:{...L,backgroundColor:b?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:x?`${Pe.elevation(4,b)}, ${Pe.glowPrimary}`:Pe.elevation(4,b)},children:[(0,ce.jsxs)("div",{style:V,children:[(0,ce.jsxs)("h2",{style:B,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCog}),f||"Event Settings"]}),(0,ce.jsx)("button",{style:$,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsx)("div",{style:E,children:D.map(e=>(0,ce.jsxs)("div",{style:W,children:[(0,ce.jsxs)("div",{style:H,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.icon}),e.label]}),(0,ce.jsx)("div",{style:O,children:F.map(t=>{return(0,ce.jsxs)("div",{style:(r=e.value===t.value,{flex:1,padding:`${rt.sm}px`,background:r?Pe.brandGradient(b):"transparent",border:"1px solid "+(r?"transparent":b?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)"),borderRadius:ct.sm,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:`${rt.xs}px`,transition:`all ${st.fast}ms ${st.smooth}`,color:r?"#FFFFFF":b?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontSize:11,fontWeight:r?600:400}),onClick:()=>e.setValue(t.value),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:t.icon}),(0,ce.jsx)("span",{children:t.label})]},t.value);var r})})]},e.key))}),(0,ce.jsx)("div",{style:z,children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:T,isDarkMode:b,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{marginRight:rt.sm}}),"Save Settings"]})})]})]})},mr=({isCoHostModalVisible:e,currentCohost:t="",participants:r,coHostResponsibility:a,position:n="topRight",roomName:o,showAlert:s,updateCoHostResponsibility:i,updateCoHost:c,updateIsCoHostModalVisible:d,socket:l,onCoHostClose:u,onModifyEventSettings:p=D,title:m,isDarkMode:g=!0,enableGlassmorphism:h=!0,enableGlow:f=!0,renderMode:b="modal"})=>{const[y,x]=(0,de.useState)(!1),[v,S]=(0,de.useState)(t),[R,w]=(0,de.useState)([]),[k,C]=(0,de.useState)(!1),[j,P]=(0,de.useState)(!1);(0,de.useEffect)(()=>{a&&w([...a])},[a]),(0,de.useEffect)(()=>{S(t)},[t]),(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>x(!0),50);return()=>clearTimeout(e)}x(!1)},[e]);const M=(0,de.useCallback)((e,t)=>{w(r=>r.map(r=>{if(r.name!==e)return r;const a="value"===t?!r.value:r.value,n="dedicated"===t?r.value?!r.dedicated:r.dedicated:!!a&&r.dedicated;return{...r,value:a,dedicated:n}}))},[]),I=(0,de.useCallback)(()=>{p({roomName:o,showAlert:s,selectedParticipant:v,coHost:t,coHostResponsibility:R,updateCoHostResponsibility:i,updateCoHost:c,updateIsCoHostModalVisible:d,socket:l}),u()},[p,o,s,v,t,R,i,c,d,l,u]),A=r.filter(e=>"2"!==e.islevel);if("sidebar"!==b&&"inline"!==b&&!e)return null;const T={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(g),backdropFilter:h?"blur(2px)":void 0,WebkitBackdropFilter:h?"blur(2px)":void 0,opacity:y?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},F={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[n]||e.topRight})(),width:"min(450px, calc(100vw - 32px))",maxHeight:"min(600px, calc(100vh - 100px))",opacity:y?1:0,transform:y?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},N={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(g)}`},L={...nt.getTitleMedium(g),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},V={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:g?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},B={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.lg}px`},$={display:"flex",flexDirection:"column",gap:`${rt.sm}px`},E={...nt.getLabelLarge(g),marginBottom:rt.xs},W={position:"absolute",right:rt.md,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:g?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.6)",fontSize:12},H={padding:`${rt.sm}px ${rt.md}px`,background:g?"rgba(59, 130, 246, 0.1)":"rgba(59, 130, 246, 0.05)",border:`1px solid ${g?Pe.primary:Pe.primaryDark}`,borderRadius:ct.md,color:g?"#FFFFFF":"#1F2937",display:"flex",alignItems:"center",gap:`${rt.sm}px`},O={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:g?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:"1px solid "+(g?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")},z=e=>({width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",background:e?Pe.brandGradient(g):"transparent",border:"2px solid "+(e?"transparent":g?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.3)"),borderRadius:4,cursor:"pointer",transition:`all ${st.fast}ms ${st.smooth}`}),U={padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(g)}`},q=(0,ce.jsxs)("div",{style:N,children:[(0,ce.jsxs)("h2",{style:L,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserShield}),m||"Co-Host Settings"]}),(0,ce.jsx)("button",{style:V,onClick:u,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),_=(0,ce.jsxs)("div",{style:B,children:[t&&(0,ce.jsxs)("div",{style:$,children:[(0,ce.jsx)("label",{style:E,children:"Current Co-Host"}),(0,ce.jsxs)("div",{style:H,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserShield}),t]})]}),(0,ce.jsxs)("div",{style:$,children:[(0,ce.jsx)("label",{style:E,children:"Select Co-Host"}),(0,ce.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,ce.jsxs)("select",{value:v,onChange:e=>S(e.target.value),style:(e=>{const t=g?"rgba(59,130,246,0.35)":"rgba(59,130,246,0.45)";return{padding:`${rt.sm}px ${rt.lg}px ${rt.sm}px ${rt.md}px`,width:"100%",background:g?"rgba(22,27,38,0.9)":"#FFFFFF",border:"1px solid "+(g?"rgba(255,255,255,0.2)":"rgba(17,24,39,0.12)"),borderRadius:ct.md,color:g?"#F9FAFB":"#0F172A",fontSize:14,outline:"none",cursor:"pointer",boxShadow:e.isFocused?`0 0 0 3px ${t}`:e.isHovered?"0 10px 30px rgba(0,0,0,0.16)":"0 2px 8px rgba(0,0,0,0.08)",transition:`all ${st.fast}ms ${st.smooth}`,appearance:"none",WebkitAppearance:"none",MozAppearance:"none"}})({isHovered:k,isFocused:j}),onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),onFocus:()=>P(!0),onBlur:()=>P(!1),"aria-label":"Select co-host",children:[(0,ce.jsx)("option",{value:"",children:"Select a participant"}),A.map(e=>(0,ce.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChevronDown,style:W})]})]}),(0,ce.jsxs)("div",{style:$,children:[(0,ce.jsx)("label",{style:E,children:"Responsibilities"}),(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:rt.xs},children:R.map(e=>(0,ce.jsxs)("div",{style:O,children:[(0,ce.jsx)("span",{style:{flex:1,color:g?"#FFFFFF":"#1F2937"},children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),(0,ce.jsxs)("div",{style:{display:"flex",gap:rt.md,alignItems:"center"},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.xs},children:[(0,ce.jsx)("span",{style:{fontSize:12,color:g?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"},children:"Enabled"}),(0,ce.jsx)("div",{style:z(e.value),onClick:()=>M(e.name,"value"),children:e.value&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,size:"xs",color:"#FFFFFF"})})]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.xs},children:[(0,ce.jsx)("span",{style:{fontSize:12,color:g?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"},children:"Dedicated"}),(0,ce.jsx)("div",{style:{...z(e.dedicated&&e.value),opacity:e.value?1:.4,cursor:e.value?"pointer":"not-allowed"},onClick:()=>{e.value&&M(e.name,"dedicated")},"aria-disabled":!e.value,children:e.dedicated&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,size:"xs",color:"#FFFFFF"})})]})]})]},e.name))})]})]}),G=(0,ce.jsx)("div",{style:U,children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:I,isDarkMode:g,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{marginRight:rt.sm}}),"Save Changes"]})});return"sidebar"===b||"inline"===b?(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[q,_,G]}):(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:T,onClick:u}),(0,ce.jsxs)(It,{isDarkMode:g,borderRadius:ct.xl,blur:h?20:0,padding:0,elevation:4,style:{...F,boxShadow:f?`${Pe.elevation(4,g)}, ${Pe.glowPrimary}`:Pe.elevation(4,g)},children:[q,_,G]})]})},gr=({isParticipantsModalVisible:e,onParticipantsClose:t,onParticipantsFilterChange:r,participantsCounter:a,onMuteParticipants:n=$,onMessageParticipants:o=B,onRemoveParticipants:s=E,parameters:i,position:c="topRight",title:d,isDarkMode:l=!0,enableGlassmorphism:u=!0,enableGlow:p=!0,renderMode:m="modal",renderHeader:g,renderSearch:h,renderLists:f,renderBody:b,renderContent:y})=>{const[x,v]=(0,de.useState)(!1),[S,R]=(0,de.useState)(""),[w,k]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>v(!0),50);return()=>clearTimeout(e)}v(!1)},[e]);const C=(0,de.useMemo)(()=>i?.getUpdatedAllParams?.()||i,[i,w]),{coHostResponsibility:j,coHost:P,member:M,islevel:I,participants:A,eventType:T,socket:F,showAlert:D,roomName:N,updateIsMessagesModalVisible:L,updateDirectMessageDetails:V,updateStartDirectMessage:W,updateParticipants:H,filteredParticipants:O}=C||{},z="broadcast"===T,U=(0,de.useMemo)(()=>{try{const e=j?.find(e=>"participants"===e.name);return A&&"2"===I||P===M&&!0===(e?.value??!1)}catch{return A&&"2"===I||!1}},[j,A,I,P,M]),q=(0,de.useMemo)(()=>O||A||[],[O,A]),[_,G]=(0,de.useState)(q);(0,de.useEffect)(()=>{const e=i?.getUpdatedAllParams?.()||i;G(e?.filteredParticipants||e?.participants||[])},[i,w]);const Y=(0,de.useMemo)(()=>S?_.filter(e=>e.name?.toLowerCase().includes(S.toLowerCase())):_,[_,S]),K=(0,de.useCallback)(e=>{R(e),r?.(e),k(e=>!e)},[r]),J=(0,de.useCallback)(async e=>{C&&await n({socket:F,coHostResponsibility:j,participant:e,member:M,islevel:I,showAlert:D,coHost:P,roomName:N})},[n,C,F,j,M,I,D,P,N]),X=(0,de.useCallback)(async e=>{C&&await o({coHostResponsibility:j,participant:e,member:M,islevel:I,showAlert:D,coHost:P,updateIsMessagesModalVisible:L,updateDirectMessageDetails:V,updateStartDirectMessage:W})},[o,C,j,M,I,D,P,L,V,W]),Z=(0,de.useCallback)(async e=>{C&&(await s({coHostResponsibility:j,participant:e,member:M,islevel:I,showAlert:D,coHost:P,participants:A,socket:F,roomName:N,updateParticipants:H}),k(e=>!e))},[s,C,j,M,I,D,P,A,F,N,H]);if("sidebar"!==m&&"inline"!==m&&!e)return null;const Q={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(l),backdropFilter:u?"blur(2px)":void 0,WebkitBackdropFilter:u?"blur(2px)":void 0,opacity:x?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},ee={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[c]||e.topRight})(),width:"min(420px, calc(100vw - 32px))",maxHeight:"calc(100vh - 100px)",opacity:x?1:0,transform:x?"center"===c?"translate(-50%, -50%) scale(1)":"scale(1) translateY(0)":"center"===c?"translate(-50%, -50%) scale(0.95)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},te={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(l)}`},re={...nt.getTitleMedium(l),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},ae={background:Pe.brandGradient(l),padding:`2px ${rt.sm}px`,borderRadius:ct.full,fontSize:12,fontWeight:600,color:"#FFFFFF"},ne={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:l?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},oe={padding:`${rt.md}px`,overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:`${rt.md}px`},se={display:"flex",alignItems:"center",gap:`${rt.sm}px`,padding:`${rt.sm}px ${rt.md}px`,background:l?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:ct.md,border:"1px solid "+(l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)")},ie={flex:1,background:"transparent",border:"none",outline:"none",color:l?"#FFFFFF":"#1F2937",fontSize:14},le={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:l?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderRadius:ct.sm,transition:`all ${st.fast}ms ${st.smooth}`},me={display:"flex",alignItems:"center",gap:`${rt.sm}px`},ge={width:36,height:36,borderRadius:ct.full,background:Pe.brandGradient(l),display:"flex",alignItems:"center",justifyContent:"center",color:"#FFFFFF",fontWeight:600,fontSize:14},he={...nt.getBodyMedium(l),display:"flex",alignItems:"center",gap:`${rt.xs}px`},fe={display:"flex",alignItems:"center",gap:`${rt.xs}px`},be={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.xs,color:l?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)",transition:`all ${st.fast}ms ${st.smooth}`},ye=(0,ce.jsxs)("div",{style:te,children:[(0,ce.jsxs)("h2",{style:re,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),d||"Participants",(0,ce.jsx)("span",{style:ae,children:a})]}),(0,ce.jsx)("button",{style:ne,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),xe=(0,ce.jsxs)("div",{style:se,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch,style:{color:l?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"}}),(0,ce.jsx)("input",{type:"text",placeholder:"Search participants...",value:S,onChange:e=>K(e.target.value),style:ie})]}),ve=(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:rt.xs},children:0===Y.length?(0,ce.jsx)("div",{style:{textAlign:"center",padding:rt.xl,color:l?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"},children:"No participants found"}):Y.map((e,t)=>(0,ce.jsxs)("div",{style:le,children:[(0,ce.jsxs)("div",{style:me,children:[(0,ce.jsx)("div",{style:ge,children:e.name?.charAt(0).toUpperCase()}),(0,ce.jsxs)("span",{style:he,children:["2"===e.islevel?`${e.name} (host)`:e.name,"2"===e.islevel&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCrown,style:{color:Pe.warning,fontSize:12}})]})]}),U&&"2"!==e.islevel&&(0,ce.jsxs)("div",{style:fe,children:[!z&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDotCircle,style:{fontSize:12,color:e.muted?Pe.danger:Pe.success,marginRight:rt.xs}}),!z&&(0,ce.jsx)(Ie,{message:e.muted?"Already muted (cannot unmute remotely)":"Mute",isDarkMode:l,children:(0,ce.jsx)("button",{style:{...be,opacity:e.muted?.5:1,cursor:e.muted?"not-allowed":"pointer"},onClick:()=>!e.muted&&J(e),"aria-label":e.muted?"Already muted":"Mute",disabled:e.muted,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.muted?pe.faMicrophoneSlash:pe.faMicrophone})})}),!z&&(0,ce.jsx)(Ie,{message:"Direct Message",isDarkMode:l,children:(0,ce.jsx)("button",{style:be,onClick:()=>X(e),"aria-label":"Direct Message",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComment})})}),(0,ce.jsx)(Ie,{message:"Remove from room",isDarkMode:l,children:(0,ce.jsx)("button",{style:{...be,color:Pe.danger},onClick:()=>Z(e),"aria-label":"Remove from room",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserMinus})})})]}),!U&&!z&&(0,ce.jsx)("div",{style:fe,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDotCircle,style:{fontSize:12,color:e.muted?Pe.danger:Pe.success}})})]},e.id||t))}),Se=(0,ce.jsxs)("div",{style:oe,children:[h?h({defaultSearch:xe,onFilter:K}):xe,f?f({defaultLists:ve,participants:Y,hasModeratorControls:U}):ve]});if("sidebar"===m||"inline"===m){const e=(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[g?g({defaultHeader:ye,counter:a,onClose:t}):ye,b?b({defaultBody:Se,counter:a}):Se]});return y?(0,ce.jsx)(ce.Fragment,{children:y({defaultContent:e,counter:a})}):e}const Re=(0,ce.jsxs)(It,{isDarkMode:l,borderRadius:ct.xl,blur:u?20:0,padding:0,elevation:4,style:{...ee,backgroundColor:l?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:p?`${Pe.elevation(4,l)}, ${Pe.glowPrimary}`:Pe.elevation(4,l)},children:[g?g({defaultHeader:ye,counter:a,onClose:t}):ye,b?b({defaultBody:Se,counter:a}):Se]});return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:Q,onClick:t}),y?y({defaultContent:Re,counter:a}):Re]})},hr=({isMessagesModalVisible:e,onMessagesClose:t,onSendMessagePress:r=V,messages:a,eventType:n,member:o,islevel:s,coHostResponsibility:i,coHost:c,startDirectMessage:d,directMessageDetails:l,updateStartDirectMessage:u,updateDirectMessageDetails:p,showAlert:m,roomName:g,socket:h,chatSetting:f,position:b="topRight",title:y,isDarkMode:x=!0,enableGlassmorphism:v=!0,enableGlow:S=!0,renderMode:R="modal",renderHeader:w,renderTabs:k,renderPanels:C,renderBody:j,renderContent:P})=>{const M=(0,de.useMemo)(()=>"webinar"===n||"conference"===n?"direct":"group",[n]),[I,A]=(0,de.useState)(!1),[T,F]=(0,de.useState)(M),[D,N]=(0,de.useState)(""),[L,B]=(0,de.useState)(""),[$,E]=(0,de.useState)(!1),[W,H]=(0,de.useState)(null),[O,z]=(0,de.useState)(null),[U,q]=(0,de.useState)([]),[_,G]=(0,de.useState)([]),[Y,K]=(0,de.useState)(0),[J,X]=(0,de.useState)(0),Z=(0,de.useRef)(null),Q=(0,de.useRef)(null);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>A(!0),50);return()=>clearTimeout(e)}A(!1)},[e]),(0,de.useEffect)(()=>{if(!e)return;const t=i?.find(e=>"chat"===e.name)?.value,r=a.filter(e=>!e.group&&(e.sender===o||e.receivers.includes(o)||"2"===s||c===o&&!0===t)),n=a.filter(e=>e.group);q(r),G(n)},[c,i,e,s,o,a]),(0,de.useEffect)(()=>{d&&l?"webinar"!==n&&"conference"!==n||(F("direct"),E(!0)):"broadcast"!==n&&"chat"!==n||F("group")},[d,l,n]),(0,de.useEffect)(()=>{if(d&&l&&$){Q.current?.focus();const e={text:"Replying to: ",username:l.name};H(e),z(l.name)}else H(null),Q.current&&(Q.current.value="")},[l,$,d]),(0,de.useEffect)(()=>{Z.current?.scrollIntoView({behavior:"smooth"})},[U,_]);const ee="direct"===T?U:_,te="direct"===T?D:L,re=(0,de.useCallback)(e=>{"direct"===T?N(e):B(e)},[T]),ae=(0,de.useCallback)(e=>{H({text:"Replying to: ",username:e}),z(e)},[]),ne=(0,de.useCallback)(async()=>{const e="direct"===T?D:L;e?e.length>350?m?.({message:"Message is too long",type:"danger",duration:3e3}):""!==e.trim()?"direct"!==T||O||"2"!==s?(await r({message:e,receivers:"direct"===T?[O]:[],group:"group"===T,messagesLength:a.length,member:o,sender:o,islevel:s,showAlert:m,coHostResponsibility:i,coHost:c,roomName:g,socket:h,chatSetting:f}),"direct"===T?N(""):B(""),W&&(H(null),z(null)),$&&(p(null),u(!1),E(!1))):m?.({message:"Please select a message to reply to",type:"danger",duration:3e3}):m?.({message:"Message is not valid.",type:"danger",duration:3e3}):m?.({message:"Please enter a message",type:"danger",duration:3e3})},[T,D,L,O,s,m,r,a.length,o,i,c,g,h,f,W,$,p,u]),oe=(0,de.useCallback)(()=>{F("direct"),E(!0),K(U.length)},[U.length]),se=(0,de.useCallback)(()=>{F("group"),E(!1),X(_.length)},[_.length]),ie=Math.max(0,U.length-Y),le=Math.max(0,_.length-J);if((0,de.useEffect)(()=>{"direct"===T?K(U.length):X(_.length)},[T,U.length,_.length]),"sidebar"!==R&&"inline"!==R&&!e)return null;const me={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(x),backdropFilter:v?"blur(2px)":void 0,WebkitBackdropFilter:v?"blur(2px)":void 0,opacity:I?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},ge={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[b]||e.topRight})(),width:"min(450px, calc(100vw - 32px))",height:"min(600px, calc(100vh - 100px))",opacity:I?1:0,transform:I?"center"===b?"translate(-50%, -50%) scale(1)":"scale(1) translateY(0)":"center"===b?"translate(-50%, -50%) scale(0.95)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},he={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(x)}`},fe={...nt.getTitleMedium(x),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},be={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:x?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},ye={display:"flex",gap:`${rt.xs}px`,padding:`${rt.sm}px`,background:x?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",overflow:"hidden"},xe=e=>({flex:1,minWidth:0,padding:`${rt.sm}px`,background:e?Pe.brandGradient(x):"transparent",border:"none",borderRadius:ct.sm,cursor:"pointer",color:e?"#FFFFFF":x?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontWeight:e?600:400,fontSize:14,transition:`all ${st.fast}ms ${st.smooth}`,display:"flex",alignItems:"center",justifyContent:"center",gap:`${rt.xs}px`,overflow:"hidden"}),ve={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.sm}px`},Se=e=>({maxWidth:"80%",alignSelf:e?"flex-end":"flex-start",padding:`${rt.sm}px ${rt.md}px`,borderRadius:ct.md,background:e?Pe.brandGradient(x):x?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:e||x?"#FFFFFF":"#1F2937"}),Re={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:3,gap:rt.sm},we={fontSize:11,fontWeight:600,opacity:.8},ke={fontSize:10,fontWeight:600,opacity:.7,marginLeft:6},Ce={...nt.getBodyMedium(x),margin:0,wordBreak:"break-word"},je={fontSize:10,opacity:.5},Me={background:"transparent",border:"none",cursor:"pointer",padding:2,marginLeft:5,borderRadius:2,color:x?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"},Ae={display:"flex",alignItems:"center",padding:`${rt.xs}px ${rt.sm}px`,background:x?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",borderRadius:ct.sm,marginBottom:rt.xs,fontSize:12,border:"1px solid "+(x?"rgba(59, 130, 246, 0.3)":"rgba(59, 130, 246, 0.2)")},Te={display:"flex",flexDirection:"column",gap:6,padding:"10px 12px",borderRadius:ct.md,backgroundColor:x?"rgba(59, 130, 246, 0.12)":"rgba(59, 130, 246, 0.08)",border:"1px solid "+(x?"rgba(59, 130, 246, 0.25)":"rgba(59, 130, 246, 0.15)"),marginBottom:rt.sm},Fe={display:"flex",alignItems:"center",gap:6,fontSize:12,fontWeight:600,color:x?"#93c5fd":"#2563eb"},De={margin:0,fontSize:11,lineHeight:1.4,color:x?"#cbd5e1":"#475569"},Ne={display:"flex",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(x)}`,flexDirection:"column",overflow:"hidden"},Le={display:"flex",gap:`${rt.sm}px`,alignItems:"center"},Ve={flex:1,padding:`${rt.sm}px ${rt.md}px`,background:x?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(x?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,color:x?"#FFFFFF":"#1F2937",fontSize:14,outline:"none"},Be="webinar"===n||"conference"===n,$e=(0,ce.jsxs)("div",{style:he,children:[(0,ce.jsxs)("h2",{style:fe,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments}),y||"Messages"]}),(0,ce.jsx)(Ie,{message:"Close messages",isDarkMode:x,children:(0,ce.jsx)("button",{style:be,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})})]}),Ee={display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:18,height:18,padding:"0 5px",borderRadius:9,fontSize:11,fontWeight:700,marginLeft:6},We={...Ee,background:"rgba(255,255,255,0.3)",color:"#FFFFFF"},He={...Ee,background:Pe.primary,color:"#FFFFFF"},Oe=Be?(0,ce.jsxs)("div",{style:ye,children:[(0,ce.jsx)(Ie,{message:`Direct messages (${U.length})${ie>0?` - ${ie} new`:""}`,isDarkMode:x,position:"bottom",children:(0,ce.jsxs)("button",{style:xe("direct"===T),onClick:oe,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUser}),"Direct",U.length>0&&(0,ce.jsx)("span",{style:"direct"===T?We:He,children:"direct"!==T&&ie>0?`+${ie}`:U.length})]})}),(0,ce.jsx)(Ie,{message:`Group messages (${_.length})${le>0?` - ${le} new`:""}`,isDarkMode:x,position:"bottom",children:(0,ce.jsxs)("button",{style:xe("group"===T),onClick:se,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),"Group",_.length>0&&(0,ce.jsx)("span",{style:"group"===T?We:He,children:"group"!==T&&le>0?`+${le}`:_.length})]})})]}):null,ze="direct"===T&&"2"===s&&!O&&(0,ce.jsxs)("div",{style:Te,children:[(0,ce.jsxs)("div",{style:Fe,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserFriends}),(0,ce.jsx)("span",{children:"Select a recipient"})]}),(0,ce.jsxs)("p",{style:De,children:["To send a direct message, either reply to an existing message above, or go to the ",(0,ce.jsx)("strong",{children:"Participants"})," panel and click the message icon next to a participant's name."]})]}),Ue="direct"===T&&"2"!==s&&(0,ce.jsxs)("div",{style:{...Te,backgroundColor:x?"rgba(234, 179, 8, 0.12)":"rgba(234, 179, 8, 0.08)",border:"1px solid "+(x?"rgba(234, 179, 8, 0.25)":"rgba(234, 179, 8, 0.15)")},children:[(0,ce.jsxs)("div",{style:{...Fe,color:x?"#fcd34d":"#b45309"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faLock}),(0,ce.jsx)("span",{children:"Private Messages"})]}),(0,ce.jsx)("p",{style:De,children:"Your direct messages are only visible to you and the host/co-host."})]}),qe=(0,ce.jsxs)("div",{style:ve,children:[ze,Ue,0===ee.length?(0,ce.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:rt.sm,color:x?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",textAlign:"center",padding:rt.lg},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:"direct"===T?pe.faUser:pe.faUsers,style:{fontSize:32,opacity:.4}}),(0,ce.jsx)("span",{style:{fontSize:14},children:"direct"===T?"No direct messages yet":"No group messages yet"}),"direct"===T&&"2"===s&&(0,ce.jsx)("span",{style:{fontSize:12,opacity:.7},children:"Start a conversation from the Participants panel"}),"group"===T&&(0,ce.jsx)("span",{style:{fontSize:12,opacity:.7},children:"Send a message to everyone in the room"})]}):ee.map((e,t)=>{const r=e.sender===o;return(0,ce.jsxs)("div",{style:Se(r),children:[(0,ce.jsxs)("div",{style:Re,children:[r&&!e.group&&(0,ce.jsxs)("span",{style:ke,children:["To: ",e.receivers.join(", ")]}),!r&&(0,ce.jsx)("span",{style:we,children:e.sender}),(0,ce.jsx)("span",{style:je,children:e.timestamp}),!r&&!e.group&&(0,ce.jsx)(Ie,{message:`Reply to ${e.sender}`,isDarkMode:x,children:(0,ce.jsx)("button",{style:Me,onClick:()=>ae(e.sender),"aria-label":`Reply to ${e.sender}`,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faReply,size:"xs"})})})]}),(0,ce.jsx)("p",{style:Ce,children:e.message})]},t)}),(0,ce.jsx)("div",{ref:Z})]}),_e=(0,ce.jsxs)("div",{style:Ne,children:[W&&(0,ce.jsxs)("div",{style:Ae,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faReply,style:{marginRight:6,color:x?"#93c5fd":"#2563eb",fontSize:11}}),(0,ce.jsx)("span",{style:{fontWeight:600,marginRight:4,color:x?"#93c5fd":"#2563eb"},children:W.text}),(0,ce.jsx)("span",{style:{color:x?"#fbbf24":"#d97706",fontWeight:600},children:W.username})]}),(0,ce.jsxs)("div",{style:Le,children:[(0,ce.jsx)("input",{ref:Q,type:"text",placeholder:"direct"===T?O?`Send a direct message to ${O}`:"2"===s?"Select a message to reply to":"Send a direct message":"chat"===n?"Send a message":"Send a message to everyone",value:te,onChange:e=>re(e.target.value),onKeyPress:e=>"Enter"===e.key&&ne(),style:Ve,maxLength:350}),(0,ce.jsx)(Ie,{message:"direct"===T&&O?`Send to ${O}`:"Send message",isDarkMode:x,children:(0,ce.jsx)(Nt,{variant:"gradient",size:"md",onPress:ne,isDarkMode:x,disabled:!te.trim(),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPaperPlane})})})]})]}),Ge=(0,ce.jsxs)(ce.Fragment,{children:[k?k({defaultTabs:Oe,activeTab:T,switchToDirect:oe,switchToGroup:se}):Oe,C?C({defaultPanels:qe,activeTab:T}):qe,_e]});if("sidebar"===R||"inline"===R){const e=(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[w?w({defaultHeader:$e,activeTab:T,onClose:t}):$e,j?j({defaultBody:Ge,activeTab:T}):Ge]});return P?(0,ce.jsx)(ce.Fragment,{children:P({defaultContent:e,activeTab:T})}):e}const Ye=(0,ce.jsxs)(It,{isDarkMode:x,borderRadius:ct.xl,blur:v?20:0,padding:0,elevation:4,style:{...ge,backgroundColor:x?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:S?`${Pe.elevation(4,x)}, ${Pe.glowPrimary}`:Pe.elevation(4,x)},children:[w?w({defaultHeader:$e,activeTab:T,onClose:t}):$e,j?j({defaultBody:Ge,activeTab:T}):Ge]});return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:me,onClick:t}),P?P({defaultContent:Ye,activeTab:T}):Ye]})},fr=async({parameters:e})=>{let{recordStarted:t,recordResumed:r,recordStopped:a,recordPaused:n,recordingMediaOptions:o,videoAlreadyOn:s,currentFacingMode:i,prevFacingMode:c,allowed:d,audioOnlyRoom:l,updateCurrentFacingMode:u,updateIsMediaSettingsModalVisible:p,updatePrevFacingMode:m,showAlert:g,switchUserVideoAlt:h}=e;if(l)return void g?.({message:"You cannot turn on your camera in an audio-only event.",type:"danger",duration:3e3});let f=!1;if(!t&&!r||a||n||"video"!==o||(f=!0),d){if(f){if(s)return void g?.({message:"Please turn off your video before switching.",type:"danger",duration:3e3})}else if(!s)return void g?.({message:"Please turn on your video before switching.",type:"danger",duration:3e3});c=i,m(c),i="environment"===i?"user":"environment",u(i),p(!1),await h({videoPreference:i,checkoff:f,parameters:e})}else g?.({message:"Allow access to your camera by starting it for the first time.",type:"danger",duration:3e3})},br=({isMediaSettingsModalVisible:e,onMediaSettingsClose:t,switchCameraOnPress:r=fr,switchVideoOnPress:a=J,switchAudioOnPress:n=K,parameters:o,position:s="topRight",onOpenBackgroundSidebar:i,isDarkMode:c=!0,enableGlassmorphism:d=!0,enableGlow:l=!0,renderMode:u="modal"})=>{const[p,m]=(0,de.useState)(!1),[g,h]=(0,de.useState)("video"),[f,b]=(0,de.useState)(""),[y,x]=(0,de.useState)(""),v=(0,de.useCallback)(()=>o.getUpdatedAllParams?o.getUpdatedAllParams():o,[o]),S=(0,de.useCallback)(()=>{const e=v(),t=e?.videoInputs??[],r=e?.audioInputs??[],a=e?.userDefaultVideoInputDevice??t[0]?.deviceId??"",n=e?.userDefaultAudioInputDevice??r[0]?.deviceId??"";return{...e,videoInputs:t,audioInputs:r,userDefaultVideoInputDevice:a,userDefaultAudioInputDevice:n,isBackgroundModalVisible:e?.isBackgroundModalVisible??!1,updateIsBackgroundModalVisible:e?.updateIsBackgroundModalVisible??(()=>{})}},[v]),R=(0,de.useCallback)(()=>{const e=S();e&&(b(e.userDefaultVideoInputDevice||""),x(e.userDefaultAudioInputDevice||""))},[S]);(0,de.useEffect)(()=>{e&&R()},[e,R]),(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>m(!0),50);return()=>clearTimeout(e)}m(!1)},[e]);const w=(0,de.useCallback)(async e=>{if(!e||e===f)return;const t=S();t&&(b(e),await a({videoPreference:e,parameters:t}))},[a,S,f]),k=(0,de.useCallback)(async e=>{if(!e||e===y)return;const t=S();t&&(x(e),await n({audioPreference:e,parameters:t}))},[n,S,y]),C=(0,de.useCallback)(async()=>{const e=S();e&&await r({parameters:e})},[r,S]),j=(0,de.useCallback)(()=>{const e=S();e&&(i?i():e.updateIsBackgroundModalVisible(!e.isBackgroundModalVisible))},[S,i]);if("sidebar"===u||"inline"===u){const e=S(),r={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(c)}`},a={...nt.getTitleMedium(c),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},n={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:c?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},o={display:"flex",gap:`${rt.xs}px`,padding:`${rt.sm}px`,background:c?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)"},s=e=>({flex:1,padding:`${rt.sm}px`,background:e?Pe.brandGradient(c):"transparent",border:"none",borderRadius:ct.sm,cursor:"pointer",color:e?"#FFFFFF":c?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontWeight:e?600:400,fontSize:14,transition:`all ${st.fast}ms ${st.smooth}`,display:"flex",alignItems:"center",justifyContent:"center",gap:`${rt.xs}px`}),i={flex:1,overflowY:"auto",padding:`${rt.md}px`},d={...nt.getLabelLarge(c),marginBottom:rt.sm,display:"flex",alignItems:"center",gap:`${rt.sm}px`},l={display:"flex",flexDirection:"column",gap:`${rt.xs}px`},u=e=>({padding:`${rt.sm}px ${rt.md}px`,background:e?c?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)":c?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:`1px solid ${e?c?Pe.primaryDark:Pe.primary:c?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,borderRadius:ct.md,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:`${rt.sm}px`,transition:`all ${st.fast}ms ${st.smooth}`,color:c?"#FFFFFF":"#1F2937",fontSize:14}),p={display:"flex",flexDirection:"column",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(c)}`},m=!e?.videoAlreadyOn&&(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:`${rt.sm}px`,padding:`${rt.md}px`,backgroundColor:c?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",border:"1px solid "+(c?"rgba(59, 130, 246, 0.3)":"rgba(59, 130, 246, 0.25)"),borderRadius:ct.md,margin:`0 ${rt.md}px`},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCamera,style:{color:c?"#60a5fa":"#3b82f6",fontSize:16,marginTop:2}}),(0,ce.jsxs)("div",{style:{flex:1},children:[(0,ce.jsx)("div",{style:{fontWeight:600,fontSize:13,color:c?"#93c5fd":"#2563eb",marginBottom:4},children:"Camera is currently off"}),(0,ce.jsx)("div",{style:{fontSize:12,color:c?"#bfdbfe":"#3b82f6",lineHeight:1.4},children:"You can still choose a background now! It will be applied automatically when you turn on your camera."})]})]}),b=(0,ce.jsxs)("div",{style:p,children:[m,(0,ce.jsx)(Ie,{message:"Toggle between front/back or available cameras",position:"right",children:(0,ce.jsx)("div",{children:(0,ce.jsxs)(Nt,{variant:"outlined",size:"md",onPress:C,isDarkMode:c,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt,style:{marginRight:rt.sm}}),"Switch Camera"]})})}),(0,ce.jsx)(Ie,{message:"Open virtual background settings",position:"right",children:(0,ce.jsx)("div",{children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:j,isDarkMode:c,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPhotoFilm,style:{marginRight:rt.sm}}),"Virtual Background"]})})})]});return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsxs)("div",{style:r,children:[(0,ce.jsxs)("h2",{style:a,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVideo}),"Media Settings"]}),(0,ce.jsx)("button",{style:n,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),b,(0,ce.jsxs)("div",{style:o,children:[(0,ce.jsxs)("button",{style:s("video"===g),onClick:()=>h("video"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCamera}),"Video"]}),(0,ce.jsxs)("button",{style:s("audio"===g),onClick:()=>h("audio"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone}),"Audio"]})]}),(0,ce.jsxs)("div",{style:i,children:["video"===g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:d,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCamera}),"Video Input"]}),(0,ce.jsx)("div",{style:l,children:e.videoInputs.map(e=>(0,ce.jsx)(Ie,{message:e.label||`Camera ${e.deviceId.slice(0,8)}...`,position:"left",children:(0,ce.jsxs)("div",{style:u(f===e.deviceId),onClick:()=>w(e.deviceId),children:[(0,ce.jsx)("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:e.label||`Camera ${e.deviceId.slice(0,8)}...`}),f===e.deviceId&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{color:c?Pe.primaryDark:Pe.primary}})]})},e.deviceId))})]}),"audio"===g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:d,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone}),"Audio Input"]}),(0,ce.jsx)("div",{style:l,children:e.audioInputs.map(e=>(0,ce.jsx)(Ie,{message:e.label||`Microphone ${e.deviceId.slice(0,8)}...`,position:"left",children:(0,ce.jsxs)("div",{style:u(y===e.deviceId),onClick:()=>k(e.deviceId),children:[(0,ce.jsx)("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:e.label||`Microphone ${e.deviceId.slice(0,8)}...`}),y===e.deviceId&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{color:c?Pe.primaryDark:Pe.primary}})]})},e.deviceId))})]})]}),b]})}if(!e)return null;const P=S(),M={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(c),backdropFilter:d?"blur(2px)":void 0,WebkitBackdropFilter:d?"blur(2px)":void 0,opacity:p?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},I={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[s]||e.topRight})(),width:"min(400px, calc(100vw - 32px))",maxHeight:"min(500px, calc(100vh - 100px))",opacity:p?1:0,transform:p?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},A={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(c)}`},T={...nt.getTitleMedium(c),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},F={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:c?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},D={display:"flex",gap:`${rt.xs}px`,padding:`${rt.sm}px`,background:c?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)"},N=e=>({flex:1,padding:`${rt.sm}px`,background:e?Pe.brandGradient(c):"transparent",border:"none",borderRadius:ct.sm,cursor:"pointer",color:e?"#FFFFFF":c?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontWeight:e?600:400,fontSize:14,transition:`all ${st.fast}ms ${st.smooth}`,display:"flex",alignItems:"center",justifyContent:"center",gap:`${rt.xs}px`}),L={flex:1,overflowY:"auto",padding:`${rt.md}px`},V={...nt.getLabelLarge(c),marginBottom:rt.sm,display:"flex",alignItems:"center",gap:`${rt.sm}px`},B={display:"flex",flexDirection:"column",gap:`${rt.xs}px`},$=e=>({padding:`${rt.sm}px ${rt.md}px`,background:e?c?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)":c?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:`1px solid ${e?c?Pe.primaryDark:Pe.primary:c?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,borderRadius:ct.md,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",gap:`${rt.sm}px`,transition:`all ${st.fast}ms ${st.smooth}`,color:c?"#FFFFFF":"#1F2937",fontSize:14}),E={display:"flex",flexDirection:"column",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(c)}`};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:M,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:c,borderRadius:ct.xl,blur:d?20:0,padding:0,elevation:4,style:{...I,backgroundColor:c?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:l?`${Pe.elevation(4,c)}, ${Pe.glowPrimary}`:Pe.elevation(4,c)},children:[(0,ce.jsxs)("div",{style:A,children:[(0,ce.jsxs)("h2",{style:T,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVideo}),"Media Settings"]}),(0,ce.jsx)("button",{style:F,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:D,children:[(0,ce.jsxs)("button",{style:N("video"===g),onClick:()=>h("video"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCamera}),"Video"]}),(0,ce.jsxs)("button",{style:N("audio"===g),onClick:()=>h("audio"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone}),"Audio"]})]}),(0,ce.jsxs)("div",{style:L,children:["video"===g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:V,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCamera}),"Video Input"]}),(0,ce.jsx)("div",{style:B,children:P.videoInputs.map(e=>(0,ce.jsx)(Ie,{message:e.label||`Camera ${e.deviceId.slice(0,8)}...`,position:"left",children:(0,ce.jsxs)("div",{style:$(f===e.deviceId),onClick:()=>w(e.deviceId),children:[(0,ce.jsx)("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:e.label||`Camera ${e.deviceId.slice(0,8)}...`}),f===e.deviceId&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{color:c?Pe.primaryDark:Pe.primary}})]})},e.deviceId))})]}),"audio"===g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:V,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone}),"Audio Input"]}),(0,ce.jsx)("div",{style:B,children:P.audioInputs.map(e=>(0,ce.jsx)(Ie,{message:e.label||`Microphone ${e.deviceId.slice(0,8)}...`,position:"left",children:(0,ce.jsxs)("div",{style:$(y===e.deviceId),onClick:()=>k(e.deviceId),children:[(0,ce.jsx)("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis"},children:e.label||`Microphone ${e.deviceId.slice(0,8)}...`}),y===e.deviceId&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{color:c?Pe.primaryDark:Pe.primary}})]})},e.deviceId))})]})]}),(0,ce.jsxs)("div",{style:E,children:[!P?.videoAlreadyOn&&(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:`${rt.sm}px`,padding:`${rt.md}px`,backgroundColor:c?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",border:"1px solid "+(c?"rgba(59, 130, 246, 0.3)":"rgba(59, 130, 246, 0.25)"),borderRadius:ct.md},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCamera,style:{color:c?"#60a5fa":"#3b82f6",fontSize:16,marginTop:2}}),(0,ce.jsxs)("div",{style:{flex:1},children:[(0,ce.jsx)("div",{style:{fontWeight:600,fontSize:13,color:c?"#93c5fd":"#2563eb",marginBottom:4},children:"Camera is currently off"}),(0,ce.jsx)("div",{style:{fontSize:12,color:c?"#bfdbfe":"#3b82f6",lineHeight:1.4},children:"You can still choose a background now! It will be applied automatically when you turn on your camera."})]})]}),(0,ce.jsx)(Ie,{message:"Toggle between front/back or available cameras",position:"left",children:(0,ce.jsx)("div",{children:(0,ce.jsxs)(Nt,{variant:"outlined",size:"md",onPress:C,isDarkMode:c,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt,style:{marginRight:rt.sm}}),"Switch Camera"]})})}),(0,ce.jsx)(Ie,{message:"Open virtual background settings",position:"left",children:(0,ce.jsx)("div",{children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:j,isDarkMode:c,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPhotoFilm,style:{marginRight:rt.sm}}),"Virtual Background"]})})})]})]})]})},yr=({isConfirmExitModalVisible:e,onConfirmExitClose:t,position:r="center",exitEventOnConfirm:a=L,member:n,ban:o=!1,roomName:s,socket:i,islevel:c,title:d,confirmLabel:l,cancelLabel:u,message:p,isDarkMode:m=!0,enableGlassmorphism:g=!0,enableGlow:h=!0})=>{const[f,b]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>b(!0),50);return()=>clearTimeout(e)}b(!1)},[e]);const y=(0,de.useCallback)(()=>{a({socket:i,member:n,roomName:s,ban:o}),t()},[a,i,n,s,o,t]);if(!e)return null;const x={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(m),backdropFilter:g?"blur(2px)":void 0,WebkitBackdropFilter:g?"blur(2px)":void 0,opacity:f?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},v={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[r]||e.center})(),width:"min(380px, calc(100vw - 32px))",opacity:f?1:0,transform:f?"center"===r?"translate(-50%, -50%) scale(1)":"scale(1)":"center"===r?"translate(-50%, -50%) scale(0.95)":"scale(0.95)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001},S={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(m)}`},R={...nt.getTitleMedium(m),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0,color:"#EF4444"},w={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:m?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},k={padding:`${rt.lg}px ${rt.md}px`,textAlign:"center"},C={width:64,height:64,borderRadius:"50%",background:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",marginBottom:rt.md},j={...nt.getBodyLarge(m),color:m?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",margin:0},P={display:"flex",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(m)}`};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:x,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:m,borderRadius:ct.xl,blur:g?20:0,padding:0,elevation:4,style:{...v,boxShadow:h?`${Pe.elevation(4,m)}, 0 0 20px rgba(239, 68, 68, 0.15)`:Pe.elevation(4,m)},children:[(0,ce.jsxs)("div",{style:S,children:[(0,ce.jsxs)("h2",{style:R,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSignOutAlt}),d||("2"===c?"End Meeting":"Leave Meeting")]}),(0,ce.jsx)("button",{style:w,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:k,children:[(0,ce.jsx)("div",{style:C,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faExclamationTriangle,size:"2x",color:"#EF4444"})}),(0,ce.jsx)("p",{style:j,children:"function"==typeof p?p({islevel:c}):p||("2"===c?"Are you sure you want to end the meeting for everyone?":"Are you sure you want to leave the meeting?")})]}),(0,ce.jsxs)("div",{style:P,children:[(0,ce.jsx)(Nt,{variant:"outlined",size:"md",onPress:t,isDarkMode:m,style:{flex:1},children:u||"Cancel"}),(0,ce.jsx)(Nt,{variant:"filled",size:"md",onPress:y,isDarkMode:m,style:{flex:1,background:"linear-gradient(135deg, #EF4444, #DC2626)"},children:l||("2"===c?"End Meeting":"Leave")})]})]})]})},xr=({isConfirmHereModalVisible:e,onConfirmHereClose:t,countdownDuration:r=120,socket:a,localSocket:n,roomName:o,member:s,onTimeout:i,isDarkMode:c=!1})=>{const[d,l]=(0,de.useState)(r),[u,p]=(0,de.useState)(!1),m=(0,de.useRef)(null),g=(0,de.useRef)(()=>{}),h=d/r,f=2*Math.PI*45,b=f*(1-h),y=(0,de.useCallback)(()=>{m.current&&(clearInterval(m.current),m.current=null)},[]),x=(0,de.useCallback)(()=>{a?.emit("disconnectUser",{member:s,roomName:o,ban:!1});try{n?.id&&n.emit("disconnectUser",{member:s,roomName:o,ban:!1})}catch{}},[a,n,s,o]),v=(0,de.useCallback)(()=>{y(),t()},[y,t]);(0,de.useEffect)(()=>{g.current=()=>{x(),i?.(),v()}},[x,i,v]);const S=(0,de.useCallback)(()=>{v()},[v]);if((0,de.useEffect)(()=>{l(r)},[r,e]),(0,de.useEffect)(()=>{if(!e)return p(!1),void y();p(!0),y();let t=r;return l(r),m.current=setInterval(()=>{t-=1,l(Math.max(t,0)),t<=0&&(y(),g.current())},1e3),()=>{y()}},[y,r,e]),!e)return null;const R={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:c?"rgba(0, 0, 0, 0.75)":"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,opacity:u?1:0,transition:"opacity 0.3s ease-out"},w={width:360,padding:rt.xl,display:"flex",flexDirection:"column",alignItems:"center",gap:rt.lg,transform:u?"scale(1) translateY(0)":"scale(0.9) translateY(20px)",transition:"transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",background:c?"linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95))":"linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(241, 245, 249, 0.95))",borderRadius:20,border:c?"1px solid rgba(255, 255, 255, 0.1)":"1px solid rgba(0, 0, 0, 0.08)",boxShadow:c?"0 20px 60px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 20px 60px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.8)"},k={position:"absolute",...nt.getHeadlineLarge(c),fontSize:28,fontWeight:700,color:d<=30?Pe.danger:d<=60?Pe.warning:c?Pe.textPrimaryDark:Pe.textPrimary},C={...nt.getTitleLarge(c),textAlign:"center",marginBottom:rt.xs},j={...nt.getBodyMedium(c),textAlign:"center",opacity:.8,lineHeight:1.5},P={width:"100%",padding:`${rt.md}px ${rt.lg}px`,borderRadius:12,border:"none",background:`linear-gradient(135deg, ${Pe.success} 0%, ${Pe.successDark} 100%)`,color:"#ffffff",fontSize:16,fontWeight:600,cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.3s ease",boxShadow:`0 4px 20px ${Pe.success}40`},M={...nt.getBodySmall(c),color:d<=30?Pe.danger:c?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",textAlign:"center",marginTop:rt.sm},I=()=>d<=30?Pe.danger:d<=60?Pe.warning:Pe.primary;return(0,ce.jsx)("div",{style:R,onClick:()=>{S()},children:(0,ce.jsxs)("div",{onClick:e=>e.stopPropagation(),style:w,children:[(0,ce.jsxs)("div",{style:{position:"relative",width:100,height:100,display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,ce.jsxs)("svg",{width:"100",height:"100",style:{transform:"rotate(-90deg)"},children:[(0,ce.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:c?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",strokeWidth:"6"}),(0,ce.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:I(),strokeWidth:"6",strokeLinecap:"round",strokeDasharray:f,strokeDashoffset:b,style:{transition:"stroke-dashoffset 1s linear, stroke 0.3s ease",filter:`drop-shadow(0 0 6px ${I()}80)`}})]}),(0,ce.jsx)("span",{style:k,children:d})]}),(0,ce.jsx)("h3",{style:C,children:"Are You Still Here?"}),(0,ce.jsx)("p",{style:j,children:"Please confirm your presence to stay connected to the meeting."}),(0,ce.jsx)("button",{onClick:S,style:P,onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=`0 6px 24px ${Pe.success}50`},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`0 4px 20px ${Pe.success}40`},children:"I'm Here"}),(0,ce.jsx)("p",{style:M,children:d<=30?" You will be disconnected soon!":"Time remaining before automatic disconnect"})]})})},vr=new(ae()),Sr=({parameters:e,isDarkMode:t=!1})=>{const{imgSrc:r="https://mediasfu.com/images/logo192.png",showAlert:a,updateIsLoadingModalVisible:n,connectSocket:o,updateSocket:s,updateValidated:i,updateApiUserName:c,updateApiToken:d,updateLink:l,updateRoomName:u,updateMember:p}=e,[m,g]=(0,de.useState)(""),[h,f]=(0,de.useState)(""),[b,y]=(0,de.useState)(""),[x,v]=(0,de.useState)(""),[S,R]=(0,de.useState)(!1),[w,k]=(0,de.useState)(!1),[C,j]=(0,de.useState)(null);(0,de.useEffect)(()=>{const e=setTimeout(()=>k(!0),50);return()=>clearTimeout(e)},[]);const P=e=>/^[a-zA-Z0-9]+$/.test(e),M={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100%",background:t?"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)",padding:rt.lg,boxSizing:"border-box",opacity:w?1:0,transition:"opacity 0.6s ease-out"},I={width:"100%",maxWidth:400,padding:rt.xl,display:"flex",flexDirection:"column",alignItems:"center",gap:rt.lg},A={width:80,height:80,borderRadius:16,marginBottom:rt.md,boxShadow:`0 0 30px ${t?Pe.primary:Pe.primaryLight}40`},T={...nt.getHeadlineMedium(t),textAlign:"center",marginBottom:rt.sm},F={...nt.getBodyMedium(t),textAlign:"center",opacity:.8,marginBottom:rt.md},D={width:"100%",display:"flex",flexDirection:"column",gap:rt.md},N={width:"100%",padding:`${rt.sm}px ${rt.md}px`,borderRadius:12,border:"1px solid "+(t?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.15)"),background:t?"rgba(255,255,255,0.08)":"rgba(255,255,255,0.9)",color:t?Pe.textPrimaryDark:Pe.textPrimary,fontSize:16,outline:"none",transition:"border-color 0.3s ease, box-shadow 0.3s ease",boxSizing:"border-box"},L={border:`1px solid ${Pe.primary}`,boxShadow:`0 0 0 3px ${Pe.primary}30`},V={width:"100%",padding:`${rt.md}px ${rt.lg}px`,borderRadius:12,border:"none",background:`linear-gradient(135deg, ${Pe.primary} 0%, ${Pe.secondary} 100%)`,color:"#ffffff",fontSize:16,fontWeight:600,cursor:S?"not-allowed":"pointer",opacity:S?.7:1,transition:"transform 0.2s ease, box-shadow 0.3s ease, opacity 0.3s ease",boxShadow:`0 4px 20px ${Pe.primary}40`},B={...nt.getBodySmall(t),textAlign:"center",marginTop:rt.lg,opacity:.6},$={color:Pe.primary,textDecoration:"none",fontWeight:500},E=e=>({...N,...C===e?L:{}});return(0,ce.jsx)("div",{style:M,children:(0,ce.jsxs)(It,{isDarkMode:t,style:I,children:[(0,ce.jsx)("img",{src:r,alt:"MediaSFU Logo",style:A}),(0,ce.jsx)("h1",{style:T,children:"Welcome to MediaSFU"}),(0,ce.jsx)("p",{style:F,children:"Enter your event details to join"}),(0,ce.jsxs)("div",{style:D,children:[(0,ce.jsx)("input",{type:"text",placeholder:"Display Name",value:m,onChange:e=>g(e.target.value),style:E("name"),onFocus:()=>j("name"),onBlur:()=>j(null),maxLength:12,disabled:S}),(0,ce.jsx)("input",{type:"text",placeholder:"Event ID",value:b,onChange:e=>y(e.target.value),style:E("eventID"),onFocus:()=>j("eventID"),onBlur:()=>j(null),maxLength:32,disabled:S}),(0,ce.jsx)("input",{type:"password",placeholder:"Event Passcode",value:h,onChange:e=>f(e.target.value),style:E("secret"),onFocus:()=>j("secret"),onBlur:()=>j(null),maxLength:64,disabled:S}),(0,ce.jsx)("input",{type:"text",placeholder:"Event Link (e.g., https://mediasfu.com/...)",value:x,onChange:e=>v(e.target.value),style:E("link"),onFocus:()=>j("link"),onBlur:()=>j(null),disabled:S})]}),(0,ce.jsx)("button",{onClick:async()=>{if(!S){if(R(!0),n(!0),!(m.trim()&&h.trim()&&b.trim()&&x.trim()))return a?.({message:"Please fill all the fields.",type:"danger",duration:3e3}),n(!1),void R(!1);if(!P(m)||!P(h)||!P(b)||!x.includes("mediasfu.com")||b.toLowerCase().startsWith("d"))return a?.({message:"Please enter valid details.",type:"danger",duration:3e3}),n(!1),void R(!1);if(64!==h.length||m.length>12||m.length<2||b.length>32||b.length<8||x.length<12)return a?.({message:"Please enter valid details.",type:"danger",duration:3e3}),n(!1),void R(!1);await(async({apiUserName:e,apiToken:t="",link:r,userName:m})=>{let g=parseInt(vr.get("unsuccessfulAttempts")||"0",10);const h=parseInt(vr.get("lastRequestTimestamp")||"0",10);if(g>=10){if(Date.now()-h<108e5)return a?.({message:"Too many unsuccessful attempts. Please try again later.",type:"danger",duration:3e3}),void vr.set("lastRequestTimestamp",Date.now().toString());g=0,vr.set("unsuccessfulAttempts","0"),vr.set("lastRequestTimestamp",Date.now().toString())}try{n(!0);const h=o({apiUserName:e,apiToken:t,apiKey:"",link:r}),f=new Promise((e,t)=>setTimeout(()=>t(new Error("Socket connection timed out")),2e4)),b=await Promise.race([h,f]);b&&b.id?(g=0,vr.set("unsuccessfulAttempts","0"),vr.set("lastRequestTimestamp",Date.now().toString()),s(b),c(e),d(t),l(r),u(e),p(m),i(!0)):(g++,vr.set("unsuccessfulAttempts",g.toString()),vr.set("lastRequestTimestamp",Date.now().toString()),n(!1),a?.(g>=10?{message:"Too many unsuccessful attempts. Please try again later.",type:"danger",duration:3e3}:{message:"Invalid credentials.",type:"danger",duration:3e3}))}catch{a?.({message:"Unable to connect. Check your credentials and try again.",type:"danger",duration:3e3}),g++,vr.set("unsuccessfulAttempts",g.toString()),vr.set("lastRequestTimestamp",Date.now().toString()),n(!1)}})({apiUserName:b,apiToken:h,link:x,userName:m}),n(!1),R(!1)}},disabled:S,style:V,onMouseEnter:e=>{S||(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=`0 6px 24px ${Pe.primary}50`)},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`0 4px 20px ${Pe.primary}40`},children:S?"Connecting...":"Join Event"}),(0,ce.jsxs)("p",{style:B,children:["Powered by"," ",(0,ce.jsx)("a",{href:"https://mediasfu.com",target:"_blank",rel:"noopener noreferrer",style:$,children:"MediaSFU"})]})]})})},Rr=async({payload:e,apiUserName:t,apiKey:r,localLink:a=""})=>{const n="mediasfu_pending_"+("create"===e.action?`create_${e.userName}_${e.duration}_${e.capacity}`:`join_${e.meetingID}_${e.userName}`);try{const o=localStorage.getItem(n);if(o){const e=JSON.parse(o);if(Date.now()-e.timestamp<3e4)return{data:{error:"Room creation already in progress"},success:!1};localStorage.removeItem(n)}if(!t||!r||"yourAPIUSERNAME"===t||"yourAPIKEY"===r||64!==r.length||t.length<6)return{data:{error:"Invalid credentials"},success:!1};let s="https://mediasfu.com/v1/rooms/";a&&""!==a.trim()&&!a.includes("mediasfu.com")&&(s=(a=a.replace(/\/$/,""))+"/createRoom"),localStorage.setItem(n,JSON.stringify({timestamp:Date.now(),payload:{action:e.action,userName:e.userName,meetingID:e.meetingID||"create"}})),setTimeout(()=>{try{localStorage.removeItem(n)}catch(e){}},3e4);const i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}:${r}`},body:JSON.stringify(e)});if(!i.ok)throw new Error(`HTTP error! Status: ${i.status}`);const c=await i.json();return localStorage.removeItem(n),{data:c,success:!0}}catch(e){try{localStorage.removeItem(n)}catch(e){}return{data:{error:`Unable to create room, ${e.message||"unknown error"}`},success:!1}}},wr=({localLink:e="",connectMediaSFU:t=!0,parameters:r,credentials:a={apiUserName:"",apiKey:""},returnUI:n=!0,noUIPreJoinOptions:o,createMediaSFURoom:s=Rr,joinMediaSFURoom:i=Q,isDarkMode:c=!0})=>{const[d,l]=(0,de.useState)(c),{imgSrc:u="https://mediasfu.com/images/logo192.png",showAlert:p,updateIsLoadingModalVisible:m,connectLocalSocket:g,updateSocket:h,updateLocalSocket:f,updateValidated:b,updateApiUserName:y,updateApiToken:x,updateLink:v,updateRoomName:S,updateMember:R}=r,[w,k]=(0,de.useState)(!1),[C,j]=(0,de.useState)(""),[P,M]=(0,de.useState)(""),[I,A]=(0,de.useState)(""),[T,F]=(0,de.useState)(""),[D,N]=(0,de.useState)(""),[L,V]=(0,de.useState)(""),[B,$]=(0,de.useState)(!1),[E,W]=(0,de.useState)(null),H=(0,de.useRef)(!1),O=(0,de.useRef)(!1),z=(0,de.useRef)(void 0),U=(0,de.useRef)(void 0);(0,de.useEffect)(()=>{const e=setTimeout(()=>$(!0),50);return()=>clearTimeout(e)},[]);const q=async({createData:t,link:r=e})=>{U.current?.emit("createRoom",t,e=>{e.success?(h(U.current),y(z.current?.apiUserName||""),x(e.secret),v(r),S(t.eventID),R(t.userName+"_2"),m(!1),b(!0)):(m(!1),V(`Unable to create room. ${e.reason}`))})},_=async({payload:t,apiUserName:a,apiKey:n,validate:o=!0})=>{const i=await s({payload:t,apiUserName:a,apiKey:n,localLink:e});if(i.success&&i.data&&"roomName"in i.data)return await oe({apiUserName:i.data.roomName,apiToken:i.data.secret,link:i.data.link,userName:t.userName,parameters:r,validate:o}),i;m(!1),V(`Unable to create room. ${i.data&&"error"in i.data?i.data.error:""}`)},G=async()=>{if(H.current)return;H.current=!0,V("");let r={};if(n){if(!(C&&P&&I&&T))return V("Please fill all the fields."),void(H.current=!1);if(!["chat","broadcast","webinar","conference"].includes(I.toLowerCase()))return V("Invalid event type. Please select from Chat, Broadcast, Webinar, or Conference."),void(H.current=!1);const e=parseInt(T,10),t=parseInt(P,10);if(isNaN(e)||e<=0)return V("Room capacity must be a positive integer."),void(H.current=!1);if(isNaN(t)||t<=0)return V("Duration must be a positive integer."),void(H.current=!1);if(C.length<2||C.length>10)return V("Display Name must be between 2 and 10 characters."),void(H.current=!1);r={action:"create",duration:t,capacity:e,eventType:I,userName:C,recordOnly:!1}}else{if(!o||!("action"in o)||"create"!==o.action)throw H.current=!1,new Error("Invalid options provided for creating a room without UI.");r=o}if(m(!0),e.length>0){const e=Math.random().toString(30).substring(2,14)+Math.random().toString(30).substring(2,14);let a=(new Date).getTime().toString(30)+(new Date).getUTCMilliseconds()+Math.floor(10+99*Math.random()).toString();a="m"+a;const n=z.current?.meetingRoomParams_;n&&(n.type=I);const o={eventID:a,duration:r.duration,capacity:r.capacity,userName:r.userName,scheduledDate:new Date,secureCode:e,waitRoom:!1,recordingParams:z.current?.recordingParams_,eventRoomParams:n,videoPreference:null,audioPreference:null,audioOutputPreference:null,mediasfuURL:""};if(t&&U.current&&z.current&&z.current.apiUserName&&z.current.apiKey){const e=z.current.apiUserName,t=z.current.apiKey,a=`prejoin_pending_local_create_${r.userName}_${r.duration}_${r.capacity}`,n=3e4;try{const e=localStorage.getItem(a);if(e){const t=JSON.parse(e);if(Date.now()-(t?.timestamp??0)<n)return H.current=!1,m(!1),void V("Room creation already in progress");try{localStorage.removeItem(a)}catch{}}}catch{}try{localStorage.setItem(a,JSON.stringify({timestamp:Date.now(),payload:{action:"create",userName:r.userName,duration:r.duration,capacity:r.capacity}})),setTimeout(()=>{try{localStorage.removeItem(a)}catch{}},n)}catch{}r.recordOnly=!0;try{const n=await _({payload:r,apiUserName:e,apiKey:t,validate:!1});try{localStorage.removeItem(a)}catch{}if(n&&n.success&&n.data&&"roomName"in n.data)o.eventID=n.data.roomName,o.secureCode=n.data.secureCode||"",o.mediasfuURL=n.data.publicURL,await q({createData:o,link:n.data.link});else{H.current=!1,m(!1),V("Unable to create room on MediaSFU.");try{h(U.current),await q({createData:o}),H.current=!1}catch(e){H.current=!1,m(!1),V(`Unable to create room. ${e}`)}}}catch(e){try{localStorage.removeItem(a)}catch{}H.current=!1,m(!1),V(`Unable to create room on MediaSFU. ${e}`)}}else try{h(U.current),await q({createData:o}),H.current=!1}catch(e){H.current=!1,m(!1),V(`Unable to create room. ${e}`)}}else{const e=`prejoin_pending_mediasfu_create_${r.userName}_${r.duration}_${r.capacity}`,t=3e4;try{const r=localStorage.getItem(e);if(r){const a=JSON.parse(r);if(Date.now()-(a?.timestamp??0)<t)return H.current=!1,m(!1),void V("Room creation already in progress");try{localStorage.removeItem(e)}catch{}}}catch{}try{localStorage.setItem(e,JSON.stringify({timestamp:Date.now(),payload:{action:"create",userName:r.userName,duration:r.duration,capacity:r.capacity}})),setTimeout(()=>{try{localStorage.removeItem(e)}catch{}},t)}catch{}try{await _({payload:r,apiUserName:a.apiUserName,apiKey:a.apiKey,validate:!0});try{localStorage.removeItem(e)}catch{}H.current=!1}catch(t){try{localStorage.removeItem(e)}catch{}H.current=!1,m(!1),V(`Unable to create room. ${t}`)}}},Y=async()=>{if(H.current)return;H.current=!0,V("");let t={};if(n){if(!C||!D)return V("Please fill all the fields."),void(H.current=!1);if(C.length<2||C.length>10)return V("Display Name must be between 2 and 10 characters."),void(H.current=!1);t={action:"join",meetingID:D,userName:C}}else{if(!o||!("action"in o)||"join"!==o.action)throw H.current=!1,new Error("Invalid options provided for joining a room without UI.");t=o}if(e.length>0&&!e.includes("mediasfu.com")){const r={eventID:t.meetingID,userName:t.userName,secureCode:"",videoPreference:null,audioPreference:null,audioOutputPreference:null};return await(async({joinData:t,link:r=e})=>{U.current?.emit("joinEventRoom",t,e=>{e.success?(h(U.current),y(z.current?.apiUserName||""),x(e.secret),v(r),S(t.eventID),R(t.userName),m(!1),b(!0)):(m(!1),V(`Unable to join room. ${e.reason}`))})})({joinData:r}),void(H.current=!1)}m(!0);const s=await i({payload:t,apiUserName:a.apiUserName,apiKey:a.apiKey,localLink:e});s.success&&s.data&&"roomName"in s.data?(await oe({apiUserName:s.data.roomName,apiToken:s.data.secret,link:s.data.link,userName:t.userName,parameters:r}),H.current=!1):(H.current=!1,m(!1),V(`Unable to join room. ${s.data&&"error"in s.data?s.data.error:""}`))},K=(0,de.useCallback)(async({returnUI:e,noUIPreJoinOptions:t})=>{if(!e&&t)if("action"in t&&"create"===t.action){const e=t;if(!(e.userName&&e.duration&&e.eventType&&e.capacity))throw new Error("Please provide all the required parameters: userName, duration, eventType, capacity");await G()}else{if(!("action"in t)||"join"!==t.action)throw new Error("Invalid options provided for creating/joining a room without UI.");{const e=t;if(!e.userName||!e.meetingID)throw new Error("Please provide all the required parameters: userName, meetingID");await Y()}}},[]);(0,de.useEffect)(()=>{if(e.length>0&&!O.current&&!U.current)try{g?.({link:e}).then(e=>{e&&e.socket&&(z.current=e.data,U.current=e.socket,O.current=!0,h(e.socket),f?.(e.socket),!n&&o&&K({returnUI:n,noUIPreJoinOptions:o}))}).catch(t=>{p?.({message:`Unable to connect to ${e}. ${t}`,type:"danger",duration:3e3})})}catch{p?.({message:`Unable to connect to ${e}. Something went wrong.`,type:"danger",duration:3e3})}else 0!==e.length||U.current||!n&&o&&K({returnUI:n,noUIPreJoinOptions:o})},[]);const J=(0,de.useCallback)(()=>{k(e=>!e),V("")},[]);if(!n)return(0,ce.jsx)(ce.Fragment,{});const X={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100%",background:d?"linear-gradient(135deg, #0F172A 0%, #1E1B4B 100%)":"linear-gradient(135deg, #E0E7FF 0%, #F8FAFC 100%)",padding:rt.lg,boxSizing:"border-box",opacity:B?1:0,transition:"opacity 0.6s ease-out"},Z={width:"100%",maxWidth:420,padding:rt.xl,display:"flex",flexDirection:"column",alignItems:"center",gap:rt.md},ee={display:"flex",justifyContent:"center",alignItems:"center",marginBottom:rt.sm,padding:3,borderRadius:"50%",background:`linear-gradient(135deg, ${d?Pe.primaryDark:Pe.primary} 0%, ${d?Pe.secondaryDarkMode:Pe.secondary} 50%, ${d?Pe.accentDark:Pe.accent} 100%)`,boxShadow:`0 0 20px ${Pe.primary}66, 0 0 40px ${Pe.primary}33`},te={...nt.getHeadlineMedium(d),textAlign:"center",marginBottom:rt.xs},re={...nt.getBodyMedium(d),textAlign:"center",opacity:.7,marginBottom:rt.md},ae={width:"100%",display:"flex",flexDirection:"column",gap:rt.sm},ne={width:"100%",padding:`${rt.sm}px ${rt.md}px`,borderRadius:12,border:"1px solid "+(d?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.15)"),background:d?"rgba(255,255,255,0.08)":"rgba(255,255,255,0.9)",color:d?Pe.textPrimaryDark:Pe.textPrimary,fontSize:16,outline:"none",transition:"border-color 0.3s ease, box-shadow 0.3s ease",boxSizing:"border-box"},se={...ne,cursor:"pointer",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='${d?"%23ffffff":"%23333333"}' d='M6 8L1 3h10z'/%3E%3C/svg%3E")`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"12px",paddingRight:36},ie=`\n    select option {\n      background: ${d?"#1a1a2e":"#ffffff"};\n      color: ${d?"#ffffff":"#1a1a2e"};\n      padding: 12px;\n      font-size: 14px;\n    }\n    select option:hover,\n    select option:focus,\n    select option:checked {\n      background: ${d?"#2d2d44":"#f0f0f5"};\n      color: ${Pe.primary};\n    }\n  `,le={width:"100%",padding:`${rt.md}px ${rt.lg}px`,borderRadius:12,border:"none",background:`linear-gradient(135deg, ${Pe.primary} 0%, ${Pe.secondary} 100%)`,color:"#ffffff",fontSize:16,fontWeight:600,cursor:H.current?"not-allowed":"pointer",opacity:H.current?.7:1,transition:"transform 0.2s ease, box-shadow 0.3s ease, opacity 0.3s ease",boxShadow:`0 4px 20px ${Pe.primary}40`,marginTop:rt.sm},ue={...nt.getBodyMedium(d),color:Pe.danger,textAlign:"center",marginTop:rt.sm},pe={...nt.getLabelLarge(d),textAlign:"center",color:d?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.45)",margin:`${rt.sm}px 0`},me={borderRadius:12,border:"1px solid "+(d?`${Pe.primaryDark}80`:`${Pe.primary}4D`),overflow:"hidden"},ge={padding:`${rt.sm}px ${rt.md}px`,background:"transparent",border:"none",cursor:H.current?"not-allowed":"pointer",fontSize:14,fontWeight:600,backgroundImage:`linear-gradient(135deg, ${d?Pe.primaryDark:Pe.primary} 0%, ${d?Pe.secondaryDarkMode:Pe.secondary} 50%, ${d?Pe.accentDark:Pe.accent} 100%)`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",transition:"opacity 0.3s ease"},he=e=>({...ne,...E===e?{border:`1px solid ${Pe.primary}`,boxShadow:`0 0 0 3px ${Pe.primary}30`}:{}});return(0,ce.jsxs)("div",{style:X,children:[(0,ce.jsx)("style",{children:ie}),(0,ce.jsx)("button",{onClick:()=>l(!d),style:{position:"absolute",top:20,right:20,width:48,height:48,borderRadius:12,border:"1px solid "+(d?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),background:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",backdropFilter:"blur(10px)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,transition:"transform 0.3s ease, background 0.3s ease, box-shadow 0.3s ease",boxShadow:d?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 20px rgba(0,0,0,0.1)",zIndex:100},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.1) rotate(15deg)",e.currentTarget.style.boxShadow=d?"0 6px 24px rgba(102, 126, 234, 0.4)":"0 6px 24px rgba(102, 126, 234, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1) rotate(0deg)",e.currentTarget.style.boxShadow=d?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 20px rgba(0,0,0,0.1)"},title:d?"Switch to Light Mode":"Switch to Dark Mode",children:d?"":""}),(0,ce.jsxs)(It,{isDarkMode:d,style:Z,children:[(0,ce.jsx)("div",{style:ee,children:(0,ce.jsx)("img",{src:u,alt:"MediaSFU Logo",style:{width:90,height:90,borderRadius:"50%",objectFit:"cover"}})}),(0,ce.jsx)("h1",{style:te,children:w?"Create a Room":"Join a Room"}),(0,ce.jsx)("p",{style:re,children:w?"Start a new session with your audience.":"Enter the meeting ID to connect."}),(0,ce.jsxs)("div",{style:ae,children:[(0,ce.jsx)("input",{type:"text",placeholder:"Display Name (2-10 characters)",value:C,onChange:e=>j(e.target.value),style:he("name"),onFocus:()=>W("name"),onBlur:()=>W(null),maxLength:10,disabled:H.current}),w?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("input",{type:"number",placeholder:"Duration (minutes)",value:P,onChange:e=>M(e.target.value),style:he("duration"),onFocus:()=>W("duration"),onBlur:()=>W(null),min:1,disabled:H.current}),(0,ce.jsx)("input",{type:"number",placeholder:"Capacity (max participants)",value:T,onChange:e=>F(e.target.value),style:he("capacity"),onFocus:()=>W("capacity"),onBlur:()=>W(null),min:1,disabled:H.current}),(0,ce.jsxs)("select",{value:I,onChange:e=>A(e.target.value),style:{...se,..."eventType"===E?{border:`1px solid ${Pe.primary}`}:{}},onFocus:()=>W("eventType"),onBlur:()=>W(null),disabled:H.current,children:[(0,ce.jsx)("option",{value:"",children:"Select Event Type"}),(0,ce.jsx)("option",{value:"chat",children:"Chat"}),(0,ce.jsx)("option",{value:"broadcast",children:"Broadcast"}),(0,ce.jsx)("option",{value:"webinar",children:"Webinar"}),(0,ce.jsx)("option",{value:"conference",children:"Conference"})]})]}):(0,ce.jsx)("input",{type:"text",placeholder:"Meeting ID",value:D,onChange:e=>N(e.target.value),style:he("eventID"),onFocus:()=>W("eventID"),onBlur:()=>W(null),disabled:H.current})]}),L&&(0,ce.jsx)("p",{style:ue,children:L}),(0,ce.jsx)("button",{onClick:w?G:Y,disabled:H.current,style:le,onMouseEnter:e=>{H.current||(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=`0 6px 24px ${Pe.primary}50`)},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`0 4px 20px ${Pe.primary}40`},children:H.current?"Please wait...":w?"Create Room":"Join Room"}),(0,ce.jsx)("p",{style:pe,children:"OR"}),(0,ce.jsx)("div",{style:me,children:(0,ce.jsx)("button",{onClick:J,disabled:H.current,style:ge,children:w?"Switch to Join Mode":"Switch to Create Mode"})})]})]})},kr=({isPollModalVisible:e,onClose:t,position:r="topRight",member:a,islevel:n,polls:o,poll:s,socket:i,roomName:c,showAlert:d,updateIsPollModalVisible:l,handleCreatePoll:u,handleEndPoll:p,handleVotePoll:m,title:g,isDarkMode:h=!0,enableGlassmorphism:f=!0,enableGlow:b=!0,renderMode:y="modal"})=>{const[x,v]=(0,de.useState)(!1),[S,R]=(0,de.useState)("active"),[w,k]=(0,de.useState)({question:"",type:"",options:["",""]}),[C,j]=(0,de.useState)(null),[P,M]=(0,de.useState)(!1),[I,A]=(0,de.useState)(!1),[T,F]=(0,de.useState)(!1),[D,N]=(0,de.useState)(!1),L=(0,de.useCallback)(e=>"active"===(e?.status||"").toLowerCase(),[]),V=(0,de.useCallback)(e=>{if(!e)return{totalVotes:0,rows:[]};const t=e.votes||[],r=t.reduce((e,t)=>e+(t||0),0),a=t.map((t,a)=>({label:e.options?.[a]??`Option ${a+1}`,count:t,percent:r>0?Math.round(t/r*100):0}));return{totalVotes:r,rows:a}},[]),B=!!s&&!L(s),$=V(s),E=(0,de.useCallback)(e=>{switch(e){case"trueFalse":return["True","False"];case"yesNo":return["Yes","No"];default:return["",""]}},[]),W=(0,de.useCallback)(e=>{k(t=>({...t,type:e,options:E(e)}))},[E]);(0,de.useEffect)(()=>{j(null)},[s?.id]),(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>v(!0),50);return()=>clearTimeout(e)}v(!1)},[e]);const H=(0,de.useCallback)(async()=>{if(!w.question.trim()||!w.type)return;const e="custom"===w.type?(w.options||[]).map(e=>e.trim()).filter(Boolean):E(w.type);"custom"===w.type&&e.length<2?d?.({message:"Please provide at least two options for a custom poll.",type:"danger"}):(await u({poll:{question:w.question,type:w.type,options:e},socket:i,roomName:c,showAlert:d,updateIsPollModalVisible:l}),k({question:"",type:"",options:["",""]}),R("active"))},[w,u,i,c,d,l]),O=(0,de.useCallback)(async()=>{null!==C&&s&&(await m({pollId:s.id,optionIndex:C,socket:i,roomName:c,showAlert:d,member:a,updateIsPollModalVisible:l}),j(null))},[C,s,m,i,c,d,a,l]),z=(0,de.useCallback)(async()=>{s&&await p({pollId:s.id,socket:i,roomName:c,showAlert:d,updateIsPollModalVisible:l})},[s,p,i,c,d,l]),U={marginTop:rt.md,padding:rt.md,background:h?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.04)",borderRadius:ct.md,border:"1px solid "+(h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),display:"flex",flexDirection:"column",gap:rt.sm},q={display:"flex",alignItems:"center",gap:rt.sm},_={...nt.getBodySmall(h),flex:1},G={...nt.getLabelSmall(h),opacity:.75},Y={flex:2,height:8,background:h?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)",borderRadius:999,overflow:"hidden"},K=e=>({width:`${e}%`,height:"100%",background:Pe.brandGradient(h)});if("sidebar"===y||"inline"===y){const e={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(h)}`},r={...nt.getTitleMedium(h),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},a={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:h?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},i={display:"flex",gap:`${rt.xs}px`,padding:`${rt.sm}px`,background:h?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)"},c=e=>({flex:1,padding:`${rt.sm}px`,background:e?Pe.brandGradient(h):"transparent",border:"none",borderRadius:ct.sm,cursor:"pointer",color:e?"#FFFFFF":h?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontWeight:e?600:400,fontSize:13,transition:`all ${st.fast}ms ${st.smooth}`}),d={flex:1,overflowY:"auto",padding:`${rt.md}px`},l={width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(h?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,color:h?"#FFFFFF":"#1F2937",fontSize:14,outline:"none",marginBottom:rt.sm,boxSizing:"border-box"},u={...l,display:"block",width:"100%",minHeight:80,resize:"vertical",lineHeight:1.5,fontFamily:"inherit"},p=e=>{const t=h?"rgba(59,130,246,0.35)":"rgba(59,130,246,0.45)";return{...l,cursor:"pointer",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",paddingRight:36,backgroundColor:h?"rgba(22,27,38,0.9)":"#FFFFFF",border:"1px solid "+(h?"rgba(255,255,255,0.25)":"rgba(0,0,0,0.12)"),boxShadow:e.isFocused?`0 0 0 3px ${t}`:e.isHovered?"0 10px 26px rgba(0,0,0,0.18)":"0 6px 16px rgba(0,0,0,0.14)",transition:`border-color ${st.fast}ms ${st.smooth}, box-shadow ${st.fast}ms ${st.smooth}`,colorScheme:h?"dark":"light"}},m={position:"relative",display:"flex",alignItems:"center"},f={position:"absolute",right:rt.md,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:h?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.6)",fontSize:12},b=e=>({padding:`${rt.md}px`,background:e?h?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)":h?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:`1px solid ${e?h?Pe.primary:Pe.primaryDark:h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,borderRadius:ct.md,cursor:"pointer",marginBottom:rt.xs,color:h?"#FFFFFF":"#1F2937",transition:`all ${st.fast}ms ${st.smooth}`,display:"flex",alignItems:"center",justifyContent:"space-between"}),y={display:"flex",alignItems:"center",justifyContent:"center",color:h?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",padding:rt.xl,textAlign:"center"};return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsxs)("div",{style:e,children:[(0,ce.jsxs)("h2",{style:r,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChartBar}),g||"Polls"]}),(0,ce.jsx)("button",{style:a,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:i,children:[(0,ce.jsxs)("button",{style:c("active"===S),onClick:()=>R("active"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVoteYea,style:{marginRight:4}}),"Active"]}),"2"===n&&(0,ce.jsxs)("button",{style:c("create"===S),onClick:()=>R("create"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus,style:{marginRight:4}}),"Create"]}),(0,ce.jsxs)("button",{style:c("history"===S),onClick:()=>R("history"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChartBar,style:{marginRight:4}}),"History"]})]}),(0,ce.jsxs)("div",{style:d,children:["active"===S&&(0,ce.jsx)(ce.Fragment,{children:s?B?(0,ce.jsxs)("div",{children:[(0,ce.jsx)("h3",{style:{...nt.getTitleSmall(h),marginBottom:rt.md},children:s.question}),(0,ce.jsxs)("div",{style:U,children:[(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ce.jsx)("span",{style:{...nt.getLabelSmall(h),opacity:.7},children:"Poll ended"}),(0,ce.jsxs)("span",{style:G,children:[$.totalVotes," votes"]})]}),$.rows.map((e,t)=>(0,ce.jsxs)("div",{style:q,children:[(0,ce.jsx)("span",{style:_,children:e.label}),(0,ce.jsx)("div",{style:Y,children:(0,ce.jsx)("div",{style:K(e.percent)})}),(0,ce.jsxs)("span",{style:G,children:[e.count," (",e.percent,"%)"]})]},t))]})]}):(0,ce.jsxs)("div",{children:[(0,ce.jsx)("h3",{style:{...nt.getTitleSmall(h),marginBottom:rt.md},children:s.question}),s.options?.map((e,t)=>(0,ce.jsxs)("div",{style:b(C===t),onClick:()=>j(t),children:[(0,ce.jsx)("span",{children:e}),C===t&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,color:h?Pe.primary:Pe.primaryDark})]},t)),(0,ce.jsxs)("div",{style:{marginTop:rt.md,display:"flex",gap:rt.sm},children:[(0,ce.jsx)(Nt,{variant:"gradient",size:"md",onPress:O,isDarkMode:h,disabled:null===C,style:{flex:1},children:"Vote"}),"2"===n&&(0,ce.jsx)(Nt,{variant:"outlined",size:"md",onPress:z,isDarkMode:h,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop})})]})]}):(0,ce.jsx)("div",{style:y,children:"No active poll"})}),"create"===S&&"2"===n&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)(Ie,{message:"Enter the poll question that participants will vote on",position:"top",isDarkMode:h,children:(0,ce.jsx)("textarea",{placeholder:"Enter your question...",value:w.question,onChange:e=>k({...w,question:e.target.value}),style:u,rows:3})}),(0,ce.jsx)(Ie,{message:"Choose the type of answers for your poll",position:"top",isDarkMode:h,children:(0,ce.jsxs)("div",{style:m,children:[(0,ce.jsxs)("select",{value:w.type,onChange:e=>W(e.target.value),style:p({isHovered:P,isFocused:I}),onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),onFocus:()=>A(!0),onBlur:()=>A(!1),children:[(0,ce.jsx)("option",{value:"",children:"Select poll type"}),(0,ce.jsx)("option",{value:"trueFalse",children:"True/False"}),(0,ce.jsx)("option",{value:"yesNo",children:"Yes/No"}),(0,ce.jsx)("option",{value:"custom",children:"Custom Options"})]}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChevronDown,style:f})]})}),"custom"===w.type&&(0,ce.jsxs)("div",{style:{marginTop:rt.sm},children:[w.options.map((e,t)=>(0,ce.jsx)("input",{type:"text",placeholder:`Option ${t+1}`,value:e,onChange:e=>{const r=[...w.options];r[t]=e.target.value,k({...w,options:r})},style:l},t)),(0,ce.jsx)(Ie,{message:"Add another answer option",position:"top",isDarkMode:h,children:(0,ce.jsx)("div",{children:(0,ce.jsxs)(Nt,{variant:"outlined",size:"sm",onPress:()=>k({...w,options:[...w.options,""]}),isDarkMode:h,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus,style:{marginRight:4}}),"Add Option"]})})})]}),(0,ce.jsx)("div",{style:{marginTop:rt.lg},children:(0,ce.jsx)(Ie,{message:"Create and start the poll for all participants",position:"top",isDarkMode:h,children:(0,ce.jsx)("div",{children:(0,ce.jsx)(Nt,{variant:"gradient",size:"md",onPress:H,isDarkMode:h,fullWidth:!0,disabled:!w.question.trim()||!w.type,children:"Create Poll"})})})})]}),"history"===S&&(0,ce.jsx)(ce.Fragment,{children:0===o.length?(0,ce.jsx)("div",{style:y,children:"No previous polls"}):o.map((e,t)=>{const r=V(e),a=L(e);return(0,ce.jsxs)("div",{style:{padding:rt.md,background:h?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.lg,marginBottom:rt.md,border:"1px solid "+(h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),boxShadow:h?"0 4px 12px rgba(0,0,0,0.3)":"0 4px 12px rgba(0,0,0,0.08)"},children:[(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:rt.sm},children:[(0,ce.jsx)("div",{style:{...nt.getTitleSmall(h),flex:1,marginRight:rt.sm},children:e.question}),(0,ce.jsx)("span",{style:{padding:`${rt.xs}px ${rt.sm}px`,borderRadius:ct.sm,fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:.5,background:a?h?"rgba(34,197,94,0.2)":"rgba(34,197,94,0.15)":h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.06)",color:a?h?"#4ade80":"#16a34a":h?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.5)"},children:a?"Active":"Ended"})]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,marginBottom:rt.sm,padding:`${rt.xs}px ${rt.sm}px`,background:h?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderRadius:ct.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVoteYea,style:{fontSize:12,opacity:.6}}),(0,ce.jsxs)("span",{style:{...nt.getLabelSmall(h),opacity:.7},children:[r.totalVotes," ",1===r.totalVotes?"vote":"votes"]})]}),(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:rt.xs},children:r.rows.map((e,t)=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)("span",{style:{...nt.getBodySmall(h),flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.label}),(0,ce.jsx)("div",{style:{flex:2,height:6,background:h?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)",borderRadius:999,overflow:"hidden"},children:(0,ce.jsx)("div",{style:{width:`${e.percent}%`,height:"100%",background:Pe.brandGradient(h),transition:`width ${st.normal}ms ${st.smooth}`}})}),(0,ce.jsxs)("span",{style:{...nt.getLabelSmall(h),minWidth:45,textAlign:"right",opacity:.75},children:[e.percent,"%"]})]},t))})]},e.id||t)})})]})]})}if(!e)return null;const J={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(h),backdropFilter:f?"blur(2px)":void 0,WebkitBackdropFilter:f?"blur(2px)":void 0,opacity:x?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},X={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[r]||e.topRight})(),width:"min(450px, calc(100vw - 32px))",maxHeight:"min(600px, calc(100vh - 100px))",opacity:x?1:0,transform:x?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},Z={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(h)}`},Q={...nt.getTitleMedium(h),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},ee={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:h?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},te={display:"flex",gap:`${rt.xs}px`,padding:`${rt.sm}px`,background:h?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)"},re=e=>({flex:1,padding:`${rt.sm}px`,background:e?Pe.brandGradient(h):"transparent",border:"none",borderRadius:ct.sm,cursor:"pointer",color:e?"#FFFFFF":h?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontWeight:e?600:400,fontSize:13,transition:`all ${st.fast}ms ${st.smooth}`}),ae={flex:1,overflowY:"auto",padding:`${rt.md}px`},ne={width:"100%",display:"block",padding:`${rt.sm}px ${rt.md}px`,background:h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(h?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,color:h?"#FFFFFF":"#1F2937",fontSize:14,outline:"none",marginBottom:rt.sm,boxSizing:"border-box"},oe={...ne,display:"block",width:"100%",minHeight:80,resize:"vertical",lineHeight:1.5,fontFamily:"inherit"},se={position:"absolute",right:rt.md,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:h?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.6)",fontSize:12},ie={display:"flex",alignItems:"center",justifyContent:"center",color:h?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",padding:rt.xl,textAlign:"center"};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:J,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:h,borderRadius:ct.xl,blur:f?20:0,padding:0,elevation:4,style:{...X,backgroundColor:h?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:b?`${Pe.elevation(4,h)}, ${Pe.glowPrimary}`:Pe.elevation(4,h)},children:[(0,ce.jsxs)("div",{style:Z,children:[(0,ce.jsxs)("h2",{style:Q,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChartBar}),g||"Polls"]}),(0,ce.jsx)("button",{style:ee,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:te,children:[(0,ce.jsxs)("button",{style:re("active"===S),onClick:()=>R("active"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVoteYea,style:{marginRight:4}}),"Active"]}),"2"===n&&(0,ce.jsxs)("button",{style:re("create"===S),onClick:()=>R("create"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus,style:{marginRight:4}}),"Create"]}),(0,ce.jsxs)("button",{style:re("history"===S),onClick:()=>R("history"),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChartBar,style:{marginRight:4}}),"History"]})]}),(0,ce.jsxs)("div",{style:ae,children:["active"===S&&(0,ce.jsx)(ce.Fragment,{children:s?B?(0,ce.jsxs)("div",{children:[(0,ce.jsx)("h3",{style:{...nt.getTitleSmall(h),marginBottom:rt.md},children:s.question}),(0,ce.jsxs)("div",{style:U,children:[(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ce.jsx)("span",{style:{...nt.getLabelSmall(h),opacity:.7},children:"Poll ended"}),(0,ce.jsxs)("span",{style:G,children:[$.totalVotes," votes"]})]}),$.rows.map((e,t)=>(0,ce.jsxs)("div",{style:q,children:[(0,ce.jsx)("span",{style:_,children:e.label}),(0,ce.jsx)("div",{style:Y,children:(0,ce.jsx)("div",{style:K(e.percent)})}),(0,ce.jsxs)("span",{style:G,children:[e.count," (",e.percent,"%)"]})]},t))]})]}):(0,ce.jsxs)("div",{children:[(0,ce.jsx)("h3",{style:{...nt.getTitleSmall(h),marginBottom:rt.md},children:s.question}),s.options?.map((e,t)=>{return(0,ce.jsxs)("div",{style:(r=C===t,{padding:`${rt.md}px`,background:r?h?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)":h?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:`1px solid ${r?h?Pe.primary:Pe.primaryDark:h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,borderRadius:ct.md,cursor:"pointer",marginBottom:rt.xs,color:h?"#FFFFFF":"#1F2937",transition:`all ${st.fast}ms ${st.smooth}`,display:"flex",alignItems:"center",justifyContent:"space-between"}),onClick:()=>j(t),children:[(0,ce.jsx)("span",{children:e}),C===t&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,color:h?Pe.primary:Pe.primaryDark})]},t);var r}),(0,ce.jsxs)("div",{style:{marginTop:rt.md,display:"flex",gap:rt.sm},children:[(0,ce.jsx)(Nt,{variant:"gradient",size:"md",onPress:O,isDarkMode:h,disabled:null===C,style:{flex:1},children:"Vote"}),"2"===n&&(0,ce.jsx)(Nt,{variant:"outlined",size:"md",onPress:z,isDarkMode:h,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop})})]})]}):(0,ce.jsx)("div",{style:ie,children:"No active poll"})}),"create"===S&&"2"===n&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)(Ie,{message:"Enter the poll question that participants will vote on",position:"top",isDarkMode:h,children:(0,ce.jsx)("textarea",{placeholder:"Enter your question...",value:w.question,onChange:e=>k({...w,question:e.target.value}),style:oe,rows:3})}),(0,ce.jsx)(Ie,{message:"Choose the type of answers for your poll",position:"top",isDarkMode:h,children:(0,ce.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,ce.jsxs)("select",{value:w.type,onChange:e=>W(e.target.value),style:(e=>{const t=h?"rgba(59,130,246,0.35)":"rgba(59,130,246,0.45)";return{...ne,cursor:"pointer",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",paddingRight:36,backgroundColor:h?"rgba(22,27,38,0.9)":"#FFFFFF",border:"1px solid "+(h?"rgba(255,255,255,0.25)":"rgba(0,0,0,0.12)"),boxShadow:e.isFocused?`0 0 0 3px ${t}`:e.isHovered?"0 12px 28px rgba(0,0,0,0.22)":"0 8px 22px rgba(0,0,0,0.16)",transition:`border-color ${st.fast}ms ${st.smooth}, box-shadow ${st.fast}ms ${st.smooth}`,colorScheme:h?"dark":"light"}})({isHovered:T,isFocused:D}),onMouseEnter:()=>F(!0),onMouseLeave:()=>F(!1),onFocus:()=>N(!0),onBlur:()=>N(!1),children:[(0,ce.jsx)("option",{value:"",children:"Select poll type"}),(0,ce.jsx)("option",{value:"trueFalse",children:"True/False"}),(0,ce.jsx)("option",{value:"yesNo",children:"Yes/No"}),(0,ce.jsx)("option",{value:"custom",children:"Custom Options"})]}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChevronDown,style:se})]})}),"custom"===w.type&&(0,ce.jsxs)("div",{style:{marginTop:rt.sm},children:[w.options.map((e,t)=>(0,ce.jsx)("input",{type:"text",placeholder:`Option ${t+1}`,value:e,onChange:e=>{const r=[...w.options];r[t]=e.target.value,k({...w,options:r})},style:ne},t)),(0,ce.jsx)(Ie,{message:"Add another answer option",position:"top",isDarkMode:h,children:(0,ce.jsx)("div",{children:(0,ce.jsxs)(Nt,{variant:"outlined",size:"sm",onPress:()=>k({...w,options:[...w.options,""]}),isDarkMode:h,fullWidth:!0,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus,style:{marginRight:4}}),"Add Option"]})})})]}),(0,ce.jsx)("div",{style:{marginTop:rt.lg},children:(0,ce.jsx)(Ie,{message:"Create and start the poll for all participants",position:"top",isDarkMode:h,children:(0,ce.jsx)("div",{children:(0,ce.jsx)(Nt,{variant:"gradient",size:"md",onPress:H,isDarkMode:h,fullWidth:!0,disabled:!w.question.trim()||!w.type,children:"Create Poll"})})})})]}),"history"===S&&(0,ce.jsx)(ce.Fragment,{children:0===o.length?(0,ce.jsx)("div",{style:ie,children:"No previous polls"}):o.map((e,t)=>{const r=V(e),a=L(e);return(0,ce.jsxs)("div",{style:{padding:rt.md,background:h?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.lg,marginBottom:rt.md,border:"1px solid "+(h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),boxShadow:h?"0 4px 12px rgba(0,0,0,0.3)":"0 4px 12px rgba(0,0,0,0.08)"},children:[(0,ce.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:rt.sm},children:[(0,ce.jsx)("div",{style:{...nt.getTitleSmall(h),flex:1,marginRight:rt.sm},children:e.question}),(0,ce.jsx)("span",{style:{padding:`${rt.xs}px ${rt.sm}px`,borderRadius:ct.sm,fontSize:11,fontWeight:600,textTransform:"uppercase",letterSpacing:.5,background:a?h?"rgba(34,197,94,0.2)":"rgba(34,197,94,0.15)":h?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.06)",color:a?h?"#4ade80":"#16a34a":h?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.5)"},children:a?"Active":"Ended"})]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,marginBottom:rt.sm,padding:`${rt.xs}px ${rt.sm}px`,background:h?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderRadius:ct.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVoteYea,style:{fontSize:12,opacity:.6}}),(0,ce.jsxs)("span",{style:{...nt.getLabelSmall(h),opacity:.7},children:[r.totalVotes," ",1===r.totalVotes?"vote":"votes"]})]}),(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:rt.xs},children:r.rows.map((e,t)=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)("span",{style:{...nt.getBodySmall(h),flex:1,minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.label}),(0,ce.jsx)("div",{style:{flex:2,height:6,background:h?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)",borderRadius:999,overflow:"hidden"},children:(0,ce.jsx)("div",{style:{width:`${e.percent}%`,height:"100%",background:Pe.brandGradient(h),transition:`width ${st.normal}ms ${st.smooth}`}})}),(0,ce.jsxs)("span",{style:{...nt.getLabelSmall(h),minWidth:45,textAlign:"right",opacity:.75},children:[e.percent,"%"]})]},t))})]},e.id||t)})})]})]})]})};var Cr=p(884);class jr{constructor(){this.model=null,this.isInitializing=!1,this.initPromise=null,this.isDestroyed=!1}static getInstance(){return jr.instance||(jr.instance=new jr),jr.instance}async getModel(){if(this.isDestroyed&&(console.warn("SelfieSegmentationService: Model was destroyed, creating new instance"),this.isDestroyed=!1),this.model)return this.model;if(this.isInitializing&&this.initPromise)return this.initPromise;this.isInitializing=!0,this.initPromise=this.initializeModel();try{return await this.initPromise}finally{this.isInitializing=!1}}async initializeModel(){try{console.log("SelfieSegmentationService: Initializing model...");const e=Date.now(),t=new Cr.SelfieSegmentation({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${e}`});return t.setOptions({modelSelection:1,selfieMode:!1}),await t.initialize(),console.log(`SelfieSegmentationService: Model initialized in ${Date.now()-e}ms`),this.model=t,this.model}catch(e){return console.error("SelfieSegmentationService: Failed to initialize model",e),this.model=null,null}}isModelAvailable(){return null!==this.model&&!this.isDestroyed}getModelSync(){return this.isDestroyed?null:this.model}destroy(){if(this.model){try{this.model.close()}catch(e){console.warn("SelfieSegmentationService: Error during model close",e)}this.model=null}this.isDestroyed=!0,this.initPromise=null,this.isInitializing=!1}reset(){this.isInitializing=!1,this.initPromise=null}}const Pr=jr.getInstance(),Mr=({isVisible:e,onClose:t,parameters:r,position:a="topLeft",backgroundColor:n,title:o="Background Settings",overlayProps:s,contentProps:i,headerProps:c,titleProps:d,closeButtonProps:l,closeIconComponent:u,headerDividerProps:p,bodyProps:m,defaultImagesContainerProps:g,uploadWrapperProps:h,uploadLabelProps:f,uploadLabel:b="Upload Custom Image",uploadInputProps:y,mainCanvasProps:x,backgroundCanvasProps:v,captureVideoProps:S,previewVideoProps:R,loadingOverlayProps:w,loadingSpinner:k,buttonsWrapperProps:C,applyButtonProps:j,saveButtonProps:P,applyButtonLabel:M="Preview Background",applyButtonAppliedLabel:I="Apply Background",saveButtonLabel:A="Save Background",renderHeader:T,renderButtons:F,renderBody:D,renderContent:N,isDarkMode:L=!0,enableGlassmorphism:V=!0,enableGlow:B=!0,renderMode:$="modal"})=>{let{customImage:E,selectedImage:W,segmentVideo:H,selfieSegmentation:O,pauseSegmentation:z,processedStream:U,keepBackground:q,backgroundHasChanged:_,virtualStream:G,mainCanvas:Y,prevKeepBackground:K,appliedBackground:J,videoAlreadyOn:X,audioOnlyRoom:Z,islevel:Q,recordStarted:ee,recordResumed:te,recordPaused:re,recordStopped:ae,recordingMediaOptions:ne,mediaDevices:oe,showAlert:se,localStreamVideo:ie,vidCons:le,frameRate:me,targetResolution:ge,updateCustomImage:he,updateSelectedImage:fe,updateSegmentVideo:be,updateSelfieSegmentation:ye,updatePauseSegmentation:xe,updateProcessedStream:ve,updateKeepBackground:Se,updateBackgroundHasChanged:Re,updateVirtualStream:we,updatePrevKeepBackground:ke,updateAppliedBackground:Ce,videoProducer:je,transportCreated:Pe,videoParams:Me,updateVideoParams:Ae,autoClickBackground:Te,updateAutoClickBackground:Fe,createSendTransport:De,connectSendTransportVideo:Ne,disconnectSendTransportVideo:Le,onScreenChanges:Ve,sleep:Be}=r;O||(O=r.getUpdatedAllParams().selfieSegmentation);const $e=(0,de.useRef)(null),Ee=(0,de.useRef)(null),We=(0,de.useRef)(null),He=(0,de.useRef)(null),Oe=(0,de.useRef)(null),ze=(0,de.useRef)(null),Ue=(0,de.useRef)(null),qe=(0,de.useRef)(null),_e=(0,de.useRef)(null),Ge="undefined"!=typeof window?Math.min(.85*window.innerWidth,420):380,Ye=n??(L?"rgba(30, 41, 59, 0.98)":"rgba(241, 245, 249, 0.98)"),Ke="sidebar"===$,Je="inline"===$,Xe="modal"===$,{className:Ze,style:Qe,...et}=s??{},tt=["mediasfu-background-modal",Xe?"mediasfu-background-modal--modal":"",Ke?"mediasfu-background-modal--sidebar":"",Je?"mediasfu-background-modal--inline":"",Ze].filter(Boolean).join(" ").trim()||void 0,rt={position:Ke||Je?"relative":"fixed",top:Ke||Je?void 0:0,right:Xe?0:void 0,bottom:Xe?0:void 0,left:void 0,width:Ke||Je?"100%":"auto",height:"100%",backgroundColor:"transparent",display:e?"flex":"none",flexDirection:"column",justifyContent:Xe?"flex-start":void 0,alignItems:Xe?"flex-end":Ke||Je?"stretch":void 0,zIndex:1e3,pointerEvents:Xe?"none":void 0,...Qe},{className:at,style:nt,...ot}=i??{},st=["mediasfu-background-modal__content","modern",at].filter(Boolean).join(" ").trim()||void 0,it={position:"relative",...{background:Ye,borderRadius:Xe?0:18,padding:16,width:Ke||Je?"100%":Ge,minWidth:Xe?300:void 0,maxWidth:Ke||Je?"100%":Ge,height:Xe?"100%":void 0,maxHeight:Ke||Je?"100%":void 0,overflow:"hidden",display:"flex",flexDirection:"column",gap:12,boxShadow:Xe?"-4px 0 20px rgba(0, 0, 0, 0.25)":B?"0 20px 60px rgba(0,0,0,0.35)":"0 12px 30px rgba(0,0,0,0.25)",...Xe?{borderLeft:"1px solid "+(L?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)")}:!Xe&&V?{border:"1px solid "+(L?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.08)")}:{},pointerEvents:"auto",animation:Xe?"slideInFromRight 300ms cubic-bezier(0.16, 1, 0.3, 1)":void 0},...nt},{className:ct,style:dt,...lt}=c??{},ut=["modal-header",ct].filter(Boolean).join(" ").trim()||void 0,pt={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,padding:Xe?"12px 16px":void 0,marginBottom:Xe?0:void 0,borderBottom:Xe?"1px solid "+(L?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"):void 0,backgroundColor:Xe?L?"rgba(15, 23, 42, 0.5)":"rgba(248, 250, 252, 0.5)":void 0,color:L?"#e5e7eb":"#0f172a",...dt},{className:mt,style:gt,...ht}=d??{},ft=["modal-title",mt].filter(Boolean).join(" ").trim()||void 0,bt={margin:0,fontSize:"1.2rem",fontWeight:700,color:L?"#f8fafc":"#0f172a",...gt},{className:yt,style:xt,onClick:vt,...St}=l??{},Rt=["btn-close-background",yt].filter(Boolean).join(" ").trim()||void 0,wt={background:L?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:"none",padding:8,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:L?"#94a3b8":"#64748b",borderRadius:8,transition:"all 150ms ease",fontSize:16,...xt},kt=u??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),Ct=e=>{vt?.(e),e.defaultPrevented||t()},{style:jt,...Pt}=p??{},Mt={display:Xe?"none":void 0,height:1,backgroundColor:L?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.08)",marginTop:4,marginBottom:8,border:"none",...jt},{className:It,style:At,...Tt}=m??{},Ft=["modal-body",It].filter(Boolean).join(" ").trim()||void 0,Dt={display:"flex",flexDirection:"column",gap:16,flex:1,overflowY:"auto",padding:Xe?"16px":void 0,paddingRight:Xe?16:4,color:L?"#e5e7eb":"#0f172a",...At},{className:Nt,style:Lt,...Vt}=g??{},Bt=["background-modal__thumbnails",Nt].filter(Boolean).join(" ").trim()||void 0,$t={maxWidth:"95%",overflowX:"auto",display:"flex",flexWrap:"wrap",gap:8,minHeight:"50px",...Lt},{className:Et,style:Wt,...Ht}=h??{},Ot=["background-modal__upload","form-group",Et].filter(Boolean).join(" ").trim()||void 0,zt={maxWidth:"70%",overflowX:"auto",display:"flex",flexDirection:"column",gap:6,...Wt},{className:Ut,style:qt,..._t}=f??{},Gt=[Ut].filter(Boolean).join(" ").trim()||void 0,Yt={fontWeight:600,color:L?"#e5e7eb":"#0f172a",...qt},{className:Kt,style:Jt,...Xt}=y??{},Zt=["form-control",Kt].filter(Boolean).join(" ").trim()||void 0,Qt={background:L?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.02)",border:"1px solid "+(L?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.08)"),color:L?"#e5e7eb":"#0f172a",...Jt},{className:er,style:tr,...rr}=x??{},ar=["d-none",er].filter(Boolean).join(" ").trim()||void 0,nr={width:"100%",maxHeight:"300px",borderRadius:12,objectFit:"contain",...tr},{className:or,style:sr,...ir}=v??{},cr=["d-none",or].filter(Boolean).join(" ").trim()||void 0,dr={width:"100%",maxHeight:"300px",borderRadius:12,objectFit:"contain",...sr},{className:lr,style:ur,...pr}=S??{},mr=["d-none",lr].filter(Boolean).join(" ").trim()||void 0,gr={width:"100%",maxHeight:"300px",borderRadius:12,objectFit:"contain",...ur},{className:hr,style:fr,...br}=R??{},yr=["d-none",hr].filter(Boolean).join(" ").trim()||void 0,xr={width:"100%",borderRadius:12,boxShadow:B?"0 10px 30px rgba(0,0,0,0.25)":void 0,...fr},{className:vr,style:Sr,...Rr}=w??{},wr=["loading-overlay",vr].filter(Boolean).join(" ").trim()||void 0,kr={position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.35)",...Sr},{className:Cr,style:jr,...Mr}=C??{},Ir=["buttons-wrapper",Cr].filter(Boolean).join(" ").trim()||void 0,Ar={display:"flex",gap:10,flexWrap:"wrap",...jr},{className:Tr,style:Fr,onClick:Dr,...Nr}=j??{},Lr=["btn","btn-primary",Tr].filter(Boolean).join(" ").trim()||void 0,Vr={flex:1,minWidth:140,background:V?"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)":"#2563eb",color:"white",border:"none",borderRadius:12,padding:"12px 16px",fontWeight:700,cursor:"pointer",boxShadow:B?"0 10px 30px rgba(37,99,235,0.35)":void 0,...Fr},{className:Br,style:$r,onClick:Er,...Wr}=P??{},Hr=["btn","btn-success",Br].filter(Boolean).join(" ").trim()||void 0,Or={flex:1,minWidth:140,background:V?"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)":"#16a34a",color:"white",border:"none",borderRadius:12,padding:"12px 16px",fontWeight:700,cursor:"pointer",boxShadow:B?"0 10px 30px rgba(34,197,94,0.35)":void 0,...$r},zr=M??"Preview Background",Ur=I??zr;(0,de.useEffect)(()=>{if(e)O||Yr().catch(()=>console.log("Error preloading model:")),Gr(),W?Zr(W,W):Xr(),qe.current?.classList.add("d-none"),qe.current&&(qe.current.disabled=!0),Ue.current?.classList.remove("d-none"),Ue.current&&(Ue.current.disabled=!1),U&&K==q&&q&&J?Ue.current&&(Ue.current.innerText=Ur):Ue.current&&(Ue.current.innerText=zr),Te&&(async()=>{let e=0;for(;e<20&&(!Oe.current||!He.current||!_e.current);)await new Promise(e=>setTimeout(e,100)),e++;if(!Oe.current||!He.current||!_e.current)return console.error("Background modal refs not ready after waiting"),Te=!1,Fe(!1),void t();try{await ea(),await ra()}catch(e){console.error("Error auto-applying background:",e)}finally{Te=!1,Fe(Te),t()}})();else try{if(!J||J&&!q||J&&!X){const e=Oe.current;if(z=!0,xe(!0),!X)try{e&&(e.srcObject instanceof MediaStream&&e.srcObject.getTracks().forEach(e=>e.stop()),e.srcObject=null),H&&(H.getTracks().forEach(e=>e.stop()),H=null),G&&(G.getTracks().forEach(e=>e.stop()),G=null),be(H),we(G)}catch{}}He.current?.classList.add("d-none"),We.current?.classList.remove("d-none")}catch{}},[e]);const qr=(0,de.useRef)(null),_r=(0,de.useRef)(null),Gr=()=>{const e=$e.current;if(!e)return;e.innerHTML="",["wall","wall2","shelf","clock","desert","flower"].forEach(t=>{const r=`https://mediasfu.com/images/backgrounds/${t}_thumbnail.jpg`,a=`https://mediasfu.com/images/backgrounds/${t}_small.jpg`,n=`https://mediasfu.com/images/backgrounds/${t}_large.jpg`,o=`https://mediasfu.com/images/backgrounds/${t}.jpg`,s=document.createElement("img");s.src=r,s.classList.add("img-thumbnail","m-1"),s.style.width="80px",s.style.cursor="pointer",s.addEventListener("click",async()=>{"fhd"==ge||"qhd"==ge?await Zr(a,n):await Zr(a,o)}),e.appendChild(s)});const t=document.createElement("div");if(t.classList.add("img-thumbnail","m-1","d-flex","align-items-center","justify-content-center"),t.style.width="76px",t.style.minHeight="60px",t.style.cursor="pointer",t.style.backgroundColor=L?"rgba(255,255,255,0.1)":"#f8f9fa",t.style.border="1px solid "+(L?"rgba(255,255,255,0.2)":"#dee2e6"),t.style.borderRadius="8px",t.style.position="relative",t.innerHTML=`<span style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); color:${L?"#e5e7eb":"#000"}; font-weight:500;">None</span>`,t.addEventListener("click",()=>{W="",fe(W),he(""),Kr(),He.current?.classList.add("d-none"),We.current?.classList.remove("d-none"),Xr(),Jr()}),e.appendChild(t),E){const t=document.createElement("img");t.src=E,t.classList.add("img-thumbnail","m-1"),t.style.width="80px",t.style.cursor="pointer",t.addEventListener("click",()=>{E&&Zr(E,E)}),e.appendChild(t)}};async function Yr(){const e=await Pr.getModel();e?(O=e,ye(O)):setTimeout(async()=>{const e=await Pr.getModel();e&&(O=e,ye(O))},500)}const Kr=()=>{ze.current?.classList.remove("d-none")},Jr=()=>{ze.current?.classList.add("d-none")},Xr=()=>{const e=We.current?.getContext("2d");e&&We.current&&(We.current.width=640,We.current.height=360,e.clearRect(0,0,We.current.width,We.current.height),e.font="30px Arial",e.fillStyle="#000",e.textAlign="center",e.textBaseline="middle",e.fillText("No Background",We.current.width/2,We.current.height/2),qe.current?.classList.add("d-none"),Ue.current?.classList.remove("d-none"),Ue.current.disabled=!1,Ue.current.innerText=U&&K==q&&q&&J?Ur:zr)},Zr=async(e,t)=>{Kr(),We.current?.classList.remove("d-none"),He.current?.classList.add("d-none");const r=new Image;r.crossOrigin="anonymous",r.onload=async()=>{const e=We.current?.getContext("2d");e&&We.current&&(We.current.width=r.width,We.current.height=r.height,e.drawImage(r,0,0),Qr(r),Jr())},r.src=e,W=t,fe(W),qe.current?.classList.add("d-none"),qe.current.disabled=!0,Ue.current?.classList.remove("d-none"),Ue.current.disabled=!1,Ue.current.innerText=U&&K==q&&q&&J?Ur:zr},Qr=e=>{const t=We.current?.getContext("2d");t&&We.current&&(t.clearRect(0,0,We.current.width,We.current.height),t.drawImage(e,0,0))},ea=async()=>{if(Z)return void se?.({message:"You cannot use a background in an audio only event.",type:"danger"});Kr(),He.current?.classList.remove("d-none"),We.current?.classList.add("d-none");const e=!!W;if(z=!1,xe(!1),await ta(e),e){let e=0;for(;!U&&e<30;){await new Promise(e=>setTimeout(e,100));const t=r.getUpdatedAllParams();U=t.processedStream,e++}}Jr(),Ue.current?.classList.add("d-none"),Ue.current&&(Ue.current.disabled=!0),U&&K==q&&q&&J?(qe.current?.classList.add("d-none"),qe.current&&(qe.current.disabled=!0)):(qe.current?.classList.remove("d-none"),qe.current&&(qe.current.disabled=!1))},ta=async e=>{const t=Oe.current,r=He.current,a=new Image;if(a.crossOrigin="anonymous",a.src=W||"",Y||(Y=_e.current),!Y||!t||!r)return;const n=Y;n.width=t.videoWidth,n.height=t.videoHeight;let o=n.getContext("2d");if(_=!0,Re(!0),K=q,ke(q),!e){const e=U?.getVideoTracks();e?.forEach(e=>e.stop()),U=null,q=!1,ve(null),Se(!1),r.classList.remove("d-none")}const s=async e=>{try{const t=()=>{O&&!z&&e&&0!==e.videoWidth&&0!==e.videoHeight&&(O.send({image:e}),requestAnimationFrame(t))};e.onloadeddata=()=>{t()},setTimeout(async()=>{if(U=n.captureStream(me||5),r.srcObject=U,ve(U),r.classList.remove("d-none"),q=!0,Se(q),r.paused)try{await r.play()}catch{}},100)}catch{}};if(X){if(_r.current&&"live"===_r.current.readyState&&ie.getVideoTracks()[0]?.label===_r.current?.label);else{const e=ie.getVideoTracks()[0];_r.current=e.clone(),_r.current&&(qr.current=new MediaStream([_r.current])),H=qr.current,be(H)}t.srcObject=H,t.paused&&t.play(),t.width=H.getVideoTracks()[0]?.getSettings().width||0,t.height=H.getVideoTracks()[0]?.getSettings().height||0,n.width=t.width,n.height=t.height,o=n.getContext("2d");try{e?await s(t):r.srcObject=qr.current||ie}catch(e){console.log("Error segmenting image:",e)}}else{if(H&&"live"===H.getVideoTracks()[0]?.readyState);else{try{const e=await oe.getUserMedia({video:{...le,frameRate:{ideal:me}},audio:!1});H=e,be(H),t.srcObject=H,t.paused&&t.play()}catch{try{const e=await oe.getUserMedia({video:{...le},audio:!1});H=e,be(H),t.srcObject=H,t.paused&&t.play()}catch(e){console.log("Error getting user media:",e)}}t.width=H.getVideoTracks()[0]?.getSettings().width||0,t.height=H.getVideoTracks()[0]?.getSettings().height||0,n.width=t.width,n.height=t.height,o=n.getContext("2d")}try{e?await s(t):r.srcObject=t.srcObject}catch{}}let i="no-repeat";try{(a.width<n.width||a.height<n.height)&&(i="repeat")}catch{}const c=e=>{try{if(!z&&n&&n.width>0&&n.height>0&&a&&a.width>0&&a.height>0){o.save(),o.clearRect(0,0,n.width,n.height),o.drawImage(e.segmentationMask,0,0,n.width,n.height),o.globalCompositeOperation="source-out";const t=o.createPattern(a,i);o.fillStyle=t||"",o.fillRect(0,0,n.width,n.height),o.globalCompositeOperation="destination-atop",o.drawImage(e.image,0,0,n.width,n.height),o.restore()}}catch(e){console.log("Error applying background:",e)}};O||await Yr().catch(()=>console.log("Error preloading model: "));try{O.onResults(c)}catch{}},ra=async()=>{if(Z)se?.({message:"You cannot use a background in an audio only event.",type:"danger"});else{if(_&&X){if("2"===Q&&(ee||te)&&!re&&!ae&&"video"===ne)return void se?.({message:"Please pause the recording before changing the background.",type:"danger"});if(q&&W&&U)G=U,we(G),Me={track:G.getVideoTracks()[0]},Ae(Me);else if(ie&&"live"===ie.getVideoTracks()[0]?.readyState)Me={track:ie.getVideoTracks()[0]},Ae(Me);else{try{if(ie&&"live"!==ie.getVideoTracks()[0]?.readyState){ie.removeTrack(ie.getVideoTracks()[0]);const e=H?.getVideoTracks()[0]?.clone();e&&ie.addTrack(e)}}catch(e){console.log("Error handling local stream video:",e)}Me={track:qr.current?.getVideoTracks()[0]||void 0},Ae(Me)}if(q?(J=!0,Ce(J)):(J=!1,Ce(J)),Pe)try{je?.id&&je.track?.id!==Me.track?.id&&(await Le({parameters:r}),await Be({ms:500})),await Ne({videoParams:Me,parameters:r})}catch{}else await De({option:"video",parameters:{...r,videoParams:Me}});await Ve({changed:!0,parameters:r})}q?(J=!0,Ce(J)):(J=!1,Ce(J)),qe.current?.classList.add("d-none"),qe.current.disabled=!0}},aa=k??(0,ce.jsx)(()=>(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("style",{children:"\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n    @keyframes slideInFromRight {\n      from { \n        transform: translateX(100%); \n        opacity: 0;\n      }\n      to { \n        transform: translateX(0); \n        opacity: 1;\n      }\n    }\n  "}),(0,ce.jsx)("div",{style:{width:"50px",height:"50px",border:"5px solid rgba(255, 255, 255, 0.3)",borderRadius:"50%",borderTop:"5px solid white",animation:"spin 1s linear infinite"}})]}),{}),na=e=>{Dr?.(e),e.defaultPrevented||ea()},oa=e=>{Er?.(e),e.defaultPrevented||ra()},sa=(()=>{const e=(0,ce.jsxs)("div",{className:ut,style:pt,...lt,children:[(0,ce.jsx)("h2",{className:ft,style:bt,...ht,children:o}),(0,ce.jsx)("button",{type:"button",className:Rt,style:wt,onClick:Ct,...St,children:kt})]});return T?T({defaultHeader:e,onClose:t}):e})(),ia=(()=>{const e=(0,ce.jsxs)("div",{className:Ir,style:Ar,...Mr,children:[(0,ce.jsx)(Ie,{message:zr,position:"top",isDarkMode:L,children:(0,ce.jsx)("button",{type:"button",id:"applyBackgroundButton",ref:Ue,className:Lr,style:Vr,onClick:na,...Nr,children:zr})}),(0,ce.jsx)(Ie,{message:A,position:"top",isDarkMode:L,children:(0,ce.jsx)("button",{type:"button",id:"saveBackgroundButton",ref:qe,className:Hr,style:Or,onClick:oa,...Wr,children:A})})]});return F?F({defaultButtons:e,applyButtonRef:Ue,saveButtonRef:qe}):e})(),ca=!X&&(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:"12px 16px",marginBottom:12,borderRadius:12,backgroundColor:L?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",border:"1px solid "+(L?"rgba(59, 130, 246, 0.3)":"rgba(59, 130, 246, 0.2)")},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ce.jsx)("span",{style:{fontSize:18},children:""}),(0,ce.jsx)("span",{style:{fontSize:13,fontWeight:600,color:L?"#93c5fd":"#2563eb"},children:"Camera is currently off"})]}),(0,ce.jsx)("p",{style:{margin:0,fontSize:12,lineHeight:1.5,color:L?"#cbd5e1":"#475569"},children:"You can still choose a background now! It will be applied automatically when you turn on your camera."}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,marginTop:4,padding:"6px 10px",borderRadius:8,backgroundColor:L?"rgba(34, 197, 94, 0.15)":"rgba(34, 197, 94, 0.1)",border:"1px solid "+(L?"rgba(34, 197, 94, 0.3)":"rgba(34, 197, 94, 0.2)"),alignSelf:"flex-start"},children:[(0,ce.jsx)("span",{style:{fontSize:12},children:""}),(0,ce.jsx)("span",{style:{fontSize:11,fontWeight:500,color:L?"#86efac":"#16a34a"},children:"Only visible to you"})]})]}),da=!X&&(W||E)&&(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 12px",marginTop:8,borderRadius:8,backgroundColor:L?"rgba(34, 197, 94, 0.15)":"rgba(34, 197, 94, 0.08)",border:"1px solid "+(L?"rgba(34, 197, 94, 0.25)":"rgba(34, 197, 94, 0.15)")},children:[(0,ce.jsx)("span",{style:{fontSize:14},children:""}),(0,ce.jsx)("span",{style:{fontSize:12,color:L?"#86efac":"#15803d",fontWeight:500},children:"Background saved  will apply when camera turns on"})]}),la=(0,ce.jsxs)("div",{className:Ft,style:Dt,...Tt,children:[ca,(0,ce.jsx)("div",{id:"defaultImages",ref:$e,className:Bt,style:$t,...Vt}),(0,ce.jsx)("div",{style:{fontSize:"0.65rem",color:L?"#94a3b8":"#64748b",marginTop:4,marginBottom:8,fontStyle:"italic",textAlign:"right"},children:"Black screen? Change the selected image to update/clear."}),(0,ce.jsxs)("div",{className:Ot,style:zt,...Ht,children:[(0,ce.jsx)("label",{htmlFor:"uploadImage",className:Gt,style:Yt,..._t,children:b}),(0,ce.jsx)("input",{type:"file",id:"uploadImage",className:Zt,style:Qt,ref:Ee,onChange:e=>{try{const t=e.target.files?.[0];if(t){if(t.size>4194304)return void se?.({message:"File size must be less than 2MB.",type:"danger"});let e=1280,r=1280,a=2560,n=2560;"fhd"==ge?(e=1920,r=1920):"qhd"==ge&&(e=2560,r=2560);const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{o.width<e||o.height<r||o.width>a||o.height>n?se?.({message:`Image dimensions must be at least ${e}x${r}.`,type:"danger"}):(E=o.src,he(E),Zr(o.src,o.src))};const s=new FileReader;s.onload=e=>{e.target&&e.target.result&&(o.src=e.target.result.toString())},s.readAsDataURL(t)}}catch{}},...Xt})]}),(0,ce.jsx)("canvas",{id:"mainCanvas",ref:_e,className:ar,style:nr,...rr}),(0,ce.jsx)("canvas",{id:"backgroundCanvas",ref:We,className:cr,style:dr,...ir}),(0,ce.jsx)("video",{id:"captureVideo",muted:!0,ref:Oe,className:mr,style:gr,autoPlay:!0,playsInline:!0,...pr}),(0,ce.jsx)("video",{id:"previewVideo",muted:!0,ref:He,className:yr,style:xr,autoPlay:!0,playsInline:!0,...br}),(0,ce.jsx)("div",{id:"loadingOverlay",ref:ze,className:["d-none",wr].filter(Boolean).join(" ").trim()||void 0,style:kr,...Rr,children:aa}),ia,da]}),ua=D?D({defaultBody:la}):la,pa=(0,ce.jsxs)("div",{className:st,style:it,...ot,children:[sa,(0,ce.jsx)("hr",{style:Mt,...Pt}),ua]}),ma=N?N({defaultContent:pa}):pa;return(0,ce.jsxs)("div",{className:tt,style:rt,...et,children:[Xe&&(0,ce.jsx)("style",{children:"\n    @keyframes slideInFromRight {\n      from { \n        transform: translateX(100%); \n        opacity: 0;\n      }\n      to { \n        transform: translateX(0); \n        opacity: 1;\n      }\n    }\n  "}),ma]})},Ir=({isVisible:e,onBreakoutRoomsClose:t,parameters:r,position:a="topRight",title:n,isDarkMode:o=!0,enableGlassmorphism:s=!0,enableGlow:i=!0,renderMode:c="modal"})=>{const[d,l]=(0,de.useState)(!1),[u,p]=(0,de.useState)(2),[m,g]=(0,de.useState)([]),[h,f]=(0,de.useState)([]),[b,y]=(0,de.useState)(null),x=(0,de.useRef)(!1),v=(0,de.useRef)(e),S=(0,de.useRef)(()=>r.getUpdatedAllParams());S.current=()=>r.getUpdatedAllParams();const R=(0,de.useMemo)(()=>e||"sidebar"===c||"inline"===c?S.current():null,[e,c]);(0,de.useEffect)(()=>{const t=v.current;if(v.current=e,e&&!t||"sidebar"===c||"inline"===c){const e=S.current(),t=e.breakoutRooms||[],r=(e.participants||[]).filter(e=>"2"!==e.islevel).map(e=>({...e})),a=t.map((e,t)=>e.map(e=>({name:e.name,breakRoom:t}))),n=new Map;a.forEach((e,t)=>{e.forEach(e=>n.set(e.name,t))});const o=r.map(e=>({...e,breakRoom:n.has(e.name)?n.get(e.name):null}));JSON.stringify(a)!==JSON.stringify(m)&&(g(a.length>0?a:[]),p(Math.max(a.length||0,2))),f(o),x.current=!0}else e||"modal"!==c||(x.current=!1)},[e,c,R?.breakoutRooms]),(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>l(!0),50);return()=>clearTimeout(e)}l(!1)},[e]);const w=(0,de.useCallback)(()=>{const e=h.filter(e=>"2"!==e.islevel),t=Array.from({length:u},()=>[]);[...e].sort(()=>Math.random()-.5).forEach((e,r)=>{const a=r%u;t[a].push({name:e.name,breakRoom:a})});const r=new Map;t.forEach((e,t)=>{e.forEach(e=>r.set(e.name,t))}),f(e=>e.map(e=>({...e,breakRoom:r.has(e.name)?r.get(e.name):null}))),g(t)},[u,h]),k=(0,de.useCallback)(()=>{g(e=>{const t=[...e,[]];return p(t.length),t})},[]),C=(0,de.useCallback)(e=>{g(t=>{const r=t[e]||[],a=t.filter((t,r)=>r!==e).map((e,t)=>e.map(e=>({...e,breakRoom:t})));return p(Math.max(a.length,1)),f(e=>{const t=new Set(r.map(e=>e.name)),n=new Map;return a.forEach((e,t)=>{e.forEach(e=>n.set(e.name,t))}),e.map(e=>t.has(e.name)&&!n.has(e.name)?{...e,breakRoom:null}:n.has(e.name)?{...e,breakRoom:n.get(e.name)}:e)}),a})},[]),j=(0,de.useCallback)(e=>{y(t=>t===e?null:e)},[]),P=(0,de.useCallback)((e,t)=>{const r=S.current(),a=r.itemPageLimit??Number.MAX_SAFE_INTEGER;g(n=>{if((n[e]?.length??0)>=a)return r.showAlert?.({message:"Room is full",type:"danger",duration:3e3}),n;const o=n.map((r,a)=>a===e?[...r,{name:t.name,breakRoom:e}]:r);return f(r=>r.map(r=>r.name===t.name?{...r,breakRoom:e}:r)),o})},[]),M=(0,de.useCallback)((e,t)=>{g(r=>{const a=r.map((r,a)=>a===e?r.filter(e=>e.name!==t):r);return f(e=>e.map(e=>e.name===t?{...e,breakRoom:null}:e)),a})},[]),I=(0,de.useCallback)(()=>{const e=S.current(),t=e.itemPageLimit??Number.MAX_SAFE_INTEGER;if(0===m.length)return e.showAlert?.({message:"There must be at least one room",type:"danger",duration:3e3}),!1;for(const r of m){if(0===r.length)return e.showAlert?.({message:"Rooms must not be empty",type:"danger",duration:3e3}),!1;const a=r.map(e=>e.name),n=new Set(a);if(a.length!==n.size)return e.showAlert?.({message:"Duplicate participant names in a room",type:"danger",duration:3e3}),!1;if(r.length>t)return e.showAlert?.({message:"A room exceeds the participant limit",type:"danger",duration:3e3}),!1}return!0},[m]),A=(0,de.useCallback)(()=>{const e=S.current();I()&&(e.updateBreakoutRooms(m),e.updateCanStartBreakout(!0),e.showAlert?.({message:"Rooms saved successfully",type:"success",duration:3e3}))},[m,I]),T=(0,de.useCallback)(()=>{const e=S.current();if(e.shareScreenStarted||e.shared)return void e.showAlert?.({message:"You cannot start breakout rooms while screen sharing is active",type:"danger",duration:3e3});if(!e.canStartBreakout)return void e.showAlert?.({message:"Please save rooms first",type:"danger",duration:3e3});const r=e.breakOutRoomStarted&&!e.breakOutRoomEnded?"updateBreakout":"startBreakout",a=m.map(e=>e.map(({name:e,breakRoom:t})=>({name:e,breakRoom:t})));if(e.socket?.emit(r,{breakoutRooms:a,newParticipantAction:e.newParticipantAction||"autoAssignNewRoom",roomName:e.roomName},r=>{r.success?(e.showAlert?.({message:"Breakout rooms active",type:"success",duration:3e3}),e.updateBreakOutRoomStarted(!0),e.updateBreakOutRoomEnded(!1),"all"!==e.meetingDisplayType&&e.updateMeetingDisplayType("all"),t()):e.showAlert?.({message:r.reason||"Failed to start breakout rooms",type:"danger",duration:3e3})}),e.localSocket?.id)try{e.localSocket.emit(r,{breakoutRooms:a,newParticipantAction:e.newParticipantAction||"autoAssignNewRoom",roomName:e.roomName},()=>{})}catch{}},[m,t]),F=(0,de.useCallback)(()=>{const e=S.current();if(e.socket?.emit("stopBreakout",{roomName:e.roomName},r=>{r.success?(e.showAlert?.({message:"Breakout rooms stopped",type:"success",duration:3e3}),e.updateBreakOutRoomStarted(!1),e.updateBreakOutRoomEnded(!0),e.meetingDisplayType!==e.prevMeetingDisplayType&&e.updateMeetingDisplayType(e.prevMeetingDisplayType||"video"),t()):e.showAlert?.({message:r.reason||"Failed to stop breakout rooms",type:"danger",duration:3e3})}),e.localSocket?.id)try{e.localSocket.emit("stopBreakout",{roomName:e.roomName},()=>{})}catch{}},[t]);if("sidebar"===c||"inline"===c){const e=R?.breakOutRoomStarted??!1,r={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},a={...nt.getTitleMedium(o),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},s={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},i={display:"flex",alignItems:"center",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`,flexWrap:"wrap"},c={width:60,padding:`${rt.xs}px ${rt.sm}px`,background:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(o?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.sm,color:o?"#FFFFFF":"#1F2937",fontSize:14,outline:"none",textAlign:"center"},d={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.md}px`},l={background:o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:"1px solid "+(o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),overflow:"hidden"},g={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:o?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",borderBottom:"1px solid "+(o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)")},f={...nt.getLabelLarge(o),display:"flex",alignItems:"center",gap:`${rt.xs}px`},y={padding:`${rt.xs}px ${rt.md}px`,fontSize:13,color:o?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",gap:`${rt.xs}px`},x={display:"flex",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(o)}`};return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsxs)("div",{style:r,children:[(0,ce.jsxs)("h2",{style:a,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),n||"Breakout Rooms"]}),(0,ce.jsx)("button",{style:s,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:i,children:[(0,ce.jsx)("span",{style:{color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontSize:13},children:"Number of rooms:"}),(0,ce.jsx)(Ie,{message:"Set between 1 and 20 breakout rooms",position:"top",isDarkMode:o,children:(0,ce.jsx)("input",{type:"number",min:1,max:20,value:0===u?"":u,onChange:e=>{const t=e.target.value;if(""===t)p(0);else{const e=parseInt(t);!isNaN(e)&&e>=0&&p(e)}},onBlur:e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?p(2):p(Math.min(20,t))},style:c,disabled:e})}),(0,ce.jsx)(Ie,{message:"Auto-distribute participants evenly",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{children:(0,ce.jsx)(Nt,{variant:"outlined",size:"sm",onPress:w,isDarkMode:o,disabled:e,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faRandom})})})}),(0,ce.jsx)(Ie,{message:"Add an empty breakout room",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{children:(0,ce.jsx)(Nt,{variant:"outlined",size:"sm",onPress:k,isDarkMode:o,disabled:e,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus})})})})]}),(0,ce.jsx)("div",{style:d,children:0===m.length?(0,ce.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:o?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",textAlign:"center"},children:"No breakout rooms configured. Click Random Assign or Add Room to start."}):m.map((e,t)=>(0,ce.jsxs)("div",{children:[(0,ce.jsxs)("div",{style:l,children:[(0,ce.jsxs)("div",{style:g,children:[(0,ce.jsxs)("span",{style:f,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),"Room ",t+1,(0,ce.jsxs)("span",{style:{opacity:.6,fontSize:12},children:["(",e.length," participants)"]})]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ce.jsx)(Ie,{message:b===t?"Close edit":"Edit participants",position:"top",isDarkMode:o,children:(0,ce.jsx)("button",{style:{background:b===t?o?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)":"transparent",border:"none",cursor:"pointer",color:o?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.8)",padding:4,borderRadius:4},onClick:()=>j(t),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:b===t?pe.faTimes:pe.faPen})})}),(0,ce.jsx)(Ie,{message:"Delete room",position:"top",isDarkMode:o,children:(0,ce.jsx)("button",{style:{background:"transparent",border:"none",cursor:"pointer",color:"#EF4444",padding:4},onClick:()=>C(t),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTrash})})})]})]}),(0,ce.jsx)("div",{style:{padding:`${rt.sm}px 0`},children:0===e.length?(0,ce.jsx)("div",{style:y,children:(0,ce.jsx)("span",{style:{opacity:.5,fontStyle:"italic"},children:"No participants"})}):e.map((e,t)=>(0,ce.jsxs)("div",{style:y,children:[" ",e.name]},t))})]}),b===t&&(0,ce.jsx)("div",{style:{background:o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:ct.md,border:`1px solid ${Pe.glassBorder(o)}`,padding:rt.md,marginBottom:rt.sm},children:(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:rt.sm},children:[(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{style:{...nt.getLabelSmall(o),marginBottom:rt.xs,opacity:.7},children:"Assigned"}),(0,ce.jsx)("div",{style:{border:`1px solid ${Pe.glassBorder(o)}`,borderRadius:ct.sm,maxHeight:150,overflowY:"auto"},children:0===e.length?(0,ce.jsx)("div",{style:{padding:rt.sm,opacity:.5,fontSize:12,color:o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"},children:"No participants"}):e.map(e=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.xs}px ${rt.sm}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`,fontSize:13,color:o?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)"},children:[(0,ce.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.name}),(0,ce.jsx)("button",{style:{background:"transparent",border:"none",cursor:"pointer",color:"#EF4444",padding:2,display:"flex",alignItems:"center"},onClick:()=>M(t,e.name),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserMinus,size:"sm"})})]},e.name))})]}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{style:{...nt.getLabelSmall(o),marginBottom:rt.xs,opacity:.7},children:"Unassigned"}),(0,ce.jsx)("div",{style:{border:`1px solid ${Pe.glassBorder(o)}`,borderRadius:ct.sm,maxHeight:150,overflowY:"auto"},children:0===h.filter(e=>null==e.breakRoom).length?(0,ce.jsx)("div",{style:{padding:rt.sm,opacity:.5,fontSize:12,color:o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"},children:"None available"}):h.filter(e=>null==e.breakRoom).map(e=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.xs}px ${rt.sm}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`,fontSize:13,color:o?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)"},children:[(0,ce.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.name}),(0,ce.jsx)("button",{style:{background:"transparent",border:"none",cursor:"pointer",color:"#10B981",padding:2,display:"flex",alignItems:"center"},onClick:()=>P(t,e),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserPlus,size:"sm"})})]},e.name))})]})]})})]},t))}),(0,ce.jsxs)("div",{style:x,children:[(0,ce.jsx)(Ie,{message:e?"Save and update rooms":"Save the current room assignments",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"outlined",size:"md",onPress:A,isDarkMode:o,style:{width:"100%"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSave,style:{marginRight:rt.xs}}),"Save"]})})}),e?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Ie,{message:"Update breakout rooms with new assignments",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:T,isDarkMode:o,style:{width:"100%"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt,style:{marginRight:rt.xs}}),"Update"]})})}),(0,ce.jsx)(Ie,{message:"End all breakout rooms and bring everyone back",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"filled",size:"md",onPress:F,isDarkMode:o,style:{width:"100%",background:"linear-gradient(135deg, #EF4444, #DC2626)"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop,style:{marginRight:rt.xs}}),"End"]})})})]}):(0,ce.jsx)(Ie,{message:"Start breakout rooms for participants",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:T,isDarkMode:o,style:{width:"100%"},disabled:0===m.length||!m.some(e=>e.length>0),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlay,style:{marginRight:rt.xs}}),"Start"]})})})]})]})}if(!e)return null;const D=R?.breakOutRoomStarted??!1,N={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(o),backdropFilter:s?"blur(2px)":void 0,WebkitBackdropFilter:s?"blur(2px)":void 0,opacity:d?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},L={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[a]||e.topRight})(),width:"min(500px, calc(100vw - 32px))",maxHeight:"min(600px, calc(100vh - 100px))",opacity:d?1:0,transform:d?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},V={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},B={...nt.getTitleMedium(o),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},$={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},E={display:"flex",alignItems:"center",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`,flexWrap:"wrap"},W={width:60,padding:`${rt.xs}px ${rt.sm}px`,background:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(o?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.sm,color:o?"#FFFFFF":"#1F2937",fontSize:14,outline:"none",textAlign:"center"},H={flex:1,overflowY:"auto",padding:`${rt.md}px`,display:"flex",flexDirection:"column",gap:`${rt.md}px`},O={background:o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:"1px solid "+(o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),overflow:"hidden"},z={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:o?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.03)",borderBottom:"1px solid "+(o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)")},U={...nt.getLabelLarge(o),display:"flex",alignItems:"center",gap:`${rt.xs}px`},q={padding:`${rt.xs}px ${rt.md}px`,fontSize:13,color:o?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.8)",display:"flex",alignItems:"center",gap:`${rt.xs}px`},_={display:"flex",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(o)}`};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:N,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:o,borderRadius:ct.xl,blur:s?20:0,padding:0,elevation:4,style:{...L,boxShadow:i?`${Pe.elevation(4,o)}, ${Pe.glowPrimary}`:Pe.elevation(4,o)},children:[(0,ce.jsxs)("div",{style:V,children:[(0,ce.jsxs)("h2",{style:B,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),n||"Breakout Rooms"]}),(0,ce.jsx)("button",{style:$,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsxs)("div",{style:E,children:[(0,ce.jsx)("span",{style:{color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",fontSize:13},children:"Number of rooms:"}),(0,ce.jsx)(Ie,{message:"Set between 1 and 20 breakout rooms",position:"top",isDarkMode:o,children:(0,ce.jsx)("input",{type:"number",min:1,max:20,value:0===u?"":u,onChange:e=>{const t=e.target.value;if(""===t)p(0);else{const e=parseInt(t);!isNaN(e)&&e>=0&&p(e)}},onBlur:e=>{const t=parseInt(e.target.value);isNaN(t)||t<1?p(2):p(Math.min(20,t))},style:W,disabled:D})}),(0,ce.jsx)(Ie,{message:"Auto-distribute participants evenly",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{children:(0,ce.jsx)(Nt,{variant:"outlined",size:"sm",onPress:w,isDarkMode:o,disabled:D,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faRandom})})})}),(0,ce.jsx)(Ie,{message:"Add an empty breakout room",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{children:(0,ce.jsx)(Nt,{variant:"outlined",size:"sm",onPress:k,isDarkMode:o,disabled:D,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus})})})})]}),(0,ce.jsx)("div",{style:H,children:0===m.length?(0,ce.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",color:o?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",textAlign:"center"},children:"No breakout rooms configured. Click Random Assign or Add Room to start."}):m.map((e,t)=>(0,ce.jsxs)("div",{children:[(0,ce.jsxs)("div",{style:O,children:[(0,ce.jsxs)("div",{style:z,children:[(0,ce.jsxs)("span",{style:U,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),"Room ",t+1,(0,ce.jsxs)("span",{style:{opacity:.6,fontSize:12},children:["(",e.length," participants)"]})]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,ce.jsx)(Ie,{message:b===t?"Close edit":"Edit participants",position:"top",isDarkMode:o,children:(0,ce.jsx)("button",{style:{background:b===t?o?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)":"transparent",border:"none",cursor:"pointer",color:o?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.8)",padding:4,borderRadius:4},onClick:()=>j(t),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:b===t?pe.faTimes:pe.faPen})})}),(0,ce.jsx)(Ie,{message:"Delete room",position:"top",isDarkMode:o,children:(0,ce.jsx)("button",{style:{background:"transparent",border:"none",cursor:"pointer",color:"#EF4444",padding:4},onClick:()=>C(t),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTrash})})})]})]}),(0,ce.jsx)("div",{style:{padding:`${rt.sm}px 0`},children:0===e.length?(0,ce.jsx)("div",{style:q,children:(0,ce.jsx)("span",{style:{opacity:.5,fontStyle:"italic"},children:"No participants"})}):e.map((e,t)=>(0,ce.jsxs)("div",{style:q,children:[" ",e.name]},t))})]}),b===t&&(0,ce.jsx)("div",{style:{background:o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:ct.md,border:`1px solid ${Pe.glassBorder(o)}`,padding:rt.md,marginBottom:rt.sm},children:(0,ce.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:rt.md},children:[(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{style:{...nt.getLabelSmall(o),marginBottom:rt.xs,opacity:.7},children:"Assigned"}),(0,ce.jsx)("div",{style:{border:`1px solid ${Pe.glassBorder(o)}`,borderRadius:ct.sm,maxHeight:180,overflowY:"auto"},children:0===e.length?(0,ce.jsx)("div",{style:{padding:rt.sm,opacity:.5,fontSize:13,color:o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"},children:"No participants"}):e.map(e=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.xs}px ${rt.sm}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`,fontSize:13,color:o?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)"},children:[(0,ce.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.name}),(0,ce.jsx)("button",{style:{background:"transparent",border:"none",cursor:"pointer",color:"#EF4444",padding:2,display:"flex",alignItems:"center"},onClick:()=>M(t,e.name),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserMinus,size:"sm"})})]},e.name))})]}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{style:{...nt.getLabelSmall(o),marginBottom:rt.xs,opacity:.7},children:"Unassigned"}),(0,ce.jsx)("div",{style:{border:`1px solid ${Pe.glassBorder(o)}`,borderRadius:ct.sm,maxHeight:180,overflowY:"auto"},children:0===h.filter(e=>null==e.breakRoom).length?(0,ce.jsx)("div",{style:{padding:rt.sm,opacity:.5,fontSize:13,color:o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"},children:"None available"}):h.filter(e=>null==e.breakRoom).map(e=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.xs}px ${rt.sm}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`,fontSize:13,color:o?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)"},children:[(0,ce.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.name}),(0,ce.jsx)("button",{style:{background:"transparent",border:"none",cursor:"pointer",color:"#10B981",padding:2,display:"flex",alignItems:"center"},onClick:()=>P(t,e),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserPlus,size:"sm"})})]},e.name))})]})]})})]},t))}),(0,ce.jsxs)("div",{style:_,children:[(0,ce.jsx)(Ie,{message:D?"Save and update rooms":"Save the current room assignments",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"outlined",size:"md",onPress:A,isDarkMode:o,style:{width:"100%"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSave,style:{marginRight:rt.xs}}),"Save"]})})}),D?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Ie,{message:"Update breakout rooms with new assignments",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:T,isDarkMode:o,style:{width:"100%"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt,style:{marginRight:rt.xs}}),"Update"]})})}),(0,ce.jsx)(Ie,{message:"End all breakout rooms and bring everyone back",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"filled",size:"md",onPress:F,isDarkMode:o,style:{width:"100%",background:"linear-gradient(135deg, #EF4444, #DC2626)"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop,style:{marginRight:rt.xs}}),"End"]})})})]}):(0,ce.jsx)(Ie,{message:"Start breakout rooms for participants",position:"top",isDarkMode:o,children:(0,ce.jsx)("div",{style:{flex:1},children:(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:T,isDarkMode:o,style:{width:"100%"},disabled:0===m.length||!m.some(e=>e.length>0),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlay,style:{marginRight:rt.xs}}),"Start"]})})})]})]})]})},Ar=({isVisible:e,onConfigureWhiteboardClose:t,parameters:r,position:a="topRight",title:n,isDarkMode:o=!0,enableGlassmorphism:s=!0,enableGlow:i=!0,renderMode:c="modal"})=>{const[d,l]=(0,de.useState)(!1),[u,p]=(0,de.useState)(""),[m,g]=(0,de.useState)([]),[h,f]=(0,de.useState)(!1),b=(0,de.useRef)(null);(0,de.useEffect)(()=>()=>{b.current&&clearTimeout(b.current)},[]);const y=(0,de.useCallback)(()=>r.getUpdatedAllParams(),[r]),x=(0,de.useMemo)(()=>y().showAlert,[y]),v=(0,de.useMemo)(()=>y().itemPageLimit??10,[y,t,x]),S=(0,de.useMemo)(()=>{const e=(y().participants||[]).filter(e=>"2"!==String(e.islevel));return u.trim()?e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())):e},[y,u]),R=(0,de.useMemo)(()=>Math.max(0,v-1),[v]),w=(0,de.useMemo)(()=>({display:"flex",alignItems:"center",gap:rt.xs,padding:`${rt.xs}px ${rt.md}px`,color:o?"rgba(255,255,255,0.75)":"rgba(0,0,0,0.65)",fontSize:13,fontWeight:500}),[o]),k=(0,de.useMemo)(()=>({display:"inline-flex",alignItems:"center",gap:6,padding:"6px 10px",borderRadius:999,background:"rgba(59,130,246,0.12)",color:o?"#cbd5f5":"#1e3a8a",border:`1px solid ${Pe.glassBorder(o)}`}),[o]);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>l(!0),50);return()=>clearTimeout(e)}l(!1)},[e]),(0,de.useEffect)(()=>{if(!e)return;const t=y().whiteboardUsers||[];t.length?g(t):g([])},[e]),(0,de.useEffect)(()=>{const e=y(),t=e.socket,r=String(e.islevel??"1"),a=e.updateWhiteboardUsers,n=e.updateWhiteboardStarted,o=e.updateWhiteboardEnded,s=e.onScreenChanges,i=e.prepopulateUserMedia,c=e.rePort,d=e.hostLabel??"Host";if(!(t&&t instanceof ee.Socket))return;const l=async t=>{t.whiteboardUsers&&a?.(t.whiteboardUsers),"started"===t.status?(n?.(!0),o?.(!1),"2"!==r?await(s?.({changed:!0,parameters:e})):84!=e.mainHeightWidth&&(e.updateMainHeightWidth(84),await(s?.({changed:!0,parameters:e})),await(i?.({name:d,parameters:e})))):"ended"===t.status&&(n?.(!1),o?.(!0),await(s?.({changed:!0,parameters:e})),await(i?.({name:d,parameters:e})),await(c?.({restart:!0,parameters:e})))};return t.on("whiteboardUpdated",l),()=>{t.off("whiteboardUpdated",l)}},[y]);const C=(0,de.useCallback)(e=>{g(t=>t.find(t=>t.name===e.name)?t.filter(t=>t.name!==e.name):t.length>=R?(x?.({message:`Participant limit exceeded - you can only add ${R} other participants`,type:"danger"}),t):[...t,{name:e.name,useBoard:!0}])},[R,x]),j=(0,de.useCallback)(()=>!(m.length>v&&(x?.({message:`Participant limit exceeded - you can only add ${v} participants`,type:"danger"}),1)),[m,v,x]),P=(0,de.useCallback)(()=>{if(h)return;const e=y();if((e.shareScreenStarted||e.shared)&&!e.whiteboardStarted)return void x?.({message:"You cannot start whiteboard while screen sharing is active",type:"danger"});if(e.breakOutRoomStarted&&!e.breakOutRoomEnded)return void x?.({message:"You cannot start whiteboard while breakout rooms are active",type:"danger"});if(!j())return;f(!0),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{f(!1),x?.({message:"Request timed out. Please try again.",type:"danger"})},45e3);const r=e.whiteboardStarted&&!e.whiteboardEnded?"updateWhiteboard":"startWhiteboard";e.socket?.emit(r,{whiteboardUsers:m,roomName:e.roomName},async r=>{b.current&&(clearTimeout(b.current),b.current=null),f(!1),r?.success?(x?.({message:"Whiteboard active",type:"success"}),e.updateWhiteboardStarted(!0),e.updateWhiteboardEnded(!1),e.updateWhiteboardUsers(m),e.updateCanStartWhiteboard?.(!1),e.updateIsConfigureWhiteboardModalVisible?.(!1),"2"!==e.islevel?(e.shareScreenStarted=!0,await(e.onScreenChanges?.({changed:!0,parameters:e}))):84!=e.mainHeightWidth&&(e.updateMainHeightWidth(84),await(e.onScreenChanges?.({changed:!0,parameters:e})),await(e.prepopulateUserMedia?.({name:e.hostLabel,parameters:e}))),"2"===e.islevel&&(e.recordStarted||e.recordResumed)&&(e.recordPaused||e.recordStopped||"video"!==e.recordingMediaOptions||await(e.captureCanvasStream?.({parameters:e}))),t()):x?.({message:r?.reason||"Unable to start whiteboard",type:"danger"})})},[y,m,j,x,t,h]),M=(0,de.useCallback)(()=>{if(h)return;const e=y();f(!0),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{f(!1),x?.({message:"Request timed out. Please try again.",type:"danger"})},45e3),e.socket?.emit("stopWhiteboard",{roomName:e.roomName},async r=>{b.current&&(clearTimeout(b.current),b.current=null),f(!1),r?.success?(x?.({message:"Whiteboard stopped",type:"info"}),e.updateWhiteboardStarted(!1),e.updateWhiteboardEnded(!0),e.updateWhiteboardUsers([]),e.updateCanStartWhiteboard?.(!0),e.updateIsConfigureWhiteboardModalVisible?.(!1),e.shareScreenStarted=!1,await(e.onScreenChanges?.({changed:!0,parameters:e})),await(e.prepopulateUserMedia?.({name:e.hostLabel,parameters:e})),await(e.rePort?.({restart:!0,parameters:e})),t()):x?.({message:r?.reason||"Unable to stop whiteboard",type:"danger"})})},[y,h,x,t]);if("sidebar"===c||"inline"===c){const e=y().whiteboardStarted,r={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},a={...nt.getTitleMedium(o),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},s={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},i={padding:`${rt.sm}px ${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},c={width:"100%",padding:`${rt.sm}px ${rt.md}px`,paddingLeft:36,background:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(o?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,color:o?"#FFFFFF":"#1F2937",fontSize:14,outline:"none"},d={flex:1,overflowY:"auto",padding:`${rt.md}px`},l=e=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:e?o?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)":o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:`1px solid ${e?Pe.primary:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,borderRadius:ct.md,marginBottom:rt.xs,cursor:"pointer",opacity:1,transition:`all ${st.fast}ms ${st.smooth}`}),g=e=>({width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",background:e?Pe.brandGradient(o):"transparent",border:"2px solid "+(e?"transparent":o?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.3)"),borderRadius:4,transition:`all ${st.fast}ms ${st.smooth}`}),f={display:"flex",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(o)}`},b={padding:`${rt.sm}px ${rt.md}px`,background:e?"rgba(16, 185, 129, 0.1)":o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:"1px solid "+(e?"rgba(16, 185, 129, 0.3)":"transparent"),borderRadius:ct.md,marginBottom:rt.md,textAlign:"center",color:e?"#10B981":o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)",fontSize:13,fontWeight:500};return(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,ce.jsxs)("div",{style:r,children:[(0,ce.jsxs)("h2",{style:a,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChalkboard}),n||"Whiteboard"]}),(0,ce.jsx)("button",{style:s,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsx)("div",{style:w,children:(0,ce.jsx)(Ie,{message:`Add up to ${R} other participants; host can start alone.`,isDarkMode:o,position:"bottom",children:(0,ce.jsxs)("div",{style:k,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUser}),(0,ce.jsxs)("span",{children:["Limit ",v]})]})})}),(0,ce.jsx)("div",{style:i,children:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:o?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"}}),(0,ce.jsx)("input",{type:"text",placeholder:"Search participants...",value:u,onChange:e=>p(e.target.value),style:c})]})}),(0,ce.jsxs)("div",{style:d,children:[(0,ce.jsx)("div",{style:b,children:e?" Whiteboard is active":"Select participants who can use the whiteboard"}),S.map(e=>{const t=m.some(t=>t.name===e.name);return(0,ce.jsxs)("div",{style:l(t),onClick:()=>C(e),children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUser,color:o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"}),(0,ce.jsx)("span",{style:{color:o?"#FFFFFF":"#1F2937"},children:e.name})]}),(0,ce.jsx)("div",{style:g(t),children:t&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,size:"xs",color:"#FFFFFF"})})]},e.id)}),0===S.length&&(0,ce.jsx)("div",{style:{textAlign:"center",color:o?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",padding:rt.xl},children:u.trim()?"No participants match your search":"No other participants available. Whiteboard requires at least one other participant."})]}),(0,ce.jsx)("div",{style:f,children:e?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:P,isDarkMode:o,style:{flex:1},disabled:h,children:[h?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:rt.xs}}):(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt,style:{marginRight:rt.xs}}),h?"Updating...":"Update"]}),(0,ce.jsxs)(Nt,{variant:"filled",size:"md",onPress:M,isDarkMode:o,style:{flex:1,background:"linear-gradient(135deg, #EF4444, #DC2626)"},disabled:h,children:[h?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:rt.xs}}):(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop,style:{marginRight:rt.xs}}),h?"Stopping...":"Stop"]})]}):(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:P,isDarkMode:o,fullWidth:!0,disabled:h,children:[h?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:rt.xs}}):(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlay,style:{marginRight:rt.xs}}),h?"Starting...":"Start Whiteboard"]})})]})}if(!e)return null;const I=y().whiteboardStarted,A={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(o),backdropFilter:s?"blur(2px)":void 0,WebkitBackdropFilter:s?"blur(2px)":void 0,opacity:d?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},T={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg}};return e[a]||e.topRight})(),width:"min(420px, calc(100vw - 32px))",maxHeight:"min(550px, calc(100vh - 100px))",opacity:d?1:0,transform:d?"scale(1) translateY(0)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},F={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},D={...nt.getTitleMedium(o),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},N={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:o?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",transition:`all ${st.fast}ms ${st.smooth}`},L={padding:`${rt.sm}px ${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`},V={width:"100%",padding:`${rt.sm}px ${rt.md}px`,paddingLeft:36,background:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"1px solid "+(o?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,color:o?"#FFFFFF":"#1F2937",fontSize:14,outline:"none"},B={flex:1,overflowY:"auto",padding:`${rt.md}px`},$=e=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:e?o?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)":o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:`1px solid ${e?Pe.primary:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"}`,borderRadius:ct.md,marginBottom:rt.xs,cursor:"pointer",opacity:1,transition:`all ${st.fast}ms ${st.smooth}`}),E={display:"flex",gap:`${rt.sm}px`,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(o)}`},W={padding:`${rt.sm}px ${rt.md}px`,background:I?"rgba(16, 185, 129, 0.1)":o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",border:"1px solid "+(I?"rgba(16, 185, 129, 0.3)":"transparent"),borderRadius:ct.md,marginBottom:rt.md,textAlign:"center",color:I?"#10B981":o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)",fontSize:13,fontWeight:500};return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:A,onClick:t}),(0,ce.jsxs)(It,{isDarkMode:o,borderRadius:ct.xl,blur:s?20:0,padding:0,elevation:4,style:{...T,boxShadow:i?`${Pe.elevation(4,o)}, ${Pe.glowPrimary}`:Pe.elevation(4,o)},children:[(0,ce.jsxs)("div",{style:F,children:[(0,ce.jsxs)("h2",{style:D,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChalkboard}),n||"Whiteboard"]}),(0,ce.jsx)("button",{style:N,onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),(0,ce.jsx)("div",{style:w,children:(0,ce.jsx)(Ie,{message:`Add up to ${R} other participants; host can start alone.`,isDarkMode:o,position:"bottom",children:(0,ce.jsxs)("div",{style:k,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUser}),(0,ce.jsxs)("span",{children:["Limit ",v]})]})})}),(0,ce.jsx)("div",{style:L,children:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:o?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"}}),(0,ce.jsx)("input",{type:"text",placeholder:"Search participants...",value:u,onChange:e=>p(e.target.value),style:V,disabled:I})]})}),(0,ce.jsxs)("div",{style:B,children:[(0,ce.jsx)("div",{style:W,children:I?" Whiteboard is active":"Select participants who can use the whiteboard"}),S.map(e=>{const t=m.some(t=>t.name===e.name);return(0,ce.jsxs)("div",{style:$(t),onClick:()=>!I&&C(e),children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUser,color:o?"rgba(255,255,255,0.6)":"rgba(0,0,0,0.6)"}),(0,ce.jsx)("span",{style:{color:o?"#FFFFFF":"#1F2937"},children:e.name})]}),(0,ce.jsx)("div",{style:(r=t,{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",background:r?Pe.brandGradient(o):"transparent",border:"2px solid "+(r?"transparent":o?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.3)"),borderRadius:4,transition:`all ${st.fast}ms ${st.smooth}`}),children:t&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,size:"xs",color:"#FFFFFF"})})]},e.id);var r}),0===S.length&&(0,ce.jsx)("div",{style:{textAlign:"center",color:o?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)",padding:rt.xl},children:u.trim()?"No participants match your search":"No other participants available. Whiteboard requires at least one other participant."})]}),(0,ce.jsx)("div",{style:E,children:I?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:P,isDarkMode:o,style:{flex:1},disabled:h,children:[h?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:rt.xs}}):(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt,style:{marginRight:rt.xs}}),h?"Updating...":"Update"]}),(0,ce.jsxs)(Nt,{variant:"filled",size:"md",onPress:M,isDarkMode:o,style:{flex:1,background:"linear-gradient(135deg, #EF4444, #DC2626)"},disabled:h,children:[h?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:rt.xs}}):(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop,style:{marginRight:rt.xs}}),h?"Stopping...":"Stop"]})]}):(0,ce.jsxs)(Nt,{variant:"gradient",size:"md",onPress:P,isDarkMode:o,fullWidth:!0,disabled:h,children:[h?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:rt.xs}}):(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlay,style:{marginRight:rt.xs}}),h?"Starting...":"Start Whiteboard"]})})]})]})},Tr=(e="approval",t="approval",r="disallow",a="allow")=>{const n={useMic:e,useCamera:t,useScreen:r,useChat:"allow"===a?"allow":"disallow"};return{level0:{...n},level1:{...n}}},Fr=({capability:e})=>{switch(e){case"useMic":return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone});case"useCamera":return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVideo});case"useScreen":return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDesktop});case"useChat":return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComment});default:return null}},Dr=({status:e})=>{switch(e){case"allow":return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{color:Pe.success}});case"approval":return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faClock,style:{color:Pe.warning}});case"disallow":return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBan,style:{color:Pe.danger}});default:return null}},Nr=e=>{switch(e){case"2":return"Host";case"1":return"Elevated";case"0":return"Basic";default:return"Unknown"}},Lr=e=>{switch(e){case"2":return Pe.success;case"1":return Pe.secondary;default:return Pe.textMutedDark}},Vr=({isPermissionsModalVisible:e,onPermissionsClose:t,parameters:r,position:a="topRight",isDarkMode:n=!0,enableGlassmorphism:o=!0,enableGlow:s=!0,renderMode:i="modal"})=>{const[c,d]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>d(!0),50);return()=>clearTimeout(e)}d(!1)},[e]);const l=r?.getUpdatedAllParams?.()||r,{participants:u,member:p,islevel:m,socket:g,roomName:h,showAlert:f,permissionConfig:b,updatePermissionConfig:y,audioSetting:x,videoSetting:v,screenshareSetting:S,chatSetting:R}=l||{},[w,k]=(0,de.useState)("users"),[C,j]=(0,de.useState)(""),[P,M]=(0,de.useState)(new Set),[I,A]=(0,de.useState)("level0"),[T,F]=(0,de.useState)(b||Tr(x||"approval",v||"approval",S||"disallow",R||"allow")),[D,N]=(0,de.useState)(u||[]),[L,V]=(0,de.useState)(!1),[B,$]=(0,de.useState)(!1),[E,W]=(0,de.useState)(null);(0,de.useEffect)(()=>{F(b||Tr(x||"approval",v||"approval",S||"disallow",R||"allow"))},[b,x,v,S,R]),(0,de.useEffect)(()=>{const e=r?.getUpdatedAllParams?.()||r;N(e?.participants||[])},[r,e]);const H=D,O=(0,de.useMemo)(()=>H.filter(e=>"2"!==e.islevel).filter(e=>!C||e.name?.toLowerCase().includes(C.toLowerCase())),[H,C]),z=(0,de.useMemo)(()=>{const e={1:[],0:[]};return O.forEach(t=>{const r=t.islevel||"0";e[r]&&e[r].push(t)}),e},[O]),U=(0,de.useCallback)(e=>{M(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),q=(0,de.useCallback)(()=>{P.size===O.length?M(new Set):M(new Set(O.map(e=>e.id||"")))},[O,P.size]),_=(0,de.useCallback)(async e=>{const t=O.filter(e=>P.has(e.id||""));if(0!==t.length){$(!0);try{await(async({socket:e,participants:t,newLevel:r,member:a,islevel:n,roomName:o,showAlert:s,maxBatchSize:i=50})=>{if("2"!==n)return void s?.({message:"Only the host can update participant permissions",type:"danger",duration:3e3});const c=t.filter(e=>"2"!==e.islevel&&e.islevel!==r);if(0===c.length)return void s?.({message:"No participants to update",type:"info",duration:3e3});const d=c.slice(0,i);return new Promise(t=>{e.emit("bulkUpdateParticipantPermissions",{updates:d.map(e=>({participantId:e.id,participantName:e.name,newLevel:r})),roomName:o},e=>{e?.success?c.length>i&&s?.({message:`Updated ${d.length} participants. ${c.length-i} remaining.`,type:"info",duration:3e3}):s?.({message:e?.reason||"Failed to update permissions",type:"danger",duration:3e3}),t()})})})({socket:g,participants:t,newLevel:e,member:p,islevel:m,roomName:h,showAlert:f}),M(new Set)}finally{$(!1)}}else f?.({message:"No participants selected",type:"warning"})},[O,P,g,p,m,h,f]),G=(0,de.useCallback)(async(e,t)=>{W(e.id||null);try{await(async({socket:e,participant:t,newLevel:r,member:a,islevel:n,roomName:o,showAlert:s})=>{if("2"===n)if("2"!==t.islevel){if(t.islevel!==r)return new Promise(a=>{e.emit("updateParticipantPermission",{participantId:t.id,participantName:t.name,newLevel:r,roomName:o},e=>{e?.success||s?.({message:e?.reason||"Failed to update permission",type:"danger",duration:3e3}),a()})})}else s?.({message:"Cannot change the host's permission level",type:"danger",duration:3e3});else s?.({message:"Only the host can update participant permissions",type:"danger",duration:3e3})})({socket:g,participant:e,newLevel:t,member:p,islevel:m,roomName:h,showAlert:f})}finally{W(null)}},[g,p,m,h,f]),Y=(0,de.useCallback)((e,t,r)=>{F(a=>({...a,[e]:{...a[e],[t]:r}}))},[]),K=(0,de.useCallback)(async()=>{V(!0);try{await(async({socket:e,config:t,islevel:r,roomName:a,showAlert:n})=>{if("2"===r)return console.log("Emitting updatePermissionConfig with config:",t),new Promise(r=>{e.emit("updatePermissionConfig",{config:t,roomName:a},e=>{n?.(e?.success?{message:"Permission configuration updated",type:"success",duration:3e3}:{message:e?.reason||"Failed to update permission config",type:"danger",duration:3e3}),r()})});n?.({message:"Only the host can update permission configuration",type:"danger",duration:3e3})})({socket:g,config:T,member:p,islevel:m,roomName:h,showAlert:f}),y?.(T)}finally{V(!1)}},[g,T,p,m,h,f,y]),J="2"===m;if("sidebar"!==i&&"inline"!==i&&!e)return null;const X={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(n),backdropFilter:o?"blur(2px)":void 0,WebkitBackdropFilter:o?"blur(2px)":void 0,opacity:c?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},Z="sidebar"===i||"inline"===i,Q=Z?{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"}:{position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[a]||e.topRight})(),width:"min(460px, calc(100vw - 32px))",maxHeight:"calc(100vh - 100px)",opacity:c?1:0,transform:c?"center"===a?"translate(-50%, -50%) scale(1)":"scale(1) translateY(0)":"center"===a?"translate(-50%, -50%) scale(0.95)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},ee={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px ${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(n)}`},te={...nt.getTitleMedium(n),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},re={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:n?Pe.textSecondaryDark:Pe.textSecondary,transition:`all ${st.fast}ms ${st.smooth}`},ae={display:"flex",borderBottom:`1px solid ${Pe.glassBorder(n)}`},ne=e=>({flex:1,padding:`${rt.sm}px ${rt.md}px`,background:e?n?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.04)":"transparent",border:"none",borderBottom:e?`2px solid ${Pe.primary}`:"2px solid transparent",color:e?n?Pe.textPrimaryDark:Pe.textPrimary:n?Pe.textSecondaryDark:Pe.textSecondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:rt.xs,fontSize:14,fontWeight:600}),oe={flex:1,overflowY:"auto",padding:rt.md,display:"flex",flexDirection:"column",gap:rt.md},se={width:"100%",padding:`${rt.sm}px ${rt.md}px`,borderRadius:ct.md,border:"1px solid "+(n?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.12)"),backgroundColor:n?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",color:n?Pe.textPrimaryDark:Pe.textPrimary,fontSize:14,outline:"none"},ie={background:n?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",padding:`2px ${rt.sm}px`,borderRadius:ct.full,fontSize:12,fontWeight:600,color:n?Pe.textPrimaryDark:Pe.textPrimary},le={display:"flex",alignItems:"center",gap:rt.sm,padding:`${rt.xs}px ${rt.sm}px`,background:n?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)",borderRadius:ct.md},me={padding:`${rt.xs}px ${rt.sm}px`,borderRadius:ct.sm,border:"1px solid "+(n?"rgba(255,255,255,0.14)":"rgba(0,0,0,0.14)"),backgroundColor:n?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.03)",color:n?Pe.textPrimaryDark:Pe.textPrimary,fontSize:12,cursor:"pointer",outline:"none"},ge=(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:rt.sm},children:[(0,ce.jsx)("input",{type:"text",placeholder:"Search participants...",value:C,onChange:e=>j(e.target.value),style:se}),J&&(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,flexWrap:"wrap"},children:[(0,ce.jsx)(Nt,{size:"sm",variant:"glass",isDarkMode:n,onPress:q,children:P.size===O.length?"Deselect All":"Select All"}),P.size>0&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("span",{style:{...nt.getBodySmall(n),opacity:.8},children:[P.size," selected "]}),(0,ce.jsx)(Nt,{size:"sm",variant:"gradient",isDarkMode:n,onPress:()=>_("1"),disabled:B,children:B?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0}):"Set Elevated"}),(0,ce.jsx)(Nt,{size:"sm",variant:"outlined",isDarkMode:n,onPress:()=>_("0"),disabled:B,children:B?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0}):"Set Basic"})]})]})]}),["1","0"].map(e=>(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:rt.sm},children:[(0,ce.jsxs)("div",{style:le,children:[(0,ce.jsx)("span",{style:{width:10,height:10,borderRadius:ct.full,backgroundColor:Lr(e)}}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n),fontWeight:700},children:Nr(e)}),(0,ce.jsx)("span",{style:ie,children:z[e]?.length||0})]}),0===z[e]?.length?(0,ce.jsx)("div",{style:{padding:rt.md,textAlign:"center",color:n?Pe.textMutedDark:Pe.textMuted,fontSize:13},children:"No participants at this level"}):(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:rt.xs},children:z[e]?.map(e=>{return(0,ce.jsxs)("div",{style:(t=P.has(e.id||""),{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.sm}px`,backgroundColor:t?Pe.hexToRgba(Pe.primary,n?.16:.1):n?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:t?`1px solid ${Pe.hexToRgba(Pe.primary,.35)}`:`1px solid ${Pe.hexToRgba(n?"#FFFFFF":"#000000",.06)}`}),children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[J&&(0,ce.jsx)("input",{type:"checkbox",checked:P.has(e.id||""),onChange:()=>U(e.id||""),style:{cursor:"pointer"}}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n)},children:e.name})]}),J&&(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.xs},children:[E===e.id&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{color:Pe.primary}}),(0,ce.jsxs)("select",{value:e.islevel||"0",onChange:t=>G(e,t.target.value),style:me,disabled:E===e.id,children:[(0,ce.jsx)("option",{value:"0",children:"Basic"}),(0,ce.jsx)("option",{value:"1",children:"Elevated"})]})]})]},e.id);var t})})]},e))]}),he=(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:{...nt.getBodySmall(n),opacity:.8},children:"Configure what each permission level can do. Host (level 2) always has full permissions."}),["level0","level1"].map(e=>(0,ce.jsxs)("div",{style:{border:`1px solid ${Pe.glassBorder(n)}`,borderRadius:ct.lg,overflow:"hidden"},children:[(0,ce.jsxs)("button",{onClick:()=>A(I===e?null:e),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:n?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:"none",cursor:"pointer",color:n?Pe.textPrimaryDark:Pe.textPrimary},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)("span",{style:{width:10,height:10,borderRadius:ct.full,backgroundColor:Lr("level0"===e?"0":"1")}}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n),fontWeight:700},children:"level0"===e?"Basic (Level 0)":"Elevated (Level 1)"})]}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:I===e?pe.faChevronUp:pe.faChevronDown})]}),I===e&&(0,ce.jsx)("div",{style:{padding:rt.md},children:["useMic","useCamera","useScreen","useChat"].map(t=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px 0`,borderBottom:`1px solid ${Pe.hexToRgba(n?"#FFFFFF":"#000000",.06)}`},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)("span",{style:{opacity:.8,width:20},children:(0,ce.jsx)(Fr,{capability:t})}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n)},children:"useMic"===t?"Microphone":"useCamera"===t?"Camera":"useScreen"===t?"Screen Share":"Chat"})]}),J?(0,ce.jsxs)("select",{value:T[e][t],onChange:r=>Y(e,t,r.target.value),style:me,children:[(0,ce.jsx)("option",{value:"allow",children:"Allow"}),"useChat"!==t&&(0,ce.jsx)("option",{value:"approval",children:"Approval"}),(0,ce.jsx)("option",{value:"disallow",children:"Disallow"})]}):(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.xs},children:[(0,ce.jsx)(Dr,{status:T[e][t]}),(0,ce.jsx)("span",{style:{...nt.getBodySmall(n),opacity:.85,textTransform:"capitalize"},children:T[e][t]})]})]},t))})]},e)),J&&(0,ce.jsx)(Nt,{fullWidth:!0,variant:"gradient",isDarkMode:n,onPress:K,disabled:L,children:L?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:8}}),"Saving..."]}):"Save Configuration"})]}),fe=(0,ce.jsxs)("div",{style:ee,children:[(0,ce.jsxs)("h2",{style:te,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserShield}),"Permissions"]}),(0,ce.jsx)("button",{style:re,onClick:t,"aria-label":"Close",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),be=(0,ce.jsxs)(It,{isDarkMode:n,borderRadius:Z?0:ct.xl,blur:o&&!Z?20:0,padding:0,elevation:Z?0:4,style:{...Q,backgroundColor:n?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:Z?"none":s?`${Pe.elevation(4,n)}, ${Pe.glowPrimary}`:Pe.elevation(4,n)},children:[(0,ce.jsx)("div",{style:{background:Pe.simpleBrandGradient(n)},children:fe}),(0,ce.jsxs)("div",{style:ae,children:[(0,ce.jsxs)("button",{onClick:()=>k("users"),style:ne("users"===w),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),"User Permissions"]}),(0,ce.jsxs)("button",{onClick:()=>k("config"),style:ne("config"===w),children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCog}),"Level Config"]})]}),(0,ce.jsx)("div",{style:oe,children:"users"===w?ge:he})]});return"sidebar"===i||"inline"===i?be:(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:X,onClick:t}),be]})},Br=({isPanelistsModalVisible:e,onPanelistsClose:t,parameters:r,position:a="topRight",isDarkMode:n=!0,enableGlassmorphism:o=!0,enableGlow:s=!0,renderMode:i="modal"})=>{const[c,d]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>d(!0),50);return()=>clearTimeout(e)}d(!1)},[e]);const l=r?.getUpdatedAllParams?.()||r,{participants:u,panelists:p,member:m,islevel:g,socket:h,roomName:f,showAlert:b,itemPageLimit:y,panelistsFocused:x=!1,updatePanelists:v,updatePanelistsFocused:S}=l||{},[R,w]=(0,de.useState)(""),[k,C]=(0,de.useState)(p||[]),[j,P]=(0,de.useState)(x),[M,I]=(0,de.useState)(!1),[A,T]=(0,de.useState)(!1),[F,D]=(0,de.useState)(u||[]);(0,de.useEffect)(()=>{C(p||[])},[p]),(0,de.useEffect)(()=>{e&&P(x)},[e]),(0,de.useEffect)(()=>{const e=r?.getUpdatedAllParams?.()||r;D(e?.participants||[])},[r,e]);const N=F,L=(0,de.useMemo)(()=>{const e=new Set(k.map(e=>e.id));return N.filter(t=>!e.has(t.id)&&"2"!==t.islevel).filter(e=>!R||e.name?.toLowerCase().includes(R.toLowerCase()))},[N,k,R]),V="2"===g,B=(0,de.useCallback)(async e=>{const t=await(async({socket:e,participant:t,currentPanelists:r,maxPanelists:a,roomName:n,member:o,islevel:s,showAlert:i})=>"2"!==s?(i?.({message:"Only the host can add panelists",type:"danger",duration:3e3}),!1):r.some(e=>e.id===t.id)?(i?.({message:`${t.name} is already a panelist`,type:"info",duration:3e3}),!1):r.length>=a?(i?.({message:`Maximum panelist limit (${a}) reached`,type:"danger",duration:3e3}),!1):new Promise(r=>{e.emit("addPanelist",{participantId:t.id,participantName:t.name,roomName:n},e=>{e?.success?r(!0):(i?.({message:e?.reason||"Failed to add panelist",type:"danger",duration:3e3}),r(!1))})}))({socket:h,participant:e,currentPanelists:k,maxPanelists:y,roomName:f,member:m,islevel:g,showAlert:b});if(t){const t=[...k,e];C(t),v?.(t)}},[h,k,y,f,m,g,b,v]),$=(0,de.useCallback)(async e=>{await(async({socket:e,participant:t,roomName:r,member:a,islevel:n,showAlert:o})=>{"2"===n?e.emit("removePanelist",{participantId:t.id,participantName:t.name,roomName:r},e=>{e?.success||o?.({message:e?.reason||"Failed to remove panelist",type:"danger",duration:3e3})}):o?.({message:"Only the host can remove panelists",type:"danger",duration:3e3})})({socket:h,participant:e,roomName:f,member:m,islevel:g,showAlert:b});const t=k.filter(t=>t.id!==e.id);C(t),v?.(t)},[h,k,f,m,g,b,v]),E=(0,de.useCallback)(async()=>{const e=!j;await(async({socket:e,roomName:t,member:r,islevel:a,focusEnabled:n,muteOthersMic:o=!1,muteOthersCamera:s=!1,showAlert:i})=>{"2"===a?e.emit("focusPanelists",{roomName:t,focusEnabled:n,muteOthersMic:o,muteOthersCamera:s},e=>{if(e?.success){if(n){let e="Panelist focus enabled";o&&s?e+=" (others' mic & camera muted)":o?e+=" (others' mic muted)":s&&(e+=" (others' camera muted)"),i?.({message:e,type:"success",duration:3e3})}}else i?.({message:e?.reason||"Failed to focus panelists",type:"danger",duration:3e3})}):i?.({message:"Only the host can focus panelists",type:"danger",duration:3e3})})({socket:h,roomName:f,member:m,islevel:g,focusEnabled:e,muteOthersMic:!!e&&M,muteOthersCamera:!!e&&A,showAlert:b}),P(e),S?.(e)},[j,h,f,m,g,M,A,b,S]);if("sidebar"!==i&&"inline"!==i&&!e)return null;const W={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(n),backdropFilter:o?"blur(2px)":void 0,WebkitBackdropFilter:o?"blur(2px)":void 0,opacity:c?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`,zIndex:1e3},H="sidebar"===i||"inline"===i,O=H?{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"}:{position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[a]||e.topRight})(),width:"min(460px, calc(100vw - 32px))",maxHeight:"calc(100vh - 100px)",opacity:c?1:0,transform:c?"center"===a?"translate(-50%, -50%) scale(1)":"scale(1) translateY(0)":"center"===a?"translate(-50%, -50%) scale(0.95)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},z={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(n)}`},U={...nt.getTitleMedium(n),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},q={background:Pe.brandGradient(n),padding:`2px ${rt.sm}px`,borderRadius:ct.full,fontSize:12,fontWeight:700,color:"#FFFFFF"},_={background:"transparent",border:"none",cursor:"pointer",padding:rt.xs,borderRadius:ct.sm,color:n?Pe.textSecondaryDark:Pe.textSecondary,transition:`all ${st.fast}ms ${st.smooth}`},G={padding:`${rt.md}px`,overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:`${rt.md}px`},Y={background:n?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)",border:`1px solid ${Pe.glassBorder(n)}`,borderRadius:ct.lg,padding:rt.md},K={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.sm}px ${rt.md}px`,background:n?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",borderRadius:ct.md,border:`1px solid ${Pe.hexToRgba(n?"#FFFFFF":"#000000",.06)}`},J={display:"flex",alignItems:"center",gap:rt.sm,padding:`${rt.sm}px ${rt.md}px`,borderRadius:ct.md,border:"1px solid "+(n?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.12)"),background:n?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"},X={flex:1,background:"transparent",border:"none",outline:"none",color:n?Pe.textPrimaryDark:Pe.textPrimary,fontSize:14},Z=(0,ce.jsxs)("div",{style:{...Y,padding:rt.sm},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:rt.sm},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:j?pe.faEye:pe.faEyeSlash,style:{color:j?Pe.primary:n?Pe.textMutedDark:Pe.textMuted}}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n),fontWeight:700},children:"Focus on Panelists"})]}),(0,ce.jsx)(Nt,{size:"sm",variant:j?"outlined":"gradient",isDarkMode:n,onPress:E,children:j?"Disable Focus":"Enable Focus"})]}),!j&&(0,ce.jsxs)("div",{style:{marginTop:rt.sm,paddingTop:rt.sm,borderTop:`1px solid ${Pe.hexToRgba(n?"#FFFFFF":"#000000",.06)}`,display:"flex",flexWrap:"wrap",gap:rt.md},children:[(0,ce.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:rt.sm,color:n?Pe.textSecondaryDark:Pe.textSecondary,fontSize:13,cursor:"pointer"},children:[(0,ce.jsx)("input",{type:"checkbox",checked:M,onChange:e=>I(e.target.checked),style:{cursor:"pointer"}}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:M?pe.faMicrophoneSlash:pe.faMicrophone}),"Mute others' mic"]}),(0,ce.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:rt.sm,color:n?Pe.textSecondaryDark:Pe.textSecondary,fontSize:13,cursor:"pointer"},children:[(0,ce.jsx)("input",{type:"checkbox",checked:A,onChange:e=>T(e.target.checked),style:{cursor:"pointer"}}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:A?pe.faVideoSlash:pe.faVideo}),"Mute others' camera"]})]})]}),Q=(0,ce.jsxs)("div",{style:z,children:[(0,ce.jsxs)("h2",{style:U,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUserTie}),"Panelists",(0,ce.jsxs)("span",{style:q,children:[k.length," / ",y]})]}),(0,ce.jsx)("button",{style:_,onClick:t,"aria-label":"Close",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"})})]}),ee=(0,ce.jsxs)("div",{style:G,children:[V&&k.length>0&&Z,(0,ce.jsxs)("div",{style:Y,children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,marginBottom:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStar,style:{color:Pe.warning}}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n),fontWeight:800},children:"Current Panelists"})]}),0===k.length?(0,ce.jsx)("div",{style:{padding:rt.md,textAlign:"center",color:n?Pe.textMutedDark:Pe.textMuted,fontSize:13},children:"No panelists selected yet"}):(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:rt.xs},children:k.map(e=>(0,ce.jsxs)("div",{style:K,children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStar,style:{color:Pe.warning,fontSize:12}}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n)},children:e.name})]}),V&&(0,ce.jsx)(Nt,{size:"sm",variant:"ghost",isDarkMode:n,backgroundColor:Pe.danger,textColor:Pe.danger,onPress:()=>$(e),icon:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMinus}),children:"Remove"})]},e.id))})]}),V&&k.length<y&&(0,ce.jsxs)("div",{style:Y,children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,marginBottom:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers,style:{color:n?Pe.textSecondaryDark:Pe.textSecondary}}),(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n),fontWeight:800},children:"Add Panelists"})]}),(0,ce.jsxs)("div",{style:J,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSearch,style:{color:n?Pe.textMutedDark:Pe.textMuted,fontSize:14}}),(0,ce.jsx)("input",{type:"text",placeholder:"Search participants...",value:R,onChange:e=>w(e.target.value),style:X})]}),(0,ce.jsx)("div",{style:{marginTop:rt.sm},children:0===L.length?(0,ce.jsx)("div",{style:{padding:rt.md,textAlign:"center",color:n?Pe.textMutedDark:Pe.textMuted,fontSize:13},children:R?"No matching participants":"No available participants to add"}):(0,ce.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:rt.xs,maxHeight:220,overflowY:"auto",marginTop:rt.sm},children:L.map(e=>(0,ce.jsxs)("div",{style:K,children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,flexWrap:"wrap"},children:[(0,ce.jsx)("span",{style:{...nt.getBodyMedium(n)},children:e.name}),(0,ce.jsx)("span",{style:{backgroundColor:Pe.hexToRgba("1"===e.islevel?Pe.secondary:Pe.textMutedDark,n?.18:.12),color:"1"===e.islevel?Pe.secondary:n?Pe.textSecondaryDark:Pe.textSecondary,padding:`2px ${rt.xs}px`,borderRadius:ct.sm,fontSize:11,fontWeight:700},children:"1"===e.islevel?"Elevated":"Basic"})]}),(0,ce.jsx)(Nt,{size:"sm",variant:"ghost",isDarkMode:n,backgroundColor:Pe.primary,textColor:Pe.primary,onPress:()=>B(e),icon:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus}),children:"Add"})]},e.id))})})]}),V&&k.length>=y&&(0,ce.jsx)("div",{style:{...Y,borderColor:Pe.hexToRgba(Pe.warning,.35),background:Pe.hexToRgba(Pe.warning,n?.1:.12),color:n?Pe.textPrimaryDark:Pe.textPrimary},children:(0,ce.jsxs)("div",{style:{color:Pe.warningDark,fontWeight:700,fontSize:13,textAlign:"center"},children:["Maximum panelist limit (",y,") reached. Remove a panelist to add more."]})})]}),te=(0,ce.jsxs)(It,{isDarkMode:n,borderRadius:H?0:ct.xl,blur:o&&!H?20:0,padding:0,elevation:H?0:4,style:{...O,backgroundColor:n?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:H?"none":s?`${Pe.elevation(4,n)}, ${Pe.glowPrimary}`:Pe.elevation(4,n)},children:[(0,ce.jsx)("div",{style:{background:Pe.accentGradient(n)},children:Q}),ee]});return"sidebar"===i||"inline"===i?te:(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:W,onClick:t}),te]})},$r=({totalPages:e,currentUserPage:t,handlePageChange:r=C,position:a="middle",direction:n="horizontal",buttonsContainerStyle:o,activePageStyle:s,inactivePageStyle:i,backgroundColor:c,paginationHeight:d=40,showAspect:l=!0,parameters:u,containerProps:p,pageButtonProps:m,renderContainer:g,renderPageButton:h,renderPageContent:f,isDarkMode:b,enableGlassmorphism:y=!0,enableGlow:x=!0,maxVisiblePages:v=5,buttonSize:S=36})=>{const[R,w]=(0,de.useState)(!1),[k,j]=(0,de.useState)(1),[P,M]=(0,de.useState)(null);(0,de.useEffect)(()=>{const e=setTimeout(()=>w(!0),100);return()=>clearTimeout(e)},[]);const I=(0,de.useMemo)(()=>u.getUpdatedAllParams(),[u]),A=b??I.isDarkModeValue??!0,T=I.breakOutRoomStarted&&!I.breakOutRoomEnded;(0,de.useEffect)(()=>{if(T){const t=I.memberRoom+I.mainRoomsLength,r=Math.floor(v/2),a=Math.max(1,Math.min(t-r,e-v+1));j(a)}},[T,I.memberRoom,I.mainRoomsLength,e,v]);const F=(0,de.useCallback)(async e=>{const t=u.getUpdatedAllParams();await r({page:e,parameters:t,breakRoom:e>=t.mainRoomsLength?e-t.mainRoomsLength:-1,inBreakRoom:e>=t.mainRoomsLength})},[u,r]),D=k>1,N=k+v<=e,L=e>v+1,V=(0,de.useCallback)(()=>{j(e=>Math.max(1,e-3))},[]),B=(0,de.useCallback)(()=>{j(t=>Math.min(e-v+1,t+3))},[e,v]),$=(0,de.useMemo)(()=>{const t=[0];if(e<=v+1)for(let r=1;r<=e;r++)t.push(r);else{const r=Math.min(k+v-1,e);for(let e=k;e<=r;e++)t.push(e)}return t},[e,k,v]),E=(0,de.useCallback)(e=>{if(0===e)return(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faHome,size:"sm"});if(T&&e>=I.mainRoomsLength){const t=e-I.mainRoomsLength,r=t===I.memberRoom,a=t===I.hostNewRoom;return(0,ce.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers,size:"xs"}),(0,ce.jsx)("span",{children:t+1}),r&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStar,size:"xs"}),a&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faLock,size:"xs"})]})}return(0,ce.jsx)("span",{children:e})},[T,I.mainRoomsLength,I.memberRoom,I.hostNewRoom]),W={display:"flex",flexDirection:"horizontal"===n?"row":"column",alignItems:"center",justifyContent:"left"===a?"flex-start":"right"===a?"flex-end":"center",gap:`${rt.xs}px`,padding:`${rt.xs}px ${rt.sm}px`,height:d,background:c||(y?Pe.glassBackground(A):A?"rgba(15, 23, 42, 0.9)":"rgba(255, 255, 255, 0.9)"),backdropFilter:y?"blur(12px)":"none",WebkitBackdropFilter:y?"blur(12px)":"none",borderRadius:`${ct.md}px`,border:y?`1px solid ${Pe.glassBorder(A)}`:"none",boxShadow:Pe.elevation(2,A),opacity:R?1:0,transform:R?"translateY(0)":"translateY(10px)",transition:`all ${st.normal}ms ${st.smooth}`,...o},H=e=>({width:S,height:S,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:`${ct.sm}px`,border:"none",cursor:e?"not-allowed":"pointer",background:"transparent",color:e?A?"rgba(255, 255, 255, 0.3)":"rgba(15, 23, 42, 0.3)":A?"rgba(255, 255, 255, 0.8)":"rgba(15, 23, 42, 0.8)",opacity:e?.5:1,transition:`all ${st.fast}ms`}),O=(e,t,r)=>{const a={minWidth:S,height:S,padding:`0 ${rt.xs}px`,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:`${ct.sm}px`,border:"none",cursor:"pointer",...nt.toStyle(nt.labelSmall),fontWeight:t?700:500,transition:`all ${st.fast}ms ${st.smooth}`};return t?{...a,background:x?Pe.brandGradient(A):Pe.primary,color:"#FFFFFF",boxShadow:x?Pe.glowPrimary:"none",transform:"scale(1.05)",...s}:{...a,background:r?A?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.15)":A?"transparent":"rgba(0, 0, 0, 0.05)",color:A?"rgba(255, 255, 255, 0.9)":"rgba(15, 23, 42, 0.9)",transform:r?"scale(1.02)":"scale(1)",...i}};if(!l||e<1)return(0,ce.jsx)(ce.Fragment,{});const z=$.map(e=>{const r=e===t,a=0===e,n=P===e,o=E(e),s=(0,ce.jsx)("button",{style:O(0,r,n),onClick:()=>F(e),onMouseEnter:()=>M(e),onMouseLeave:()=>M(null),...m?.({page:e,isActive:r,isHomePage:a})||{},children:f?f({defaultContent:o,page:e,isActive:r,isHomePage:a,label:o}):o},e);return h?h({defaultButton:s,page:e,isActive:r,isHomePage:a,onSelect:()=>F(e),label:o}):s}),U=(0,ce.jsxs)("div",{style:W,...p,children:[L&&(0,ce.jsx)("button",{style:H(!D),onClick:V,disabled:!D,"aria-label":"Previous pages",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:"vertical"===n?pe.faChevronUp:pe.faChevronLeft,size:"sm"})}),z,L&&(0,ce.jsx)("button",{style:H(!N),onClick:B,disabled:!N,"aria-label":"Next pages",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:"vertical"===n?pe.faChevronDown:pe.faChevronRight,size:"sm"})})]});return g?(0,ce.jsx)(ce.Fragment,{children:g({defaultContainer:U,pages:$})}):U},Er=["en","es","fr","de","it","pt","ru","zh","ja","ko","ar","hi","bn","pa","te","mr","ta","ur","gu","kn","ml","ne","si","nl","pl","tr","cs","el","hu","ro","sv","da","fi","no","sk","uk","bg","hr","et","lt","lv","sl","sr","bs","mk","is","ga","cy","mt","lb","sq","be","he","fa","ps","ku","vi","th","id","ms","tl","km","lo","my","sw","yo","ig","ha","zu","xh","af","st","tn","sn","am","so","rw","mg","ny","ee","tw","gaa","ka","hy","az","eu","gl","ca","la","eo","kk","uz","tg","ky","tk","mn","auto"],Wr={en:{name:"English",nativeName:"English",region:"global",ttsSupport:"excellent"},es:{name:"Spanish",nativeName:"Espaol",region:"global",ttsSupport:"excellent"},fr:{name:"French",nativeName:"Franais",region:"europe",ttsSupport:"excellent"},de:{name:"German",nativeName:"Deutsch",region:"europe",ttsSupport:"excellent"},it:{name:"Italian",nativeName:"Italiano",region:"europe",ttsSupport:"excellent"},pt:{name:"Portuguese",nativeName:"Portugus",region:"global",ttsSupport:"excellent"},ru:{name:"Russian",nativeName:"",region:"europe",ttsSupport:"excellent"},zh:{name:"Chinese",nativeName:"",region:"asia",ttsSupport:"excellent"},ja:{name:"Japanese",nativeName:"",region:"asia",ttsSupport:"excellent"},ko:{name:"Korean",nativeName:"",region:"asia",ttsSupport:"excellent"},ar:{name:"Arabic",nativeName:"",region:"mena",ttsSupport:"excellent"},hi:{name:"Hindi",nativeName:"",region:"south-asia",ttsSupport:"good"},bn:{name:"Bengali",nativeName:"",region:"south-asia",ttsSupport:"good"},pa:{name:"Punjabi",nativeName:"",region:"south-asia",ttsSupport:"moderate"},te:{name:"Telugu",nativeName:"",region:"south-asia",ttsSupport:"good"},mr:{name:"Marathi",nativeName:"",region:"south-asia",ttsSupport:"good"},ta:{name:"Tamil",nativeName:"",region:"south-asia",ttsSupport:"good"},ur:{name:"Urdu",nativeName:"",region:"south-asia",ttsSupport:"good"},gu:{name:"Gujarati",nativeName:"",region:"south-asia",ttsSupport:"moderate"},kn:{name:"Kannada",nativeName:"",region:"south-asia",ttsSupport:"moderate"},ml:{name:"Malayalam",nativeName:"",region:"south-asia",ttsSupport:"moderate"},ne:{name:"Nepali",nativeName:"",region:"south-asia",ttsSupport:"limited"},si:{name:"Sinhala",nativeName:"",region:"south-asia",ttsSupport:"limited"},nl:{name:"Dutch",nativeName:"Nederlands",region:"europe",ttsSupport:"excellent"},pl:{name:"Polish",nativeName:"Polski",region:"europe",ttsSupport:"excellent"},tr:{name:"Turkish",nativeName:"Trke",region:"europe",ttsSupport:"excellent"},cs:{name:"Czech",nativeName:"etina",region:"europe",ttsSupport:"good"},el:{name:"Greek",nativeName:"",region:"europe",ttsSupport:"good"},hu:{name:"Hungarian",nativeName:"Magyar",region:"europe",ttsSupport:"good"},ro:{name:"Romanian",nativeName:"Romn",region:"europe",ttsSupport:"good"},sv:{name:"Swedish",nativeName:"Svenska",region:"europe",ttsSupport:"excellent"},da:{name:"Danish",nativeName:"Dansk",region:"europe",ttsSupport:"good"},fi:{name:"Finnish",nativeName:"Suomi",region:"europe",ttsSupport:"good"},no:{name:"Norwegian",nativeName:"Norsk",region:"europe",ttsSupport:"good"},sk:{name:"Slovak",nativeName:"Slovenina",region:"europe",ttsSupport:"moderate"},uk:{name:"Ukrainian",nativeName:"",region:"europe",ttsSupport:"good"},bg:{name:"Bulgarian",nativeName:"",region:"europe",ttsSupport:"moderate"},hr:{name:"Croatian",nativeName:"Hrvatski",region:"europe",ttsSupport:"moderate"},et:{name:"Estonian",nativeName:"Eesti",region:"europe",ttsSupport:"moderate"},lt:{name:"Lithuanian",nativeName:"Lietuvi",region:"europe",ttsSupport:"moderate"},lv:{name:"Latvian",nativeName:"Latvieu",region:"europe",ttsSupport:"moderate"},sl:{name:"Slovenian",nativeName:"Slovenina",region:"europe",ttsSupport:"moderate"},sr:{name:"Serbian",nativeName:"",region:"europe",ttsSupport:"moderate"},bs:{name:"Bosnian",nativeName:"Bosanski",region:"europe",ttsSupport:"limited"},mk:{name:"Macedonian",nativeName:"",region:"europe",ttsSupport:"limited"},is:{name:"Icelandic",nativeName:"slenska",region:"europe",ttsSupport:"moderate"},ga:{name:"Irish",nativeName:"Gaeilge",region:"europe",ttsSupport:"limited"},cy:{name:"Welsh",nativeName:"Cymraeg",region:"europe",ttsSupport:"moderate"},mt:{name:"Maltese",nativeName:"Malti",region:"europe",ttsSupport:"limited"},lb:{name:"Luxembourgish",nativeName:"Ltzebuergesch",region:"europe",ttsSupport:"limited"},sq:{name:"Albanian",nativeName:"Shqip",region:"europe",ttsSupport:"limited"},be:{name:"Belarusian",nativeName:"",region:"europe",ttsSupport:"limited"},he:{name:"Hebrew",nativeName:"",region:"mena",ttsSupport:"good"},fa:{name:"Persian",nativeName:"",region:"mena",ttsSupport:"moderate"},ps:{name:"Pashto",nativeName:"",region:"mena",ttsSupport:"limited"},ku:{name:"Kurdish",nativeName:"Kurd",region:"mena",ttsSupport:"limited"},vi:{name:"Vietnamese",nativeName:"Ting Vit",region:"asia",ttsSupport:"good"},th:{name:"Thai",nativeName:"",region:"asia",ttsSupport:"good"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia",region:"asia",ttsSupport:"good"},ms:{name:"Malay",nativeName:"Bahasa Melayu",region:"asia",ttsSupport:"good"},tl:{name:"Filipino",nativeName:"Tagalog",region:"asia",ttsSupport:"moderate"},km:{name:"Khmer",nativeName:"",region:"asia",ttsSupport:"limited"},lo:{name:"Lao",nativeName:"",region:"asia",ttsSupport:"limited"},my:{name:"Burmese",nativeName:"",region:"asia",ttsSupport:"limited"},sw:{name:"Swahili",nativeName:"Kiswahili",region:"africa",ttsSupport:"moderate"},yo:{name:"Yoruba",nativeName:"Yorb",region:"africa",ttsSupport:"limited"},ig:{name:"Igbo",nativeName:"Igbo",region:"africa",ttsSupport:"limited"},ha:{name:"Hausa",nativeName:"Hausa",region:"africa",ttsSupport:"limited"},zu:{name:"Zulu",nativeName:"isiZulu",region:"africa",ttsSupport:"moderate"},xh:{name:"Xhosa",nativeName:"isiXhosa",region:"africa",ttsSupport:"limited"},af:{name:"Afrikaans",nativeName:"Afrikaans",region:"africa",ttsSupport:"good"},st:{name:"Sesotho",nativeName:"Sesotho",region:"africa",ttsSupport:"limited"},tn:{name:"Setswana",nativeName:"Setswana",region:"africa",ttsSupport:"limited"},sn:{name:"Shona",nativeName:"chiShona",region:"africa",ttsSupport:"limited"},am:{name:"Amharic",nativeName:"",region:"africa",ttsSupport:"moderate"},so:{name:"Somali",nativeName:"Soomaali",region:"africa",ttsSupport:"limited"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda",region:"africa",ttsSupport:"limited"},mg:{name:"Malagasy",nativeName:"Malagasy",region:"africa",ttsSupport:"limited"},ny:{name:"Chichewa",nativeName:"Chichewa",region:"africa",ttsSupport:"limited"},ee:{name:"Ewe",nativeName:"Eegbe",region:"africa",ttsSupport:"limited"},tw:{name:"Twi",nativeName:"Twi",region:"africa",ttsSupport:"limited"},gaa:{name:"Ga",nativeName:"G",region:"africa",ttsSupport:"limited"},ka:{name:"Georgian",nativeName:"",region:"caucasus",ttsSupport:"moderate"},hy:{name:"Armenian",nativeName:"delays",region:"caucasus",ttsSupport:"moderate"},az:{name:"Azerbaijani",nativeName:"Azrbaycanca",region:"caucasus",ttsSupport:"moderate"},eu:{name:"Basque",nativeName:"Euskara",region:"europe",ttsSupport:"limited"},gl:{name:"Galician",nativeName:"Galego",region:"europe",ttsSupport:"moderate"},ca:{name:"Catalan",nativeName:"Catal",region:"europe",ttsSupport:"good"},la:{name:"Latin",nativeName:"Latina",region:"europe",ttsSupport:"limited"},eo:{name:"Esperanto",nativeName:"Esperanto",region:"constructed",ttsSupport:"limited"},kk:{name:"Kazakh",nativeName:"",region:"central-asia",ttsSupport:"moderate"},uz:{name:"Uzbek",nativeName:"O'zbek",region:"central-asia",ttsSupport:"moderate"},tg:{name:"Tajik",nativeName:"",region:"central-asia",ttsSupport:"limited"},ky:{name:"Kyrgyz",nativeName:"",region:"central-asia",ttsSupport:"limited"},tk:{name:"Turkmen",nativeName:"Trkmen",region:"central-asia",ttsSupport:"limited"},mn:{name:"Mongolian",nativeName:"",region:"central-asia",ttsSupport:"moderate"},auto:{name:"Auto-detect",nativeName:"Auto",region:"special",ttsSupport:"n/a"}};function Hr(e,t="en"){if(!e)return"Unknown";const r=function(e){return e&&"string"==typeof e?e.trim().toLowerCase().split("-")[0].substring(0,2):"en"}(e);if(Wr[r])return Wr[r].name;try{const e=new Intl.DisplayNames([t],{type:"language"}).of(r);if(e&&e.toLowerCase()!==r)return e}catch{}return e.toUpperCase()}const Or=["excellent","good","moderate","limited","unknown","n/a"];function zr(e="en",t=!0){return Er.filter(e=>"auto"!==e).map(t=>({code:t,name:Hr(t,e),nativeName:Wr[t]?.nativeName||Hr(t),ttsSupport:Wr[t]?.ttsSupport||"unknown",region:Wr[t]?.region||"other"})).filter(e=>!t||function(e,t="good"){const r=Or.indexOf(e||"unknown"),a=Or.indexOf(t);return-1!==r&&r<=a}(e.ttsSupport)).sort((e,t)=>e.name.localeCompare(t.name))}const Ur=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"nl",name:"Dutch"},{code:"ru",name:"Russian"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"ar",name:"Arabic"},{code:"hi",name:"Hindi"},{code:"bn",name:"Bengali"},{code:"tr",name:"Turkish"},{code:"pl",name:"Polish"},{code:"vi",name:"Vietnamese"},{code:"th",name:"Thai"},{code:"id",name:"Indonesian"},{code:"ms",name:"Malay"},{code:"sw",name:"Swahili"},{code:"yo",name:"Yoruba"},{code:"ha",name:"Hausa"},{code:"ig",name:"Igbo"},{code:"zu",name:"Zulu"},{code:"am",name:"Amharic"},{code:"tw",name:"Twi"},{code:"he",name:"Hebrew"},{code:"fa",name:"Persian"},{code:"uk",name:"Ukrainian"},{code:"el",name:"Greek"},{code:"cs",name:"Czech"},{code:"ro",name:"Romanian"},{code:"hu",name:"Hungarian"},{code:"sv",name:"Swedish"},{code:"da",name:"Danish"},{code:"no",name:"Norwegian"},{code:"fi",name:"Finnish"}],qr=({value:e,onChange:t,languages:r,placeholder:a="Select language",disabled:n=!1,isDarkMode:o=!0,includeOriginal:s=!1,includeAuto:i=!1,includeSpeakerOutput:c=!1})=>{const[d,l]=(0,de.useState)(!1),u=(0,de.useMemo)(()=>"speakerOutput"===e||!e&&c?"Speaker's Output":e?"original"===e?"Raw Microphone Audio":"auto"===e?"Auto-Detect":Hr(e):a,[e,a,c]);return(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsxs)("button",{onClick:()=>!n&&l(!d),disabled:n,style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:o?Pe.surfaceElevatedDark:Pe.surfaceElevated,border:`1px solid ${o?Pe.glassBorder(!0):Pe.divider}`,borderRadius:ct.md,color:o?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,cursor:n?"not-allowed":"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",opacity:n?.5:1,transition:`all ${st.fast}ms ease`},children:[(0,ce.jsx)("span",{children:u}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:d?pe.faChevronUp:pe.faChevronDown,size:"sm"})]}),d&&(0,ce.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,right:0,maxHeight:250,overflowY:"auto",background:o?Pe.surfaceDark:Pe.surface,border:`1px solid ${o?Pe.glassBorder(!0):Pe.divider}`,borderRadius:ct.md,marginTop:4,zIndex:100,boxShadow:o?"0 4px 12px rgba(0,0,0,0.3)":"0 4px 12px rgba(0,0,0,0.1)"},children:[c&&(0,ce.jsx)("button",{onClick:()=>{t("speakerOutput"),l(!1)},style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:"speakerOutput"!==e&&e?"transparent":o?Pe.primaryDark:Pe.primary,color:"speakerOutput"!==e&&e?o?Pe.textPrimaryDark:Pe.textPrimary:"#FFFFFF",border:"none",textAlign:"left",cursor:"pointer",fontSize:nt.bodyMedium.fontSize},children:"Speaker's Output (Default)"}),s&&(0,ce.jsx)("button",{onClick:()=>{t("original"),l(!1)},style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:"original"===e?o?Pe.primaryDark:Pe.primary:"transparent",color:"original"===e?"#FFFFFF":o?Pe.textPrimaryDark:Pe.textPrimary,border:"none",textAlign:"left",cursor:"pointer",fontSize:nt.bodyMedium.fontSize},children:"Raw Microphone Audio (Host Only)"}),i&&(0,ce.jsxs)("button",{onClick:()=>{t("auto"),l(!1)},style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:"auto"===e?o?Pe.primaryDark:Pe.primary:"transparent",color:"auto"===e?"#FFFFFF":o?Pe.textPrimaryDark:Pe.textPrimary,border:"none",textAlign:"left",cursor:"pointer",fontSize:nt.bodyMedium.fontSize,display:"flex",alignItems:"center",gap:8},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faWandMagicSparkles,size:"sm"}),"Auto-Detect"]}),(c||s||i)&&r.length>0&&(0,ce.jsx)("div",{style:{height:1,background:o?Pe.glassBorder(!0):Pe.divider,margin:`${rt.xs}px 0`}}),r.map(r=>(0,ce.jsx)("button",{onClick:()=>{t(r.code),l(!1)},style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,background:e===r.code?o?Pe.primaryDark:Pe.primary:"transparent",color:e===r.code?"#FFFFFF":o?Pe.textPrimaryDark:Pe.textPrimary,border:"none",textAlign:"left",cursor:"pointer",fontSize:nt.bodyMedium.fontSize},children:r.name},r.code))]})]})},_r=({speaker:e,selectedLanguage:t,onChange:r,availableLanguages:a,isDarkMode:n=!0,isHost:o=!1})=>(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:`${rt.sm}px`,background:n?Pe.hexToRgba(Pe.surfaceElevatedDark,.5):Pe.hexToRgba(Pe.surfaceElevated,.5),borderRadius:ct.sm,marginBottom:rt.sm},children:[(0,ce.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUser,style:{color:n?Pe.textMutedDark:Pe.textMuted}}),(0,ce.jsx)("span",{style:{color:n?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize},children:e.name})]}),(0,ce.jsx)("div",{style:{width:180},children:(0,ce.jsx)(qr,{value:t||(o?"original":"speakerOutput"),onChange:t=>r(e.id||e.name,t),languages:a,isDarkMode:n,includeOriginal:o,includeSpeakerOutput:!0,placeholder:"Speaker's Output"})})]}),Gr=({isVisible:e,onClose:t,translationConfig:r,member:a,islevel:n,audioProducerId:o,participants:s,mySpokenLanguage:i,mySpokenLanguageEnabled:c,myDefaultOutputLanguage:d,myDefaultListenLanguage:l,listenPreferences:u,updateMySpokenLanguage:p,updateMySpokenLanguageEnabled:m,updateMyDefaultOutputLanguage:g,updateMyDefaultListenLanguage:h,updateListenPreferences:f,socket:b,roomName:y,showAlert:x,isDarkMode:v=!0,enableGlassmorphism:S=!0,enableGlow:R=!0,position:w="center",renderMode:k="modal",title:C,renderHeader:j,renderBody:P,renderContent:M})=>{const[I,A]=(0,de.useState)(!1),[T,F]=(0,de.useState)(!1),[D,N]=(0,de.useState)("speaking"),[L,V]=(0,de.useState)(!1),[B,$]=(0,de.useState)(i),[E,W]=(0,de.useState)(c),[H,O]=(0,de.useState)(d),[z,U]=(0,de.useState)(l),[q,_]=(0,de.useState)(new Map(u)),G=3e4,[Y,K]=(0,de.useState)(0),[J,X]=(0,de.useState)(0),[Z,Q]=(0,de.useState)(0),[ee,te]=(0,de.useState)(0),[re,ae]=(0,de.useState)("basic"),[ne,oe]=(0,de.useState)("female"),[se,ie]=(0,de.useState)(null),[le,me]=(0,de.useState)(r?.translationVoiceConfig?.ttsNickName||"deepgram"),[ge,he]=(0,de.useState)(null),[fe,be]=(0,de.useState)(""),[ye,xe]=(0,de.useState)("elevenlabs"),[ve,Se]=(0,de.useState)(.5),[Re,we]=(0,de.useState)(.75),[ke,Ce]=(0,de.useState)(null),[je,Me]=(0,de.useState)(null),[Ie,Ae]=(0,de.useState)(!1),[Te,Fe]=(0,de.useState)(!1),[De,Ne]=(0,de.useState)(null);(0,de.useEffect)(()=>{if(!e||!b||!y||Te)return;const t=H||null;t&&De!==t&&(Fe(!0),Ne(t),b.emit("translation:getVoices",{roomName:y,language:t},e=>{e.voices&&Ce(e.voices),e.provider&&e.provider!==le&&me(e.provider),Ae(!0),Fe(!1)}),Ie||function(e,t="en"){return new Promise(r=>{const a=setTimeout(()=>{r(zr(t))},5e3);e.emit("translation:getLanguages",{displayLocale:t},e=>{clearTimeout(a),r(e.languages||zr(t))})})}(b,"en").then(e=>{e&&e.length>0&&Me(e)}).catch(e=>{console.error("[TranslationSettingsModal] Failed to fetch languages:",e)}))},[e,b,y,H,De,Te,r,le,Ie]),(0,de.useEffect)(()=>{if(e){const e=setTimeout(()=>A(!0),50);return()=>clearTimeout(e)}A(!1)},[e]),(0,de.useEffect)(()=>{$(i),W(c),O(d),U(l),_(new Map(u)),V(u.size>0)},[i,c,d,l,u]),(0,de.useEffect)(()=>{const e=setInterval(()=>{const e=Date.now();if(Y>0){const t=e-Y,r=Math.max(0,Math.ceil((G-t)/1e3));Q(r)}if(J>0){const t=e-J,r=Math.max(0,Math.ceil((G-t)/1e3));te(r)}},1e3);return()=>clearInterval(e)},[Y,J]);const Le=(0,de.useMemo)(()=>je||Ur,[je]),Ve=(0,de.useMemo)(()=>{if(!r)return Le;if("allowlist"===r.spokenLanguageMode){const e=r.allowedSpokenLanguages?.map(e=>e.code)||[];return Le.filter(t=>e.includes(t.code))}return"blocklist"===r.spokenLanguageMode?Le.filter(e=>!r.blockedSpokenLanguages?.includes(e.code)):Le},[r,Le]),Be=(0,de.useMemo)(()=>{if(!r)return Le;if("allowlist"===r.listenLanguageMode){const e=r.allowedListenLanguages?.map(e=>e.code)||[];return Le.filter(t=>e.includes(t.code))}return"blocklist"===r.listenLanguageMode?Le.filter(e=>!r.blockedListenLanguages?.includes(e.code)):Le},[r,Le]),$e=(0,de.useMemo)(()=>s.filter(e=>e.name!==a),[s,a]),Ee=(0,de.useCallback)((e,t)=>{_(r=>{const a=new Map(r);return"original"===t?a.delete(e):a.set(e,t),a})},[]),We=(0,de.useCallback)(async()=>{const e=Date.now(),r=B!==i||E!==c||H!==d,a=L?!function(e,t){if(e.size!==t.size)return!1;for(const[r,a]of e)if(t.get(r)!==a)return!1;return!0}(q,u):z!==l;if(r&&Y>0){const t=e-Y;if(t<G){const e=Math.ceil((G-t)/1e3);return void x?.({message:`Please wait ${e} seconds before changing spoken language`,type:"danger",duration:3e3})}}if(a&&J>0){const t=e-J;if(t<G){const e=Math.ceil((G-t)/1e3);return void x?.({message:`Please wait ${e} seconds before changing listen language`,type:"danger",duration:3e3})}}F(!0);try{const n={};if("clone"===re&&ge?n.voiceClone=ge:"advanced"===re&&se?(n.voiceId=se,n.ttsProvider=le):n.voiceGender=ne,(r||E)&&(b.emit("translation:setMyLanguage",{roomName:y,language:B,defaultOutputLanguage:H,enabled:E,producerId:o,voiceConfig:E?n:void 0}),p(B),g(H),m(E),K(e),Q(30)),L){h(null),f(q);for(const[e,t]of q){const r=u.get(e);r!==t&&(r&&b.emit("translation:unsubscribe",{roomName:y,speakerId:e,language:r}),b.emit("translation:subscribe",{roomName:y,speakerId:e,language:t}))}for(const[e,t]of u)q.has(e)||b.emit("translation:unsubscribe",{roomName:y,speakerId:e,language:t});a&&(X(e),te(30))}else z!==l&&(b.emit("translation:setDefaultListenLanguage",{roomName:y,language:z}),h(z),f(new Map),X(e),te(30));x?.({message:"Translation settings saved",type:"success",duration:2e3}),t()}catch(e){console.error("Failed to save translation settings:",e),x?.({message:"Failed to save settings",type:"danger",duration:3e3})}finally{F(!1)}},[B,E,z,q,i,c,l,u,L,b,y,o,p,m,h,f,x,t,Y,J]),He={display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px`,borderBottom:`1px solid ${Pe.glassBorder(v)}`},Oe={...nt.getTitleMedium(v),display:"flex",alignItems:"center",gap:`${rt.sm}px`,margin:0},ze={display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:v?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",color:v?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.7)",cursor:"pointer",fontSize:"18px",fontWeight:300,transition:`all ${st.fast}ms ease`},Ue={padding:`${rt.md}px`,overflowY:"auto",flex:1,display:"flex",flexDirection:"column",gap:`${rt.md}px`},qe={display:"flex",justifyContent:"flex-end",gap:rt.md,padding:`${rt.md}px`,borderTop:`1px solid ${Pe.glassBorder(v)}`},_e=(0,ce.jsxs)("div",{style:He,children:[(0,ce.jsxs)("h2",{style:Oe,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faGlobe,style:{color:v?Pe.accentDark:Pe.accent}}),C||"Translation Settings"]}),(0,ce.jsx)("button",{style:ze,onClick:t,onMouseEnter:e=>{e.currentTarget.style.backgroundColor=v?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=v?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})]}),Ge=(0,ce.jsxs)("div",{style:{display:"flex",borderBottom:`1px solid ${Pe.glassBorder(v)}`},children:[(0,ce.jsxs)("button",{onClick:()=>N("speaking"),style:{flex:1,padding:`${rt.md}px`,background:"speaking"===D?v?Pe.hexToRgba(Pe.primaryDark,.2):Pe.hexToRgba(Pe.primary,.1):"transparent",border:"none",borderBottom:"speaking"===D?`2px solid ${v?Pe.primaryDark:Pe.primary}`:"2px solid transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:rt.sm,color:"speaking"===D?v?Pe.primaryDark:Pe.primary:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodyMedium.fontSize,fontWeight:"speaking"===D?600:400,transition:`all ${st.fast}ms ease`},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone}),"My Voice Output"]}),(0,ce.jsxs)("button",{onClick:()=>N("listening"),style:{flex:1,padding:`${rt.md}px`,background:"listening"===D?v?Pe.hexToRgba(Pe.primaryDark,.2):Pe.hexToRgba(Pe.primary,.1):"transparent",border:"none",borderBottom:"listening"===D?`2px solid ${v?Pe.primaryDark:Pe.primary}`:"2px solid transparent",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:rt.sm,color:"listening"===D?v?Pe.primaryDark:Pe.primary:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodyMedium.fontSize,fontWeight:"listening"===D?600:400,transition:`all ${st.fast}ms ease`},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faHeadphones}),"Listen To"]})]}),Ye=(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{style:{margin:`0 0 ${rt.md}px`,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:"Optionally specify your spoken language (helps auto-detection). Then choose an output language to have your voice translated for everyone."}),Z>0&&(0,ce.jsxs)("div",{style:{marginBottom:rt.md,padding:`${rt.sm}px ${rt.md}px`,background:v?Pe.hexToRgba(Pe.warning,.15):Pe.hexToRgba(Pe.warning,.1),borderRadius:ct.sm,color:Pe.warning,fontSize:nt.bodySmall.fontSize,display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faClock}),(0,ce.jsxs)("span",{children:["Wait ",Z,"s before changing spoken language"]})]}),(0,ce.jsxs)("div",{style:{marginBottom:rt.lg},children:[(0,ce.jsxs)("label",{style:{display:"block",marginBottom:rt.sm,color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,fontWeight:500},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faLanguage,style:{marginRight:8}}),"Spoken Language"]}),(0,ce.jsx)(qr,{value:B,onChange:$,languages:Ve,isDarkMode:v,includeAuto:r?.autoDetectSpokenLanguage})]}),(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,padding:rt.md,background:v?Pe.hexToRgba(Pe.surfaceElevatedDark,.5):Pe.hexToRgba(Pe.surfaceElevated,.5),borderRadius:ct.md},children:[(0,ce.jsx)("input",{type:"checkbox",id:"enableTranslation",checked:E,onChange:e=>W(e.target.checked),style:{width:20,height:20,accentColor:v?Pe.primaryDark:Pe.primary}}),(0,ce.jsx)("label",{htmlFor:"enableTranslation",style:{color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,cursor:"pointer"},children:"Speak in a different language (translate my voice)"})]}),E&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:{marginTop:rt.lg,marginBottom:rt.lg},children:[(0,ce.jsxs)("label",{style:{display:"block",marginBottom:rt.sm,color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,fontWeight:500},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faLanguage,style:{marginRight:8}}),"Output Language (Everyone Hears)"]}),(0,ce.jsx)("p",{style:{margin:`0 0 ${rt.sm}px`,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:"Choose the language everyone will hear you speak in. Your original audio will be replaced with the translated version."}),(0,ce.jsxs)("select",{value:H||"",onChange:e=>O(e.target.value||null),style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,borderRadius:ct.md,border:"1px solid "+(v?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.15)"),background:v?Pe.hexToRgba(Pe.surfaceElevatedDark,.8):Pe.hexToRgba(Pe.surfaceElevated,.8),color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,cursor:"pointer"},children:[(0,ce.jsx)("option",{value:"",children:"No translation (speak in my original language)"}),Ve.filter(e=>e.code!==B).map(e=>(0,ce.jsx)("option",{value:e.code,children:e.name},e.code))]})]}),H&&H!==B&&(0,ce.jsxs)("p",{style:{marginTop:rt.md,padding:rt.md,background:v?Pe.hexToRgba(Pe.info,.15):Pe.hexToRgba(Pe.info,.1),borderRadius:ct.sm,color:v?"#60a5fa":"#2563eb",fontSize:nt.bodySmall.fontSize},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faLanguage,style:{marginRight:8}}),(0,ce.jsx)("strong",{children:"Voice Translation Active:"})," You speak ",Ve.find(e=>e.code===B)?.name||B,", but everyone will hear you in ",Ve.find(e=>e.code===H)?.name||H,".",(0,ce.jsx)("br",{}),(0,ce.jsx)("span",{style:{opacity:.8,fontSize:"12px"},children:"Your original audio is automatically replaced. Only the host can access your original voice."})]}),!H&&(0,ce.jsxs)("p",{style:{marginTop:rt.md,padding:rt.md,background:v?Pe.hexToRgba(Pe.success,.1):Pe.hexToRgba(Pe.success,.05),borderRadius:ct.sm,color:Pe.success,fontSize:nt.bodySmall.fontSize},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{marginRight:8}}),"Select an output language above to have your voice automatically translated for everyone."]}),H&&(0,ce.jsxs)("div",{style:{marginTop:rt.xl,padding:rt.md,background:v?Pe.hexToRgba(Pe.surfaceElevatedDark,.5):Pe.hexToRgba(Pe.surfaceElevated,.5),borderRadius:ct.lg,border:"1px solid "+(v?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)")},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:rt.sm,marginBottom:rt.md},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faWandMagicSparkles,style:{color:v?Pe.accentDark:Pe.accent}}),(0,ce.jsx)("h3",{style:{margin:0,color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyLarge.fontSize,fontWeight:600},children:"Voice Settings"})]}),(0,ce.jsx)("div",{style:{marginBottom:rt.md},children:(0,ce.jsx)("div",{style:{display:"flex",gap:rt.xs,marginBottom:rt.sm},children:["basic","advanced","clone"].map(e=>(0,ce.jsx)("button",{onClick:()=>{"clone"!==e?ae(e):x?.({message:" Voice Cloning - Coming Soon!",type:"info",duration:3e3})},style:{flex:1,padding:`${rt.sm}px ${rt.md}px`,background:re===e?v?Pe.primaryDark:Pe.primary:v?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)",color:re===e?"#FFFFFF":v?Pe.textMutedDark:Pe.textMuted,border:"none",borderRadius:ct.sm,cursor:"pointer",fontSize:nt.bodySmall.fontSize,fontWeight:re===e?600:400,transition:`all ${st.fast}ms ease`,textTransform:"capitalize"},children:"clone"===e?" Clone":"advanced"===e?" Advanced":" Basic"},e))})}),"basic"===re&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{display:"block",marginBottom:rt.sm,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:"Voice Gender Preference"}),(0,ce.jsx)("div",{style:{display:"flex",gap:rt.sm},children:["female","male","neutral"].map(e=>(0,ce.jsxs)("button",{onClick:()=>{oe(e),ie(null)},style:{flex:1,padding:rt.md,background:ne===e?v?Pe.hexToRgba(Pe.primaryDark,.3):Pe.hexToRgba(Pe.primary,.15):v?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:ne===e?`2px solid ${v?Pe.primaryDark:Pe.primary}`:"1px solid "+(v?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"),borderRadius:ct.md,cursor:"pointer",color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,display:"flex",flexDirection:"column",alignItems:"center",gap:rt.xs,transition:`all ${st.fast}ms ease`},children:[(0,ce.jsx)("span",{style:{fontSize:"24px"},children:"female"===e?"":"male"===e?"":""}),(0,ce.jsx)("span",{style:{textTransform:"capitalize"},children:e}),ne===e&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{color:Pe.success,fontSize:"12px"}})]},e))})]}),"advanced"===re&&(0,ce.jsxs)("div",{children:[(0,ce.jsxs)("label",{style:{display:"block",marginBottom:rt.sm,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:["Select Voice ",Te&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginLeft:6}})]}),ke&&!Te?(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:rt.sm},children:[ke.female.length>0&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("span",{style:{fontSize:"12px",color:v?Pe.textMutedDark:Pe.textMuted,display:"block",marginBottom:rt.xs},children:" Female Voices"}),(0,ce.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:rt.xs},children:ke.female.slice(0,6).map(e=>(0,ce.jsx)("button",{onClick:()=>ie(e.id),style:{padding:`${rt.xs}px ${rt.sm}px`,background:se===e.id?v?Pe.primaryDark:Pe.primary:v?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)",color:se===e.id?"#FFFFFF":v?Pe.textPrimaryDark:Pe.textPrimary,border:"none",borderRadius:ct.sm,cursor:"pointer",fontSize:nt.bodySmall.fontSize,transition:`all ${st.fast}ms ease`},children:e.name},e.id))})]}),ke.male.length>0&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("span",{style:{fontSize:"12px",color:v?Pe.textMutedDark:Pe.textMuted,display:"block",marginBottom:rt.xs},children:" Male Voices"}),(0,ce.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:rt.xs},children:ke.male.slice(0,6).map(e=>(0,ce.jsx)("button",{onClick:()=>ie(e.id),style:{padding:`${rt.xs}px ${rt.sm}px`,background:se===e.id?v?Pe.primaryDark:Pe.primary:v?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.05)",color:se===e.id?"#FFFFFF":v?Pe.textPrimaryDark:Pe.textPrimary,border:"none",borderRadius:ct.sm,cursor:"pointer",fontSize:nt.bodySmall.fontSize,transition:`all ${st.fast}ms ease`},children:e.name},e.id))})]})]}):(0,ce.jsx)("div",{style:{padding:rt.md,textAlign:"center",color:v?Pe.textMutedDark:Pe.textMuted},children:Te?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:8}}),"Loading voices..."]}):"No voices available"})]}),"clone"===re&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("div",{style:{padding:rt.sm,marginBottom:rt.md,background:v?Pe.hexToRgba(Pe.warning,.1):Pe.hexToRgba(Pe.warning,.05),borderRadius:ct.sm,color:Pe.warning,fontSize:nt.bodySmall.fontSize},children:" Voice cloning requires a pre-created cloned voice from your TTS provider."}),(0,ce.jsxs)("div",{style:{marginBottom:rt.md},children:[(0,ce.jsx)("label",{style:{display:"block",marginBottom:rt.sm,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:"Voice Clone Provider"}),(0,ce.jsxs)("select",{value:ye,onChange:e=>xe(e.target.value),style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,borderRadius:ct.md,border:"1px solid "+(v?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.15)"),background:v?Pe.hexToRgba(Pe.surfaceElevatedDark,.8):Pe.hexToRgba(Pe.surfaceElevated,.8),color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,cursor:"pointer"},children:[(0,ce.jsx)("option",{value:"elevenlabs",children:"ElevenLabs (Recommended)"}),(0,ce.jsx)("option",{value:"playht",children:"PlayHT"}),(0,ce.jsx)("option",{value:"coqui",children:"Coqui TTS"})]})]}),(0,ce.jsxs)("div",{style:{marginBottom:rt.md},children:[(0,ce.jsx)("label",{style:{display:"block",marginBottom:rt.sm,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:"Cloned Voice ID"}),(0,ce.jsx)("input",{type:"text",value:fe,onChange:e=>be(e.target.value),placeholder:"Enter your cloned voice ID",style:{width:"100%",padding:`${rt.sm}px ${rt.md}px`,borderRadius:ct.md,border:"1px solid "+(v?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.15)"),background:v?Pe.hexToRgba(Pe.surfaceElevatedDark,.8):Pe.hexToRgba(Pe.surfaceElevated,.8),color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize}})]}),"elevenlabs"===ye&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)("div",{style:{marginBottom:rt.md},children:[(0,ce.jsxs)("label",{style:{display:"flex",justifyContent:"space-between",marginBottom:rt.xs,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:[(0,ce.jsx)("span",{children:"Stability"}),(0,ce.jsxs)("span",{children:[Math.round(100*ve),"%"]})]}),(0,ce.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:ve,onChange:e=>Se(parseFloat(e.target.value)),style:{width:"100%",accentColor:v?Pe.primaryDark:Pe.primary}}),(0,ce.jsx)("p",{style:{margin:`${rt.xs}px 0 0`,fontSize:"11px",color:v?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"},children:"Higher = more consistent, Lower = more expressive"})]}),(0,ce.jsxs)("div",{style:{marginBottom:rt.md},children:[(0,ce.jsxs)("label",{style:{display:"flex",justifyContent:"space-between",marginBottom:rt.xs,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:[(0,ce.jsx)("span",{children:"Similarity Boost"}),(0,ce.jsxs)("span",{children:[Math.round(100*Re),"%"]})]}),(0,ce.jsx)("input",{type:"range",min:"0",max:"1",step:"0.05",value:Re,onChange:e=>we(parseFloat(e.target.value)),style:{width:"100%",accentColor:v?Pe.primaryDark:Pe.primary}}),(0,ce.jsx)("p",{style:{margin:`${rt.xs}px 0 0`,fontSize:"11px",color:v?"rgba(255,255,255,0.5)":"rgba(0,0,0,0.5)"},children:"Higher = closer to original voice"})]})]}),(0,ce.jsx)("button",{onClick:()=>{fe.trim()?(he({provider:ye,voiceId:fe.trim(),stability:"elevenlabs"===ye?ve:void 0,similarity:"elevenlabs"===ye?Re:void 0}),x?.({message:"Voice clone configured!",type:"success",duration:2e3})):x?.({message:"Please enter a cloned voice ID",type:"danger",duration:2e3})},style:{width:"100%",padding:rt.md,background:v?Pe.accentDark:Pe.accent,color:"#FFFFFF",border:"none",borderRadius:ct.md,cursor:"pointer",fontSize:nt.bodyMedium.fontSize,fontWeight:600,transition:`all ${st.fast}ms ease`},children:" Apply Voice Clone"})]}),(0,ce.jsxs)("div",{style:{marginTop:rt.md,padding:rt.sm,background:v?Pe.hexToRgba(Pe.info,.1):Pe.hexToRgba(Pe.info,.05),borderRadius:ct.sm,fontSize:nt.bodySmall.fontSize,color:v?"#60a5fa":"#2563eb"},children:[(0,ce.jsx)("strong",{children:"Current Voice:"})," ","clone"===re&&ge?" Cloned voice":"advanced"===re&&se?se:`${ne} voice (auto-selected)`]})]})]})]}),Ke=(0,ce.jsxs)("div",{children:[(0,ce.jsx)("p",{style:{margin:`0 0 ${rt.md}px`,color:v?Pe.textMutedDark:Pe.textMuted,fontSize:nt.bodySmall.fontSize},children:"Choose which language to hear translations in. You can set a default or configure per speaker."}),ee>0&&(0,ce.jsxs)("div",{style:{marginBottom:rt.md,padding:`${rt.sm}px ${rt.md}px`,background:v?Pe.hexToRgba(Pe.warning,.15):Pe.hexToRgba(Pe.warning,.1),borderRadius:ct.sm,color:Pe.warning,fontSize:nt.bodySmall.fontSize,display:"flex",alignItems:"center",gap:rt.sm},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faClock}),(0,ce.jsxs)("span",{children:["Wait ",ee,"s before changing listen language"]})]}),(0,ce.jsxs)("div",{style:{display:"flex",gap:rt.sm,marginBottom:rt.lg},children:[(0,ce.jsxs)("button",{onClick:()=>V(!1),style:{flex:1,padding:rt.md,background:L?v?Pe.surfaceElevatedDark:Pe.surfaceElevated:v?Pe.primaryDark:Pe.primary,color:L?v?Pe.textPrimaryDark:Pe.textPrimary:"#FFFFFF",border:"none",borderRadius:ct.md,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:rt.sm,fontSize:nt.bodyMedium.fontSize,transition:`all ${st.fast}ms ease`},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers}),"Same for All"]}),(0,ce.jsxs)("button",{onClick:()=>V(!0),style:{flex:1,padding:rt.md,background:L?v?Pe.primaryDark:Pe.primary:v?Pe.surfaceElevatedDark:Pe.surfaceElevated,color:L?"#FFFFFF":v?Pe.textPrimaryDark:Pe.textPrimary,border:"none",borderRadius:ct.md,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:rt.sm,fontSize:nt.bodyMedium.fontSize,transition:`all ${st.fast}ms ease`},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSliders}),"Per Speaker"]})]}),!L&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{display:"block",marginBottom:rt.sm,color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,fontWeight:500},children:"Default Language for All Speakers"}),(0,ce.jsx)(qr,{value:z||("2"===n?"original":"speakerOutput"),onChange:e=>U("original"===e||"speakerOutput"===e?null:e),languages:Be,isDarkMode:v,includeOriginal:"2"===n,includeSpeakerOutput:!0,placeholder:"Speaker's Output"})]}),L&&(0,ce.jsxs)("div",{children:[(0,ce.jsx)("label",{style:{display:"block",marginBottom:rt.md,color:v?Pe.textPrimaryDark:Pe.textPrimary,fontSize:nt.bodyMedium.fontSize,fontWeight:500},children:"Configure Per Speaker"}),0===$e.length?(0,ce.jsx)("p",{style:{textAlign:"center",padding:rt.lg,color:v?Pe.textMutedDark:Pe.textMuted},children:"No other participants in the meeting yet."}):$e.map(e=>(0,ce.jsx)(_r,{speaker:e,selectedLanguage:q.get(e.id||e.name)||null,onChange:Ee,availableLanguages:Be,isDarkMode:v,isHost:"2"===n},e.id||e.name))]})]}),Je=(0,ce.jsxs)("div",{style:qe,children:[(0,ce.jsx)(Nt,{variant:"outlined",onPress:t,isDarkMode:v,children:"Cancel"}),(0,ce.jsx)(Nt,{variant:"filled",onPress:We,disabled:T,isDarkMode:v,children:T?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:{marginRight:8}}),"Saving..."]}):(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,style:{marginRight:8}}),"Apply Changes"]})})]}),Xe=(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},children:[Ge,(0,ce.jsx)("div",{style:Ue,children:"speaking"===D?Ye:Ke}),Je]});if("sidebar"===k||"inline"===k){const e=(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[j?j({defaultHeader:_e,onClose:t}):_e,P?P({defaultBody:Xe}):Xe]});return M?(0,ce.jsx)(ce.Fragment,{children:M({defaultContent:e})}):e}if(!e)return null;const Ze={position:"fixed",inset:0,backgroundColor:Pe.alertBackdrop(v),backdropFilter:S?"blur(4px)":void 0,WebkitBackdropFilter:S?"blur(4px)":void 0,opacity:I?1:0,transition:`opacity ${st.normal}ms ease`,zIndex:1e3},Qe={position:"fixed",...(()=>{const e={topRight:{top:rt.lg,right:rt.lg},topLeft:{top:rt.lg,left:rt.lg},bottomRight:{bottom:rt.lg,right:rt.lg},bottomLeft:{bottom:rt.lg,left:rt.lg},center:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}};return e[w]||e.center})(),width:"min(500px, calc(100vw - 32px))",maxHeight:"calc(100vh - 100px)",opacity:I?1:0,transform:I?"center"===w?"translate(-50%, -50%) scale(1)":"scale(1) translateY(0)":"center"===w?"translate(-50%, -50%) scale(0.95)":"scale(0.95) translateY(-10px)",transition:`all ${st.normal}ms ${st.snappy}`,zIndex:1001,display:"flex",flexDirection:"column"},et=(0,ce.jsxs)(It,{isDarkMode:v,borderRadius:ct.xl,blur:S?20:0,padding:0,elevation:4,style:{...Qe,backgroundColor:v?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",boxShadow:R?`${Pe.elevation(4,v)}, ${Pe.glowPrimary}`:Pe.elevation(4,v)},children:[j?j({defaultHeader:_e,onClose:t}):_e,P?P({defaultBody:Xe}):Xe]});return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{style:Ze,onClick:t}),M?M({defaultContent:et}):et]})},Yr=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Kr=le().memo(({customWidth:e,customHeight:t,rows:r,columns:a,componentsToRender:n,backgroundColor:o="transparent",gridWrapperProps:s,rowProps:i,cellProps:c,emptyCellFallback:d,renderCell:l,renderRow:u,renderGrid:p,isDarkMode:m=!0,enableGlassmorphism:g=!0,cellBorderRadius:h=8})=>{if(r<=0||a<=0)return(0,ce.jsx)(ce.Fragment,{});const{className:f,style:b,...y}=s??{},x=Yr("modern-flexible-grid",f),v={padding:0,display:"flex",flexDirection:"column",...b},{className:S,style:R,...w}=i??{},k=Yr("modern-flexible-grid__row",S),C={display:"flex",flexDirection:"row",...R},{className:j,style:P,...M}=c??{},I=Yr("modern-flexible-grid__cell",j),A=(0,de.useMemo)(()=>g?m?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.02)":o,[m,g,o]),T=(0,de.useMemo)(()=>{if(g)return m?"rgba(102, 126, 234, 0.1)":"rgba(102, 126, 234, 0.05)"},[m,g]),F=r=>({flex:1,width:e,height:t,backgroundColor:r?o:A,margin:"1px",padding:0,borderRadius:`${h}px`,display:"flex",alignItems:"center",justifyContent:"center",...!r&&g&&T&&{border:`1px solid ${T}`},...P}),D=(e,t,r)=>"function"==typeof d?d({row:e,column:t,index:r}):d||(0,ce.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{width:40,height:40,borderRadius:"50%",background:m?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2))":"linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1))",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:m?"0 0 8px rgba(102, 126, 234, 0.15)":"0 0 12px rgba(102, 126, 234, 0.2)"},children:(0,ce.jsxs)("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",stroke:m?"rgba(255, 255, 255, 0.25)":"rgba(0, 0, 0, 0.15)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ce.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,ce.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})})}),N=(0,de.useMemo)(()=>{const e=[];for(let t=0;t<r;t++){const r=[];for(let e=0;e<a;e++){const o=t*a+e,s=n[o],i=null!=s,c=i?s:D(t,e,o),d=(le().isValidElement(s)&&null!=s.key?s.key:void 0)??`${t}-${e}`,u=(0,ce.jsx)("div",{className:I,style:F(i),...M,children:i?(0,ce.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:`${h}px`,display:"flex",alignItems:"center",justifyContent:"center"},children:c}):c},d),p=l?l({defaultCell:u,component:s,row:t,column:e,index:o}):u;le().isValidElement(p)?r.push(le().cloneElement(p,{key:p.key??d})):r.push((0,ce.jsx)(le().Fragment,{children:p},`${t}-${e}`))}const o=(0,ce.jsx)("div",{className:k,style:C,...w,children:r},t),s=u?u({defaultRow:o,rowIndex:t,cells:r}):o;le().isValidElement(s)?e.push(le().cloneElement(s,{key:s.key??t})):e.push((0,ce.jsx)(le().Fragment,{children:s},t))}return e},[r,a,n,e,t,o,A,T,h,I,M,l,k,C,w,u,d,m,g]),L=(0,ce.jsx)("div",{className:x,style:v,...y,children:N}),V=p?p({defaultGrid:L,rows:N}):L;return(0,ce.jsx)(ce.Fragment,{children:V})},(e,t)=>{if(e.customWidth!==t.customWidth||e.customHeight!==t.customHeight||e.rows!==t.rows||e.columns!==t.columns||e.backgroundColor!==t.backgroundColor||e.gridWrapperProps!==t.gridWrapperProps||e.rowProps!==t.rowProps||e.cellProps!==t.cellProps||e.emptyCellFallback!==t.emptyCellFallback||e.renderCell!==t.renderCell||e.renderRow!==t.renderRow||e.renderGrid!==t.renderGrid||e.isDarkMode!==t.isDarkMode||e.enableGlassmorphism!==t.enableGlassmorphism||e.cellBorderRadius!==t.cellBorderRadius)return!1;const r=e.componentsToRender,a=t.componentsToRender;if(r.length!==a.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==a[e])return!1;return!0}),Jr=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Xr=le().memo(({customWidth:e,customHeight:t,rows:r,columns:a,componentsToRender:n,showAspect:o=!1,backgroundColor:s="transparent",Screenboard:i,annotateScreenStream:c=!1,localStreamScreen:d,containerProps:l,rowProps:u,cellProps:p,screenboardContainerProps:m,renderCell:g,renderRow:h,renderGrid:f,renderScreenboard:b,isDarkMode:y=!0,enableGlassmorphism:x=!0,cellBorderRadius:v=0,enableGlow:S=!1})=>{const[R,w]=(0,de.useState)(0),[k,C]=(0,de.useState)(0),[j,P]=(0,de.useState)(0),[M,I]=(0,de.useState)(0);(0,de.useEffect)(()=>{if(c&&d){const t=d.getVideoTracks()[0];if(t){const r=t.getSettings().height||0,a=t.getSettings().width||0;w(a),C(r);const n=Math.floor((e-a)/2);P(n),I(n<0?n:0)}}else w(e),C(t),P(0),I(0)},[e,t,d,c]);const{className:A,style:T,...F}=l??{},D=Jr("modern-flexible-video",A),N={padding:0,flex:1,margin:0,position:"relative",display:o?"flex":"none",flexDirection:"column",maxWidth:e,overflowX:"hidden",overflowY:"auto",left:j>0?j:0,borderRadius:v>0?`${v}px`:"0px",...T??{}},{className:L,style:V,...B}=u??{},$=Jr("modern-flexible-video__row",L),E={display:"flex",flexDirection:"row",...V??{}},{className:W,style:H,...O}=p??{},z=Jr("modern-flexible-video__cell",W),U=e=>e?s:x?y?"rgba(30, 30, 40, 0.6)":"rgba(255, 255, 255, 0.6)":s,q=x?y?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)":void 0,_=e=>({flex:1,width:R,height:k,backgroundColor:U(e),margin:"1px",padding:0,borderRadius:v>0?`${v}px`:"0px",left:j,overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",...!e&&x&&q&&{border:`1px solid ${q}`,backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},...S&&{boxShadow:"0 0 20px "+(y?"rgba(79, 172, 254, 0.2)":"rgba(102, 126, 234, 0.2)")},...H??{}}),G=()=>(0,ce.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{width:48,height:48,borderRadius:"50%",background:y?"linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2))":"linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1))",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:y?"0 0 8px rgba(102, 126, 234, 0.15)":"0 0 12px rgba(102, 126, 234, 0.2)"},children:(0,ce.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:y?"rgba(255, 255, 255, 0.25)":"rgba(0, 0, 0, 0.2)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ce.jsx)("path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8"}),(0,ce.jsx)("path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2"}),(0,ce.jsx)("line",{x1:"2",y1:"2",x2:"22",y2:"22"})]})})}),Y=[];for(let e=0;e<r;e++){const t=[];for(let r=0;r<a;r++){const o=e*a+r,s=n[o],i=null!=s,c=(le().isValidElement(s)&&null!=s.key?s.key:void 0)??`${e}-${r}`,d=(0,ce.jsx)("div",{className:z,style:_(i),...O,children:i?(0,ce.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:v>0?`${v}px`:"0px",overflow:"hidden"},children:s}):G()},c),l=g?g({defaultCell:d,component:s,row:e,column:r,index:o}):d;le().isValidElement(l)?t.push(le().cloneElement(l,{key:l.key??c})):t.push((0,ce.jsx)(le().Fragment,{children:l},`${e}-${r}`))}const r=(0,ce.jsx)("div",{className:$,style:E,...B,children:t},e),o=h?h({defaultRow:r,rowIndex:e,cells:t}):r;le().isValidElement(o)?Y.push(le().cloneElement(o,{key:o.key??e})):Y.push((0,ce.jsx)(le().Fragment,{children:o},e))}const{className:K,style:J,...X}=m??{},Z=Jr("modern-flexible-video__screenboard",K),Q={position:"absolute",top:0,left:M,width:R,height:k,backgroundColor:"rgba(0, 0, 0, 0.005)",zIndex:2,pointerEvents:c?"auto":"none",borderRadius:v>0?`${v}px`:"0px",overflow:"hidden",...J??{}},ee=i?(0,ce.jsx)("div",{className:Z,style:Q,...X,children:i}):null,te=b?b({defaultScreenboard:ee}):ee,re=(0,ce.jsxs)("div",{className:D,style:N,...F,children:[Y,te]}),ae=f?f({defaultGrid:re,rows:Y}):re;return(0,ce.jsx)(ce.Fragment,{children:ae})}),Zr=({meetingProgressTime:e,initialBackgroundColor:t,position:r="topLeft",textStyle:a,showTimer:n=!0,badgeProps:o,textProps:s,renderBadge:i,renderContainer:c,isDarkMode:d=!0,enableGlassmorphism:l=!0,enableGlow:u=!1,isRecording:p=!1,variant:m="badge",showIcon:g=!0})=>{const[h,f]=(0,de.useState)(!1),[b,y]=(0,de.useState)(!1);(0,de.useEffect)(()=>{const e=setTimeout(()=>f(!0),100);return()=>clearTimeout(e)},[]),(0,de.useEffect)(()=>{if(p){const e=setInterval(()=>{y(e=>!e)},1e3);return()=>clearInterval(e)}},[p]);const x=(0,de.useMemo)(()=>{const t=e.split(":").map(Number);return 3===t.length?3600*t[0]+60*t[1]+t[2]:2===t.length?60*t[0]+t[1]:0},[e]),v=(0,de.useMemo)(()=>p||x>3300?Pe.danger:x>2700?Pe.warning:t||Pe.success,[x,p,t]),S={...(()=>{const e={position:"absolute",zIndex:10};switch(r){case"topLeft":e.top=rt.md,e.left=rt.md;break;case"topRight":e.top=rt.md,e.right=rt.md;break;case"bottomLeft":e.bottom=rt.md,e.left=rt.md;break;case"bottomRight":e.bottom=rt.md,e.right=rt.md}return e})(),...(()=>{const e={display:"flex",alignItems:"center",gap:`${rt.xs}px`,transition:`all ${st.normal}ms ${st.smooth}`};switch(m){case"pill":return{...e,padding:`${rt.xs}px ${rt.md}px`,borderRadius:`${ct.full}px`};case"minimal":return{...e,padding:`${rt.xs}px ${rt.sm}px`,borderRadius:`${ct.sm}px`,background:"transparent !important",backdropFilter:"none"};default:return{...e,padding:`${rt.xs}px ${rt.sm}px`,borderRadius:`${ct.sm}px`}}})(),background:l?Pe.glassBackground(d):d?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.95)",backdropFilter:l?"blur(12px)":"none",WebkitBackdropFilter:l?"blur(12px)":"none",border:l?`1px solid ${Pe.glassBorder(d)}`:"1px solid "+(d?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"),boxShadow:u?`0 0 12px ${Pe.hexToRgba(v,.4)}, ${Pe.elevation(2,d)}`:d?Pe.elevation(2,d):"0 2px 8px rgba(0, 0, 0, 0.12)",transform:h?"scale(1) translateY(0)":"scale(0.8) translateY(-10px)",opacity:h?1:0},R={display:"flex",alignItems:"center",justifyContent:"center",width:18,height:18,borderRadius:"50%",backgroundColor:Pe.hexToRgba(v,.25),color:v,fontSize:"10px",animation:p&&b?"modernTimerPulse 1s ease-in-out":"none",boxShadow:`0 0 6px ${Pe.hexToRgba(v,.3)}`},w={...nt.toStyle(nt.labelMedium),fontFamily:nt.monoFontFamily,fontWeight:600,color:d?"#FFFFFF":"#1F2937",letterSpacing:"0.5px",fontSize:"16px",...a},k={width:10,height:10,borderRadius:"50%",backgroundColor:Pe.danger,boxShadow:`0 0 8px ${Pe.danger}`,opacity:b?1:.5,transition:"opacity 0.3s ease"};if(!n)return(0,ce.jsx)(ce.Fragment,{});const C=(0,ce.jsxs)("div",{style:S,...o,title:p?"Recording in progress":"Meeting duration",children:[g&&(0,ce.jsxs)("div",{style:{...R,width:24,height:24},children:[" ",p?(0,ce.jsx)("div",{style:k}):(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faClock,style:{fontSize:"12px"}})]}),(0,ce.jsx)("span",{style:w,...s,children:e}),p&&(0,ce.jsx)("span",{style:{...nt.toStyle(nt.labelSmall),color:Pe.danger,fontWeight:600,marginLeft:rt.xs,fontSize:"12px"},children:"REC"})]}),j=i?i({defaultBadge:C,showTimer:n}):C,P=(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("style",{children:"\n          @keyframes modernTimerPulse {\n            0%, 100% { transform: scale(1); }\n            50% { transform: scale(1.2); }\n          }\n        "}),j]});return c?(0,ce.jsx)(ce.Fragment,{children:c({defaultContainer:P})}):(0,ce.jsx)(ce.Fragment,{children:P})},Qr={display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"black",width:"100%",height:"100%"},ea=({forceFullDisplay:e,videoStream:t,backgroundColor:r="transparent",doMirror:a=!1,containerProps:n,videoProps:o})=>{const s=(0,de.useRef)(null);(0,de.useEffect)(()=>{s.current&&t&&(s.current.srcObject=t)},[t]);const{style:i,...c}=n??{},d={...Qr,...i,backgroundColor:r},{style:l,...u}=o??{};return(0,ce.jsx)("div",{...c,style:d,children:(0,ce.jsx)("video",{ref:s,autoPlay:!0,muted:!0,playsInline:!0,style:{...(()=>{const t={width:e?"100%":"auto",height:"100%",objectFit:e?"cover":"contain",backgroundColor:r,maxHeight:"100%",maxWidth:"100%"};return a&&(t.transform="rotateY(180deg)"),t})(),...l},...u})})},ta=({customStyle:e,name:t,barColor:r=Pe.primary,textColor:a="#FFFFFF",remoteProducerId:n,eventType:o,forceFullDisplay:s,videoStream:i,showControls:c=!0,showInfo:d=!0,videoInfoComponent:l,videoControlsComponent:u,controlsPosition:p="topLeft",infoPosition:m="bottomLeft",participant:g,backgroundColor:h,audioDecibels:f,doMirror:b=!1,parameters:y,containerProps:x,infoOverlayProps:v,controlsOverlayProps:S,waveformContainerProps:R,waveformBarStyle:w,waveformBarClassName:C,videoDisplayProps:j,extraWidgets:P,children:M,isDarkMode:I=!0,enableGlassmorphism:A=!0,enableGlow:T=!0,borderRadius:F=ct.md,showStatusIndicator:D=!0,onToggleSelfViewFit:N})=>{const[L,V]=(0,de.useState)(!1),[B,$]=(0,de.useState)(!1),[E,W]=(0,de.useState)(!1),[H,O]=(0,de.useState)(Array(5).fill(0)),[z,U]=(0,de.useState)(!0),q=(0,de.useRef)(null);(0,de.useEffect)(()=>{const e=setTimeout(()=>$(!0),50);return()=>clearTimeout(e)},[]),(0,de.useEffect)(()=>{const e=setInterval(()=>{if(g)if(y?.getUpdatedAllParams){const e=y.getUpdatedAllParams(),t=e?.audioDecibels,r=e?.participants,a=t?.find(e=>e.name===g.name),n=r?.find(e=>e.name===g.name);a&&a.averageLoudness>127.5&&n&&!n.muted?E||W(!0):W(!1)}else if(f){const e=f.find(e=>e.name===g.name);W((e?.averageLoudness??0)>127.5&&!g?.muted)}},1e3);return()=>clearInterval(e)},[y,g,E,f]),(0,de.useEffect)(()=>{if(E){const e=()=>{O(e=>e.map(()=>12*Math.random()+4)),q.current=requestAnimationFrame(e)};q.current=requestAnimationFrame(e)}else q.current&&cancelAnimationFrame(q.current),O(Array(5).fill(0));return()=>{q.current&&cancelAnimationFrame(q.current)}},[E]);const _=(0,de.useCallback)(async()=>{if(!g?.muted){const e=y.getUpdatedAllParams();await k({participantId:g.id||"",participantName:g.name,type:"audio",socket:e.socket,roomName:e.roomName,coHostResponsibility:e.coHostResponsibility,showAlert:e.showAlert,coHost:e.coHost,participants:e.participants,member:e.member,islevel:e.islevel})}},[g,y]),G=(0,de.useCallback)(async()=>{if(g?.videoOn){const e=y.getUpdatedAllParams();await k({participantId:g.id||"",participantName:g.name,type:"video",socket:e.socket,roomName:e.roomName,coHostResponsibility:e.coHostResponsibility,showAlert:e.showAlert,coHost:e.coHost,participants:e.participants,member:e.member,islevel:e.islevel})}},[g,y]),Y=(0,de.useCallback)(()=>{if(g?.name!==y?.member&&!g?.id?.includes("youyou")||!s||!z)return null;const e=!!N,t={position:"absolute",bottom:rt.sm,left:rt.sm,right:rt.sm,display:"flex",justifyContent:"center",zIndex:3},r={maxWidth:320,display:"flex",alignItems:"center",gap:6,padding:`${rt.xs}px ${rt.sm}px`,background:"rgba(0, 0, 0, 0.65)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(245, 158, 11, 0.5)",borderRadius:10};return(0,ce.jsx)("div",{style:t,children:(0,ce.jsxs)("div",{style:r,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCrop,style:{color:Pe.warning,fontSize:14}}),(0,ce.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:11,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e?"Cropped - others see more.":"Cropped view - others see more of your video."}),e&&(0,ce.jsx)("button",{onClick:()=>{N?.(),U(!1)},style:{marginLeft:4,padding:"4px 8px",background:Pe.primary,border:"none",borderRadius:6,color:"#FFFFFF",fontSize:10,fontWeight:600,cursor:"pointer"},children:"Full View"}),(0,ce.jsx)("button",{onClick:()=>U(!1),style:{marginLeft:2,background:"transparent",border:"none",padding:0,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,style:{color:"rgba(255, 255, 255, 0.6)",fontSize:12}})})]})})},[g?.name,y?.member,s,z,N]),K=(0,de.useCallback)(()=>{if(g?.name!==y?.member&&!g?.id?.includes("youyou")||"webinar"!==o||s)return null;const e={position:"absolute",top:rt.sm,left:rt.sm,right:rt.sm,display:"flex",justifyContent:"center",zIndex:3},t={maxWidth:320,display:"flex",alignItems:"center",gap:6,padding:`${rt.xs}px ${rt.sm}px`,background:"rgba(0, 0, 0, 0.65)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(59, 130, 246, 0.5)",borderRadius:10};return(0,ce.jsx)("div",{style:e,children:(0,ce.jsxs)("div",{style:t,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVideo,style:{color:Pe.primary,fontSize:14}}),(0,ce.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:11,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Full capture area - this is exactly what others see"})]})})},[g?.name,g?.id,y?.member,o,s]),J=e=>{const t={position:"absolute"};return e.includes("top")&&(t.top=rt.sm),e.includes("bottom")&&(t.bottom=rt.sm),e.includes("Left")&&(t.left=rt.sm),e.includes("Right")&&(t.right=rt.sm),t},X={position:"relative",width:"100%",height:"100%",borderRadius:`${F}px`,overflow:"hidden",backgroundColor:h||(I?"#0F172A":"#F1F5F9"),boxShadow:E?`0 0 0 2px ${r}, 0 0 20px ${r}60, ${Pe.elevation(3,I)}`:L&&T?`${Pe.glowPrimary}, ${Pe.elevation(3,I)}`:Pe.elevation(2,I),transform:B?L?"scale(1.01)":"scale(1)":"scale(0.98)",opacity:B?1:0,transition:`all ${st.normal}ms ${st.smooth}`,...e},Z={...J(m),display:"flex",alignItems:"center",gap:`${rt.xs}px`,padding:`${rt.xs}px ${rt.sm}px`,background:A?Pe.glassBackground(I):"rgba(0, 0, 0, 0.6)",backdropFilter:A?"blur(10px)":"none",WebkitBackdropFilter:A?"blur(10px)":"none",border:A?`1px solid ${Pe.glassBorder(I)}`:"none",borderRadius:`${ct.sm}px`,zIndex:2},Q={...nt.toStyle(nt.labelSmall),color:a,fontWeight:600,letterSpacing:"0.3px"},ee={display:"flex",alignItems:"center",gap:"2px",height:"16px",opacity:E?1:0,transition:`opacity ${st.fast}ms`},te={...J(p),display:"flex",alignItems:"center",gap:`${rt.xs}px`,padding:`${rt.xs}px`,background:A?Pe.glassBackground(I):"rgba(0, 0, 0, 0.6)",backdropFilter:A?"blur(8px)":"none",WebkitBackdropFilter:A?"blur(8px)":"none",border:A?`1px solid ${Pe.glassBorder(I)}`:"none",borderRadius:`${ct.sm}px`,opacity:L?1:.7,transition:`opacity ${st.fast}ms`,zIndex:2},re=e=>({width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"none",cursor:"pointer",background:e?Pe.brandGradient(I):I?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",color:e||I?"#FFFFFF":"#1F2937",transition:`all ${st.fast}ms ${st.smooth}`}),ae={position:"absolute",top:rt.sm,right:rt.sm,width:10,height:10,borderRadius:"50%",backgroundColor:g?.videoOn?Pe.success:Pe.danger,boxShadow:`0 0 8px ${g?.videoOn?Pe.success:Pe.danger}`,zIndex:2},ne=(0,de.useCallback)(()=>V(!0),[]),oe=(0,de.useCallback)(()=>V(!1),[]);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("style",{children:"\n          @keyframes speakingPulse {\n            0%, 100% { transform: scale(1); opacity: 1; }\n            50% { transform: scale(1.3); opacity: 0.7; }\n          }\n        "}),(0,ce.jsxs)("div",{style:X,onMouseEnter:ne,onMouseLeave:oe,...x,children:[(0,ce.jsx)(ea,{remoteProducerId:n,eventType:o,forceFullDisplay:s,videoStream:i,backgroundColor:h||(I?"#0F172A":"#F1F5F9"),doMirror:b,...j}),(0,ce.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.5) 100%)",pointerEvents:"none",zIndex:1}}),D&&(0,ce.jsx)("div",{style:ae}),d&&(0,ce.jsx)("div",{style:Z,...v,children:l||(0,ce.jsxs)(ce.Fragment,{children:[E&&(0,ce.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:r,animation:"speakingPulse 1s ease-in-out infinite",marginRight:6,flexShrink:0}}),(0,ce.jsx)("span",{style:Q,children:t}),(0,ce.jsx)("div",{style:ee,...R,children:H.map((e,t)=>(0,ce.jsx)("div",{className:C,style:{width:3,height:`${Math.max(4,e)}px`,backgroundColor:r,borderRadius:2,transition:"height 50ms linear",...w}},t))})]})}),c&&(0,ce.jsx)("div",{style:te,...S,children:u||(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Ie,{message:g?.muted?"Participant is muted":"Mute participant",isDarkMode:I,position:"bottom",children:(0,ce.jsx)("button",{style:re(!g?.muted),onClick:_,disabled:g?.muted,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:g?.muted?pe.faMicrophoneSlash:pe.faMicrophone,size:"sm"})})}),(0,ce.jsx)(Ie,{message:g?.videoOn?"Turn off camera":"Camera is off",isDarkMode:I,position:"bottom",children:(0,ce.jsx)("button",{style:re(g?.videoOn??!1),onClick:G,disabled:!g?.videoOn,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:g?.videoOn?pe.faVideo:pe.faVideoSlash,size:"sm"})})})]})}),Y(),K(),P,M]})]})},ra=({initials:e="",imageSource:t,fontSize:r=14,backgroundColor:a,isDarkMode:n=!0,className:o,style:s,customStyle:i,onClick:c,roundedImage:d=!0,showGradientBackground:l=!0,enableGlow:u=!1,showBorder:p=!0,size:m})=>{const[g,h]=(0,de.useState)(!1),[f,b]=(0,de.useState)(!1),[y,x]=(0,de.useState)(!1),v=!!t&&!f,S={...s,...i};(0,de.useEffect)(()=>{const e=setTimeout(()=>h(!0),10);return()=>clearTimeout(e)},[]);const R=()=>a||`linear-gradient(135deg, ${Pe.primary} 0%, ${Pe.secondary} 50%, ${Pe.accent} 100%)`,w=()=>a||(n?"rgba(79, 70, 229, 0.3)":"#F8FAFC"),k=()=>p||n?n?p?"1px solid rgba(99, 102, 241, 0.4)":"1px solid rgba(255, 255, 255, 0.1)":p?"1px solid rgba(0, 0, 0, 0.15)":"none":"none",C=m?Math.min(m,140):140,j={display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",overflow:"hidden",position:"relative",...!d&&{background:v?n?"#1E293B":"#E2E8F0":l?R():w(),border:v?"none":k(),borderRadius:"12px"},fontFamily:"Nunito, sans-serif",color:"#FFFFFF",opacity:g?1:0,transform:g?"scale(1)":"scale(0.8)",transition:`all ${st.normal}ms ${st.smooth}`,cursor:c?"pointer":"default",...S},P={display:"flex",justifyContent:"center",alignItems:"center",width:`${C}px`,height:`${C}px`,maxWidth:"80%",maxHeight:"80%",borderRadius:"50%",overflow:"hidden",flexShrink:0,background:v?n?"#1E293B":"#E2E8F0":l?R():w(),border:v?"none":k(),boxShadow:u&&!v?`0 0 16px ${Pe.primary}40, 0 4px 8px rgba(0, 0, 0, 0.3)`:n?"0 2px 8px rgba(0, 0, 0, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},M={width:"100%",height:"100%",objectFit:"cover",borderRadius:d?"50%":"12px",opacity:y?1:0,transition:`opacity ${st.fast}ms ${st.smooth}`},I={...nt.getLabelMedium(n),fontSize:`${r}px`,fontWeight:700,color:"#FFFFFF",letterSpacing:"1px",textShadow:"0 1px 4px rgba(0, 0, 0, 0.3)"},A={position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 50%)",pointerEvents:"none",borderRadius:d?"50%":"12px"},T=e.trim().length>10?e.trim().substring(0,10):e.trim(),F=v?(0,ce.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:(0,ce.jsx)("img",{src:t,alt:e||"Profile",style:M,onError:()=>b(!0),onLoad:()=>x(!0)})}):(0,ce.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",width:"100%",height:"100%"},children:(0,ce.jsx)("span",{style:I,children:T||"?"})}),D=(0,ce.jsx)("div",{style:A});return(0,ce.jsx)("div",{className:o,style:j,onClick:()=>c?.(),role:c?"button":void 0,tabIndex:c?0:void 0,children:d?(0,ce.jsxs)("div",{style:P,children:[F,D]}):(0,ce.jsxs)(ce.Fragment,{children:[F,D]})})},aa=({controlUserMedia:e,customStyle:t,name:r,barColor:a=Pe.primary,textColor:n="#FFFFFF",imageSource:o,showControls:s=!0,showInfo:i=!0,videoInfoComponent:c,videoControlsComponent:d,controlsPosition:l="topLeft",infoPosition:u="bottomLeft",participant:p,backgroundColor:m,audioDecibels:g,parameters:h,cardProps:f,infoOverlayProps:b,waveformContainerProps:y,waveformBarStyle:x,waveformBarCount:v=5,controlsOverlayProps:S,isDarkMode:R=!0,enableGlassmorphism:w=!0,enableGlow:k=!0,borderRadius:C=ct.md,size:j})=>{const[P,M]=(0,de.useState)(!1),[I,A]=(0,de.useState)(!1),[T,F]=(0,de.useState)(!1),[D,N]=(0,de.useState)(Array(v).fill(0)),L=(0,de.useRef)(null);(0,de.useEffect)(()=>{const e=setTimeout(()=>A(!0),50);return()=>clearTimeout(e)},[]),(0,de.useEffect)(()=>{const e=setInterval(()=>{if(h?.getUpdatedAllParams){const e=h.getUpdatedAllParams(),t=e?.audioDecibels,a=e?.participants,n=t?.find(e=>e.name===r),o=a?.find(e=>e.name===r);n&&n.averageLoudness>127.5&&o&&!o.muted?T||F(!0):F(!1)}else if(g){const e=g.averageLoudness??0;F(e>127.5&&!p?.muted)}},1e3);return()=>clearInterval(e)},[h,r,T,g,p?.muted]),(0,de.useEffect)(()=>{if(T){const e=setInterval(()=>{N(e=>e.map(()=>22*Math.random()+2))},150);return()=>clearInterval(e)}return L.current&&cancelAnimationFrame(L.current),N(Array(v).fill(3)),()=>{L.current&&cancelAnimationFrame(L.current)}},[T,v]);const V=(0,de.useCallback)(async()=>{if(!p?.muted&&e){const t=h.getUpdatedAllParams();await e({participantId:p.id||"",participantName:p.name,type:"audio",socket:t.socket,roomName:t.roomName,coHostResponsibility:t.coHostResponsibility,showAlert:t.showAlert,coHost:t.coHost,participants:t.participants,member:t.member,islevel:t.islevel})}},[p,h,e]),B=(0,de.useCallback)(async()=>{if(p?.videoOn&&e){const t=h.getUpdatedAllParams();await e({participantId:p.id||"",participantName:p.name,type:"video",socket:t.socket,roomName:t.roomName,coHostResponsibility:t.coHostResponsibility,showAlert:t.showAlert,coHost:t.coHost,participants:t.participants,member:t.member,islevel:t.islevel})}},[p,h,e]),$=(0,de.useMemo)(()=>{const e=r.split("").reduce((e,t)=>t.charCodeAt(0)+((e<<5)-e),0),t=[Pe.brandGradient(R),Pe.accentGradient(R),Pe.oceanGradient(R),Pe.auroraGradient(R)];return t[Math.abs(e)%t.length]},[r,R]),E=(0,de.useMemo)(()=>j?Math.min(150,.6*j):150,[j]),W=e=>{const t={position:"absolute"};return e.includes("top")&&(t.top=rt.xs),e.includes("bottom")&&(t.bottom=rt.xs),e.includes("Left")&&(t.left=rt.xs),e.includes("Right")&&(t.right=rt.xs),t},H={position:"relative",width:"100%",height:"100%",borderRadius:`${C}px`,overflow:"hidden",background:m||(R?"linear-gradient(135deg, #1A1A2E 0%, #16213E 50%, #0F3460 100%)":"linear-gradient(135deg, #F8F9FA 0%, #E9ECEF 50%, #DEE2E6 100%)"),boxShadow:P&&k?`0 0 24px ${Pe.primary}40, ${Pe.elevation(3,R)}`:Pe.elevation(2,R),transform:I?P?"scale(1.02)":"scale(1)":"scale(0.95)",opacity:I?1:0,transition:`all ${st.normal}ms ${st.smooth}`,...t},O={width:`${E}px`,height:`${E}px`,aspectRatio:"1 / 1",borderRadius:"50%",background:$,padding:"3px",boxShadow:T?`0 0 30px ${a}80, 0 0 60px ${a}40`:`0 0 10px ${Pe.primary}20`,transform:T?"scale(1.02)":"scale(1)",transition:`all ${st.normal}ms ${st.smooth}`,animation:T?"avatarPulse 2s ease-in-out infinite":"none"},z={position:"absolute",width:"190px",height:"190px",display:T?"flex":"none",alignItems:"center",justifyContent:"center"},U=(0,de.useMemo)(()=>{const e=[];for(let t=0;t<9;t++){const r=D[t%D.length]||8;e.push((0,ce.jsx)("div",{style:{position:"absolute",width:"4px",height:`${Math.max(8,Math.min(28,r))}px`,backgroundColor:a,borderRadius:"2px",boxShadow:`0 0 4px ${a}80`,transform:`rotate(${40*t}deg) translateY(-90px)`,transformOrigin:"center",transition:"height 100ms linear"}},t))}return e},[D,a]),q={...W(u),display:"flex",alignItems:"center",gap:`${rt.xs}px`,padding:"2px 6px",background:w?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.7)",backdropFilter:w?"blur(8px)":"none",WebkitBackdropFilter:w?"blur(8px)":"none",borderRadius:`${ct.xs}px`,zIndex:2,maxWidth:j?j-2*rt.sm:"calc(100% - 16px)"},_={...nt.toStyle(nt.labelSmall),fontSize:12,color:n,fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},G={display:"flex",alignItems:"center",gap:"1px",height:14,opacity:T?1:0,transition:`opacity ${st.fast}ms`},Y={...W(l),display:"flex",alignItems:"center",gap:"4px",opacity:P?1:0,transition:`opacity ${st.fast}ms`,zIndex:2},K=e=>({width:28,height:28,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",border:"none",cursor:"pointer",background:w?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.7)",backdropFilter:w?"blur(8px)":"none",WebkitBackdropFilter:w?"blur(8px)":"none",color:e?Pe.success:Pe.danger,transition:`all ${st.fast}ms ${st.smooth}`,fontSize:12}),J=(0,de.useCallback)(()=>M(!0),[]),X=(0,de.useCallback)(()=>M(!1),[]);return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("style",{children:`\n          @keyframes avatarPulse {\n            0%, 100% { transform: scale(1); box-shadow: 0 0 30px ${Pe.primary}80, 0 0 60px ${Pe.primary}40; }\n            50% { transform: scale(1.05); box-shadow: 0 0 40px ${Pe.primary}99, 0 0 80px ${Pe.primary}60; }\n          }\n          @keyframes speakingPulse {\n            0%, 100% { transform: scale(1); opacity: 1; }\n            50% { transform: scale(1.3); opacity: 0.7; }\n          }\n        `}),(0,ce.jsxs)("div",{style:H,onMouseEnter:J,onMouseLeave:X,...f,children:[(0,ce.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},children:[T&&(0,ce.jsx)("div",{style:z,children:U}),(0,ce.jsx)("div",{style:O,children:(0,ce.jsx)(ra,{initials:r,imageSource:o,fontSize:28,isDarkMode:R,roundedImage:!0,showGradientBackground:!0})})]}),(0,ce.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%)",pointerEvents:"none"}}),i&&(0,ce.jsx)("div",{style:q,...b,children:c||(0,ce.jsxs)(ce.Fragment,{children:[T&&(0,ce.jsx)("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:a,animation:"speakingPulse 1s ease-in-out infinite",marginRight:6,flexShrink:0}}),(0,ce.jsx)("span",{style:_,children:r}),(0,ce.jsx)("div",{style:G,...y,children:D.map((e,t)=>(0,ce.jsx)("div",{style:{width:3,height:T?`${Math.max(2,Math.min(24,e))}px`:"3px",backgroundColor:a,borderRadius:2,transition:"height 120ms cubic-bezier(0.34, 1.56, 0.64, 1)",...x}},t))})]})}),s&&(0,ce.jsx)("div",{style:Y,...S,children:d||(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(Ie,{message:p?.muted?"Participant is muted":"Mute participant",isDarkMode:R,position:"bottom",children:(0,ce.jsx)("button",{style:K(!p?.muted),onClick:V,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:p?.muted?pe.faMicrophoneSlash:pe.faMicrophone})})}),(0,ce.jsx)(Ie,{message:p?.videoOn?"Turn off camera":"Camera is off",isDarkMode:R,position:"bottom",children:(0,ce.jsx)("button",{style:K(p?.videoOn??!1),onClick:B,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:p?.videoOn?pe.faVideo:pe.faVideoSlash})})})]})})]})]})},na=e=>{const t=16;return{topLeft:{top:t,left:t},topRight:{top:t,right:t},bottomLeft:{bottom:t,left:t},bottomRight:{bottom:t,right:t}}[e]},oa=({options:e,participantsCount:t,position:r,showBadge:a,backgroundColor:n,textColor:o,isDarkMode:s,customStyle:i})=>{const c=e?.participantsCount??t??0,d=e?.position??r??"bottomLeft",l=e?.showBadge??a??!0,u=e?.isDarkMode??s??!0,p=e?.backgroundColor??n??(u?"rgba(45, 52, 54, 0.85)":"rgba(255, 255, 255, 0.9)"),m=e?.textColor??o??(u?"#FFFFFF":"#1F2937");if(!l)return null;const g={position:"absolute",zIndex:100,...na(d),...i},h={display:"flex",alignItems:"center",gap:8,padding:"8px 14px",backgroundColor:p,borderRadius:20,boxShadow:u?"0 4px 12px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1)":"0 4px 12px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.5)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:u?"1px solid rgba(255, 255, 255, 0.15)":"1px solid rgba(0, 0, 0, 0.1)"},f={color:m,fontSize:14,opacity:.9},b={color:m,fontSize:14,fontWeight:600,letterSpacing:"0.5px"};return(0,ce.jsx)("div",{style:g,children:(0,ce.jsxs)("div",{style:h,children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers,style:f}),(0,ce.jsx)("span",{style:b,children:c})]})})},sa=({updateIsRecordingModalVisible:e,isRecordingModalVisible:t,showAlert:r,stopLaunchRecord:a,canLaunchRecord:n,recordingAudioSupport:o,recordingVideoSupport:s,updateCanRecord:i,updateClearedToRecord:c,recordStarted:d,recordPaused:l,localUIMode:u})=>{if(t||!a||u){if(!t&&n&&!u){if(!o&&!s)return void r?.({message:"You are not allowed to record",type:"danger",duration:3e3});c(!1),i(!1)}t||!d||l?t||o||s||u?e(!t):r?.({message:"You are not allowed to record",type:"danger",duration:3e3}):r?.({message:"You can only re-configure recording after pausing it",type:"danger",duration:3e3})}else r?.({message:"Recording has already ended or you are not allowed to record",type:"danger",duration:3e3})},ia=async({updateIsMediaSettingsModalVisible:e,isMediaSettingsModalVisible:t,mediaDevices:r,audioInputs:a,videoInputs:n,updateAudioInputs:o,updateVideoInputs:s})=>{if(!t)try{const e=await r.enumerateDevices();n=e.filter(e=>"videoinput"===e.kind),a=e.filter(e=>"audioinput"===e.kind),s(n),o(a)}catch(e){console.log("Error getting media devices",e)}e(!t)},ca=async({parameters:e})=>{let{roomName:t,userRecordingParams:r,socket:a,localSocket:n,updateIsRecordingModalVisible:o,confirmedToRecord:s,showAlert:i,recordingMediaOptions:c,videoAlreadyOn:d,audioAlreadyOn:l,recordStarted:u,recordPaused:p,recordResumed:m,recordStopped:g,startReport:h,endReport:f,canRecord:b,updateClearedToRecord:y,updateRecordStarted:x,updateRecordPaused:v,updateRecordResumed:S,updateStartReport:R,updateEndReport:w,updateCanRecord:k,whiteboardStarted:C,whiteboardEnded:j,rePort:P,captureCanvasStream:M}=e;if(!s)return i?.({message:"You must click confirm before you can start recording",type:"danger"}),!1;if("video"===c&&!d)return i?.({message:"You must turn on your video before you can start recording",type:"danger"}),!1;if("audio"===c&&!l)return i?.({message:"You must turn on your audio before you can start recording",type:"danger"}),!1;y(!0);let I="startRecord";u&&p&&!m&&!g&&(I="resumeRecord");let A=!1,T=n&&n.connected?n:a;await new Promise(a=>{T.emit(I,{roomName:t,userRecordingParams:r},async({success:t,reason:r})=>{t?(u=!0,h=!0,f=!1,p=!1,A=!0,x(u),R(h),w(f),v(p),"startRecord"===I?(await P({parameters:e}),await q({parameters:e})):(S(!0),await P({restart:!0,parameters:e}),await U({parameters:e}))):(i?.({message:`Recording could not start - ${r}`,type:"danger"}),b=!0,h=!1,f=!0,A=!1,k(b),R(h),w(f)),a()})});try{A&&C&&!j&&"video"===c&&await M({parameters:e})}catch(e){console.error("Error capturing canvas stream:",e)}return o(!1),A},da=async({parameters:e})=>{e=e.getUpdatedAllParams();let{showAlert:t,recordingMediaOptions:r,recordingAudioOptions:a,recordingVideoOptions:n,recordingVideoType:o,recordingDisplayType:s,recordingNameTags:i,recordingBackgroundColor:c,recordingNameTagsColor:d,recordingOrientationVideo:l,recordingAddHLS:u,recordingAddText:p,recordingCustomText:m,recordingCustomTextPosition:g,recordingCustomTextColor:h,meetingDisplayType:f,recordingVideoParticipantsFullRoomSupport:b,recordingAllParticipantsSupport:y,recordingVideoParticipantsSupport:x,recordingSupportForOtherOrientation:v,recordingPreferredOrientation:S,recordingMultiFormatsSupport:R,recordingVideoOptimized:w,recordingAllParticipantsFullRoomSupport:k,meetingVideoOptimized:C,eventType:j,breakOutRoomStarted:P,breakOutRoomEnded:M,updateRecordingDisplayType:I,updateRecordingVideoOptimized:A,updateUserRecordingParams:T,updateConfirmedToRecord:F}=e;if(b||"all"!==n||"video"!==r||"all"!==f||P&&!M)if(y||"all"!==n)if(x||"video"!==s)if(v||"all"!==l)if(!("landscape"===S&&"portrait"===l||"portrait"===S&&"landscape"===l)||v)if(R||"all"!==o){if("broadcast"!==j)if("video"===r){if("media"===f&&"all"===s)return t?.({message:"Recording display type can be either video, video optimized, or media when meeting display type is media.",type:"danger",duration:3e3}),void I(f);if("video"===f){if("all"===s||"media"===s)return t?.({message:"Recording display type can be either video or video optimized when meeting display type is video.",type:"danger",duration:3e3}),void I(f);if(C&&!w)return t?.({message:"Recording display type can only be video optimized when meeting display type is video optimized.",type:"danger",duration:3e3}),void A(C)}}else I("media"),A(!1);"all"!==s||k?(T({mainSpecs:{mediaOptions:r,audioOptions:a,videoOptions:n,videoType:o,videoOptimized:w,recordingDisplayType:s,addHLS:u},dispSpecs:{nameTags:i,backgroundColor:c,nameTagsColor:d,orientationVideo:l},textSpecs:{addText:p,customText:m,customTextPosition:g,customTextColor:h}}),F(!0)):t?.({message:"You can only record all participants with media.",type:"danger",duration:3e3})}else t?.({message:"You are not allowed to record all formats.",type:"danger",duration:3e3});else t?.({message:"You are not allowed to record this orientation.",type:"danger",duration:3e3});else t?.({message:"You are not allowed to record all orientations.",type:"danger",duration:3e3});else t?.({message:"You are not allowed to record other video participants.",type:"danger",duration:3e3});else t?.({message:"You are only allowed to record yourself.",type:"danger",duration:3e3});else t?.({message:"You are not allowed to record videos of all participants; change the meeting display type to video or video optimized.",type:"danger",duration:3e3})},la=({updateIsConfirmExitModalVisible:e,isConfirmExitModalVisible:t})=>{e(!t)},ua=navigator.mediaDevices;async function pa(e){if(!/^[a-z0-9]{64}$/i.test(e))throw new Error("Invalid API key or token.");return!0}async function ma({apiUserName:e,apiKey:t,apiToken:r,link:a}){if(!e)throw new Error("API username required.");if(!t&&!r)throw new Error("API key or token required.");if(!a)throw new Error("Socket link required.");let n,o=!1;try{if(t&&64===t.length)await pa(t),o=!0;else{if(!r||64!==r.length)throw new Error("Invalid API key or token format.");await pa(r),o=!1}}catch{throw new Error("Invalid API key or token.")}return new Promise((s,i)=>{n=o?te()(`${a}/media`,{transports:["websocket"],query:{apiUserName:e,apiKey:t}}):te()(`${a}/media`,{transports:["websocket"],query:{apiUserName:e,apiToken:r}}),n.on("connection-success",({socketId:e})=>{let t="media";try{a.includes("mediasfu.com")&&(a.match(/c/g)?.length??0)>1&&(t="consume")}catch{}console.log(`Connected to ${t} socket with ID: ${e}`),s(n)}),n.on("connect_error",e=>{i(new Error("Error connecting to media socket: "+e.message))})})}async function ga({link:e}){if(!e)throw new Error("Socket link required.");let t;return new Promise((r,a)=>{t=te()(`${e}/media`,{transports:["websocket"]}),t.on("connection-success",e=>{r({socket:t,data:e})}),t.on("connect_error",e=>{a(new Error("Error connecting to media socket: "+e.message))})})}async function ha({socket:e}){return e&&e.disconnect(),!0}const fa=async({socket:e,roomName:t,islevel:r,member:a,sec:n,apiUserName:o,consume:s=!1})=>{try{let i;return i=s?await f({socket:e,roomName:t,islevel:r,member:a,sec:n,apiUserName:o}):await Z({socket:e,roomName:t,islevel:r,member:a,sec:n,apiUserName:o}),i}catch(e){throw console.log(e),new Error("Failed to join the room. Please check your connection and try again.")}};let ba={width:{ideal:320},height:{ideal:180}},ya={width:{ideal:640},height:{ideal:360}},xa={width:{ideal:1280},height:{ideal:720}},va={width:{ideal:1920},height:{ideal:1080}},Sa={width:{ideal:2560},height:{ideal:1440}},Ra={width:{ideal:180},height:{ideal:320}},wa={width:{ideal:360},height:{ideal:640}},ka={width:{ideal:720},height:{ideal:1280}},Ca={width:{ideal:1080},height:{ideal:1920}},ja={width:{ideal:1440},height:{ideal:2560}},Pa={width:{ideal:240},height:{ideal:240}},Ma={width:{ideal:480},height:{ideal:480}},Ia={width:{ideal:960},height:{ideal:960}},Aa={width:{ideal:1440},height:{ideal:1440}},Ta={width:{ideal:1920},height:{ideal:1920}};const Fa=({parameters:e})=>{try{const{screenPageLimit:t,shareScreenStarted:r,shared:a,hParams:n=M,vParams:o=A,frameRate:s,islevel:i,showAlert:c,data:d,updateRtpCapabilities:l,updateRoomRecvIPs:u,updateMeetingRoomParams:p,updateItemPageLimit:m,updateAudioOnlyRoom:g,updateScreenPageLimit:h,updateVidCons:f,updateFrameRate:b,updateAdminPasscode:y,updateEventType:x,updateYouAreCoHost:v,updateAutoWave:S,updateForceFullDisplay:R,updateChatSetting:w,updateMeetingDisplayType:k,updateAudioSetting:C,updateVideoSetting:j,updateScreenshareSetting:T,updateHParams:F,updateVParams:D,updateScreenParams:N,updateAParams:L,updateTargetResolution:V,updateTargetResolutionHost:B,updateRecordingAudioPausesLimit:$,updateRecordingAudioPausesCount:E,updateRecordingAudioSupport:W,updateRecordingAudioPeopleLimit:H,updateRecordingAudioParticipantsTimeLimit:O,updateRecordingVideoPausesCount:z,updateRecordingVideoPausesLimit:U,updateRecordingVideoSupport:q,updateRecordingVideoPeopleLimit:_,updateRecordingVideoParticipantsTimeLimit:G,updateRecordingAllParticipantsSupport:Y,updateRecordingVideoParticipantsSupport:K,updateRecordingAllParticipantsFullRoomSupport:J,updateRecordingVideoParticipantsFullRoomSupport:X,updateRecordingPreferredOrientation:Z,updateRecordingSupportForOtherOrientation:Q,updateRecordingMultiFormatsSupport:ee,updateRecordingVideoOptions:te,updateRecordingAudioOptions:re,updateMainHeightWidth:ae}=e;if(null==d.rtpCapabilities){let e=d.reason||"";return void c?.({message:"Sorry, you are not allowed to join this room. "+e,type:"danger",duration:3e3})}l(d.rtpCapabilities),y(d.secureCode),u(d.roomRecvIPs),p(d.meetingRoomParams),$(d.recordingParams.recordingAudioPausesLimit),E(d.recordingParams.recordingAudioPausesCount),W(d.recordingParams.recordingAudioSupport),H(d.recordingParams.recordingAudioPeopleLimit),O(d.recordingParams.recordingAudioParticipantsTimeLimit),z(d.recordingParams.recordingVideoPausesCount),U(d.recordingParams.recordingVideoPausesLimit),q(d.recordingParams.recordingVideoSupport),_(d.recordingParams.recordingVideoPeopleLimit),G(d.recordingParams.recordingVideoParticipantsTimeLimit),Y(d.recordingParams.recordingAllParticipantsSupport),K(d.recordingParams.recordingVideoParticipantsSupport),J(d.recordingParams.recordingAllParticipantsFullRoomSupport),X(d.recordingParams.recordingVideoParticipantsFullRoomSupport),Z(d.recordingParams.recordingPreferredOrientation),Q(d.recordingParams.recordingSupportForOtherOrientation),ee(d.recordingParams.recordingMultiFormatsSupport),m(d.meetingRoomParams.itemPageLimit),x(d.meetingRoomParams.type),"chat"==d.meetingRoomParams.type&&"2"!=i&&v(!0),["chat","broadcast"].includes(d.meetingRoomParams.type)&&(S(!1),k("all"),R(!0),w("allow"),m(2),["broadcast"].includes(d.meetingRoomParams.type)&&(te("mainScreen"),re("host"),m(1))),C(d.meetingRoomParams.audioSetting),j(d.meetingRoomParams.videoSetting),T(d.meetingRoomParams.screenshareSetting),w(d.meetingRoomParams.chatSetting),g("video"!=d.meetingRoomParams.mediaType),"conference"==d.meetingRoomParams.type&&(a||r)?ae(100):ae(0),h(Math.min(d.meetingRoomParams.itemPageLimit,t));let ne,oe="2"==i?d.meetingRoomParams.targetOrientationHost:d.meetingRoomParams.targetOrientation,se="2"==i?d.meetingRoomParams.targetResolutionHost:d.meetingRoomParams.targetResolution;ne="landscape"==oe?"hd"==se?xa:"fhd"==se?va:"qhd"==se?Sa:"sd"==se?ya:ba:"neutral"==oe?"hd"==se?Ia:"fhd"==se?Aa:"qhd"==se?Ta:"sd"==se?Ma:Pa:"hd"==se?ka:"fhd"==se?Ca:"qhd"==se?ja:"sd"==se?wa:Ra;let ie=s||10,ce={...o},de={...n};0==Object.keys(ce).length&&(ce={...A}),0==Object.keys(de).length&&(de={...M}),"hd"==se?(ie=15,ce.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=4)}),de.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=4)})):"QnHD"==se?(ie=5,ce.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=.25)}),de.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=.25)}),de.codecOptions&&de.codecOptions.videoGoogleStartBitrate&&(de.codecOptions.videoGoogleStartBitrate*=.25),ce.codecOptions&&ce.codecOptions.videoGoogleStartBitrate&&(ce.codecOptions.videoGoogleStartBitrate*=.25)):"fhd"==se?(ie=20,ce.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=8)}),de.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=8)})):"qhd"==se&&(ie=30,ce.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=16)}),de.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=16)})),d.recordingParams.recordingVideoSupport&&(ce.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=1.2)}),de.encodings.forEach(e=>{e.maxBitrate&&(e.maxBitrate*=1.2)}),de.codecOptions&&de.codecOptions.videoGoogleStartBitrate&&(de.codecOptions.videoGoogleStartBitrate*=1.2),ce.codecOptions&&ce.codecOptions.videoGoogleStartBitrate&&(ce.codecOptions.videoGoogleStartBitrate*=1.2)),f(ne),b(ie),F(de),D(ce),N(I),L(P),V(d.meetingRoomParams.targetResolution),B(d.meetingRoomParams.targetResolutionHost)}catch(t){console.log("updateRoomParametersClient error",t),e.showAlert&&e.showAlert({message:t.message,type:"danger",duration:3e3})}};var Da=p(659);const Na=async({rtpCapabilities:e})=>{try{if(!e)throw new Error("Both rtpCapabilities and mediasoupClient must be provided.");const t=new Da.Device;return e.headerExtensions=e.headerExtensions.filter(e=>"urn:3gpp:video-orientation"!==e.uri),await t.load({routerRtpCapabilities:e}),t}catch(e){throw e&&"UnsupportedError"===e.name&&console.error("Device creation is not supported by this browser."),e}},La=async({parameters:e})=>{let{checkMediaPermission:t,hasCameraPermission:r,videoAlreadyOn:a,audioOnlyRoom:n,recordStarted:o,recordResumed:s,recordPaused:i,recordStopped:c,recordingMediaOptions:d,islevel:l,youAreCoHost:u,adminRestrictSetting:p,videoRequestState:m,videoRequestTime:g,member:h,socket:f,roomName:b,userDefaultVideoInputDevice:y,currentFacingMode:x,vidCons:v,frameRate:S,videoAction:R,localStream:w,audioSetting:k,videoSetting:C,screenshareSetting:j,chatSetting:P,updateRequestIntervalSeconds:M,streamSuccessVideo:I,showAlert:A,updateVideoAlreadyOn:T,updateVideoRequestState:F,updateLocalStream:D,mediaDevices:N,disconnectSendTransportVideo:L,requestPermissionCamera:V,checkPermission:B}=e;if(n)A?.({message:"You cannot turn on your camera in an audio-only event.",type:"danger",duration:3e3});else if(a){if("2"===l&&(o||s)&&!i&&!c&&"video"===d)return void A?.({message:"You cannot turn off your camera while recording video, please pause or stop recording first.",type:"danger",duration:3e3});a=!1,T(a),w.getVideoTracks()[0].enabled=!1,D(w),await L({parameters:e})}else{if(p)return void A?.({message:"You cannot turn on your camera. Access denied by host.",duration:3e3,type:"danger"});const a=e.supportMaxRoom,n=e.supportFlexRoom;if((a||n)&&"2"!==l)try{const e=await new Promise(e=>{f.emit("checkProduce",{kind:"video"},t=>{e(t||{allowed:!1,reason:"No response from server"})}),setTimeout(()=>e({allowed:!0}),5e3)});if(!e.allowed)return void A?.({message:e.reason||`Video producer limit reached (${e.producingCount}/${e.producerLimit}).`,type:"danger",duration:3e3})}catch(e){console.warn("Failed to check producer limit:",e)}const o=e.panelistsFocused,s=e.muteOthersCamera,i=e.panelists;if(o&&s&&"2"!==l&&!i?.some(e=>e.name===h))return void A?.({message:"You cannot turn on your camera. Only panelists can enable video while focus mode is active.",type:"danger",duration:3e3});let c=2;if(c=R||"2"===l||u?0:await B({permissionType:"videoSetting",audioSetting:k,videoSetting:C,screenshareSetting:j,chatSetting:P,permissionConfig:e.permissionConfig,participantLevel:l}),1==c){if("pending"===m)return void A?.({message:"A request is pending. Please wait for the host to respond.",type:"danger",duration:3e3});if("rejected"===m&&Date.now()-g<M)return void A?.({message:`A request was rejected. Please wait for ${M} seconds before sending another request.`,type:"danger",duration:3e3});A?.({message:"Request sent to host.",type:"success",duration:3e3}),m="pending",F(m);const e={id:f.id,name:h,icon:"fa-video"};await f.emit("participantRequest",{userRequest:e,roomName:b})}else{if(2===c)return void A?.({message:"You cannot turn on your camera. Access denied by host.",type:"danger",duration:3e3});{if(!r&&t&&"granted"!==await V())return void A?.({message:"Allow access to your camera or check if your camera is not being used by another application.",type:"danger",duration:3e3});let a={},n={};y?v&&v.width&&v.height?(a={video:{deviceId:y,facingMode:x,...v,frameRate:{ideal:S}},audio:!1},n={video:{...v,frameRate:{ideal:S}},audio:!1}):(a={video:{...v,frameRate:{ideal:S}},audio:!1},n={video:{frameRate:{ideal:S}},audio:!1}):v&&v.width&&v.height?(a={video:{...v,frameRate:{ideal:S}},audio:!1},n={video:{...v,frameRate:{ideal:S}},audio:!1}):a={video:{frameRate:{ideal:S}},audio:!1},await N.getUserMedia(a).then(async t=>{await I({stream:t,parameters:e})}).catch(async()=>{await N.getUserMedia(n).then(async t=>{await I({stream:t,parameters:e})}).catch(async()=>{n={video:{...v},audio:!1},await N.getUserMedia(n).then(async t=>{await I({stream:t,parameters:e})}).catch(()=>{A?.({message:"Allow access to your camera or check if your camera is not being used by another application.",type:"danger",duration:3e3})})})})}}}},Va=async({parameters:e})=>{let{checkMediaPermission:t,hasAudioPermission:r,audioPaused:a,audioAlreadyOn:n,audioOnlyRoom:o,recordStarted:s,recordResumed:i,recordPaused:c,recordStopped:d,recordingMediaOptions:l,islevel:u,youAreCoHost:p,adminRestrictSetting:m,audioRequestState:g,audioRequestTime:h,member:f,socket:b,localSocket:y,roomName:x,userDefaultAudioInputDevice:v,micAction:S,localStream:R,audioSetting:w,videoSetting:k,screenshareSetting:C,chatSetting:j,updateRequestIntervalSeconds:P,participants:M,mediaDevices:I,showAlert:A,transportCreated:T,transportCreatedAudio:F,updateAudioAlreadyOn:D,updateAudioRequestState:N,updateAudioPaused:L,updateLocalStream:V,updateParticipants:B,updateTransportCreated:$,updateTransportCreatedAudio:E,updateMicAction:W,checkPermission:H,streamSuccessAudio:O,requestPermissionAudio:z,resumeSendTransportAudio:U,disconnectSendTransportAudio:q}=e;if(o)A?.({message:"You cannot turn on your camera in an audio-only event.",type:"danger",duration:3e3});else if(n){if("2"===u&&(s||i)&&!c&&!d&&"audio"===l)return void A?.({message:"You cannot turn off your audio while recording, please pause or stop recording first.",type:"danger",duration:3e3});n=!1,D(n),R.getAudioTracks()[0].enabled=!1,V(R),await q({parameters:e}),a=!0,L(a)}else{if(m)return void A?.({message:"You cannot turn on your microphone. Access denied by host.",type:"danger",duration:3e3});const n=e.supportMaxRoom,o=e.supportFlexRoom;if((n||o)&&"2"!==u)try{const e=await new Promise(e=>{b.emit("checkProduce",{kind:"audio"},t=>{e(t||{allowed:!1,reason:"No response from server"})}),setTimeout(()=>e({allowed:!0}),5e3)});if(!e.allowed)return void A?.({message:e.reason||`Audio producer limit reached (${e.producingCount}/${e.producerLimit}).`,type:"danger",duration:3e3})}catch(e){console.warn("Failed to check producer limit:",e)}const s=e.panelistsFocused,i=e.muteOthersMic,c=e.panelists;if(s&&i&&"2"!==u&&!c?.some(e=>e.name===f))return void A?.({message:"You cannot turn on your microphone. Only panelists can unmute while focus mode is active.",type:"danger",duration:3e3});let d=2;switch(d=S||"2"===u||p?0:await H({permissionType:"audioSetting",audioSetting:w,videoSetting:k,screenshareSetting:C,chatSetting:j,permissionConfig:e.permissionConfig,participantLevel:u}),d){case 1:{if("pending"===g)return void A?.({message:"A request is pending. Please wait for the host to respond.",type:"danger",duration:3e3});if("rejected"===g&&Date.now()-h<1e3*P)return void A?.({message:`A request was rejected. Please wait for ${P} seconds before sending another request.`,type:"danger",duration:3e3});A?.({message:"Request sent to host.",type:"success",duration:3e3}),g="pending",N(g);const e={id:b.id,name:f,icon:"fa-microphone"};b.emit("participantRequest",{userRequest:e,roomName:x});break}case 2:A?.({message:"You cannot turn on your microphone. Access denied by host.",type:"danger",duration:3e3});break;case 0:if(a){R.getAudioTracks()[0].enabled=!0,D(!0),await U({parameters:e}),b.emit("resumeProducerAudio",{mediaTag:"audio",roomName:x});try{y&&y.id&&y.emit("resumeProducerAudio",{mediaTag:"audio",roomName:x})}catch(e){console.log("Error in resumeProducerAudio",e)}V(R),1==S&&(S=!1,W(S)),M.forEach(e=>{e.socketId===b.id&&e.name===f&&(e.muted=!1)}),B(M),T=!0,$(T),F=!0,E(F)}else{if(!r&&t&&"granted"!==await z())return void A?.({message:"Allow access to your microphone or check if your microphone is not being used by another application.",type:"danger",duration:3e3});const a=v?{audio:{deviceId:v},video:!1}:{audio:!0,video:!1};try{const t=await I.getUserMedia(a);await O({stream:t,parameters:e})}catch(e){console.error(e),A?.({message:"Allow access to your microphone or check if your microphone is not being used by another application.",type:"danger",duration:3e3})}}}}},Ba=async({parameters:e})=>{let{showAlert:t,roomName:r,member:a,socket:n,islevel:o,youAreCoHost:s,adminRestrictSetting:i,audioSetting:c,videoSetting:d,screenshareSetting:l,chatSetting:u,screenAction:p,screenAlreadyOn:m,screenRequestState:g,screenRequestTime:h,audioOnlyRoom:f,updateRequestIntervalSeconds:b,updateScreenRequestState:y,updateScreenAlreadyOn:x,checkPermission:v,checkScreenShare:S,stopShareScreen:R}=e;if(f)t?.({message:"You cannot turn on your camera in an audio-only event.",type:"danger",duration:3e3});else if(m)m=!1,x(m),await R({parameters:e});else{if(i)return void t?.({message:"You cannot start screen share. Access denied by host.",type:"danger",duration:3e3});let m=2;switch(m=p||"2"===o||s?0:await v({permissionType:"screenshareSetting",audioSetting:c,videoSetting:d,screenshareSetting:l,chatSetting:u,permissionConfig:e.permissionConfig,participantLevel:o}),m){case 0:S({parameters:e});break;case 1:{if("pending"===g)return void t?.({message:"A request is already pending. Please wait for the host to respond.",type:"danger",duration:3e3});if("rejected"===g&&Date.now()-h<b)return void t?.({message:"You cannot send another request at this time.",type:"danger",duration:3e3});t?.({message:"Your request has been sent to the host.",type:"success",duration:3e3}),g="pending",y(g);const e={id:n.id,name:a,icon:"fa-desktop"};n.emit("participantRequest",{userRequest:e,roomName:r});break}case 2:t?.({message:"You are not allowed to start screen share.",type:"danger",duration:3e3})}}},$a=async({stream:e,parameters:t})=>{let{getUpdatedAllParams:r}=t;t=r();try{let{socket:r,participants:a,localStream:n,transportCreated:o,transportCreatedVideo:s,videoAlreadyOn:i,videoAction:c,videoParams:d,localStreamVideo:l,defVideoID:u,userDefaultVideoInputDevice:p,params:m,videoParamse:g,islevel:h,member:f,updateMainWindow:b,lock_screen:y,shared:x,shareScreenStarted:v,vParams:S,hParams:R,allowed:w,currentFacingMode:k,device:C,keepBackground:j,appliedBackground:P,videoProducer:M,updateTransportCreatedVideo:I,updateVideoAlreadyOn:A,updateVideoAction:T,updateLocalStream:F,updateLocalStreamVideo:D,updateUserDefaultVideoInputDevice:N,updateCurrentFacingMode:L,updateDefVideoID:V,updateAllowed:B,updateUpdateMainWindow:$,updateParticipants:E,updateVideoParams:W,updateIsBackgroundModalVisible:H,updateAutoClickBackground:O,createSendTransport:z,connectSendTransportVideo:U,showAlert:q,reorderStreams:_,sleep:G}=t;l=e,D(l),null==n?(n=new MediaStream([l.getVideoTracks()[0]]),F(n)):(n.getVideoTracks().forEach(e=>{n.removeTrack(e)}),n.addTrack(l.getVideoTracks()[0]),F(n));const Y=n.getVideoTracks()[0];u=Y.getSettings().deviceId||"",p=u,k=Y.getSettings().facingMode||"user",u&&V(u),p&&N(p),k&&L(k),w=!0,B(w);try{"2"===h?(m=x||v?S:R,g={...m}):(m=S,g={...m});let e=C?.rtpCapabilities?.codecs?.filter(e=>"video/vp9"!==e.mimeType.toLowerCase()&&"video"===e.kind)||[];if(d={track:n.getVideoTracks()[0],...g,codec:e[0]},W(d),j&&P)i=!0,A(i),O(!0),H(!0),await G({ms:500});else if(o){try{M.close(),await G({ms:500})}catch{}await U({parameters:t,videoParams:d})}else try{await z({parameters:{...t,videoParams:d},option:"video"})}catch{}}catch(e){q?.({message:e.message,type:"danger",duration:3e3})}if(i=!0,A(i),!0===c&&(c=!1,T(c)),"2"===h&&(b=!0,$(b)),a.forEach(e=>{e.socketId==r.id&&e.name==f&&(e.videoOn=!0)}),E(a),s=!0,I(s),y)await _({add:!0,screenChanged:!0,parameters:{...t,videoAlreadyOn:i}});else try{await _({add:!1,screenChanged:!0,parameters:{...t,videoAlreadyOn:i}})}catch{}}catch(e){try{let{showAlert:r}=t;r?.({message:e.message,type:"danger",duration:3e3})}catch{}}},Ea=async({stream:e,parameters:t})=>{let{socket:r,participants:a,localStream:n,transportCreated:o,transportCreatedAudio:s,audioAlreadyOn:i,micAction:c,audioParams:d,localStreamAudio:l,defAudioID:u,userDefaultAudioInputDevice:p,params:m,audioParamse:g,aParams:h,hostLabel:f,islevel:b,member:y,updateMainWindow:x,lock_screen:v,shared:S,videoAlreadyOn:R,showAlert:w,updateParticipants:k,updateTransportCreated:C,updateTransportCreatedAudio:j,updateAudioAlreadyOn:P,updateMicAction:M,updateAudioParams:I,updateLocalStream:A,updateLocalStreamAudio:T,updateDefAudioID:F,updateUserDefaultAudioInputDevice:D,updateUpdateMainWindow:N,createSendTransport:L,connectSendTransportAudio:V,resumeSendTransportAudio:B,prepopulateUserMedia:$}=t;l=e,T(l),null==n?(n=new MediaStream([l.getAudioTracks()[0]]),A(n)):(n.addTrack(l.getAudioTracks()[0]),A(n)),u=n.getAudioTracks()[0].getSettings().deviceId||"",p=u,F(u),D(p);try{if(m=h,g={...m},d={track:n.getAudioTracks()[0],...g},I(d),o)s?await B({parameters:t}):await V({audioParams:d,parameters:t});else try{await L({parameters:{...t,audioParams:d},option:"audio"})}catch(e){console.error("Error creating transport:",e)}}catch(e){w&&w({message:e.message,type:"danger",duration:3e3})}i=!0,P(i),!0===c&&(c=!1,M(c)),a.forEach(e=>{e.socketId===r.id&&e.name===y&&(e.muted=!1)}),k(a),o=!0,s=!0,C(o),j(s),R||"2"!==b||v||S||(x=!0,N(x),await $({name:f,parameters:t}),x=!1,N(x))},Wa=async({stream:e,parameters:t})=>{let{getUpdatedAllParams:r}=t;t=r();let{socket:a,transportCreated:n,localStreamScreen:o,screenAlreadyOn:s,screenAction:i,transportCreatedScreen:c,hostLabel:d,eventType:l,showAlert:u,annotateScreenStream:p,updateTransportCreatedScreen:m,updateScreenAlreadyOn:g,updateScreenAction:h,updateTransportCreated:f,updateLocalStreamScreen:b,updateShared:y,updateIsScreenboardModalVisible:x,sleep:v,createSendTransport:S,connectSendTransportScreen:R,disconnectSendTransportScreen:w,stopShareScreen:k,reorderStreams:C,prepopulateUserMedia:j,rePort:P}=t;o=e,b(o);try{n?await R({stream:o,parameters:{...t,localStreamScreen:o}}):await S({option:"screen",parameters:{...t,localStreamScreen:o}}),a.emit("startScreenShare")}catch(e){u?.({message:e.message,type:"danger",duration:3e3})}try{y(!0),await j({name:d,parameters:{...t,localStreamScreen:o,shared:!0}})}catch(e){console.error("Error updating shared screen UI:",e)}s=!0,g(s);try{"conference"===l?(await C({add:!1,screenChanged:!0,parameters:t}),await j({name:d,parameters:t})):await C({parameters:t})}catch{try{await P({parameters:t})}catch{}}o.getVideoTracks()[0].onended=async function(){await w({parameters:t}),await k({parameters:t})},!0===i&&(i=!1),h(i),c=!0,m(c),n=!0,f(n);try{p&&(p=!1,x(!0),await v({ms:500}),x(!1))}catch(e){console.error("Error handling screen annotation:",e)}},Ha=async({stream:e,parameters:t})=>{let{audioProducer:r,localAudioProducer:a,socket:n,localSocket:o,roomName:s,localStream:i,localStreamAudio:c,audioParams:d,audioPaused:l,audioAlreadyOn:u,transportCreated:p,audioParamse:m,defAudioID:g,userDefaultAudioInputDevice:h,hostLabel:f,updateMainWindow:b,videoAlreadyOn:y,islevel:x,lock_screen:v,shared:S,updateAudioProducer:R,updateLocalAudioProducer:w,updateLocalStream:k,updateAudioParams:C,updateDefAudioID:j,updateUserDefaultAudioInputDevice:P,updateUpdateMainWindow:M,sleep:I,prepopulateUserMedia:A,createSendTransport:T,connectSendTransportAudio:F}=t;if(e.getAudioTracks()[0].getSettings().deviceId!==g){r&&(r.close(),R(r)),n.emit("pauseProducerMedia",{mediaTag:"audio",roomName:s,force:!0});try{o&&o.id&&(a&&(a.close(),w&&w(a)),o.emit("pauseProducerMedia",{mediaTag:"audio",roomName:s,force:!0}))}catch{}if(c=e,null==i?i=new MediaStream([c.getAudioTracks()[0]]):(i.getAudioTracks().forEach(e=>{i.removeTrack(e)}),i.addTrack(c.getAudioTracks()[0])),k(i),g=i.getAudioTracks()[0].getSettings().deviceId||"",j(g),h=g,P(h),d={track:i.getAudioTracks()[0],...m},C(d),await I({ms:500}),p)await F({audioParams:d,parameters:t});else try{await T({parameters:{...t,audioParams:d},option:"audio"})}catch(e){console.error("Error creating send transport:",e)}if(!0===l&&!u){r.pause(),R(r),n.emit("pauseProducerMedia",{mediaTag:"audio",roomName:s});try{o&&o.id&&(a.pause(),w&&w(a),o.emit("pauseProducerMedia",{mediaTag:"audio",roomName:s}))}catch{}}}y||"2"!==x||v||S||(b=!0,M(b),await A({name:f,parameters:t}),b=!1,M(b))};async function Oa({permissionType:e,audioSetting:t,videoSetting:r,screenshareSetting:a,chatSetting:n,permissionConfig:o,participantLevel:s}){try{const i={audioSetting:"useMic",videoSetting:"useCamera",screenshareSetting:"useScreen",chatSetting:"useChat"};if(o&&s&&"2"!==s){const t=o[`level${s}`];if(t){const r=i[e];if(r){const e=t[r];return"allow"===e?0:"approval"===e?1:2}}}switch(e){case"audioSetting":return"allow"===t?0:"approval"===t?1:2;case"videoSetting":return"allow"===r?0:"approval"===r?1:2;case"screenshareSetting":return"allow"===a?0:"approval"===a?1:2;case"chatSetting":return"allow"===n?0:"approval"===n?1:2;default:return 2}}catch{return 2}}const za=(e,t,r)=>{if(!e)return(0,ce.jsx)(t,{...r});if(e.render)return e.render(r);if(e.component){const t=e.component;return(0,ce.jsx)(t,{...r})}return(0,ce.jsx)(t,{...r})},Ua=(e,t)=>{const r=r=>(0,ce.jsx)(ce.Fragment,{children:za(e,t,r)});return r.displayName=`WithOverride(${t.displayName||t.name||"Component"})`,r},qa=(e,t)=>e?e.wrap?e.wrap(t):e.implementation?e.implementation:t:t;async function _a({rows:e,cols:t,defal:r=!0,actualRows:a=2,parameters:n}){let{getUpdatedAllParams:o}=n;n=o();let{updateGridRows:s,updateGridCols:i,updateAltGridRows:c,updateAltGridCols:d,updateGridSizes:l,updatePrimaryGridLayoutMeta:u,updateAltGridLayoutMeta:p,gridSizes:m,paginationDirection:g,paginationHeightWidth:h,doPaginate:f,componentSizes:b,eventType:y}=n,x=b.otherWidth,v=b.otherHeight;f&&("horizontal"===g?v-=h:x-=h);let S=3;"chat"===y&&(S=0);let R,w,k=(t-1)*S,C=(a-1)*S;0===t||0===a?(R=0,w=0):(R=Math.floor((x-k)/t),w=Math.floor((v-C)/a)),r?(s(e),i(t),m={...m,gridWidth:R,gridHeight:w},l(m),u?.({rows:e,cols:t,actualRows:a})):(c(e),d(t),m={...m,altGridWidth:R,altGridHeight:w},l(m),p?.({rows:e,cols:t,actualRows:a}))}async function Ga({alVideoStreams:e,non_alVideoStreams:t,ref_participants:r}){try{const a=[],n=e.find(e=>"youyou"===e.producerId||"youyouyou"===e.producerId);let o=e.filter(e=>"youyou"!==e.producerId&&"youyouyou"!==e.producerId);const s=o.filter(e=>{const t=r.find(t=>t.videoID===e.producerId);return!e.muted&&t&&!1===t.muted}),i=o.filter(e=>{const t=r.find(t=>t.videoID===e.producerId);return e.muted||t&&!0===t.muted}),c=[...t];a.push(...s);let d=0;for(let e=0;e<i.length;e++)d<c.length&&(a.push(c[d]),d++),a.push(i[e]);for(let e=d;e<c.length;e++)a.push(c[e]);return n&&a.unshift(n),a}catch(e){throw console.log("Error mixing streams:",e.message),e}}async function Ya({lStreams:e,ind:t,auto:r=!1,ChatSkip:a=!1,forChatID:n=null,parameters:o,breakRoom:s=-1,inBreakRoom:i=!1}){let{getUpdatedAllParams:c}=o;o=c();let{consumerTransports:d,streamNames:l,audStreamNames:u,participants:p,ref_participants:m,recordingDisplayType:g,recordingVideoOptimized:h,meetingDisplayType:f,meetingVideoOptimized:b,currentUserPage:y,hostLabel:x,mainHeightWidth:v,prevMainHeightWidth:S,prevDoPaginate:R,doPaginate:w,firstAll:k,shared:C,shareScreenStarted:j,shareEnded:P,oldAllStreams:M,updateMainWindow:I,remoteProducerId:A,activeNames:T,dispActiveNames:F,p_dispActiveNames:D,nForReadjustRecord:N,first_round:L,lock_screen:V,chatRefStreams:B,eventType:$,islevel:E,localStreamVideo:W,breakOutRoomStarted:H,breakOutRoomEnded:O,keepBackground:z,virtualStream:U,updateActiveNames:q,updateDispActiveNames:_,updateLStreams:G,updateChatRefStreams:Y,updateNForReadjustRecord:K,updateUpdateMainWindow:J,updateShowMiniView:X,prepopulateUserMedia:Z,rePort:Q,processConsumerTransports:ee,resumePauseStreams:te,readjust:re,addVideosGrid:ae,checkGrid:ne,getEstimate:oe,resumePauseAudioStreams:se}=o,ie=!0,ce=e.filter(e=>"youyou"!==e.producerId&&"youyouyou"!==e.producerId);if(ce=ce.filter(e=>"youyou"!==e.id&&"youyouyou"!==e.id&&"youyou"!==e.name&&"youyouyou"!==e.name),"chat"===$?ie=!0:(0===t||"2"!==E&&y===t)&&(ie=!1,ce.forEach(e=>{let t,r=!1,a=0;"video"===g?h?Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(r=!0,a=0):(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID)&&(r=!0,a=1):"media"===g?(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID)&&(r=!0,a=1):(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID||Object.prototype.hasOwnProperty.call(e,"name")&&null!==e.name&&""!=e.name)&&(r=!0,a=2),r&&(0==a?Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(t=l.find(t=>t.producerId===e.producerId)):1==a?(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(t=l.find(t=>t.producerId===e.producerId)),t||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID&&(t=u.find(t=>t.producerId===e.audioID),t||(t=m.find(t=>t.audioID===e.audioID)))):2==a&&(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(t=l.find(t=>t.producerId===e.producerId)),t||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID&&(t=u.find(t=>t.producerId===e.audioID),t||(t=m.find(t=>t.audioID===e.audioID))),t||Object.prototype.hasOwnProperty.call(e,"name")&&null!==e.name&&""!=e.name&&(t=m.find(t=>t.name===e.name))),t&&t.name&&!T.includes(t.name)&&T.push(t.name))}),q(T),ce.forEach(e=>{let t,r=!1,a=0;"video"==f?b?Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(r=!0,a=0):(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID)&&(r=!0,a=1):"media"==f?(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID)&&(r=!0,a=1):(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID||Object.prototype.hasOwnProperty.call(e,"name")&&null!==e.name&&""!=e.name)&&(r=!0,a=2),r&&(0==a?Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(t=l.find(t=>t.producerId===e.producerId)):1==a?(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(t=l.find(t=>t.producerId===e.producerId)),t||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID&&(t=u.find(t=>t.producerId===e.audioID),t||(t=m.find(t=>t.audioID===e.audioID)))):2==a&&(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId&&(t=l.find(t=>t.producerId===e.producerId)),t||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID&&(t=u.find(t=>t.producerId===e.audioID),t||(t=m.find(t=>t.audioID===e.audioID))),t||Object.prototype.hasOwnProperty.call(e,"name")&&null!==e.name&&""!=e.name&&(t=m.find(t=>t.name===e.name)))),t&&t.name&&!F.includes(t.name)&&(F.push(t.name),D.includes(t.name)||(ie=!0))}),_(F),ce.length<1&&(j||C||!k)&&(ie=!0),j||C||S!==v&&(I=!0,J(I)),N=T.length,K(N)),!ie&&r)return(!I||V||C)&&L||await Z({name:x,parameters:o}),void(0===t&&"chat"!==$&&await Q({parameters:o}));if("broadcast"==$)G(e=ce);else if("chat"==$)if(null!=n)G(e=B);else{if(X(!1),"2"!=E){let t=p.find(e=>"2"===e.islevel);if(t){let r;A=t.videoID,"2"==E?t.stream=z&&U?U:W:(r=M.find(e=>e.producerId==A),r&&(e=e.filter(e=>e.name!=t.name)).push(r))}}let t=e.find(e=>"youyou"===e.producerId||"youyouyou"===e.producerId);e=e.filter(e=>"youyou"!=e.producerId&&"youyouyou"!=e.producerId),t&&e.push(t),B=e,G(e),Y(B)}let de=e.length;const[,le,ue]=oe({n:de,parameters:o});let pe=await ne({rows:le,cols:ue,actives:de})||[!1,0,0,0,0,0,0],[me,ge,he,fe,,be,ye]=pe;a&&"chat"===$&&(he=1,fe=1,be=1),await re({n:e.length,state:t,parameters:o});let xe=e.slice(0,ge),ve=e.slice(ge);if(w||R!==w||C||j||P){let e=ce;await ee({consumerTransports:d,lStreams_:e,parameters:o});try{H&&!O?await se({inBreakRoom:i,breakRoom:s,parameters:o}):await te({parameters:o})}catch{}try{(!H||H&&O)&&await te({parameters:o})}catch{}P&&(P=!1)}a&&"chat"===$?await ae({mainGridStreams:xe,altGridStreams:ve,numtoadd:ge-1,numRows:he,numCols:fe,actualRows:be,lastrowcols:ye,removeAltGrid:me,parameters:o}):await ae({mainGridStreams:xe,altGridStreams:ve,numtoadd:ge,numRows:he,numCols:fe,actualRows:be,lastrowcols:ye,removeAltGrid:me,parameters:o}),(!I||V||C)&&L||await Z({name:x,parameters:o}),0===t&&"chat"!==$&&await Q({parameters:o})}async function Ka({parameters:e}){let{getUpdatedAllParams:t}=e;e=t();let{shared:r,shareScreenStarted:a,shareEnded:n,updateMainWindow:o,defer_receive:s,hostLabel:i,lock_screen:c,forceFullDisplay:d,firstAll:l,first_round:u,localStreamScreen:p,eventType:m,prevForceFullDisplay:g,annotateScreenStream:h,updateShared:f,updateShareScreenStarted:b,updateShareEnded:y,updateUpdateMainWindow:x,updateDefer_receive:v,updateLock_screen:S,updateForceFullDisplay:R,updateFirstAll:w,updateFirst_round:k,updateLocalStreamScreen:C,updateMainHeightWidth:j,updateAnnotateScreenStream:P,updateIsScreenboardModalVisible:M,disconnectSendTransportScreen:I,prepopulateUserMedia:A,reorderStreams:T,getVideos:F}=e;r=!1,f(r),a=!1,b(a),n=!0,y(n),o=!0,x(o),s&&(s=!1,v(s),await F({participants:e.participants,allVideoStreams:e.allVideoStreams,oldAllStreams:e.oldAllStreams,adminVidID:e.adminVidID,updateAllVideoStreams:e.updateAllVideoStreams,updateOldAllStreams:e.updateOldAllStreams}));try{p.getTracks().forEach(e=>e.stop())}catch{}C(null),await I({parameters:e});try{h&&(h=!1,P(h),M(!0),await new Promise(e=>setTimeout(e,500)),M(!1))}catch(e){console.log("Error handling screen annotation:",e)}"conference"===m&&j(0);try{await A({name:i,parameters:e})}catch(e){console.log("Error in prepopulateUserMedia",e)}try{await T({add:!1,screenChanged:!0,parameters:e})}catch(e){console.log("Error in reorderStreams",e)}c=!1,S(c),d=g,R(d),l=!1,w(l),u=!1,k(u)}async function Ja({parameters:e}){try{const{shared:t,showAlert:r,whiteboardStarted:a,whiteboardEnded:n,breakOutRoomStarted:o,breakOutRoomEnded:s,stopShareScreen:i,requestScreenShare:c}=e;if(t){if(a&&!n)return void r?.({message:"Screen share is not allowed when whiteboard is active",type:"danger"});await i({parameters:e})}else{if(o&&!s)return void r?.({message:"Screen share is not allowed when breakout room is active",type:"danger"});if(a&&!n)return void r?.({message:"Screen share is not allowed when whiteboard is active",type:"danger"});await c({parameters:e})}}catch(e){console.log("checkScreenShare error",e)}}async function Xa({parameters:e}){let{shared:t,showAlert:r,updateShared:a,mediaDevices:n,onWeb:o,targetWidth:s=1280,targetHeight:i=720,streamSuccessScreen:c}=e;try{if(!o)return void r?.({message:"You cannot share screen while on mobile",type:"danger",duration:3e3});n&&n.getDisplayMedia?(t=!0,await n.getDisplayMedia({video:{width:s,height:i,frameRate:30},audio:!1}).then(async t=>{await c({stream:t,parameters:e})}).catch(async()=>{t=!1,r?.({message:"Could not share screen, check and retry",type:"danger",duration:3e3})})):r?.({message:"Could not share screen, check and retry",type:"danger",duration:3e3}),a(t)}catch(e){console.log("Error starting screen share",e)}}async function Za({parameters:e}){try{let{socket:t,showAlert:r,localUIMode:a,targetResolution:n="hd",targetResolutionHost:o="hd",startShareScreen:s}=e,i=1280,c=720;if("qhd"==n||"qhd"==o?(i=2560,c=1440):"fhd"!=n&&"fhd"!=o||(i=1920,c=1080),!0===a)return void await s({parameters:e});t.emit("requestScreenShare",async({allowScreenShare:t})=>{t?await s({parameters:{...e,targetWidth:i,targetHeight:c}}):r?.({message:"You are not allowed to share screen",type:"danger",duration:3e3})})}catch(e){console.log("Error during requesting screen share: ",e)}}const Qa=async({add:e=!1,screenChanged:t=!1,parameters:r})=>{const{getUpdatedAllParams:a}=r;r=a();let{allVideoStreams:n,participants:o,oldAllStreams:s,screenId:i,adminVidID:c,newLimitedStreams:d,newLimitedStreamsIDs:l,activeSounds:u,screenShareIDStream:p,screenShareNameStream:m,adminIDStream:g,adminNameStream:h,updateNewLimitedStreams:f,updateNewLimitedStreamsIDs:b,updateActiveSounds:y,updateScreenShareIDStream:x,updateScreenShareNameStream:v,updateAdminIDStream:S,updateAdminNameStream:R,updateYouYouStream:w,changeVids:k}=r;e||(d=[],l=[],u=[]);const C=n.filter(e=>"youyou"===e.producerId),j=o.filter(e=>"2"===e.islevel);if(c=j.length>0?j[0].videoID:"",c){const t=n.find(e=>e.producerId===c);if(e&&d.find(e=>"youyou"===e.producerId)||(d=[...d,...C],l=[...l,...C.map(e=>e.producerId)]),t)g=c,e&&d.find(e=>e.producerId===c)||(d=[...d,t],l=[...l,t.producerId]);else{const t=s.find(e=>e.producerId===c);t&&(g=c,h=j[0].name,e&&d.find(e=>e.producerId===c)||(d=[...d,t],l=[...l,t.producerId]))}const r=o.filter(e=>e.ScreenID===i);if(r.length>0){const e=r[0].videoID,t=d.filter(t=>t.producerId===e);if(t?.length<1&&e){p=e,m=r[0].name;const t=n.filter(t=>t.producerId===e);d=[...d,...t],l=[...l,...t.map(e=>e.producerId)]}}}else{e&&d.find(e=>"youyou"===e.producerId)||(d=[...d,...C],l=[...l,...C.map(e=>e.producerId)]);const t=o.filter(e=>e.ScreenID===i);if(t.length>0){const e=t[0].videoID,r=d.filter(t=>t.producerId===e);if(r?.length<1&&e){p=e,m=t[0].name;const r=n.filter(t=>t.producerId===e);d=[...d,...r],l=[...l,...r.map(e=>e.producerId)]}}}f(d),b(l),y(u),x(p),v(m),S(g),R(h),w(C),await k({screenChanged:t,parameters:r})},en=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},tn={display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"0px",width:"100%",height:"100%",color:"black",fontFamily:"Nunito",overflow:"hidden"},rn={display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},an={width:"60%",height:"60%",objectFit:"cover"},nn={borderRadius:"50%"},on={display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",textAlign:"center"},sn=({initials:e,fontSize:t=14,customStyle:r,imageSource:a,roundedImage:n=!0,imageStyle:o,containerProps:s,imageContainerProps:i,imageProps:c,initialsContainerProps:d,initialsTextProps:l,renderContainer:u,renderImage:p,renderInitials:m})=>{const{className:g,style:h,...f}=s??{},b=en("mediasfu-mini-card__container",g),y={...tn,fontSize:t,...r,...h},{className:x,style:v,...S}=i??{},R=en("mediasfu-mini-card__image-container",x),w={...rn,...v},{className:k,style:C,...j}=d??{},P=en("mediasfu-mini-card__initials-container",k),M={...on,fontSize:t,...C},{className:I,style:A,...T}=l??{},F=en("mediasfu-mini-card__initials-text",I),D={...A},{className:N,style:L,alt:V,...B}=c??{},$=en("mediasfu-mini-card__image",N),E={...an,...n?nn:void 0,...o,...L},W=a?(0,ce.jsx)("div",{className:R,style:w,...S,children:(0,ce.jsx)("img",{src:a,alt:V??"Profile",className:$,style:E,...B})}):null,H=p?p({defaultImage:W,imageSource:a}):W,O=(0,ce.jsx)("div",{className:P,style:M,...j,children:(0,ce.jsx)("span",{className:F,style:D,...T,children:e})}),z=m?m({defaultInitials:O,initials:e}):O,U=Boolean(a),q=(0,ce.jsx)("div",{className:b,style:y,...f,children:U?H:z}),_=u?u({defaultContainer:q,isImage:U}):q;return(0,ce.jsx)(ce.Fragment,{children:_})},cn={card:{width:"100%",height:"100%",margin:0,padding:0,backgroundColor:"#2c678f",position:"relative"},overlayWeb:{position:"absolute",minWidth:"40%",minHeight:"5%",maxHeight:"100%",display:"grid",gridTemplateColumns:"4fr 2fr",gridGap:"3px"},overlayWebAlt:{position:"absolute",minWidth:"50%",minHeight:"5%",maxHeight:"100%",display:"grid",gridTemplateColumns:"4fr",gridGap:"0px",top:0,right:0},overlayControls:{display:"flex",flexDirection:"row",padding:0,position:"absolute",top:0,left:0},controlButton:{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"2px 4px",marginRight:"2px",fontSize:"medium",border:"none",cursor:"pointer"},nameColumn:{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"5px",marginRight:"2px",fontSize:"small",textAlign:"center"},nameText:{fontSize:"small",fontWeight:"bolder"},waveformWeb:{display:"flex",justifyContent:"left",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",padding:0,flexDirection:"row"},waveformMobile:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",padding:"5px",marginLeft:"5px",maxWidth:"25%"},bar:{flex:1,opacity:.35,margin:"0 1px",transition:"height 0.5s ease"}},dn=({customStyle:e,name:t,barColor:r="red",textColor:a="white",remoteProducerId:n,eventType:o,forceFullDisplay:s,videoStream:i,showControls:c=!0,showInfo:d=!0,videoInfoComponent:l,videoControlsComponent:u,controlsPosition:p="topLeft",infoPosition:m="topRight",participant:g,backgroundColor:h,audioDecibels:f,doMirror:b,parameters:y,containerProps:x,infoOverlayProps:v,controlsOverlayProps:S,waveformContainerProps:R,waveformBarStyle:w,waveformBarClassName:C,videoDisplayProps:j,extraWidgets:P,children:M})=>{const[I,A]=(0,de.useState)(Array.from({length:9},()=>0)),[T,D]=(0,de.useState)(!0),N=e=>[474,433,407,458,400,427,441,419,487][e]||0;(0,de.useEffect)(()=>{const e=setInterval(()=>{const{getUpdatedAllParams:e}=y,r=e(),{audioDecibels:a,participants:n}=r,o=a&&a.find(e=>e.name===t),s=n&&n.find(e=>e.name===t);o&&o.averageLoudness>127.5&&s&&!s.muted?(()=>{const e=I.map((e,t)=>window.setInterval(()=>(e=>{A(t=>{const r=[...t];return r[e]=1,r}),setTimeout(()=>{A(t=>{const r=[...t];return r[e]=0,r})},N(e))})(t),2*N(t)));A(e)})():A(Array.from({length:9},()=>0))},1e3);return()=>clearInterval(e)},[f,t,y]),(0,de.useEffect)(()=>{D(!g?.muted)},[g?.muted]);const L=async()=>{if(!g?.muted){const{getUpdatedAllParams:e}=y,t=e();await k({participantId:g.id||"",participantName:g.name,type:"audio",socket:t.socket,roomName:t.roomName,coHostResponsibility:t.coHostResponsibility,showAlert:t.showAlert,coHost:t.coHost,participants:t.participants,member:t.member,islevel:t.islevel})}},V=async()=>{if(g?.videoOn){const{getUpdatedAllParams:e}=y,t=e();await k({participantId:g.id||"",participantName:g.name,type:"video",socket:t.socket,roomName:t.roomName,coHostResponsibility:t.coHostResponsibility,showAlert:t.showAlert,coHost:t.coHost,participants:t.participants,member:t.member,islevel:t.islevel})}},{style:B,...$}=x??{},E={...cn.card,...B,...e,backgroundColor:h},{style:W,...H}=v??{},{style:O,...z}=S??{},{style:U,...q}=R??{};return(0,ce.jsxs)("div",{...$,style:E,children:[P,(0,ce.jsx)(ea,{remoteProducerId:n,eventType:o,forceFullDisplay:s,videoStream:i,backgroundColor:h,doMirror:b,...j}),l||d&&(0,ce.jsxs)("div",{style:{...F({position:m}),...c?cn.overlayWeb:cn.overlayWebAlt,...W},...H,children:[(0,ce.jsx)("div",{style:cn.nameColumn,children:(0,ce.jsx)("span",{style:{...cn.nameText,color:a},children:g?.name})}),T&&(0,ce.jsx)("div",{style:{...cn.waveformWeb,...U},...q,children:I.map((e,t)=>(0,ce.jsx)("div",{style:{...cn.bar,height:0===e?1:16,backgroundColor:r,...w},className:C},t))})]}),u||c&&(0,ce.jsx)("div",{style:{...cn.overlayControls,...F({position:p}),...O},...z,children:c?u||(0,ce.jsxs)("div",{style:cn.overlayControls,children:[(0,ce.jsx)("button",{style:cn.controlButton,onClick:L,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:g?.muted?pe.faMicrophoneSlash:pe.faMicrophone,size:"sm",color:g?.muted?"red":"green"})}),(0,ce.jsx)("button",{style:cn.controlButton,onClick:V,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:g?.videoOn?pe.faVideo:pe.faVideoSlash,size:"sm",color:g?.videoOn?"green":"red"})})]}):null}),M]})},ln=[474,433,407,458,400,427,441,419,487],un={card:{width:"100%",height:"100%",margin:0,padding:0,backgroundColor:"transparent",position:"relative"},imageContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},backgroundImage:{width:"80px",height:"80px"},overlayWeb:{position:"absolute",minWidth:"50%",minHeight:"5%",maxHeight:"100%",display:"grid",gridTemplateColumns:"4fr 2fr",gridGap:"3px"},overlayWebAlt:{position:"absolute",minWidth:"50%",minHeight:"5%",maxHeight:"100%",display:"grid",gridTemplateColumns:"4fr",gridGap:"0px",top:0,right:0},overlayControls:{display:"flex",flexDirection:"row",padding:0,position:"absolute",top:0,left:0},controlButton:{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.2)",padding:"0px 5px",marginRight:"2px",fontSize:"medium",border:"none",cursor:"pointer"},nameColumn:{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",padding:"0px",paddingTop:"5px",marginRight:"2px",fontSize:"small",textAlign:"center",minHeight:"4%",maxHeight:"70%"},nameText:{fontSize:"small",fontWeight:"bolder"},waveformWeb:{display:"flex",justifyContent:"left",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",padding:"0px",flexDirection:"row",minHeight:"4%",maxHeight:"70%"},waveformMobile:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",padding:"0px",marginLeft:"5px",maxWidth:"25%",margin:"0px"},bar:{flex:1,opacity:.75,margin:"0 1px",transition:"height 0.5s ease"}},pn=({controlUserMedia:e=k,customStyle:t,name:r,barColor:a="red",textColor:n="white",imageSource:o,roundedImage:s=!1,imageStyle:i,showControls:c=!0,showInfo:d=!0,videoInfoComponent:l,videoControlsComponent:u,controlsPosition:p="topLeft",infoPosition:m="topRight",participant:g,backgroundColor:h,parameters:f,cardProps:b,infoOverlayProps:y,nameContainerProps:x,nameTextProps:v,waveformContainerProps:S,waveformBarStyle:R,waveformBarProps:w,waveformHeights:C,waveformDurations:j,waveformBarCount:P,renderWaveformBar:M,controlsOverlayProps:I,controlButtonProps:A,audioEnabledIcon:T,audioDisabledIcon:D,videoEnabledIcon:N,videoDisabledIcon:L,fallbackMiniCardProps:V,imageProps:B,showWaveformWhenMuted:$=!1})=>{const E=(0,de.useMemo)(()=>j&&j.length>0?j:ln,[j]),W=P??E.length,[H,O]=(0,de.useState)(()=>Array.from({length:W},()=>0)),[z,U]=(0,de.useState)(!0),q=(0,de.useMemo)(()=>f.getUpdatedAllParams(),[f]);(0,de.useEffect)(()=>{O(Array.from({length:W},()=>0))},[W]);const _=(0,de.useCallback)(()=>f.getUpdatedAllParams(),[f]),G=(0,de.useCallback)(e=>{const t=E[E.length-1]??0;return 0===E.length?0:E[e]??t},[E]),Y=(0,de.useCallback)(()=>{O(Array.from({length:W},()=>0))},[W]),K=(0,de.useCallback)(e=>{O(t=>{const r=[...t];return e<r.length&&(r[e]=1),r});const t=G(e);t<=0?O(t=>{const r=[...t];return e<r.length&&(r[e]=0),r}):setTimeout(()=>{O(t=>{const r=[...t];return e<r.length&&(r[e]=0),r})},t)},[G]),J=(0,de.useCallback)(()=>{for(let e=0;e<W;e+=1)K(e)},[K,W]);(0,de.useEffect)(()=>{if(!z)return void Y();J();const e=setInterval(J,1e3);return()=>clearInterval(e)},[J,Y,z]),(0,de.useEffect)(()=>{g?.muted&&!$?(U(!1),Y()):U(!0)},[g?.muted,Y,$]),(0,de.useEffect)(()=>{const e=setInterval(()=>{const{audioDecibels:e,participants:t}=_(),a=e?.find(e=>e.name===r)??null,n=t?.find(e=>e.name===r)??null;a&&a.averageLoudness>127.5&&n&&!n.muted?z||U(!0):$||U(!1)},1e3);return()=>clearInterval(e)},[_,r,z,$]);const X=(0,de.useCallback)(async()=>{if(!g?.muted){const t=_();await e({participantId:g.id||"",participantName:g.name,type:"audio",socket:t.socket,coHostResponsibility:t.coHostResponsibility,roomName:t.roomName,showAlert:t.showAlert,coHost:t.coHost,islevel:t.islevel,member:t.member,participants:t.participants})}},[e,_,g?.id,g?.muted,g?.name]),Z=(0,de.useCallback)(async()=>{if(g?.videoOn){const t=_();await e({participantId:g.id||"",participantName:g.name,type:"video",socket:t.socket,coHostResponsibility:t.coHostResponsibility,roomName:t.roomName,showAlert:t.showAlert,coHost:t.coHost,islevel:t.islevel,member:t.member,participants:t.participants})}},[e,_,g?.id,g?.name,g?.videoOn]),{style:Q,...ee}=b??{},{style:te,...re}=y??{},{style:ae,...ne}=x??{},{style:oe,...se}=v??{},{style:ie,...me}=S??{},{style:ge,...he}=w??{},{style:fe,...be}=I??{},ye=B??{},{style:xe,...ve}=ye,Se=A?.audio??{},{style:Re,onClick:we,type:ke,...Ce}=Se,je=A?.video??{},{style:Pe,onClick:Me,type:Ie,...Ae}=je,{silent:Te=1,active:Fe=12}=C||{},De=(0,de.useCallback)(async e=>{we?.(e),e.defaultPrevented||await X()},[we,X]),Ne=(0,de.useCallback)(async e=>{Me?.(e),e.defaultPrevented||await Z()},[Z,Me]),Le=g?.muted?D??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophoneSlash,size:"sm",color:"red"}):T??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone,size:"sm",color:"green"}),Ve=g?.videoOn?N??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVideo,size:"sm",color:"green"}):L??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faVideoSlash,size:"sm",color:"red"}),Be=(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("button",{...Ce,type:ke??"button",onClick:De,style:{...un.controlButton,...Re??{}},children:Le}),(0,ce.jsx)("button",{...Ae,type:Ie??"button",onClick:Ne,style:{...un.controlButton,...Pe??{}},children:Ve})]}),$e={initials:r,fontSize:20,customStyle:{border:"broadcast"!==q.eventType?"2px solid black":"0px solid black"}},Ee={...$e,...V,customStyle:{...$e.customStyle,...V?.customStyle}},We=Array.from({length:W}).map((e,t)=>{const r=1===H[t],n=r?Fe:Te,o={...un.bar,...R??{},...ge??{},height:n,backgroundColor:a};if(M){const e=M({index:t,isActive:r,height:n,style:o,props:he});return le().isValidElement(e)?le().cloneElement(e,{key:t}):(0,ce.jsx)(le().Fragment,{children:e},t)}return(0,ce.jsx)("div",{...he,style:o},t)});return(0,ce.jsxs)("div",{...ee,style:{...un.card,...t,...Q??{},...h?{backgroundColor:h}:{}},children:[o?(0,ce.jsx)("div",{style:un.imageContainer,children:(0,ce.jsx)("img",{src:o,alt:"Participant",...ve,style:{...un.backgroundImage,...s?{borderRadius:"20%"}:{},...i,...xe??{}}})}):(0,ce.jsx)(sn,{...Ee}),l||d&&(0,ce.jsxs)("div",{...re,style:{...F({position:m}),...c?un.overlayWeb:un.overlayWebAlt,...te??{}},children:[(0,ce.jsx)("div",{...ne,style:{...un.nameColumn,...ae??{}},children:(0,ce.jsx)("p",{...se,style:{color:n,...un.nameText,...oe??{}},children:r})}),z&&(0,ce.jsx)("div",{...me,style:{...un.waveformWeb,...ie??{}},children:We})]}),u||c&&(0,ce.jsx)("div",{...be,style:{...un.overlayControls,...F({position:p}),...fe??{}},children:Be})]})};async function mn({name:e,parameters:t}){try{let{getUpdatedAllParams:r}=t;t=r();let{participants:a,allVideoStreams:n,islevel:o,member:s,shared:i,shareScreenStarted:c,eventType:d,screenId:l,forceFullDisplay:u,updateMainWindow:p,mainScreenFilled:m,adminOnMainScreen:g,mainScreenPerson:h,videoAlreadyOn:f,audioAlreadyOn:b,oldAllStreams:y,checkOrientation:x,screenForceFullDisplay:v,localStreamScreen:S,remoteScreenStream:R,localStreamVideo:w,mainHeightWidth:k,isWideScreen:C,localUIMode:j,whiteboardStarted:P,whiteboardEnded:M,virtualStream:I,keepBackground:A,annotateScreenStream:T,updateMainScreenPerson:F,updateMainScreenFilled:D,updateAdminOnMainScreen:N,updateMainHeightWidth:L,updateScreenForceFullDisplay:V,updateUpdateMainWindow:B,updateMainGridStream:$,isDarkModeValue:E,customVideoCard:W,customAudioCard:H,customMiniCard:O,videoCardComponent:z,audioCardComponent:U,miniCardComponent:q}=t;const _=E??!0,G=_?"white":"black",Y=_?"rgba(255, 255, 255, 0.2)":"black",K=_?"-dark":"-light",J=z??dn,X=U??pn,Z=q??sn,Q=({key:e,videoStream:r,remoteProducerId:a="",eventType:n,forceFullDisplay:o=!1,customStyle:s,participant:i,backgroundColor:c,showControls:d=!1,showInfo:l=!0,name:u="",doMirror:p=!1})=>{const m=`${e}${K}`;return W?le().createElement(W,{key:m,videoStream:r||new MediaStream,remoteProducerId:a,eventType:n,forceFullDisplay:o,customStyle:s,participant:i,backgroundColor:c,showControls:d,showInfo:l,name:u,doMirror:p,parameters:t,isDarkMode:_}):(0,ce.jsx)(J,{videoStream:r,remoteProducerId:a,eventType:n,forceFullDisplay:o,customStyle:s,participant:i,backgroundColor:c,showControls:d,showInfo:l,name:u,doMirror:p,parameters:t,isDarkMode:_},m)},ee=({key:e,name:r,barColor:a="red",textColor:n=G,customStyle:o,roundedImage:s=!0,backgroundColor:i="transparent",participant:c})=>{const d=`${e}${K}`;return H?le().createElement(H,{key:d,name:r,barColor:a,textColor:n,imageSource:"",roundedImage:s,imageStyle:{},parameters:t,isDarkMode:_}):(0,ce.jsx)(X,{name:r,barColor:a,textColor:n,customStyle:o,controlsPosition:"topLeft",infoPosition:"topRight",roundedImage:s,parameters:t,showControls:!1,backgroundColor:i,participant:c,isDarkMode:_},d)},te=({key:e,initials:r,fontSize:a=20,borderColor:n=("broadcast"!==d?`2px solid ${Y}`:"0px solid transparent")})=>{const o=`${e}${K}`;return O?le().createElement(O,{key:o,initials:r,fontSize:`${a}px`,name:r,showVideoIcon:!1,showAudioIcon:!1,imageSource:"",roundedImage:!0,imageStyle:{},parameters:t,isDarkMode:_}):(0,ce.jsx)(Z,{initials:r,fontSize:a,customStyle:{backgroundColor:"transparent",border:n},isDarkMode:_},o)};if("chat"==d)return;let re,ae=null,ne=[];if(c||i)"conference"==d?i||c?0==k&&L(84):L(0):84!=k&&L(84),v=u,V(v),"portrait"!=x()&&C||(c||i)&&(v=!1,V(v)),i?(ae={name:s,audioID:"",videoID:""},re=S,g="2"==o,N(g),h=ae.name||"",F(h)):(ae=a.find(e=>e.ScreenID==l&&1==e.ScreenOn)??null,P&&!M&&(ae={name:"WhiteboardActive",islevel:"2",audioID:"",videoID:""},re={producerId:"WhiteboardActive"}),null==ae&&(ae=a.find(e=>1==e.ScreenOn)??null),null==ae||ae?.name.includes("WhiteboardActive")||(re=0==R.length?n.find(e=>e.producerId==ae?.ScreenID)??null:R[0]),g=(ae&&"2"==ae.islevel)??!1,N(g),h=ae?.name??"",F(h));else{if("conference"==d)return;ae=a.find(e=>"2"==e.islevel)??null,h=ae?.name??"",F(h)}if(ae){if(c||i)return u=v,P&&!M||ne.push(Q({key:ae.ScreenID||ae.name||"host-screen",videoStream:i?re:re.stream??null,remoteProducerId:ae.ScreenID||"",eventType:d,forceFullDisplay:(!T||!i)&&u,customStyle:{border:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"},participant:ae,backgroundColor:"transparent",showControls:!1,showInfo:!0,name:ae.name||"",doMirror:!1})),$(ne),m=!0,D(m),g="2"==ae.islevel,N(g),h=ae.name??"",F(h),ne;if(("2"==o||ae.videoOn)&&("2"!=o||ae.videoOn&&f)&&1!=j)if(c||i)if(P&&!M);else try{ne.push(Q({key:ae.ScreenID||ae.name||"host-screen",videoStream:i?re:re.stream??null,remoteProducerId:ae.ScreenID||"",eventType:d,forceFullDisplay:u,customStyle:{border:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"},participant:ae,backgroundColor:"transparent",showControls:!1,showInfo:!0,name:ae.name||"",doMirror:!1})),$(ne),m=!0,D(m),g="2"==ae.islevel,N(g),h=ae.name??"",F(h)}catch{}else{let t;"2"==o?ae.stream=A&&I?I:w:(t=y.find(e=>e.producerId==ae.videoID),ae.stream=t&&t.stream);try{ae.stream?(ne.push(Q({key:ae.videoID||ae.name||"host-video",videoStream:ae.stream||null,remoteProducerId:ae.videoID||"",eventType:d,forceFullDisplay:u,customStyle:{border:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"},participant:ae,backgroundColor:"transparent",showControls:!1,showInfo:!0,name:ae.name||"",doMirror:s==ae.name})),$(ne),m=!0,g="2"==ae.islevel,h=ae.name??""):(ne.push(te({key:e,initials:e,fontSize:20,borderColor:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"})),$(ne),m=!1,g="2"==o,h=ae.name??""),D(m),N(g),F(h)}catch{}}else if("2"==o&&f)ne.push(Q({key:ae.videoID||ae.name||"host-video",videoStream:A&&I?I:w,remoteProducerId:ae.videoID||"",eventType:d,forceFullDisplay:u,customStyle:{border:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"},participant:ae,backgroundColor:"transparent",showControls:!1,showInfo:!0,name:ae.name||"",doMirror:!0})),$(ne),m=!0,D(m),g=!0,N(g),h=ae.name??"",F(h);else{let t;if("2"==o&&b?t=!0:null!=ae&&"2"!=o&&(t=0==ae.muted),t){try{const t=ee({key:ae.name||e,name:ae.name||"",barColor:"red",textColor:G,customStyle:{backgroundColor:"transparent",border:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"},roundedImage:!0,backgroundColor:"transparent",participant:ae});ne.push(t),$(ne)}catch{}m=!0,D(m),g="2"==o,N(g),h=ae.name??"",F(h)}else{try{const t=te({key:e,initials:e,fontSize:20,borderColor:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"});ne.push(t),$(ne)}catch{}m=!1,D(m),g="2"==o,N(g),h=ae.name??"",F(h)}}}else try{ne.push(te({key:e,initials:e,fontSize:20,borderColor:"broadcast"!==d?`2px solid ${Y}`:"0px solid transparent"})),$(ne),m=!1,g=!1,h="",D(m),N(g),F(h)}catch{}return p=!1,B(p),ne}catch{}}async function gn({participants:e,allVideoStreams:t,oldAllStreams:r,adminVidID:a,updateAllVideoStreams:n,updateOldAllStreams:o}){try{let s=e.filter(e=>"2"===e.islevel);if(s.length>0&&null!=(a=s[0].videoID)&&""!==a){let e=[];r.length>0&&(e=r),(r=t.filter(e=>e.producerId===a)).length<1&&(r=e),o(r),n(t=t.filter(e=>e.producerId!==a))}}catch(e){console.log("Error updating video streams:",e.message)}}async function hn({restart:e=!1,parameters:t}){const{getUpdatedAllParams:r}=t;t=r();try{const{islevel:r,mainScreenPerson:a,adminOnMainScreen:n,mainScreenFilled:o,recordStarted:s,recordStopped:i,recordPaused:c,recordResumed:d,screenStates:l,updateScreenStates:u,updatePrevScreenStates:p,compareActiveNames:m,compareScreenStates:g}=t;if(s||d)if(i||c);else if("2"===r){if(p([...l]),u([{mainScreenPerson:a,adminOnMainScreen:n,mainScreenFilled:o}]),e)return void await m({restart:e,parameters:t});await m({restart:e,parameters:t}),await g({restart:e,parameters:t})}}catch(e){console.log("Error during rePorting: ",e)}}async function fn({ref_ActiveNames:e,parameters:t}){try{t=t.getUpdatedAllParams();let{socket:r,localSocket:a,roomName:n,screenStates:o,participants:s,updateDateState:i,lastUpdate:c,nForReadjust:d,eventType:l,shared:u,shareScreenStarted:p,whiteboardStarted:m,whiteboardEnded:g,updateUpdateDateState:h,updateLastUpdate:f,updateNForReadjust:b,autoAdjust:y}=t,x=r;a&&a.id&&(x=a);let v=o[0].mainScreenPerson,S="";const R=s.filter(e=>"2"==e.islevel);R.length>0&&(S=R[0].name||""),"WhiteboardActive"===v&&(v=S);let w,k,C=o[0].mainScreenFilled,j=o[0].adminOnMainScreen,P=(new Date).getTime(),M=Math.floor(P/1e3),I=!1;if("conference"!=l||u||p||(I=!0,v=S,e.includes(S)||e.unshift(S)),C&&null!=v&&j||I){if("conference"==l&&(d+=1,b(d)),e.includes(S)||!m||g||e.unshift(S),w=e.length,0==w&&"webinar"==l)k=0;else{const[e]=await y({n:w,eventType:l,shared:u,shareScreenStarted:p});k=e}let t=100-Math.floor(k/12*100);if(null==c||i!=M){let r=new Date;x.emit("updateScreenClient",{roomName:n,names:e,mainPercent:t,mainScreenPerson:v,viewType:l},({success:e,reason:t})=>{i=M,h(i),c=Math.floor(r.getTime()/1e3),f(c),e||console.log(t,"updateScreenClient failed")})}}else if(C&&null!=v&&!j){w=e.length,e.includes(S)||e.unshift(S);const[t]=await y({n:w,eventType:l,shared:u,shareScreenStarted:p});k=t;const r=100-Math.floor(k/12*100);if(null==c||i!==M){let t=new Date;x.emit("updateScreenClient",{roomName:n,names:e,mainPercent:r,mainScreenPerson:v,viewType:l},({success:e,reason:r})=>{i=M,h(i),c=Math.floor(t.getTime()/1e3),f(c),e||console.log(r,"updateScreenClient failed")})}}else console.log("trigger stopRecording")}catch(e){console.log("Error triggering updateScreen:",e)}}const bn={container:{display:"flex",justifyContent:"center",alignItems:"center",zIndex:9}},yn=({stream:e,remoteProducerId:t,consumer:r,parameters:a,MiniAudioComponent:n,miniAudioProps:o})=>{const{getUpdatedAllParams:s}=a;a=s();let{reUpdateInter:i,updateParticipantAudioDecibels:c,breakOutRoomStarted:d,breakOutRoomEnded:l,limitedBreakRoom:u}=a;const p=a.miniAudioComponent,m=n??p,[g,h]=(0,de.useState)(!1),[f,b]=(0,de.useState)(!1),y=(0,de.useRef)(!1);return(0,de.useEffect)(()=>{if(e){let e=!1,a=128;const n=setInterval(()=>{try{const e=r.rtpReceiver;e?.getStats().then(e=>{e.forEach(e=>{"inbound-rtp"===e.type&&"audio"===e.kind&&e.audioLevel&&(a=127.5+127.5*e.audioLevel)})})}catch{}const n=s();let{eventType:o,meetingDisplayType:p,shared:m,shareScreenStarted:g,dispActiveNames:f,adminNameStream:x,participants:v,activeSounds:S,autoWave:R,updateActiveSounds:w,paginatedStreams:k,currentUserPage:C}=n;const j=v.find(e=>e.audioID===t);let P=!0;if(j&&d&&!l&&j.name&&!u.map(e=>e.name).includes(j.name)&&(P=!1),"video"!==p&&(y.current=!0),(m||g)&&(y.current=!1),j){b(j.muted??!1),"chat"!==o&&"broadcast"!==o&&c({name:j.name??"",averageLoudness:a,audioDecibels:n.audioDecibels,updateAudioDecibels:n.updateAudioDecibels});const t=k[C]?.findIndex(e=>e.name===j.name)??-1;if(j.name&&!f.includes(j.name)&&-1==t){if(y.current=!1,!x){const e=v.find(e=>"2"==e.islevel);x=e?e.name:""}j.name==x&&(y.current=!0)}else y.current=!0;j.videoID||y.current||d&&!l&&P?(h(!1),a>127.5?j.name&&!S.includes(j.name)&&(S.push(j.name),e=!1,(!g&&!m||j.videoID)&&"chat"!==o&&"broadcast"!==o&&j.name&&i({name:j.name??"",add:!0,average:a,parameters:n})):j.name&&S.includes(j.name)&&e?(S.splice(S.indexOf(j.name),1),(!g&&!m||j.videoID)&&"chat"!==o&&"broadcast"!==o&&j.name&&i({name:j.name??"",average:a,parameters:n})):e=!0):a>127.5?(h(!!R),j.name&&!S.includes(j.name)&&S.push(j.name),(!g&&!m||j.videoID)&&"chat"!=o&&"broadcast"!=o&&j.name&&i({name:j.name,add:!0,average:a,parameters:n})):(h(!1),j.name&&S.includes(j.name)&&S.splice(S.indexOf(j.name),1),(!g&&!m||j.videoID)&&"chat"!=o&&"broadcast"!=o&&j.name&&i({name:j.name,average:a,parameters:n})),w(S)}else h(!1),b(!0)},2e3);return()=>clearInterval(n)}},[e]),(0,ce.jsxs)("div",{style:bn.container,children:[e&&(0,ce.jsx)("audio",{autoPlay:!0,ref:t=>{t&&(t.srcObject=e,t.play().catch(()=>{}))}}),(()=>{if(m){const e=m;return(0,ce.jsx)(e,{showWaveform:g,visible:g&&!f,...o})}return null})()]})},xn=async({track:e,remoteProducerId:t,params:r,parameters:a,nsock:n,consumer:o})=>{try{a=a.getUpdatedAllParams();let{nStream:s,allAudioStreams:i,allVideoStreams:c,streamNames:d,audStreamNames:l,updateMainWindow:u,shared:p,shareScreenStarted:m,screenId:g,participants:h,eventType:f,meetingDisplayType:b,mainScreenFilled:y,first_round:x,lock_screen:v,oldAllStreams:S,adminVidID:R,mainHeightWidth:w,member:k,audioOnlyStreams:C,gotAllVids:j,defer_receive:P,firstAll:M,remoteScreenStream:I,hostLabel:A,whiteboardStarted:T,whiteboardEnded:F,updateUpdateMainWindow:D,updateAllAudioStreams:N,updateAllVideoStreams:L,updateStreamNames:V,updateAudStreamNames:B,updateNStream:$,updateMainHeightWidth:E,updateLock_screen:W,updateFirstAll:H,updateRemoteScreenStream:O,updateOldAllStreams:z,updateAudioOnlyStreams:U,updateShareScreenStarted:q,updateGotAllVids:_,updateScreenId:G,updateDefer_receive:Y,reorderStreams:K,prepopulateUserMedia:J,miniAudioComponent:X,miniAudioPlayerComponent:Z}=a;const Q=X??jt,ee=Z??yn;if("audio"===r.kind){const r=a.activeTranslationProducerIds,n=r?.has(t)||"translation"===o.appData?.type||o.appData?.isTranslation;let c=h.filter(e=>e.audioID===t),d=c.length>0&&c[0].name||"";if(d===k&&!n)return;if(n&&!d){const e=o.appData?.translationMeta;d=e?.speakerName||`Translation-${t.slice(0,8)}`}if(d===k&&!n)return;let f=h.filter(e=>null!=e.ScreenID&&1==e.ScreenOn&&""!=e.ScreenID);if(f.length>0?(g=f[0].ScreenID,G(g),p||(m=!0,q(m))):T&&!F||(g="",G(g),q(!1)),s=new MediaStream([e]),$(s),n){const e=a.addTranslationStream,r=(0,ce.jsx)("audio",{autoPlay:!0,ref:e=>{e&&s&&(e.srcObject=s,e.play().then(()=>{}).catch(e=>{console.error("[consumerResume] Translation audio play error:",e)}))}},`translation-${t}`);return e?e(r):console.warn("[consumerResume] addTranslationStream is not available!"),i=[...i,{producerId:t,stream:s}],N(i),l=[...l,{producerId:t,name:d}],void B(l)}let x,v,S=(0,ce.jsx)(ee,{stream:s,remoteProducerId:t,parameters:a,consumer:o,MiniAudioComponent:Q,miniAudioProps:{customStyle:{backgroundColor:"gray"},name:d,showWaveform:!0,overlayPosition:"topRight",barColor:"white",textColor:"white",imageSource:"https://mediasfu.com/images/logo192.png",roundedImage:!0,imageStyle:{}}});C.push(S),U(C),i=[...i,{producerId:t,stream:s}],N(i);try{x=c[0].name}catch{x=""}if(!x)return;l=[...l,{producerId:t,name:d}],B(l),y||"2"!==c[0].islevel||(u=!0,D(u),await J({name:A,parameters:{...a,audStreamNames:l,allAudioStreams:i}}),u=!1,D(u));let R=!1;"video"==b?v=null!=c[0].videoID&&""!=c[0].videoID&&null!=c[0].videoID:(v=!0,R=!0),v&&(m||p?R||await K({parameters:{...a,audStreamNames:l,allAudioStreams:i}}):R&&"video"!=b&&await K({add:!1,screenChanged:!0,parameters:{...a,audStreamNames:l,allAudioStreams:i}}))}else{s=new MediaStream([e]),$(s);let r=h.filter(e=>null!=e.ScreenID&&1==e.ScreenOn&&""!=e.ScreenID);if(r.length>0?(g=r[0].ScreenID,G(g),p||(m=!0,q(m))):T&&!F||(g="",G(g),q(!1)),t==g)u=!0,D(u),I=[{producerId:t,stream:s}],O(I),"conference"==f&&(p||m?0==w&&E(84):w>0&&E(0)),v?x||(await J({name:A,parameters:{...a,remoteScreenStream:I,allVideoStreams:c}}),await K({add:!1,screenChanged:!0,parameters:{...a,remoteScreenStream:I,allVideoStreams:c}})):(await J({name:A,parameters:a}),await K({add:!1,screenChanged:!0,parameters:{...a,remoteScreenStream:I,allVideoStreams:c}})),v=!0,W(v),M=!0,H(M);else{a=a.getUpdatedAllParams();let e=h.filter(e=>e.videoID==t);if(e.length>0&&null!=e[0].name&&""!=e[0].name&&null!=e[0].name&&e[0].name!==k&&(c=[...c,{producerId:t,stream:s,socket_:n}],L(c)),e.length>0){let r=e[0].name;d=[...d,{producerId:t,name:r||""}],V(d)}if(m){let e,r,n=h.filter(e=>e.ScreenID==g);if(n.length>0&&(r=n[0].videoID),(null!=e&&""!=e||null!=r&&""!=r)&&(e==t||r==t))return void await K({parameters:{...a,allVideoStreams:c}})}else{let e=h.filter(e=>(1==e.isAdmin||1==e.isHost)&&"2"==e.islevel);if(e.length>0){if(R=e[0].videoID,null!=R&&""!=R){let e=[];S.length>0&&(e=S),S=c.filter(e=>e.producerId==R),z(S),S.length<1&&(S=e,z(S)),c=c.filter(e=>e.producerId!=R),L(c),t==R&&(u=!0)}j=!0,_(j)}}v||p?(P=!0,Y(P),x||await K({add:!1,screenChanged:!0,parameters:{...a,allVideoStreams:c}})):await K({add:!1,screenChanged:!0,parameters:{...a,allVideoStreams:c}})}}}catch(e){console.log("consumerResume error",e)}},vn=async({videoParams:e,parameters:t,targetOption:r="all"})=>{try{let{videoProducer:a,producerTransport:n,islevel:o,updateMainWindow:s,updateVideoProducer:i,updateProducerTransport:c,updateUpdateMainWindow:d}=t;if("all"!==r&&"remote"!==r||(a=await n.produce(e),"2"===o&&(s=!0),i(a),c(n),d(s)),"all"===r||"local"===r)try{await(async({videoParams:e,parameters:t})=>{try{let{localVideoProducer:r,localProducerTransport:a,updateLocalVideoProducer:n,updateLocalProducerTransport:o}=t;a&&(r=await a.produce(e),n?.(r),o?.(a))}catch(e){throw console.error("Error connecting local video transport:",e),e}})({videoParams:e,parameters:t})}catch(e){console.log("Error connecting local video transport:",e)}}catch(e){throw console.log("connectSendTransportVideo error",e),e}},Sn=async({stream:e,parameters:t,targetOption:r="all"})=>{try{let{screenProducer:a,device:n,screenParams:o,producerTransport:s,params:i,updateScreenProducer:c,updateProducerTransport:d}=t;n=t.getUpdatedAllParams().device,i=o;const l=n?.rtpCapabilities?.codecs?.find(e=>"video/vp9"===e.mimeType.toLowerCase());if("remote"!==r&&"all"!==r||(a=await s.produce({track:e.getVideoTracks()[0],...i,codec:l,appData:{mediaTag:"screen-video"}}),c(a),d(s)),"local"===r||"all"===r)try{await(async({stream:e,parameters:t})=>{try{let{localScreenProducer:r,localProducerTransport:a,updateLocalScreenProducer:n,updateLocalProducerTransport:o,device:s}=t;const i=s?.rtpCapabilities?.codecs?.find(e=>"video/vp9"===e.mimeType.toLowerCase());a&&(r=await a.produce({track:e.getVideoTracks()[0],codec:i,appData:{mediaTag:"screen-video"}}),n?.(r),o?.(a))}catch(e){throw console.error("Error connecting local screen transport:",e),e}})({stream:e,parameters:t})}catch(e){console.log("Error connecting local screen transport:",e)}}catch(e){throw console.log("connectSendTransportScreen error",e),e}};async function Rn({consumerTransports:e,lStreams_:t,parameters:r}){try{r=r.getUpdatedAllParams();const{remoteScreenStream:a,oldAllStreams:n,newLimitedStreams:o,sleep:s}=r;function i(e,...t){return null!==e&&""!==e&&t.some(t=>t.length>0&&t.some(t=>t?.producerId===e))}const c=e.filter(e=>i(e.producerId,t,a,n,o)&&!0===e.consumer?.paused&&"audio"!==e.consumer.kind),d=e.filter(e=>e.producerId&&null!==e.producerId&&""!==e.producerId&&!t.some(t=>t.producerId===e.producerId)&&e.consumer&&e.consumer.kind&&!0!==e.consumer.paused&&"audio"!==e.consumer.kind&&!a.some(t=>t.producerId===e.producerId)&&!n.some(t=>t.producerId===e.producerId)&&!o.some(t=>t.producerId===e.producerId));await s({ms:100});for(const l of d)l.consumer.pause(),l.socket_.emit("consumer-pause",{serverConsumerId:l.serverConsumerTransportId},async()=>{});for(const u of c)u.socket_.emit("consumer-resume",{serverConsumerId:u.serverConsumerTransportId},async({resumed:e})=>{e&&u.consumer.resume()})}catch(p){p instanceof Error?console.error(`Error processing consumer transports: ${p.message}`):console.error("Error processing consumer transports:",p)}}async function wn({parameters:e}){try{const{participants:t,dispActiveNames:r,consumerTransports:a,screenId:n,islevel:o}=e,s=t.find(e=>"2"===e.islevel),i=s?s.videoID:null,c=r.map(e=>{const r=t.find(t=>t.name===e);return r?r.videoID:null});n&&c.push(n),"2"!==o&&i&&c.push(i);const d=c.filter(e=>null!==e&&""!==e);if(d.length>0){const e=a.filter(e=>d.includes(e.producerId)&&"audio"!==e.consumer.kind);for(const t of e)t.socket_.emit("consumer-resume",{serverConsumerId:t.serverConsumerTransportId},async({resumed:e})=>{e&&t.consumer.resume()})}}catch(e){console.log("Error during resuming or pausing streams: ",e)}}async function kn({n:e,state:t,parameters:r}){let{getUpdatedAllParams:a}=r;r=a();try{let{eventType:a,shareScreenStarted:n,shared:o,mainHeightWidth:s,prevMainHeightWidth:i,hostLabel:c,first_round:d,lock_screen:l,updateMainHeightWidth:u,prepopulateUserMedia:p}=r;0===t&&(i=s);let m=6,g=12-m,h=Math.floor(m/12*100),f=100-h;"broadcast"===a?(m=0,g=12-m,0===e&&(m=0,g=12-m)):"chat"===a||"conference"===a&&!n&&!o?(m=12,g=12-m):n||o?(g=10,m=12-g):0===e?(m=1,g=12-m):e>=1&&e<4?(m=4,g=12-m):e>=4&&e<6||e>=6&&e<9||e>=9&&e<12?(m=6,g=12-m):e>=12&&e<20||e>=20&&e<50?(m=8,g=12-m):(m=10,g=12-m),0===t&&(s=g),h=Math.floor(m/12*100),f=100-h,u(f),i!==s&&((l||o)&&d||await p({name:c,parameters:r}))}catch(e){e instanceof Error?console.log("Error updating grid sizes:",e.message):console.log("Error updating grid sizes:",e)}}async function Cn({rows:e,cols:t,actives:r}){try{let a=0,n=0,o=0,s=0,i=0,c=0,d=0,l=!1;if(e*t!==r){if(e*t>r){const u=r-(e-1)*t;.5*t<u?(o=e,s=u,i=s):(s=u+t,o=e-1,i=s),a=o-1,n=t,c=(o-1)*n,d=o,l=!1}}else n=t,a=e,o=e,s=t,i=0,c=o*n,d=o,l=!0;return[l,c,a,n,i,d,s]}catch(e){console.log("checkGrid error",e)}}function jn({n:e,parameters:t}){try{let{fixedPageLimit:r,screenPageLimit:a,shareScreenStarted:n,shared:o,eventType:s,removeAltGrid:i,isWideScreen:c,isMediumScreen:d,updateRemoveAltGrid:l,calculateRowsAndColumns:u}=t;const[p,m]=u({n:e});return e<r||(n||o)&&e<a+1?(i=!0,l(i),d||c?"chat"===s||"conference"===s&&!n&&!o?[e,1,e]:[e,e,1]:"chat"===s||"conference"===s&&!n&&!o?[e,e,1]:[e,1,e]):[p*m,p,m]}catch(e){return e instanceof Error?console.log("Error estimating rows and columns:",e.message):console.log("Error estimating rows and columns:",e),[0,0,0]}}function Pn({n:e}){const t=Math.sqrt(e);let r=Math.floor(t),a=Math.ceil(e/r),n=a*r;for(;n<e;)r<a?r++:a++,n=a*r;return[a,r]}async function Mn({mainGridStreams:e,altGridStreams:t,numtoadd:r,numRows:a,numCols:n,actualRows:o,lastrowcols:s,removeAltGrid:i,parameters:c}){let{getUpdatedAllParams:d}=c;c=d();let{eventType:l,updateAddAltGrid:u,ref_participants:p,islevel:m,videoAlreadyOn:g,localStreamVideo:h,keepBackground:f,virtualStream:b,forceFullDisplay:y,otherGridStreams:x,updateOtherGridStreams:v,updateMiniCardsGrid:S,isDarkModeValue:R,selfViewForceFull:w,updateSelfViewForceFull:k,customVideoCard:C,customAudioCard:j,customMiniCard:P,videoCardComponent:M,audioCardComponent:I,miniCardComponent:A}=c;const T=R??!0,F=T?"white":"black",D=T?"rgba(255, 255, 255, 0.2)":"black",N=T?"-dark":"-light",L=M??dn,V=I??pn,B=A??sn;let $,E=[[],[]],W="";r=e.length,i&&u(!1);for(let t=0;t<r;t++){if($=e[t],W=$.producerId,W&&""!==W)if("youyou"===W||"youyouyou"===W){let e="You";if("2"===m&&"chat"!==l&&(e="You (Host)"),g){$={id:"youyouyou",stream:f&&b?b:h,name:"youyouyou"};const e=!w&&"webinar"!==l&&y,t=C?le().createElement(C,{key:`video-you${N}`,videoStream:$.stream||new MediaStream,remoteProducerId:$.stream?.id||"",eventType:l,forceFullDisplay:e,customStyle:{border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},participant:$,backgroundColor:"transparent",showControls:!1,showInfo:!1,name:$.name,doMirror:!0,parameters:c,isDarkMode:T,onToggleSelfViewFit:k?async()=>{await k(!w)}:void 0}):(0,ce.jsx)(L,{videoStream:$.stream||new MediaStream,remoteProducerId:$.stream?.id||"",eventType:l,forceFullDisplay:e,customStyle:{border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},participant:$,backgroundColor:"transparent",showControls:!1,showInfo:!1,name:$.name,doMirror:!0,parameters:c,isDarkMode:T,onToggleSelfViewFit:k?async()=>{await k(!w)}:void 0},`video-you${N}`);E[0].push(t)}else{const t=P?le().createElement(P,{key:`mini-you${N}`,initials:e,fontSize:20,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},isDarkMode:T}):(0,ce.jsx)(B,{initials:e,fontSize:20,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},isDarkMode:T},`mini-you${N}`);E[0].push(t)}}else{const e=p.find(e=>e.videoID===W);if(e){const t=C?le().createElement(C,{key:`video-${e.id}${N}`,videoStream:$.stream||new MediaStream,remoteProducerId:W||"",eventType:l,forceFullDisplay:y,customStyle:{border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},participant:e,backgroundColor:"transparent",showControls:"chat"!==l,showInfo:!0,name:e.name||"",doMirror:!1,parameters:c,isDarkMode:T}):(0,ce.jsx)(L,{videoStream:$.stream||new MediaStream,remoteProducerId:W||"",eventType:l,forceFullDisplay:y,customStyle:{border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},participant:e,backgroundColor:"transparent",showControls:"chat"!==l,showInfo:!0,name:e.name||"",doMirror:!1,parameters:c,isDarkMode:T},`video-${e.id}${N}`);E[0].push(t)}}else if(W=$.name,$.audioID){const e=j?le().createElement(j,{key:`audio-${$.id}${N}`,name:$.name||"",barColor:"red",textColor:F,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},controlsPosition:"topLeft",infoPosition:"topRight",roundedImage:!0,parameters:c,backgroundColor:"transparent",showControls:"chat"!==l,participant:$,isDarkMode:T}):(0,ce.jsx)(V,{name:$.name||"",barColor:"red",textColor:F,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},controlsPosition:"topLeft",infoPosition:"topRight",roundedImage:!0,parameters:c,backgroundColor:"transparent",showControls:"chat"!==l,participant:$,isDarkMode:T},`audio-${$.id}${N}`);E[0].push(e)}else{const e=P?le().createElement(P,{key:`mini-${$.id}${N}`,initials:$.name,fontSize:20,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},isDarkMode:T}):(0,ce.jsx)(B,{initials:$.name,fontSize:20,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},isDarkMode:T},`mini-${$.id}${N}`);E[0].push(e)}if(t===r-1){const e=[...x];e[0]=E[0],await S({rows:a,cols:n,defal:!0,actualRows:o,parameters:c}),v(e),x=e,await S({rows:a,cols:n,defal:!0,actualRows:o,parameters:c})}}if(i){u(!1);const e=[...x];e[1]=[],await S({rows:0,cols:0,defal:!1,actualRows:o,parameters:c}),v(e),x=e,await S({rows:a,cols:n,defal:!0,actualRows:o,parameters:c})}else for(let e=0;e<t.length;e++){if($=t[e],W=$.producerId,W&&""!==W){const e=p.find(e=>e.videoID===W);if(e){const t=C?le().createElement(C,{key:`video-alt-${e.id}${N}`,videoStream:$.stream||new MediaStream,remoteProducerId:W||"",eventType:l,forceFullDisplay:y,customStyle:{border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},participant:e,backgroundColor:"transparent",showControls:"chat"!==l,showInfo:!0,name:$.name,doMirror:!1,parameters:c,isDarkMode:T}):(0,ce.jsx)(L,{videoStream:$.stream||new MediaStream,remoteProducerId:W||"",eventType:l,forceFullDisplay:y,customStyle:{border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},participant:e,backgroundColor:"transparent",showControls:"chat"!==l,showInfo:!0,name:$.name,doMirror:!1,parameters:c,isDarkMode:T},`video-alt-${e.id}${N}`);E[1].push(t)}}else if($.audioID){const e=j?le().createElement(j,{key:`audio-alt-${$.id}${N}`,name:$.name,barColor:"red",textColor:F,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},controlsPosition:"topLeft",infoPosition:"topRight",roundedImage:!0,parameters:c,backgroundColor:"transparent",showControls:"chat"!==l,participant:$,isDarkMode:T}):(0,ce.jsx)(V,{name:$.name,barColor:"red",textColor:F,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},controlsPosition:"topLeft",infoPosition:"topRight",roundedImage:!0,parameters:c,backgroundColor:"transparent",showControls:"chat"!==l,participant:$,isDarkMode:T},`audio-alt-${$.id}${N}`);E[1].push(e)}else{const e=P?le().createElement(P,{key:`mini-alt-${$.id}${N}`,initials:$.name,fontSize:20,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},isDarkMode:T}):(0,ce.jsx)(B,{initials:$.name,fontSize:20,customStyle:{backgroundColor:"transparent",border:"broadcast"!==l?`2px solid ${D}`:"0px solid transparent"},isDarkMode:T},`mini-alt-${$.id}${N}`);E[1].push(e)}if(e===t.length-1){const e=[...x];e[1]=E[1],await S({rows:1,cols:s,defal:!1,actualRows:o,parameters:c}),v(e),x=e,await S({rows:a,cols:n,defal:!0,actualRows:o,parameters:c})}}}async function In({changed:e,parameters:t}){try{let{eventType:r,shareScreenStarted:a,shared:n,addForBasic:o,updateMainHeightWidth:s,updateAddForBasic:i,itemPageLimit:c,updateItemPageLimit:d,reorderStreams:l}=t;o=!1,i(o),"broadcast"===r||"chat"===r?(o=!0,i(o),c="broadcast"===r?1:2,d(c),s("broadcast"===r?100:0)):"conference"!==r||a||n||s(0),await l({add:!1,screenChanged:e,parameters:t})}catch(e){console.log("Error handling screen changes:",e.message)}}function An({ms:e}){return new Promise(t=>setTimeout(t,e))}const Tn=async({screenChanged:e=!1,parameters:t})=>{let{getUpdatedAllParams:r}=t;t=r();let{allVideoStreams:a,p_activeNames:n,activeNames:o,dispActiveNames:s,shareScreenStarted:i,shared:c,newLimitedStreams:d,non_alVideoStreams:l,ref_participants:u,participants:p,eventType:m,islevel:g,member:h,sortAudioLoudness:f,audioDecibels:b,mixed_alVideoStreams:y,non_alVideoStreams_muted:x,remoteProducerId:v,localStreamVideo:S,oldAllStreams:R,screenPageLimit:w,meetingDisplayType:k,meetingVideoOptimized:C,recordingVideoOptimized:j,recordingDisplayType:P,paginatedStreams:M,itemPageLimit:I,doPaginate:A,prevDoPaginate:T,currentUserPage:F,breakoutRooms:D,hostNewRoom:N,breakOutRoomStarted:L,breakOutRoomEnded:V,virtualStream:B,mainRoomsLength:$,memberRoom:E,panelists:W,panelistsFocused:H,updateP_activeNames:O,updateActiveNames:z,updateDispActiveNames:U,updateNewLimitedStreams:q,updateNon_alVideoStreams:_,updateRef_participants:G,updateSortAudioLoudness:Y,updateMixed_alVideoStreams:K,updateNon_alVideoStreams_muted:J,updatePaginatedStreams:X,updateDoPaginate:Z,updatePrevDoPaginate:Q,updateCurrentUserPage:ee,updateNumberPages:te,updateMainRoomsLength:re,updateMemberRoom:ae,mixStreams:ne,dispStreams:oe}=t;try{let r,se=[...a];n=[...o],(i||c)&&(se=[...d],o=[]),o=[],s=[],u=p;let ie=se;if(await Promise.all(ie.map(async e=>{u.find(t=>t.videoID===e.producerId)||"youyou"===e.producerId||"youyouyou"===e.producerId||(se=se.filter(t=>t.producerId!==e.producerId))})),"broadcast"!==m&&"chat"!==m||(f=!1),i||c)l=[],x=[],y=[];else{if(se.length>w){se=se.filter(e=>"youyou"!==e.producerId&&"youyouyou"!==e.producerId),u=u.sort((e,t)=>(e.muted??!1)>(t.muted??!1)?1:-1);let e=[];await Promise.all(u.map(t=>{let r=se.find(e=>e.producerId===t.videoID);r&&e.push(r)})),se=e;let t=a.find(e=>"youyou"===e.producerId);if(t)se.unshift(t);else{let e=a.find(e=>"youyouyou"===e.producerId);se.unshift(e)}}const e=p.filter(e=>"2"===e.islevel);let t="";e.length>0&&(t=e[0].name||""),l=[],await Promise.all(u.map(async e=>{let r=se.find(t=>t.producerId===e.videoID);"chat"!==m&&"conference"!==m?r||e.name===h||e.muted||e.name===t||l.push(e):r||e.name===h||e.muted||l.push(e)})),f&&(l.sort((e,t)=>{const r=b.find(t=>t.name===e.name)?.averageLoudness||127;return(b.find(e=>e.name===t.name)?.averageLoudness||127)-r}),"video"===k&&C&&j&&"video"===P||(y=await ne({alVideoStreams:se,non_alVideoStreams:l,ref_participants:u}))),x=[],await Promise.all(u.map(async e=>{let r=se.find(t=>t.producerId===e.videoID);"chat"!==m&&"conference"!==m?!r&&e.name!==h&&e.muted&&e.name!==t&&x.push(e):!r&&e.name!==h&&e.muted&&x.push(e)}))}if("conference"===m&&"2"!==g){let e=p.find(e=>"2"===e.islevel);e&&(v=e.videoID,"2"===g?e.stream=B||S:se.find(e=>e.producerId===v)||(r=R.find(e=>e.producerId===v),r?(se=se.filter(t=>t.producerId!==e.videoID),l=l.filter(t=>t.name!==e.name),x=x.filter(t=>t.name!==e.name),f?(y=y.filter(t=>t.name!==e.name),x=x.filter(t=>t.name!==e.name),"video"==k&&C?se.unshift(r):y.unshift(r)):se.unshift(r)):await Promise.all(u.map(async t=>{if(se.find(r=>r.producerId==t.videoID&&t.name==e.name)){if(!f)return l=l.filter(t=>t.name!==e.name),void l.unshift(t);y=y.filter(t=>t.name!==e.name),x=x.filter(t=>t.name!==e.name),y.unshift(t)}}))))}let ce=[];if(f?"video"===k?ce=C?[...se]:[...y]:"media"===k?ce=[...y]:"all"===k&&(ce=[...y,...x]):"video"===k?ce=[...se]:"media"===k?ce=[...se,...l]:"all"===k&&(ce=[...se,...l,...x]),!L||V)if(H&&W&&W.length>0){const e=new Set(W.map(e=>e.id));ce=ce.filter(t=>{if("youyou"===t.producerId||"youyouyou"===t.producerId)return!0;const r=u.find(e=>e.videoID===t.producerId||e.audioID===t.producerId||e.name===t.name);return!!r&&("2"===r.islevel||e.has(r.id))})}else if(W&&W.length>0){const e=new Set(W.map(e=>e.id)),t=[],r=[];for(const a of ce){if("youyou"===a.producerId||"youyouyou"===a.producerId){t.unshift(a);continue}const n=u.find(e=>e.videoID===a.producerId||e.audioID===a.producerId||e.name===a.name);n&&(e.has(n.id)||"2"===n.islevel)?t.push(a):r.push(a)}ce=[...t,...r]}M=[];let de=I;(i||c)&&(de=w);let le=[],ue=[],pe=de+1;"conference"!==m||c||i||(pe-=1);let me=!1,ge=!1;if(L&&!V){let e=JSON.parse(JSON.stringify(D)),t=p.find(e=>"2"==e.islevel);for(let r of e)try{let a=[];const n=e.indexOf(r);-1!=N&&n==N&&t&&(r.map(e=>e.name).includes(t.name)||(r=[...r,{name:t.name,breakRoom:n}],ge=!0));for(let e of r){e.name!=h||me||(me=!0,E=e.breakRoom,ae(E));let t=ce.filter(t=>{if(Object.prototype.hasOwnProperty.call(t,"producerId")&&null!=t.producerId&&""!==t.producerId||Object.prototype.hasOwnProperty.call(t,"audioID")&&null!=t.audioID&&""!==t.audioID){let r=t.producerId||t.audioID,a=u.find(t=>t.audioID===r||t.videoID===r||("youyou"==r||"youyouyou"==r)&&h==e.name);return a&&a.name===e.name||e.name==h&&("youyou"==r||"youyouyou"==r)}return Object.prototype.hasOwnProperty.call(t,"name")&&t.name==e.name});for(let e of t)a.length<pe&&a.push(e)}M.push(a)}catch{}let r=ce.filter(e=>{if(Object.prototype.hasOwnProperty.call(e,"producerId")&&null!=e.producerId&&""!==e.producerId||Object.prototype.hasOwnProperty.call(e,"audioID")&&null!=e.audioID&&""!==e.audioID){let r=e.producerId||e.audioID,a=u.find(e=>e.audioID===r||e.videoID===r||("youyou"==r||"youyouyou"==r)&&h==e.name);return a&&!D.flat().map(e=>e.name).includes(a.name)&&(!ge||a.name!=t.name)}return!(D.flat().map(e=>e.name).includes(e.name??"")||ge&&e.name==t.name)});if(me){let e=ce.find(e=>!(!Object.prototype.hasOwnProperty.call(e,"producerId")||null==e.producerId||""===e.producerId||"youyou"!=e.producerId&&"youyouyou"!=e.producerId));e&&!r.includes(e)&&r.unshift(e)}let a=[];if(r.length>0){le=r.slice(0,pe),a.push(le);for(let e=pe;e<r.length;e+=de)ue=r.slice(e,e+de),a.push(ue)}$=a.length,re($);for(let e=a.length-1;e>=0;e--)M.unshift(a[e])}else{le=ce.slice(0,pe),M.push(le);for(let e=pe;e<ce.length;e+=de)ue=ce.slice(e,e+de),M.push(ue)}O(n),z(o),U(s),q(d),_(l),G(u),Y(f),K(y),J(x),X(M),T=A,A=!1,Q(T),Z(A);let he=!1;if(M.length>1){if(i||c||(A=!0),Z(A),F>M.length-1?F=L&&!V?0:M.length-1:0==F&&(he=!0),ee(F),te(M.length-1),e?await oe({lStreams:M[0],ind:0,parameters:t}):await oe({lStreams:M[0],ind:0,auto:!0,parameters:t}),!he){const e=F-$;await oe({lStreams:M[F],ind:F,parameters:t,breakRoom:e,inBreakRoom:e>=0})}}else F=0,ee(F),e?await oe({lStreams:M[0],ind:0,parameters:t}):await oe({lStreams:M[0],ind:0,auto:!0,parameters:t})}catch(e){console.log("changeVids error",e)}};async function Fn({restart:e=!1,parameters:t}){try{const{getUpdatedAllParams:r}=t;t=r();const{activeNames:a,prevActiveNames:n,updatePrevActiveNames:o,trigger:s}=t;if(e)return void await s({ref_ActiveNames:a,parameters:t});const i=[];for(let e=0;e<a.length;e++){const r=a[e];if(!n.includes(r)){i.push(!0),await s({ref_ActiveNames:a,parameters:t});break}}if(i.filter(e=>!0===e).length<1)for(let e=0;e<n.length;e++){const r=n[e];if(!a.includes(r)){await s({ref_ActiveNames:a,parameters:t});break}}o([...a])}catch(e){console.log("compareActiveNames error",e)}}async function Dn({restart:e=!1,parameters:t}){try{const{getUpdatedAllParams:r}=t;t=r();const{recordingDisplayType:a,recordingVideoOptimized:n,screenStates:o,prevScreenStates:s,activeNames:i,trigger:c}=t;if(e)return;for(let e=0;e<o.length;e++){const r=o[e],d=s[e];if(Object.keys(r).some(e=>r[e]!==d[e])){if("video"===a&&n){await c({ref_ActiveNames:i,parameters:t});break}await c({ref_ActiveNames:i,parameters:t});break}}}catch(e){console.log("compareScreenStates error",e)}}const Nn=async({option:e,parameters:t})=>{try{let{islevel:r,member:a,socket:n,device:o,producerTransport:s,transportCreated:i,updateProducerTransport:c,updateTransportCreated:d,connectSendTransport:l}=t;const u=t.getUpdatedAllParams();o=u.device,n=u.socket;try{await(async({option:e,parameters:t})=>{try{let{islevel:r,member:a,socket:n,localSocket:o,device:s,localProducerTransport:i,localTransportCreated:c,updateLocalProducerTransport:d,updateLocalTransportCreated:l,connectSendTransport:u}=t;if(!o||!o.id||n.id===o.id)return;o.emit("createWebRtcTransport",{consumer:!1,islevel:r},async({params:n})=>{n&&n.error?console.error("Error in local createWebRtcTransport:",n.error):(i=await s.createSendTransport(n),d&&d(i),i.on("connect",async({dtlsParameters:e},t,r)=>{try{o.emit("transport-connect",{dtlsParameters:e}),t()}catch(e){r(e)}}),i.on("produce",async(e,t,n)=>{try{o.emit("transport-produce",{kind:e.kind,rtpParameters:e.rtpParameters,appData:e.appData,islevel:r,name:a},({id:e})=>t({id:e}))}catch(e){n(e)}}),i.on("connectionstatechange",e=>{"failed"===e&&(console.error("Local transport connection failed."),i&&i.close())}),c=!0,l?.(c),await u({targetOption:"local",option:e,parameters:{...t,localProducerTransport:i}}))})}catch(e){console.error("Error creating local send transport:",e)}})({option:e,parameters:t})}catch(e){console.log("Error creating local send transport:",e)}n.emit("createWebRtcTransport",{consumer:!1,islevel:r},async({params:u})=>{u&&u.error?console.error("Error in createWebRtcTransport:",u.error):(s=await o.createSendTransport(u),c(s),s.on("connect",async({dtlsParameters:e},t,r)=>{try{n.emit("transport-connect",{dtlsParameters:e}),t()}catch(e){r(e)}}),s.on("produce",async(e,t,o)=>{try{n.emit("transport-produce",{kind:e.kind,rtpParameters:e.rtpParameters,appData:e.appData,islevel:r,name:a},async({id:e})=>{t({id:e})})}catch(e){o(e)}}),s.on("connectionstatechange",async e=>{switch(e){case"connecting":case"connected":default:break;case"failed":console.log("Transport connection failed."),s.close()}}),i=!0,t=t.getUpdatedAllParams(),await l({targetOption:"remote",option:e,parameters:{...t,producerTransport:s}}),d(i))})}catch(e){console.log("Error creating send transport:",e)}},Ln=async({parameters:e})=>{try{const{audioProducer:t,islevel:r,hostLabel:a,lock_screen:n,shared:o,updateAudioProducer:s,videoAlreadyOn:i,updateUpdateMainWindow:c,prepopulateUserMedia:d}=e;if(t.resume(),!i&&"2"===r&&!n&&!o){let t=!0;c(t),await d({name:a,parameters:e}),t=!1,c(t)}s(t);try{await(async({parameters:e})=>{try{const{localAudioProducer:t,updateLocalAudioProducer:r}=e;t&&(t.resume(),r?.(t))}catch(e){throw console.error("Error resuming local audio send transport:",e),e}})({parameters:e})}catch(e){console.error("local audio send transport resuming failed:",e)}}catch(e){throw new Error(`Error during resuming audio send transport: ${e.message}`)}},Vn=async({nsock:e,community:t=!1,parameters:r})=>{try{const{roomName:a,member:n,getPipedProducersAlt:o}=r,s=t?"createReceiveAllTransports":"createReceiveAllTransportsPiped",i=t?{islevel:"0"}:{roomName:a,member:n};await e.emit(s,i,async({producersExist:a})=>{const n=["0","1","2"];if(a)for(const a of n)await o({nsock:e,community:t,islevel:a,parameters:r})})}catch(e){console.log("receiveAllPipedTransports error",e)}},Bn=async({parameters:e})=>{try{let{videoProducer:t,socket:r,islevel:a,roomName:n,updateMainWindow:o,lock_screen:s,updateUpdateMainWindow:i,updateVideoProducer:c,reorderStreams:d}=e;t&&(t.close(),c(null)),r.emit("pauseProducerMedia",{mediaTag:"video",roomName:n}),"2"===a&&(o=!0,i(o)),s?await d({add:!0,screenChanged:!0,parameters:e}):await d({add:!1,screenChanged:!0,parameters:e});try{await(async({parameters:e})=>{try{const{localVideoProducer:t,localSocket:r,roomName:a,updateLocalVideoProducer:n}=e;if(!r||!r.id)return;t&&(t.close(),n?.(null)),r.emit("pauseProducerMedia",{mediaTag:"video",roomName:a})}catch(e){throw console.error("Error disconnecting local video send transport:",e),e}})({parameters:e})}catch(e){console.error("Error disconnecting local video send transport:",e)}}catch(e){e instanceof Error?console.log("Error disconnecting send transport for video:",e.message):console.log("Error disconnecting send transport for video:",e)}},$n=async({parameters:e})=>{try{let{audioProducer:t,socket:r,videoAlreadyOn:a,islevel:n,lock_screen:o,shared:s,updateMainWindow:i,hostLabel:c,roomName:d,updateAudioProducer:l,updateUpdateMainWindow:u,prepopulateUserMedia:p}=e;t&&(t.pause(),l(t)),a||"2"!==n||o||s||(i=!0,u(i),await p({name:c,parameters:e}),i=!1,u(i)),r.emit("pauseProducerMedia",{mediaTag:"audio",roomName:d});try{await(async({parameters:e})=>{try{const{localAudioProducer:t,localSocket:r,roomName:a,updateLocalAudioProducer:n}=e;if(!r||!r.id)return;t&&(t.close(),n?.(null)),r.emit("pauseProducerMedia",{mediaTag:"audio",roomName:a})}catch(e){throw console.log("Error disconnecting local audio send transport:",e),e}})({parameters:e})}catch(e){console.log("Error disconnecting local audio send transport:",e)}}catch(e){console.log("Error disconnecting primary audio send transport:",e)}},En=async({parameters:e})=>{let{getUpdatedAllParams:t}=e;e=t();try{let{screenProducer:t,socket:r,roomName:a,updateScreenProducer:n}=e;t.close(),n(t),r.emit("closeScreenProducer"),r.emit("pauseProducerMedia",{mediaTag:"screen",roomName:a})}catch(e){e instanceof Error?console.log("Error disconnecting send transport for screen:",e.message):console.log("Error disconnecting send transport for screen:",e)}try{await(async({parameters:e})=>{try{let{localScreenProducer:t,localSocket:r,roomName:a,updateLocalScreenProducer:n}=e;r&&r.id&&(t.close(),n(t),r.emit("closeScreenProducer"),r.emit("pauseProducerMedia",{mediaTag:"screen",roomName:a}))}catch{console.log("Error disconnecting local send transport for screen")}})({parameters:e})}catch{}},Wn=async({option:e,targetOption:t="all",parameters:r})=>{try{let{audioParams:a,videoParams:n,localStreamScreen:o,canvasStream:s,whiteboardStarted:i,whiteboardEnded:c,shared:d,islevel:l,connectSendTransportAudio:u,connectSendTransportVideo:p,connectSendTransportScreen:m}=r;"audio"===e?await u({targetOption:t,audioParams:a,parameters:r}):"video"===e?await p({targetOption:t,videoParams:n,parameters:r}):"screen"===e?i&&!c&&s&&"2"===l&&!d?await m({targetOption:t,stream:s,parameters:r}):await m({targetOption:t,stream:o,parameters:r}):(await u({targetOption:t,audioParams:a,parameters:r}),await p({targetOption:t,videoParams:n,parameters:r}))}catch(e){console.log("connectSendTransport error",e)}},Hn=(e,t)=>{const r=e.language?.toLowerCase(),a=e.speakerId,n=!0===e.isSpeakerControlled;if(t){const e=t.perSpeaker?.get(a);if(e){if(e.wantOriginal)return!1;if(e.language)return e.language.toLowerCase()===r}const n=t.globalLanguage;if(n)return n.toLowerCase()===r}return!!n},On=async({community:e=!1,nsock:t,islevel:r,parameters:a})=>{try{const n=a.getUpdatedAllParams?a.getUpdatedAllParams():a,{member:o,signalNewConsumerTransport:s,startConsumingTranslation:i,listenerTranslationPreferences:c}=n,d=e?"getProducersAlt":"getProducersPipedAlt";await t.emit(d,{islevel:r,member:o},async e=>{if(e.length>0)for(const a of e){let e,o=null;if("string"==typeof a?e=a:(e=a.id,o=a.translationMeta||null),o){if(!Hn(o,c))continue;if(i){await i(e,o.speakerId,o.language,o.originalProducerId,t);continue}}await s({nsock:t,remoteProducerId:e,islevel:r,parameters:n})}})}catch(e){console.log("Error getting piped producers:",e.message)}},zn=async({consumerTransport:e,remoteProducerId:t,serverConsumerTransportId:r,nsock:a,parameters:n})=>{n=n.getUpdatedAllParams();const{device:o,consumerTransports:s,updateConsumerTransports:i,consumerResume:c}=n;try{a.emit("consume",{rtpCapabilities:o.rtpCapabilities,remoteProducerId:t,serverConsumerTransportId:r},async({params:r})=>{if(r.error)console.log("consume error",r.error);else try{const o=await e.consume({id:r.id,producerId:r.producerId,kind:r.kind,rtpParameters:r.rtpParameters});s.push({consumerTransport:e,serverConsumerTransportId:r.id,producerId:t,consumer:o,socket_:a}),i(s);const{track:d}=o;a.emit("consumer-resume",{serverConsumerId:r.serverConsumerId},async({resumed:e})=>{if(e)try{if(await c({track:d,kind:r.kind,remoteProducerId:t,params:r,parameters:n,nsock:a,consumer:o}),"audio"===r.kind)try{const e=n.getUpdatedAllParams(),s=e.speakerTranslationStates,i=e.participants;if(s&&s.size>0&&i&&i.length>0){const e=i.find(e=>e.audioID===t);if(e&&e.name){const n=s.get(e.name);n?.enabled&&n.originalProducerId===t&&(o.pause(),a.emit("consumer-pause",{serverConsumerId:r.serverConsumerId},()=>{}))}}}catch{}}catch(e){console.log("consumerResume error",e)}})}catch(e){return void console.log("consume error",e)}})}catch(e){console.log("connectRecvTransport error",e)}};async function Un({name:e,add:t=!1,force:r=!1,average:a=127,parameters:n}){let{screenPageLimit:o,itemPageLimit:s,reorderInterval:i,fastReorderInterval:c,eventType:d,participants:l,allVideoStreams:u,shared:p,shareScreenStarted:m,adminNameStream:g,screenShareNameStream:h,updateMainWindow:f,sortAudioLoudness:b,lastReorderTime:y,newLimitedStreams:x,newLimitedStreamsIDs:v,oldSoundIds:S,updateUpdateMainWindow:R,updateSortAudioLoudness:w,updateLastReorderTime:k,updateNewLimitedStreams:C,updateNewLimitedStreamsIDs:j,updateOldSoundIds:P,onScreenChanges:M,reorderStreams:I,changeVids:A}=n;if("broadcast"===d||"chat"===d)return;let T=o-1;if(!m&&!p&&(T=s-1,t)){const e=Date.now();if(e-y>=i&&a>128.5||a>130&&e-y>=c)return y=e,b=!0,"conference"===d?await M({changed:!0,parameters:n}):await I({add:!1,screenChanged:!0,parameters:n}),b=!1,w(b),R(f),void k(y)}let F=null;if(m||p){if(t){const t=l.find(t=>t.name===e);if(F=t?.videoID??null,!F)return;if(!v.includes(F)){if(x.length>T){let e=[...S];for(let t=0;t<S.length;t++)if(x.length>T){if(x.length<o)return;const r=S[t];r!==h&&r!==g&&(x=x.filter(e=>e.producerId!==r),v=v.filter(e=>e!==r),e=e.filter(e=>e!==r))}S=[...e]}const t=u.find(e=>e.producerId===F);t&&x.length<o&&(x.push(t),v.push(F),S.includes(e)||S.push(e),await A({screenChanged:!0,parameters:n}))}}else if(r){const t=l.find(t=>t.name===e);if(t?.muted)try{x=x.filter(e=>e.producerId!==F),v=v.filter(e=>e!==F),S=S.filter(t=>t!==e),await A({parameters:n})}catch{}}else try{if(x.length<o)return;x=x.filter(e=>e.producerId!=F),v=v.filter(e=>e!==F),S=S.filter(t=>t!==e),await A({parameters:n})}catch{}C(x),j(v),P(S)}}function qn({name:e,averageLoudness:t,audioDecibels:r,updateAudioDecibels:a}){const n=r.find(t=>t.name===e);n?n.averageLoudness=t:r.push({name:e,averageLoudness:t}),a(r)}const _n=async({producerId:e,kind:t,parameters:r})=>{let{getUpdatedAllParams:a}=r;r=a();let n,{allAudioStreams:o,allVideoStreams:s,activeNames:i,participants:c,streamNames:d,recordingDisplayType:l,recordingVideoOptimized:u,adminIDStream:p,newLimitedStreams:m,newLimitedStreamsIDs:g,oldAllStreams:h,shareScreenStarted:f,shared:b,meetingDisplayType:y,defer_receive:x,lock_screen:v,firstAll:S,first_round:R,gotAllVids:w,eventType:k,hostLabel:C,shareEnded:j,updateMainWindow:P,updateActiveNames:M,updateAllAudioStreams:I,updateAllVideoStreams:A,updateShareScreenStarted:T,updateUpdateMainWindow:F,updateNewLimitedStreams:D,updateOldAllStreams:N,updateDefer_receive:L,updateMainHeightWidth:V,updateShareEnded:B,updateLock_screen:$,updateFirstAll:E,updateFirst_round:W,reorderStreams:H,prepopulateUserMedia:O,getVideos:z,rePort:U}=r;if("audio"===t){o=o.filter(function(t){return t.producerId!==e}),I(o),"video"==l&&1==u||(n=c.find(t=>t.audioID===e),n&&(null!==n.videoID&&""!==n.videoID||(i=i.filter(function(e){return e!==n.name}),M(i))));let t=!1,a=!1;"video"==y?t=null!=n[0].videoID&&""!=n[0].videoID&&null!=n[0].videoID:(t=!0,a=!0),t&&(f||b?a||await H({parameters:r}):a&&"video"!=y&&await H({add:!1,screenChanged:!0,parameters:r}))}else if("video"===t){e==p&&(P=!0,F(P));try{s=s.filter(function(t){return t.producerId!==e}),A(s);try{h=h.filter(function(t){return t.producerId!==e}),N(h)}catch{}try{m=m.filter(function(t){return t.producerId!==e}),D(m)}catch{}}catch{try{h=h.filter(function(t){return t.producerId!==e}),N(h)}catch{}}try{i=i.filter(function(t){return t!==d.find(t=>t.producerId===e).name}),M(i)}catch{}v?(x=!0,g.includes(e)&&(await O({name:C,parameters:r}),await H({add:!1,screenChanged:!0,parameters:r}))):(await O({name:C,parameters:r}),await H({add:!1,screenChanged:!0,parameters:r}))}else"screenshare"!==t&&"screen"!==t||(P=!0,f=!1,j=!0,v=!1,S=!1,R=!1,F(P),T(f),B(j),$(v),E(S),W(R),w&&!x||(x=!1,L(x),await z({participants:c,allVideoStreams:s,oldAllStreams:h,updateAllVideoStreams:A,updateOldAllStreams:N}),await U({parameters:r})),"conference"==k&&V(0),await O({name:C,parameters:r}),await H({add:!1,screenChanged:!0,parameters:r}))};async function Gn({n:e,eventType:t,shareScreenStarted:r,shared:a}){let n=6,o=12-n;return"broadcast"===t?(n=0,o=12-n):"chat"===t||"conference"===t&&!r&&!a?(n=12,o=12-n):r||a?(o=10,n=12-o):0===e?(n=1,o=12-n):e>=1&&e<4?(n=4,o=12-n):e>=4&&e<6||e>=6&&e<9||e>=9&&e<12?(n=6,o=12-n):e>=12&&e<20||e>=20&&e<50?(n=8,o=12-n):(n=10,o=12-n),[n,o]}async function Yn({videoPreference:e,checkoff:t,parameters:r}){const a=r.getUpdatedAllParams(),{audioOnlyRoom:n,frameRate:o,vidCons:s,showAlert:i,mediaDevices:c,hasCameraPermission:d,updateVideoSwitching:l,updateCurrentFacingMode:u,requestPermissionCamera:p,streamSuccessVideo:m,sleep:g,checkMediaPermission:h}=r;let{currentFacingMode:f,prevFacingMode:b}=a;try{if(n)return void i?.({message:"You cannot turn on your camera in an audio-only event.",type:"danger",duration:3e3});if(t||(await La({parameters:r}),l(!0),await g({ms:500}),l(!1)),!d&&h&&"granted"!==await p())return void i?.({message:"Allow access to your camera or check if your camera is not being used by another application.",type:"danger",duration:3e3});const a=await c.enumerateDevices();let y={};y=s&&s.width&&s.height?{video:{facingMode:{exact:e},...s,frameRate:{ideal:o}},audio:!1}:{video:{facingMode:{exact:e},frameRate:{ideal:o}},audio:!1},await c.getUserMedia(y).then(async e=>{await m({stream:e,parameters:r})}).catch(async()=>{let t=[];t="user"===e?a.filter(e=>e.label.includes("front")&&"videoinput"===e.kind):a.filter(e=>e.label.includes("back")&&"videoinput"===e.kind),t.length>0?t.forEach(e=>{if("videoinput"===e.kind){let a=e.deviceId;y=s&&s.width&&s.height?{video:{deviceId:{exact:a},...s,frameRate:{ideal:o}},audio:!1}:{video:{deviceId:{exact:a},frameRate:{ideal:o}},audio:!1},c.getUserMedia(y).then(async e=>{await m({stream:e,parameters:r})}).catch(()=>{a===t[t.length-1].deviceId&&(f=b,u(f),i?.({message:"Error switching; not accessible, might need to turn off your video and turn it back on after switching.",type:"danger",duration:3e3}))})}}):(f=b,u(f),i?.({message:"Error switching; not accessible, might need to turn off your video and turn it back on after switching.",type:"danger",duration:3e3}))})}catch{const t=await c.enumerateDevices();let a=[];a="user"===e?t.filter(e=>e.label.includes("front")&&"videoinput"===e.kind):t.filter(e=>e.label.includes("back")&&"videoinput"===e.kind);let n={};a.length>0?a.forEach(e=>{if("videoinput"===e.kind){let t=e.deviceId;n=s&&s.width&&s.height?{video:{deviceId:{exact:t},...s,frameRate:{ideal:o}},audio:!1}:{video:{deviceId:{exact:t},frameRate:{ideal:o}},audio:!1},c.getUserMedia(n).then(async e=>{await m({stream:e,parameters:r})}).catch(()=>{t===a[a.length-1].deviceId&&(f=b,u(f),i?.({message:"Error switching; not accessible, might need to turn off your video and turn it back on after switching.",type:"danger",duration:3e3}))})}}):(f=b,u(f),i?.({message:"Error switching; not accessible, might need to turn off your video and turn it back on after switching.",type:"danger",duration:3e3}))}}async function Kn({videoPreference:e,checkoff:t,parameters:r}){const{audioOnlyRoom:a,frameRate:n,vidCons:o,prevVideoInputDevice:s,showAlert:i,mediaDevices:c,hasCameraPermission:d,updateVideoSwitching:l,updateUserDefaultVideoInputDevice:u,requestPermissionCamera:p,streamSuccessVideo:m,sleep:g,checkMediaPermission:h}=r;try{if(a)return void i?.({message:"You cannot turn on your camera in an audio-only event.",type:"danger",duration:3e3});if(t||(await La({parameters:r}),l(!0),await g({ms:500}),l(!1)),!d&&h&&"granted"!==await p())return void i?.({message:"Allow access to your camera or check if your camera is not being used by another application.",type:"danger",duration:3e3});let f;f=o&&o.width&&o.height?{video:{deviceId:{exact:e},...o,frameRate:{ideal:n}},audio:!1}:{video:{deviceId:{exact:e},frameRate:{ideal:n}},audio:!1},await c.getUserMedia(f).then(async e=>{await m({stream:e,parameters:r})}).catch(async()=>{u(s),i?.({message:"Error switching; not accessible, might need to turn off your video and turn it back on after switching.",type:"danger",duration:3e3})})}catch{u(s),i?.({message:"Error switching; not accessible, might need to turn off your video and turn it back on after switching.",type:"danger",duration:3e3})}}async function Jn({audioPreference:e,parameters:t}){const{mediaDevices:r,prevAudioInputDevice:a,showAlert:n,hasAudioPermission:o,updateUserDefaultAudioInputDevice:s,streamSuccessAudioSwitch:i,requestPermissionAudio:c,checkMediaPermission:d}=t;try{if(!o&&d&&"granted"!==await c())return void n?.({message:"Allow access to your microphone or check if your microphone is not being used by another application.",type:"danger",duration:3e3});const l={audio:{deviceId:{exact:e},echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1},video:!1};await r.getUserMedia(l).then(async e=>{await i({stream:e,parameters:t})}).catch(e=>{console.log("Error switching audio A",e),s(a),n?.({message:"Error switching; the specified microphone could not be accessed.",type:"danger",duration:3e3})})}catch(e){console.log("Error switching audio",e),s(a),n?.({message:"Error switching; the specified microphone could not be accessed.",type:"danger",duration:3e3})}}async function Xn({socket:e,roomName:t,updateMessages:r}){try{e.emit("getMessage",{roomName:t},async({messages_:e})=>{r(e)})}catch(e){e instanceof Error?console.log("Error tuning messages:",e.message):console.log("Error tuning messages:",e)}}const Zn=async({number:e})=>{if(e){if(e<1e3)return e.toString();if(e<1e6)return(e/1e3).toFixed(1)+"K";if(e<1e9)return(e/1e6).toFixed(1)+"M";if(e<1e12)return(e/1e9).toFixed(1)+"B"}},Qn=async({consume_sockets:e,remIP:t,apiUserName:r,apiKey:a,apiToken:n,newProducerMethod:o=x,closedProducerMethod:s=v,joinConsumeRoomMethod:i=b,parameters:c})=>{try{const{roomRecvIPs:d,updateRoomRecvIPs:l,updateConsume_sockets:u}=c;if(!e||!t||!r||!a&&!n)return console.log("Missing required parameters",{consume_sockets:e,remIP:t,apiUserName:r,apiToken:n}),[e,d];for(const p of t)try{if(e.find(e=>Object.keys(e)[0]===p)||!p)continue;const t=await ma({apiUserName:r,apiKey:a,apiToken:n,link:`https://${p}.mediasfu.com`});if(t.id){if(d.includes(p)||(d.push(p),l(d)),t.on("new-pipe-producer",async({producerId:e,islevel:r,isTranslation:a,translationMeta:n})=>{o&&await o({producerId:e,islevel:r,nsock:t,parameters:c,isTranslation:a,translationMeta:n})}),t.on("producer-closed",async({remoteProducerId:e})=>{s&&await s({remoteProducerId:e,parameters:c})}),i&&!(await i({remote_sock:t,apiToken:n,apiUserName:r,parameters:c})).rtpCapabilities)return[e,d];e.push({[p]:t}),u(e)}}catch(e){console.log("connectIps error",e)}return[e,d]}catch(t){return console.log("connectIps error",t),[e,c.roomRecvIPs]}},eo=async({data:e,polls:t,poll:r,member:a,islevel:n,showAlert:o,updatePolls:s,updatePoll:i,updateIsPollModalVisible:c})=>{try{e.polls?(e.polls,s(e.polls)):s([e.poll]);let t={id:""};r&&(t={...r}),"ended"!==e.status&&(r=e.poll,i(e.poll)),"started"===e.status&&"2"!==n?(!r.voters||r.voters&&!r.voters[a])&&(o?.({message:"New poll started",type:"success",duration:3e3}),c(!0)):"ended"===e.status&&t.id===e.poll.id&&(o?.({message:"Poll ended",type:"danger",duration:3e3}),i(e.poll))}catch{}},to=async({poll:e,socket:t,roomName:r,showAlert:a,updateIsPollModalVisible:n})=>{try{t.emit("createPoll",{roomName:r,poll:e},e=>{e.success?(a?.({message:"Poll created successfully",type:"success"}),n(!1)):a?.({message:e.reason||"Failed to create poll",type:"danger"})})}catch(e){console.error("Error creating poll:",e)}},ro=async({pollId:e,optionIndex:t,socket:r,showAlert:a,member:n,roomName:o,updateIsPollModalVisible:s})=>{try{r.emit("votePoll",{roomName:o,poll_id:e,member:n,choice:t},e=>{e.success?(a?.({message:"Vote submitted successfully",type:"success"}),s(!1)):a?.({message:e.reason||"Failed to submit vote",type:"danger"})})}catch(e){console.error("Error submitting vote:",e)}},ao=async({pollId:e,socket:t,showAlert:r,roomName:a,updateIsPollModalVisible:n})=>{try{t.emit("endPoll",{roomName:a,poll_id:e},e=>{e.success?(r?.({message:"Poll ended successfully",type:"success"}),n(!1)):r?.({message:e.reason||"Failed to end poll",type:"danger"})})}catch(e){console.error("Error ending poll:",e)}},no=async({data:e,parameters:t})=>{try{let{breakOutRoomStarted:r,breakOutRoomEnded:a,breakoutRooms:n,hostNewRoom:o,islevel:s,participantsAll:i,participants:c,meetingDisplayType:d,prevMeetingDisplayType:l,updateBreakoutRooms:u,updateBreakOutRoomStarted:p,updateBreakOutRoomEnded:m,updateHostNewRoom:g,updateMeetingDisplayType:h,updateParticipantsAll:f,updateParticipants:b,onScreenChanges:y,rePort:x}=t;if(e.forHost)return o=e.newRoom,g(o),void await y({changed:!0,parameters:t});"2"===s&&e.members&&(i=e.members.map(e=>({isBanned:e.isBanned,name:e.name,audioID:e.audioID,videoID:e.videoID})),f(i),c=e.members.filter(e=>!e.isBanned),b(c)),n=e.breakoutRooms||[],u(n),"started"!==e.status||r&&!a?"ended"===e.status?(a=!0,m(!0),d!==l&&h(l),await y({changed:!0,parameters:t}),"2"===s&&await x({restart:!0,parameters:t})):"started"==e.status&&r&&(r=!0,a=!1,p(!0),m(!1),await y({changed:!0,parameters:t}),"2"===s&&await x({restart:!0,parameters:t})):(r=!0,a=!1,p(!0),m(!1),l=d,"all"!==d&&(d="all",h("all")),await y({changed:!0,parameters:t}),"2"===s&&await x({restart:!0,parameters:t}))}catch{}};function oo({startTime:e,parameters:t}){let{updateMeetingProgressTime:r,getUpdatedAllParams:a}=t;function n(e){return e.toString().padStart(2,"0")}let o=function(e){return Math.floor((new Date).getTime()/1e3)-e}(e),s=setInterval(async()=>{o++;const e=function(e){const t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=Math.floor(e%60).toString().padStart(2,"0");return`${n(t)}:${n(r)}:${n(Number(a))}`}(o);r(e),(t=a()).validated&&t.roomName||(clearInterval(s),s=null)},1e3)}const so=async({parameters:e})=>{let{roomName:t,userRecordingParams:r,socket:a,localSocket:n,updateIsRecordingModalVisible:o,confirmedToRecord:s,showAlert:i,recordingMediaOptions:c,videoAlreadyOn:d,audioAlreadyOn:l,recordStarted:u,recordPaused:p,recordResumed:m,recordStopped:g,recordChangeSeconds:h,pauseRecordCount:f,startReport:b,endReport:y,canRecord:x,canPauseResume:v,updateCanPauseResume:S,updatePauseRecordCount:R,updateClearedToRecord:w,updateRecordPaused:k,updateRecordResumed:C,updateStartReport:j,updateEndReport:P,updateCanRecord:M,rePort:I}=e;if(g)return void i?.({message:"Recording has already stopped",type:"danger",duration:3e3});if("video"===c&&!d)return void i?.({message:"You must turn on your video before you can start recording",type:"danger",duration:3e3});if("audio"===c&&!l)return void i?.({message:"You must turn on your audio before you can start recording",type:"danger",duration:3e3});let A=n&&n.connected?n:a;if(!u||p||g){if(u&&p&&!g){if(!s)return void i?.({message:"You must click confirm before you can start recording",type:"danger",duration:3e3});if(!await H({recordingMediaOptions:c,recordingVideoPausesLimit:e.recordingVideoPausesLimit,recordingAudioPausesLimit:e.recordingAudioPausesLimit,pauseRecordCount:f}))return;if(await U({parameters:e})){w(!0);const a="resumeRecord";await new Promise(n=>{A.emit(a,{roomName:t,userRecordingParams:r},async({success:t,reason:r})=>{t?(m=!0,p=!1,k(p),C(m),await I({restart:!0,parameters:e})):i?.({message:`Recording could not resume - ${r}`,type:"danger",duration:3e3}),x=!0,b=!1,y=!0,M(x),j(b),P(y),n()})}),o(!1),setTimeout(()=>{S(!0)},h)}}}else{if(!await W({recordingMediaOptions:c,recordingVideoPausesLimit:e.recordingVideoPausesLimit,recordingAudioPausesLimit:e.recordingAudioPausesLimit,pauseRecordCount:f,showAlert:i}))return;if(O({stop:!1,isTimerRunning:e.isTimerRunning,canPauseResume:e.canPauseResume,showAlert:i})){const e="pauseRecord";await new Promise(r=>{A.emit(e,{roomName:t},async({success:e,reason:t,recordState:a,pauseCount:n})=>{f=n,R(f),e?(b=!1,y=!0,p=!0,j(b),P(y),k(p),i?.({message:"Recording paused",type:"success",duration:3e3}),o(!1),setTimeout(()=>{v=!0,S(v)},h)):i?.({message:`Recording Pause Failed: ${t}; the current state is: ${a}`,type:"danger",duration:3e3}),r()})})}}},io=async({parameters:e})=>{let{roomName:t,socket:r,localSocket:a,showAlert:n,startReport:o,endReport:s,recordStarted:i,recordPaused:c,recordStopped:d,updateRecordPaused:l,updateRecordStopped:u,updateStartReport:p,updateEndReport:m,updateShowRecordButtons:g,whiteboardStarted:h,whiteboardEnded:f,recordingMediaOptions:b,captureCanvasStream:y}=e,x=!1;if(i&&!d){if(!O({stop:!0,isTimerRunning:e.isTimerRunning,canPauseResume:e.canPauseResume,showAlert:e.showAlert}))return;{const i="stopRecord";let v=a&&a.connected?a:r;await new Promise(e=>{v.emit(i,{roomName:t},({success:t,reason:r,recordState:a})=>{if(t)o=!1,s=!0,c=!1,d=!0,x=!0,p(o),m(s),l(c),u(d),n?.({message:"Recording Stopped",type:"success"}),g(!1),x=!0;else{const e=`Recording Stop Failed: ${r}; the recording is currently ${a}`;n?.({message:e,type:"danger"}),x=!1}e()})});try{x&&h&&!f&&"video"===b&&y({parameters:e,start:!1})}catch(e){console.error("Error capturing canvas stream:",e)}}}else n?.({message:"Recording is not started yet or already stopped",type:"danger"})},co=async({name:e,showAlert:t,totalReqWait:r,updateTotalReqWait:a})=>{t?.({message:`${e} joined the waiting room.`,type:"success",duration:3e3}),a(r+1)},lo=async({name:e,showAlert:t})=>{t?.({message:`${e} joined the event.`,type:"success",duration:3e3})},uo=async({waitingParticipants:e,updateWaitingRoomList:t,updateTotalReqWait:r})=>{const a=e.length;t(e),r(a)},po=async({recordParams:e,parameters:t})=>{const{updateRecordingAudioPausesLimit:r,updateRecordingAudioPausesCount:a,updateRecordingAudioSupport:n,updateRecordingAudioPeopleLimit:o,updateRecordingAudioParticipantsTimeLimit:s,updateRecordingVideoPausesCount:i,updateRecordingVideoPausesLimit:c,updateRecordingVideoSupport:d,updateRecordingVideoPeopleLimit:l,updateRecordingVideoParticipantsTimeLimit:u,updateRecordingAllParticipantsSupport:p,updateRecordingVideoParticipantsSupport:m,updateRecordingAllParticipantsFullRoomSupport:g,updateRecordingVideoParticipantsFullRoomSupport:h,updateRecordingPreferredOrientation:f,updateRecordingSupportForOtherOrientation:b,updateRecordingMultiFormatsSupport:y}=t;r(e.recordingAudioPausesLimit),a(e.recordingAudioPausesCount),n(e.recordingAudioSupport),o(e.recordingAudioPeopleLimit),s(e.recordingAudioParticipantsTimeLimit),i(e.recordingVideoPausesCount),c(e.recordingVideoPausesLimit),d(e.recordingVideoSupport),l(e.recordingVideoPeopleLimit),u(e.recordingVideoParticipantsTimeLimit),p(e.recordingAllParticipantsSupport),m(e.recordingVideoParticipantsSupport),g(e.recordingAllParticipantsFullRoomSupport),h(e.recordingVideoParticipantsFullRoomSupport),f(e.recordingPreferredOrientation),b(e.recordingSupportForOtherOrientation),y(e.recordingMultiFormatsSupport)},mo=async({name:e,parameters:t})=>{const{activeNames:r,dispActiveNames:a,participants:n,updateParticipants:o,reorderStreams:s}=t;(r.includes(e)||a.includes(e))&&(o(n.filter(t=>t.name!==e)),await s({add:!1,screenChanged:!0,parameters:t}))},go=async({coHost:e,coHostResponsibility:t,showAlert:r,eventType:a,islevel:n,member:o,youAreCoHost:s,updateCoHost:i,updateCoHostResponsibility:c,updateYouAreCoHost:d})=>{"broadcast"!==a&&"chat"!==a?(i(e),c(t),o===e?s||(d(!0),r?.({message:"You are now a co-host.",type:"success",duration:3e3})):d(!1)):"2"!==n&&d(!0)},ho=async({userRequest:e,requestList:t,waitingRoomList:r,updateTotalReqWait:a,updateRequestList:n})=>{const o=t.findIndex(t=>t.id===e.id);let s;-1!==o?(s=[...t],s[o]=e):s=[...t,e],n(s),a(s.length+r.length)},fo=({producerId:e,screenId:t,membersReceived:r,shareScreenStarted:a,deferScreenReceived:n,participants:o,updateScreenId:s,updateShareScreenStarted:i,updateDeferScreenReceived:c})=>{o.find(e=>e.ScreenID===t&&!0===e.ScreenOn)&&r?(n=!1,s(t=e),i(!0),c(n)):(n=!0,s(t=e),c(n))},bo=({settings:e,updateAudioSetting:t,updateVideoSetting:r,updateScreenshareSetting:a,updateChatSetting:n})=>{const[o,s,i,c]=e;t(o),r(s),a(i),n(c)},yo=async({producerId:e,kind:t,name:r,parameters:a})=>{a=a.getUpdatedAllParams();let{activeSounds:n,meetingDisplayType:o,meetingVideoOptimized:s,participants:i,oldSoundIds:c,shared:d,shareScreenStarted:l,updateMainWindow:u,hostLabel:p,islevel:m,updateActiveSounds:g,updateUpdateMainWindow:h,reorderStreams:f,prepopulateUserMedia:b,reUpdateInter:y}=a;if(await Promise.all(i.map(async e=>{if(e.muted){try{"2"!==e.islevel||e.videoID||d||l||"2"===m||(u=!0,h(u),await b({name:p,parameters:a}),u=!1,h(u))}catch{}(l||d)&&(e.name&&n.includes(e.name)&&(n=n.filter(t=>t!==e.name),g(n)),y({name:e.name,add:!1,force:!0,parameters:a}))}})),"media"===o||"video"===o&&!s){const e=i.find(e=>e.name===r);null!==e?.videoID&&""!==e?.videoID||l||d||await f({add:!1,screenChanged:!0,parameters:a})}if("audio"===t)try{const t=i.find(t=>t.audioID===e)||i.find(e=>e.name===r);t&&(t.name&&c.includes(t.name)||r&&c.includes(r))&&y({name:t.name,add:!1,force:!0,parameters:a})}catch{}},xo=async({name:e,parameters:t})=>{const{meetingDisplayType:r,participants:a,shared:n,shareScreenStarted:o,mainScreenFilled:s,hostLabel:i,updateUpdateMainWindow:c,reorderStreams:d,prepopulateUserMedia:l}=t,u=a.find(t=>t.name===e);let p;u&&!s&&"2"===u.islevel&&(c(!0),await l({name:i,parameters:t}),c(!1)),"media"===r&&u&&(p=null!==u.videoID&&""!==u.videoID,p||o||n||await d({add:!1,screenChanged:!0,parameters:t}))},vo=async({producerId:e,kind:t,parameters:r})=>{const a=r.getUpdatedAllParams(),{consumerTransports:n,updateConsumerTransports:o,hostLabel:s,shared:i,updateShared:c,updateShareScreenStarted:d,updateScreenId:l,updateShareEnded:u,closeAndResize:p,prepopulateUserMedia:m,reorderStreams:g}=a,h=n.find(t=>t.producerId===e);if(h){try{await h.consumerTransport.close()}catch(e){console.error("Error closing consumer transport:",e)}try{h.consumer.close()}catch(e){console.error("Error closing consumer:",e)}o(n.filter(t=>t.producerId!==e)),await p({producerId:e,kind:t,parameters:a})}else"screenshare"!==t&&"screen"!==t||(i?c(!1):(d(!1),l("")),u(!0),await m({name:s,parameters:a}),await g({add:!1,screenChanged:!0,parameters:a}))},So=async({type:e,parameters:t})=>{let{updateAdminRestrictSetting:r,updateLocalStream:a,updateAudioAlreadyOn:n,updateLocalStreamScreen:o,updateLocalStreamVideo:s,updateScreenAlreadyOn:i,updateVideoAlreadyOn:c,updateChatAlreadyOn:d,onScreenChanges:l,stopShareScreen:u,disconnectSendTransportVideo:p,disconnectSendTransportAudio:m,disconnectSendTransportScreen:g}=t,{localStream:h,localStreamScreen:f,localStreamVideo:b}=t.getUpdatedAllParams();try{if(r(!0),"audio"===e)h.getAudioTracks()[0].enabled=!1,a(h),await m({parameters:t}),n(!1);else if("video"===e){try{h.getVideoTracks()[0].enabled=!1,a(h),await p({parameters:t}),await l({changed:!0,parameters:t}),c(!1)}catch{}try{b.getVideoTracks()[0].enabled=!1,s(b),await p({parameters:t}),await l({changed:!0,parameters:t}),c(!1)}catch{l({changed:!0,parameters:t})}}else if("screenshare"===e)f.getVideoTracks()[0].enabled=!1,o(f),await g({parameters:t}),await u({parameters:t}),i(!1);else if("chat"===e)d(!1);else if("all"===e){try{h.getAudioTracks()[0].enabled=!1,a(h),await m({parameters:t}),n(!1)}catch{}try{f.getVideoTracks()[0].enabled=!1,o(f),await g({parameters:t}),await u({parameters:t}),i(!1)}catch{}try{h.getVideoTracks()[0].enabled=!1,a(h),await p({parameters:t}),await l({changed:!0,parameters:t}),c(!1)}catch{}try{b.getVideoTracks()[0].enabled=!1,s(b),await p({parameters:t}),await l({changed:!0,parameters:t}),c(!1)}catch{l({changed:!0,parameters:t})}}}catch(e){console.error("Error in controlMediaHost:",e)}},Ro=async({showAlert:e,redirectURL:t,onWeb:r,eventType:a})=>{"chat"!==a&&e?.({message:"The event has ended. You will be redirected to the home page in 2 seconds.",type:"danger",duration:2e3}),r&&t&&setTimeout(()=>{window.location.href=t},2e3)};async function wo({member:e,roomName:t,socket:r,localSocket:a}){r.emit("disconnectUser",{member:e,roomName:t,ban:!0});try{a&&a.id&&a.emit("disconnectUser",{member:e,roomName:t,ban:!0})}catch{}}const ko=async({message:e,messages:t,participantsAll:r,member:a,eventType:n,islevel:o,coHost:s,updateMessages:i,updateShowMessagesBadge:c})=>{const{sender:d,receivers:l,message:u,timestamp:p,group:m}=e,g=t;t=[...t,{sender:d,receivers:l,message:u,timestamp:p,group:m}],i(t="broadcast"!==n&&"chat"!==n?t.filter(e=>r.some(t=>t.name===e.sender&&!t.isBanned)):t.filter(e=>{const t=r.find(t=>t.name===e.sender);return!t||!t.isBanned}));const h=g.filter(e=>e.group),f=g.filter(e=>!e.group),b=t.filter(e=>e.group);if("broadcast"!==n&&"chat"!==n&&h.length!==b.length){const e=b.filter(e=>!h.some(t=>t.timestamp===e.timestamp)),t=e.filter(e=>e.sender===a||e.receivers.includes(a)).filter(e=>e.sender===a);e.length>0&&e.length!==t.length&&c(!0)}const y=t.filter(e=>!e.group);if("broadcast"!==n&&"chat"!==n&&f.length!==y.length){const e=y.filter(e=>!f.some(t=>t.timestamp===e.timestamp)),t=e.filter(e=>e.sender===a||e.receivers.includes(a)),r=t.filter(e=>e.sender===a);(e.length>0&&t.length>0||e.length>0&&("2"===o||s===a))&&("2"===o||s===a?e.length!==r.length&&c(!0):t.length>0&&e.length!==r.length&&c(!0))}},Co=async({timeRemaining:e,showAlert:t,eventType:r})=>{const a=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3),o=`${a}:${n<10?"0":""}${n}`;"chat"!==r&&t?.({message:`The event will end in ${o} minutes.`,type:"success",duration:3e3})},jo=async({updateIsConfirmHereModalVisible:e})=>{e(!0)},Po=async({roomName:e,member:t,socket:r})=>{r.emit("startRecordIng",{roomName:e,member:t},({success:e})=>{})},Mo=async({roomName:e,member:t,socket:r,adminRestrictSetting:a})=>{a||r.emit("startRecordIng",{roomName:e,member:t},({success:e})=>{})},Io=async({domains:e,alt_domains:t,apiUserName:r,apiKey:a,apiToken:n,parameters:o})=>{let{roomRecvIPs:s,consume_sockets:i,connectIps:c}=o;const d=[];try{i=o.getUpdatedAllParams().consume_sockets;for(const r of e){const e=t[r]||r;s.includes(e)||d.push(e)}await c({consume_sockets:i,remIP:d,parameters:o,apiUserName:r,apiKey:a,apiToken:n})}catch(e){console.error("Error in getDomains: ",e)}},Ao=async({domains:e,alt_domains:t,parameters:r,apiUserName:a,apiKey:n,apiToken:o})=>{let{participants:s,getDomains:i,consume_sockets:c,connectIps:d}=r;c=r.getUpdatedAllParams().consume_sockets;try{s.length>0&&(Object.keys(t).length>0?await i({domains:e,alt_domains:t,apiUserName:a,apiKey:n,apiToken:o,parameters:r}):await d({consume_sockets:c,remIP:e,parameters:r,apiUserName:a,apiKey:n,apiToken:o}))}catch(e){console.log("Error in updateConsumingDomains: ",e)}},To=({soundUrl:e})=>{e&&new Audio(e).play().catch(e=>console.error("Error playing sound:",e))},Fo=async({state:e,userRecordingParam:t,pauseCount:r,timeDone:a,parameters:n})=>{let{islevel:o,userRecordingParams:s,pauseRecordCount:i,recordElapsedTime:c,recordStartTime:d,recordStarted:l,recordPaused:u,canLaunchRecord:p,stopLaunchRecord:m,recordStopped:g,isTimerRunning:h,canPauseResume:f,eventType:b,updateRecordingProgressTime:y,updateShowRecordButtons:x,updateUserRecordingParams:v,updateRecordingMediaOptions:S,updateRecordingAudioOptions:R,updateRecordingVideoOptions:w,updateRecordingVideoType:k,updateRecordingVideoOptimized:C,updateRecordingDisplayType:j,updateRecordingAddHLS:P,updateRecordingNameTags:M,updateRecordingBackgroundColor:I,updateRecordingNameTagsColor:A,updateRecordingOrientationVideo:T,updateRecordingAddText:F,updateRecordingCustomText:D,updateRecordingCustomTextPosition:N,updateRecordingCustomTextColor:L,updatePauseRecordCount:V,updateRecordElapsedTime:B,updateRecordStartTime:$,updateRecordStarted:E,updateRecordPaused:W,updateCanLaunchRecord:H,updateStopLaunchRecord:O,updateRecordStopped:z,updateIsTimerRunning:U,updateCanPauseResume:q,updateRecordState:_}=n;try{"2"!==o?"pause"===e?(E(!0),W(!0),_("yellow"),"broadcast"!==b&&To({soundUrl:"https://www.mediasfu.com/sounds/record-paused.mp3"})):"stop"===e?(E(!0),z(!0),_("green"),"broadcast"!==b&&To({soundUrl:"https://www.mediasfu.com/sounds/record-stopped.mp3"})):(_("red"),E(!0),W(!1),"broadcast"!==b&&To({soundUrl:"https://www.mediasfu.com/sounds/record-progress.mp3"})):"pause"===e?(_("yellow"),t&&(s.mainSpecs=t.mainSpecs,s.dispSpecs=t.dispSpecs,s.textSpecs=t.textSpecs,v(s),S(s.mainSpecs.mediaOptions),R(s.mainSpecs.audioOptions),w(s.mainSpecs.videoOptions),k(s.mainSpecs.videoType),C(s.mainSpecs.videoOptimized),j(s.mainSpecs.recordingDisplayType),P(s.mainSpecs.addHLS),M(s.dispSpecs.nameTags),I(s.dispSpecs.backgroundColor),A(s.dispSpecs.nameTagsColor),T(s.dispSpecs.orientationVideo),F(s.textSpecs?.addText??!1),D(s.textSpecs?.customText??""),N(s.textSpecs?.customTextPosition??""),L(s.textSpecs?.customTextColor??""),i=r,V(i),c=a,c=Math.floor(c/1e3),d=Math.floor(Date.now()/1e3)-c,$(d),B(c),l=!0,u=!0,p=!1,g=!1,E(l),W(u),H(p),z(g),x(!0),h=!1,f=!0,U(h),q(f),y(Do(c))),To({soundUrl:"https://www.mediasfu.com/sounds/record-paused.mp3"})):"stop"===e?(E(!0),z(!0),p=!1,m=!0,E(l),z(g),H(p),O(m),x(!1),_("green"),To({soundUrl:"https://www.mediasfu.com/sounds/record-stopped.mp3"})):(_("red"),E(!0),W(!1),To({soundUrl:"https://www.mediasfu.com/sounds/record-progress.mp3"}))}catch(e){console.log("Error in RecordingNotice: ",e)}},Do=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return`${No(t)}:${No(r)}:${No(a)}`},No=e=>e.toString().padStart(2,"0"),Lo=({timeLeft:e,showAlert:t})=>{try{t?.({message:`The recording will stop in less than ${e} seconds.`,duration:3e3,type:"danger"})}catch(e){console.log("Error in timeLeftRecording: ",e)}},Vo=async({state:e,reason:t,showAlert:r})=>{try{"stop"===e&&r?.({message:`The recording has stopped - ${t}.`,duration:3e3,type:"danger"})}catch(e){console.log("Error in stoppedRecording: ",e)}},Bo=async({requestResponse:e,showAlert:t,requestList:r,updateRequestList:a,updateMicAction:n,updateVideoAction:o,updateScreenAction:s,updateChatAction:i,updateAudioRequestState:c,updateVideoRequestState:d,updateScreenRequestState:l,updateChatRequestState:u,updateAudioRequestTime:p,updateVideoRequestTime:m,updateScreenRequestTime:g,updateChatRequestTime:h,updateRequestIntervalSeconds:f})=>{a(r.filter(t=>t.id!==e.id&&t.icon!==e.type&&t.name!==e.name&&t.username!==e.username));const b=e.type;if("accepted"===e.action)switch(b){case"fa-microphone":t?.({message:"Unmute request was accepted; click the mic button again to begin.",type:"success",duration:1e4}),n(!0),c("accepted");break;case"fa-video":t?.({message:"Video request was accepted; click the video button again to begin.",type:"success",duration:1e4}),o(!0),d("accepted");break;case"fa-desktop":t?.({message:"Screenshare request was accepted; click the screen button again to begin.",type:"success",duration:1e4}),s(!0),l("accepted");break;case"fa-comments":t?.({message:"Chat request was accepted; click the chat button again to begin.",type:"success",duration:1e4}),i(!0),u("accepted")}else{let e;switch(b){case"fa-microphone":t?.({message:"Unmute request was not accepted",type:"danger",duration:1e4}),c("rejected"),e=new Date,e.setSeconds(e.getSeconds()+f),p(e.getTime());break;case"fa-video":t?.({message:"Video request was not accepted",type:"danger",duration:1e4}),d("rejected"),e=new Date,e.setSeconds(e.getSeconds()+f),m(e.getTime());break;case"fa-desktop":t?.({message:"Screenshare request was not accepted",type:"danger",duration:1e4}),l("rejected"),e=new Date,e.setSeconds(e.getSeconds()+f),g(e.getTime());break;case"fa-comments":t?.({message:"Chat request was not accepted",type:"danger",duration:1e4}),u("rejected"),e=new Date,e.setSeconds(e.getSeconds()+f),h(e.getTime())}}},$o=async({members:e,requestss:t,coHoste:r,coHostRes:a,parameters:n,consume_sockets:o,apiUserName:s,apiKey:i,apiToken:c})=>{let{participantsAll:d,participants:l,dispActiveNames:u,requestList:p,lock_screen:m,firstAll:g,membersReceived:h,roomRecvIPs:f,deferScreenReceived:b,screenId:y,shareScreenStarted:x,meetingDisplayType:v,hostFirstSwitch:S,waitingRoomList:R,islevel:w,member:k,socket:C,updateParticipantsAll:j,updateParticipants:P,updateRequestList:M,updateCoHost:I,updateCoHostResponsibility:A,updateFirstAll:T,updateMembersReceived:F,updateDeferScreenReceived:D,updateShareScreenStarted:N,updateHostFirstSwitch:L,updateIslevel:V,updateConsume_sockets:B,updateRoomRecvIPs:$,updateIsLoadingModalVisible:E,updateTotalReqWait:W,onScreenChanges:H,connectIps:O,connectLocalIps:z,sleep:U,reorderStreams:q}=n;const _=e.find(e=>e.name===k);if(_&&_.islevel){const e=_.islevel;"0"!==e&&"1"!==e||w===e||V(e)}d=e.map(({isBanned:e,isSuspended:t,name:r,audioID:a,videoID:n})=>({isBanned:e,isSuspended:t,name:r,audioID:a,videoID:n})),j(d),l=e.filter(e=>!e.isBanned&&!e.isSuspended),P(l),u.length>0&&u.filter(e=>!l.map(e=>e.name).includes(e)).length>0&&await q({add:!1,screenChanged:!0,parameters:n});let G=!1;if(1===f.length&&"none"===f[0]&&(G=!0),!h&&!G)if(f.length<1){let e=setInterval(async()=>{if(f.length>0){clearInterval(e),b&&y&&(x=!0,N(x));const[t,r]=await O({consume_sockets:o,remIP:f,parameters:n,apiUserName:s,apiKey:i,apiToken:c});B(t),$(r),h=!0,F(h),await U({ms:250}),E(!1),b=!1,D(b)}},10)}else{const[e,t]=await O({consume_sockets:o,remIP:f,parameters:n,apiUserName:s,apiKey:i,apiToken:c});B(e),$(t),h=!0,F(h),b&&y&&(x=!0,N(x)),await U({ms:250}),E(!1),b=!1,D(b)}G&&!h&&(z&&await z({socket:C,parameters:n}),await U({ms:50}),E(!1)),p=t.filter(e=>l.some(t=>t.id===e.id)),M(p),W(p.length+R.length),I(r),A(a),m||g?"2"!==w||S||(await H({parameters:n}),L(!0)):(await H({parameters:n}),"all"!==v&&T(!0))},Eo=async({members:e,settings:t,coHoste:r,coHostRes:a,parameters:n,consume_sockets:o,apiUserName:s,apiKey:i,apiToken:c})=>{let{participantsAll:d,participants:l,dispActiveNames:u,requestList:p,coHost:m,coHostResponsibility:g,lock_screen:h,firstAll:f,membersReceived:b,roomRecvIPs:y,deferScreenReceived:x,screenId:v,shareScreenStarted:S,meetingDisplayType:R,audioSetting:w,videoSetting:k,screenshareSetting:C,chatSetting:j,islevel:P,member:M,socket:I,updateParticipantsAll:A,updateParticipants:T,updateRequestList:F,updateCoHost:D,updateCoHostResponsibility:N,updateFirstAll:L,updateMembersReceived:V,updateDeferScreenReceived:B,updateShareScreenStarted:$,updateAudioSetting:E,updateVideoSetting:W,updateScreenshareSetting:H,updateChatSetting:O,updateIslevel:z,updateConsume_sockets:U,updateRoomRecvIPs:q,updateIsLoadingModalVisible:_,onScreenChanges:G,connectIps:Y,connectLocalIps:K,sleep:J,reorderStreams:X}=n;const Z=e.find(e=>e.name===M);if(Z&&Z.islevel){const e=Z.islevel;"0"!==e&&"1"!==e||P===e||z(e)}d=e.map(e=>({isBanned:e.isBanned,isSuspended:e.isSuspended,name:e.name,audioID:e.audioID,videoID:e.videoID})),A(d),l=e.filter(e=>!e.isBanned&&!e.isSuspended),T(l),u.length>0&&u.filter(e=>!l.some(t=>t.name===e)).length>0&&b&&await X({add:!1,screenChanged:!0,parameters:n});let Q=!1;if(1===y.length&&"none"===y[0]&&(Q=!0),!Q)if(b){if(v){const e=l.find(e=>e.ScreenID===v&&!0===e.ScreenOn);x&&v&&e&&(S=!0,$(S))}}else if(y.length<1){const e=setInterval(async()=>{if(y.length>0){clearInterval(e),x&&v&&(S=!0,$(S));const[t,r]=await Y({consume_sockets:o,remIP:y,parameters:n,apiUserName:s,apiKey:i,apiToken:c});t&&r&&(U(t),q(r)),b=!0,V(b),await J({ms:250}),_(!1),x=!1,B(x)}},10)}else{const[e,t]=await Y({consume_sockets:o,remIP:y,parameters:n,apiUserName:s,apiKey:i,apiToken:c});e&&t&&(U(e),q(t)),b=!0,V(b),x&&v&&(S=!0,$(S)),await J({ms:250}),_(!1),x=!1,B(x)}Q&&!b&&(K&&await K({socket:I,parameters:n}),await J({ms:50}),_(!1)),p=p.filter(e=>l.some(t=>t.id===e.id)),F(p),m=r,D(m),g=a,N(g),h||f||(await G({parameters:n}),"all"!==R&&(f=!0,L(f)));try{b&&(w=t[0],k=t[1],C=t[2],j=t[3],E(w),W(k),H(C),O(j))}catch{}},Wo=async({showAlert:e,redirectURL:t,onWeb:r})=>{r&&t?window.location.href=t:e?.({message:"You have been disconnected from the session.",type:"danger",duration:2e3})},Ho=(e,t)=>{const{breakOutRoomStarted:r=!1,breakOutRoomEnded:a=!1,limitedBreakRoom:n=[],participants:o=[],islevel:s="1",eventType:i="conference",hostNewRoom:c=-1,breakoutRooms:d=[],member:l=""}=t;if(!r||a)return!0;const u=o.find(e=>"2"===e.islevel),p=u?.name===e;if("2"!==s){if("webinar"===i&&p)return!0;if("conference"===i&&p){const e=d.find(e=>e.find(e=>e.name===l)),t=e?d.indexOf(e):-1;return-1!==t?t===c:-1===c||c===t&&-1!==t}}return n.some(t=>t.name===e)},Oo=async({originalProducerId:e,speakerId:t,parameters:r})=>{try{const{consumerTransports:a}=r;if(t&&!Ho(t,r))return;const n=a.find(t=>t.producerId===e&&"audio"===t.consumer?.kind);n&&n.consumer&&!n.consumer.paused&&(n.consumer.pause(),n.socket_?.emit("consumer-pause",{serverConsumerId:n.serverConsumerTransportId},async()=>{}))}catch(e){console.error("[TranslationSwitch] Error pausing original producer:",e)}},zo=async({originalProducerId:e,speakerId:t,parameters:r})=>{try{const{consumerTransports:a}=r;if(t&&!Ho(t,r))return;const n=a.find(t=>t.producerId===e&&"audio"===t.consumer?.kind);n&&n.consumer&&n.consumer.paused&&n.socket_?.emit("consumer-resume",{serverConsumerId:n.serverConsumerTransportId},async({resumed:e})=>{e&&n.consumer.resume()})}catch(e){console.error("[TranslationSwitch] Error resuming original producer:",e)}},Uo=async({parameters:e,start:t=!0})=>{try{let{canvasWhiteboard:r,canvasStream:a,updateCanvasStream:n,screenProducer:o,localScreenProducer:s,transportCreated:i,localTransportCreated:c,updateScreenProducer:d,updateLocalScreenProducer:l,localSocket:u,sleep:p,createSendTransport:m,connectSendTransportScreen:g,disconnectSendTransportScreen:h}=e;if(t&&!a){const t=r.captureStream(30);if(a=t,n(t),u&&!u.id){try{if(c){try{s&&(s.close(),l&&l(null),await p({ms:500}))}catch(e){console.error(e)}await g({stream:t,parameters:e})}else await m({option:"screen",parameters:e})}catch{}return}if(i){try{o&&(o.close(),d(null),await p({ms:500}))}catch(e){console.error(e)}await g({stream:t,parameters:e})}else await m({option:"screen",parameters:e})}else a&&!t&&(a.getTracks().forEach(e=>e.stop()),a=null,n(null),h({parameters:e}))}catch(e){console.error(e,"error in captureCanvasStream")}},qo=async({breakRoom:e=-1,inBreakRoom:t=!1,parameters:r})=>{const{getUpdatedAllParams:a}=r;r=a();const{breakoutRooms:n,ref_participants:o,allAudioStreams:s,participants:i,islevel:c,eventType:d,consumerTransports:l,hostNewRoom:u,member:p,updateLimitedBreakRoom:m,processConsumerTransportsAudio:g}=r;let h=[],f=[];h=t&&-1!==e?n[e]:o.filter(e=>!n.flat().map(e=>e.name).includes(e.name)).map(({name:e,breakRoom:t})=>({name:e,breakRoom:t})),m(h);try{let a=!1;if("2"!==c&&"conference"===d){const r=n.find(e=>e.find(e=>e.name===p));let o=-1;if(r&&(o=n.indexOf(r)),t&&e!==u||!t&&-1!==u&&u!==o){const e=i.find(e=>"2"===e.islevel);h=h.filter(t=>t.name!==e?.name)}else(t&&e===u||!t&&-1===u||!t&&u===o&&-1!==o)&&(a=!0)}for(let e of h){let t=s.filter(t=>{if(Object.prototype.hasOwnProperty.call(t,"producerId")&&t.producerId||Object.prototype.hasOwnProperty.call(t,"audioID")&&t.audioID){let r=t.producerId||t.audioID,a=o.find(e=>e.audioID==r);return a&&a.name==e.name}return!1});f.push(...t)}if("2"!==c&&("webinar"===d||a)){const e=i.find(e=>"2"===e.islevel),t=s.find(t=>t.producerId===e?.audioID);t&&!f.includes(t)&&(f.push(t),h.map(e=>e.name).includes(e?.name??"")||h.push({name:e?.name||"",breakRoom:-1}),m(h))}await g({consumerTransports:l,lStreams:f,parameters:r})}catch(e){console.log("Error in resumePauseAudioStreams:",e)}},_o=async({consumerTransports:e,lStreams:t,parameters:r})=>{try{const{sleep:a}=r,n=(e,...t)=>null!==e&&""!==e&&t.some(t=>t.length>0&&t.some(t=>t?.producerId===e)),o=e.filter(e=>n(e.producerId,t)&&!0===e.consumer?.paused&&"audio"===e.consumer.kind),s=e.filter(e=>e.producerId&&null!==e.producerId&&""!==e.producerId&&!t.some(t=>t.producerId===e.producerId)&&e.consumer&&e.consumer.kind&&!0!==e.consumer.paused&&"audio"===e.consumer.kind);await a({ms:100});for(const e of s)e.consumer.pause(),e.socket_.emit("consumer-pause",{serverConsumerId:e.serverConsumerTransportId},async()=>{});for(const e of o)e.socket_.emit("consumer-resume",{serverConsumerId:e.serverConsumerTransportId},async({resumed:t})=>{t&&e.consumer.resume()})}catch(e){console.error("Error in processConsumerTransportsAudio:",e)}},Go=async({localRoom:e})=>({rtpCapabilities:e.rtpCapabilities??null,success:null!==e.rtpCapabilities,roomRecvIPs:[],meetingRoomParams:e.eventRoomParams,recordingParams:e.recordingParams,secureCode:e.secureCode,recordOnly:!1,isHost:e.isHost,safeRoom:!1,autoStartSafeRoom:!1,safeRoomStarted:!1,safeRoomEnded:!1,reason:e.isBanned?"User is banned from the room.":void 0,banned:e.isBanned,suspended:!1,noAdmin:e.hostNotJoined}),Yo=({PrejoinPage:e,localLink:t="",connectMediaSFU:r=!0,credentials:a={apiUserName:"",apiKey:""},useLocalUIMode:n=!1,seedData:o={},useSeed:s=!1,imgSrc:i="https://mediasfu.com/images/logo192.png",sourceParameters:c,updateSourceParameters:d,returnUI:l=!0,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m,customVideoCard:g,customAudioCard:h,customMiniCard:f,customPreJoinPage:b,customComponent:x,containerStyle:v,uiOverrides:R})=>{const k=(0,de.useMemo)(()=>Ua(R?.mainContainer,He),[R?.mainContainer]),C=(0,de.useMemo)(()=>Ua(R?.mainAspect,ge),[R?.mainAspect]),j=(0,de.useMemo)(()=>Ua(R?.mainScreen,$e),[R?.mainScreen]),P=(0,de.useMemo)(()=>Ua(R?.mainGrid,Ee),[R?.mainGrid]),M=(0,de.useMemo)(()=>Ua(R?.subAspect,We),[R?.subAspect]),I=(0,de.useMemo)(()=>Ua(R?.otherGrid,Be),[R?.otherGrid]),A=(0,de.useMemo)(()=>Ua(R?.flexibleGrid,Kr),[R?.flexibleGrid]),T=(0,de.useMemo)(()=>Ua(R?.flexibleGridAlt,Kr),[R?.flexibleGridAlt]),F=(0,de.useMemo)(()=>Ua(R?.flexibleVideo,Xr),[R?.flexibleVideo]),D=(0,de.useMemo)(()=>Ua(R?.audioGrid,ht),[R?.audioGrid]),N=(0,de.useMemo)(()=>Ua(R?.pagination,$r),[R?.pagination]),L=(0,de.useMemo)(()=>Ua(R?.controlButtons,he),[R?.controlButtons]),V=(0,de.useMemo)(()=>Ua(R?.controlButtonsAlt,ve),[R?.controlButtonsAlt]),B=(0,de.useMemo)(()=>Ua(R?.controlButtonsTouch,Ae),[R?.controlButtonsTouch]),$=(0,de.useMemo)(()=>Ua(R?.whiteboard,ut),[R?.whiteboard]),E=(0,de.useMemo)(()=>Ua(R?.screenboard,pt),[R?.screenboard]),W=(0,de.useMemo)(()=>Ua(R?.videoCard,ta),[R?.videoCard]),H=(0,de.useMemo)(()=>Ua(R?.audioCard,aa),[R?.audioCard]),O=(0,de.useMemo)(()=>Ua(R?.miniCard,ra),[R?.miniCard]),z=(0,de.useMemo)(()=>Ua(R?.miniAudio,jt),[R?.miniAudio]),U=(0,de.useMemo)(()=>Ua(R?.meetingProgressTimer,Zr),[R?.meetingProgressTimer]),q=(0,de.useMemo)(()=>Ua(R?.miniAudioPlayer,yn),[R?.miniAudioPlayer]),_=(0,de.useMemo)(()=>qa(R?.consumerResume,xn),[R?.consumerResume]),G=(0,de.useMemo)(()=>qa(R?.addVideosGrid,Mn),[R?.addVideosGrid]),Y=(0,de.useMemo)(()=>Ua(R?.loadingModal,At),[R?.loadingModal]),K=(0,de.useMemo)(()=>Ua(R?.alert,Ft),[R?.alert]),J=(0,de.useMemo)(()=>Ua(R?.menuModal,Lt),[R?.menuModal]),X=(0,de.useMemo)(()=>Ua(R?.eventSettingsModal,pr),[R?.eventSettingsModal]),Z=(0,de.useMemo)(()=>Ua(R?.requestsModal,dr),[R?.requestsModal]),Q=(0,de.useMemo)(()=>Ua(R?.waitingRoomModal,lr),[R?.waitingRoomModal]),ee=(0,de.useMemo)(()=>Ua(R?.coHostModal,mr),[R?.coHostModal]),te=(0,de.useMemo)(()=>Ua(R?.mediaSettingsModal,br),[R?.mediaSettingsModal]),re=(0,de.useMemo)(()=>Ua(R?.participantsModal,gr),[R?.participantsModal]),ae=(0,de.useMemo)(()=>Ua(R?.messagesModal,hr),[R?.messagesModal]),ne=(0,de.useMemo)(()=>Ua(R?.displaySettingsModal,ur),[R?.displaySettingsModal]),oe=(0,de.useMemo)(()=>Ua(R?.confirmExitModal,yr),[R?.confirmExitModal]),se=(0,de.useMemo)(()=>Ua(R?.confirmHereModal,xr),[R?.confirmHereModal]),fe=(0,de.useMemo)(()=>Ua(R?.shareEventModal,lt),[R?.shareEventModal]),be=(0,de.useMemo)(()=>Ua(R?.recordingModal,ir),[R?.recordingModal]),ye=(0,de.useMemo)(()=>Ua(R?.pollModal,kr),[R?.pollModal]),xe=(0,de.useMemo)(()=>Ua(R?.backgroundModal,Mr),[R?.backgroundModal]),Se=(0,de.useMemo)(()=>Ua(R?.breakoutRoomsModal,Ir),[R?.breakoutRoomsModal]),Re=(0,de.useMemo)(()=>Ua(R?.configureWhiteboardModal,Ar),[R?.configureWhiteboardModal]),we=(0,de.useMemo)(()=>Ua(R?.screenboardModal,mt),[R?.screenboardModal]),ke=(0,de.useMemo)(()=>Ua(R?.welcomePage,Sr),[R?.welcomePage]),Ce=(0,de.useMemo)(()=>Ua(R?.preJoinPage,e??wr),[R?.preJoinPage,e]),[je,Pe]=(0,de.useState)(n),[Me,Te]=(0,de.useState)(!0),Fe=e=>Te(e),De=(0,de.useMemo)(()=>{const e=U;return t=>(0,ce.jsx)(e,{...t,isDarkMode:Me})},[U,Me]),[Ne,Le]=(0,de.useState)("none"),[Ve,Oe]=(0,de.useState)([]),ze="undefined"!=typeof window,[Ue,qe]=(0,de.useState)(ze?window.innerWidth:0),[_e,Ge]=(0,de.useState)(ze?window.innerHeight:0),Ye=(0,de.useMemo)(()=>Ue>_e&&Ue>=1200,[Ue,_e]),Ke=(0,de.useMemo)(()=>Ue>=576,[Ue]),Je=(0,de.useCallback)(e=>{const t=.2*e;return t<280?280:t>420?420:t},[]),Xe=(0,de.useCallback)(()=>{Le("none"),Oe([])},[]),Ze=(0,de.useMemo)(()=>Ye&&"none"!==Ne?Je(Ue):0,[Ye,Ne,Ue,Je]),Qe=(0,de.useMemo)(()=>"none"!==Ne&&Ye,[Ne,Ye]),et=(0,de.useMemo)(()=>"none"!==Ne&&!Ye,[Ne,Ye]),tt=(0,de.useMemo)(()=>Me?"rgba(15, 23, 42, 0.98)":"rgba(248, 250, 252, 0.98)",[Me]),rt=(0,de.useRef)(n),at=(0,de.useRef)({}),nt=(0,de.useRef)(null),ot=(0,de.useRef)(null),st=(0,de.useRef)(null),it=(0,de.useRef)(""),ct=(0,de.useRef)(""),dt=(0,de.useRef)(""),gt=(0,de.useRef)(""),ft=(0,de.useRef)(s&&o?.member?o?.member:""),bt=(0,de.useRef)(""),yt=(0,de.useRef)(s&&o?.member&&o.member==o?.host?"2":"1"),xt=(0,de.useRef)(""),vt=(0,de.useRef)([{name:"participants",value:!1,dedicated:!1},{name:"media",value:!1,dedicated:!1},{name:"waiting",value:!1,dedicated:!1},{name:"chat",value:!1,dedicated:!1}]),St=(0,de.useRef)(!!xt.current&&xt.current==ft.current),Rt=(0,de.useRef)(!!yt&&"2"==yt.current),wt=(0,de.useRef)(!1),kt=(0,de.useRef)("media"),Ct=(0,de.useRef)(!1),Pt=(0,de.useRef)(s&&o?.eventType?o?.eventType:"webinar"),Mt=(0,de.useRef)(s&&o?.participants?o?.participants:[]),It=(0,de.useRef)(Mt.current),Tt=(0,de.useRef)(0),Dt=(0,de.useRef)(""),Nt=(0,de.useRef)([]),Vt=(0,de.useRef)(null),Bt=(0,de.useRef)([]),$t=(0,de.useRef)(null),Et=(0,de.useRef)(4),Wt=(0,de.useRef)(!1),Ht=(0,de.useRef)(!1),Ot=(0,de.useRef)(4),zt=(0,de.useRef)(!1),Ut=(0,de.useRef)(!1),qt=(0,de.useRef)("landscape"),_t=(0,de.useRef)("sd"),Gt=(0,de.useRef)("sd"),Yt=(0,de.useRef)({width:640,height:360}),Kt=(0,de.useRef)(10),Jt=(0,de.useRef)({}),Xt=(0,de.useRef)({}),Zt=(0,de.useRef)({}),Qt=(0,de.useRef)({}),er=(0,de.useRef)(0),tr=(0,de.useRef)(0),rr=(0,de.useRef)(!1),ar=(0,de.useRef)(0),nr=(0,de.useRef)(0),or=(0,de.useRef)(0),sr=(0,de.useRef)(0),cr=(0,de.useRef)(!1),vr=(0,de.useRef)(0),Rr=(0,de.useRef)(0),Cr=(0,de.useRef)(!1),jr=(0,de.useRef)(!1),Pr=(0,de.useRef)(!1),Tr=(0,de.useRef)(!1),Fr=(0,de.useRef)("landscape"),Dr=(0,de.useRef)(!1),Nr=(0,de.useRef)(!1),Lr=(0,de.useRef)({mainSpecs:{mediaOptions:"video",audioOptions:"all",videoOptions:"all",videoType:"fullDisplay",videoOptimized:!1,recordingDisplayType:"media",addHLS:!1},dispSpecs:{nameTags:!0,backgroundColor:"#000000",nameTagsColor:"#ffffff",orientationVideo:"portrait"}}),Er=(0,de.useRef)(!1),Wr=(0,de.useRef)(!1),Or=(0,de.useRef)(!1),zr=(0,de.useRef)(null),Ur=(0,de.useRef)(0),qr=(0,de.useRef)(0),_r=(0,de.useRef)(!1),Yr=(0,de.useRef)(!1),Jr=(0,de.useRef)(15e3),Qr=(0,de.useRef)(0),ea=(0,de.useRef)(0),na=(0,de.useRef)(!0),pa=(0,de.useRef)(!1),ha=(0,de.useRef)(!1),ba=(0,de.useRef)(!1),ya=(0,de.useRef)(!1),xa=(0,de.useRef)(!1),va=(0,de.useRef)(!1),Sa=(0,de.useRef)(""),Ra=(0,de.useRef)([]),wa=(0,de.useRef)([]),ka=(0,de.useRef)([]),Ca=(0,de.useRef)([]),ja=(0,de.useRef)(""),Pa=(0,de.useRef)(""),Ma=(0,de.useRef)(""),Ia=(0,de.useRef)(""),Aa=(0,de.useRef)([]),Ta=(0,de.useRef)([]),Da=(0,de.useRef)(null),za=(0,de.useRef)(!1),en=(0,de.useRef)(!1),tn=(0,de.useRef)(!1),rn=(0,de.useRef)(!1),an=(0,de.useRef)(!1),nn=(0,de.useRef)(null),on=(0,de.useRef)(0),sn=(0,de.useRef)(!1),cn=(0,de.useRef)(null),dn=(0,de.useRef)(""),ln=(0,de.useRef)("user"),un=(0,de.useRef)("user"),pn=(0,de.useRef)(""),bn=(0,de.useRef)(!1),Hn=(0,de.useRef)([]),To=(0,de.useRef)([]),Do=(0,de.useRef)([]),No=(0,de.useRef)([]),Yo=(0,de.useRef)([]),Ko=(0,de.useRef)(!1),Jo=(0,de.useRef)(!1),Xo=(0,de.useRef)(!1),Zo=(0,de.useRef)(!1),Qo=(0,de.useRef)(!1),es=(0,de.useRef)(!1),ts=(0,de.useRef)(null),rs=(0,de.useRef)(null),as=(0,de.useRef)(null),ns=(0,de.useRef)(0),os=(0,de.useRef)(0),ss=(0,de.useRef)(0),is=(0,de.useRef)(240),cs=(0,de.useRef)([]),ds=(0,de.useRef)("Host"),ls=(0,de.useRef)(!1),us=(0,de.useRef)(null),[ps,ms]=(0,de.useState)(!1),[gs,hs]=(0,de.useState)(!1),fs=(0,de.useRef)(""),bs=(0,de.useRef)([]),ys=(0,de.useRef)(""),xs=(0,de.useRef)([]),vs=(0,de.useRef)([]),Ss=(0,de.useRef)(!1),Rs=(0,de.useRef)([]),ws=(0,de.useRef)([]),ks=(0,de.useRef)([]),Cs=(0,de.useRef)([]),js=(0,de.useRef)(null),Ps=(0,de.useRef)(""),Ms=(0,de.useRef)(""),Is=(0,de.useRef)(""),As=(0,de.useRef)(""),Ts=(0,de.useRef)(""),Fs=(0,de.useRef)(!1),Ds=(0,de.useRef)(""),Ns=(0,de.useRef)(!1),Ls=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),Vs=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),Bs=(0,de.useRef)(null),$s=(0,de.useRef)(null),Es=(0,de.useRef)(0),Ws=(0,de.useRef)(4),Hs=(0,de.useRef)(!1),Os=(0,de.useRef)(0),zs=(0,de.useRef)(3e4),Us=(0,de.useRef)(1e4),qs=(0,de.useRef)(0),_s=(0,de.useRef)([]),Gs=(0,de.useRef)(0),[Ys,Ks]=(0,de.useState)("webinar"===Pt.current?67:"broadcast"===Pt.current?100:0),Js=(0,de.useRef)(Ys),Xs=(0,de.useRef)(!1),Zs=(0,de.useRef)(!1),Qs=(0,de.useRef)(!1),ei=(0,de.useRef)([]),ti=(0,de.useRef)([]),[ri,ai]=(0,de.useState)(0),ni=(0,de.useRef)(!1),oi=(0,de.useRef)(!1),si=(0,de.useRef)(!1),ii=(0,de.useRef)(!1),ci=(0,de.useRef)(!1),[di,li]=(0,de.useState)(0),[ui,pi]=(0,de.useState)(0),[mi,gi]=(0,de.useState)(0),[hi,fi]=(0,de.useState)(0),[bi,yi]=(0,de.useState)(0),xi=(0,de.useRef)([]),[vi,Si]=(0,de.useState)(!1),Ri=(0,de.useRef)(null),wi=(0,de.useRef)(!1),ki=(0,de.useRef)([]),Ci=(0,de.useRef)([]),ji=(0,de.useRef)(null),Pi=(0,de.useRef)(null),Mi=(0,de.useRef)(!1),Ii=(0,de.useRef)(40),Ai=(0,de.useRef)("horizontal"),Ti=(0,de.useRef)({gridWidth:0,gridHeight:0,altGridWidth:0,altGridHeight:0}),Fi=(0,de.useRef)(!1),Di=(0,de.useRef)([]),[Ni,Li]=(0,de.useState)([[],[]]),Vi=(0,de.useRef)([]),[Bi,$i]=(0,de.useState)([]),[Ei,Wi]=(0,de.useState)([]),[Hi,Oi]=(0,de.useState)([]),[zi,Ui]=(0,de.useState)("00:00:00"),qi=(0,de.useRef)(0),_i=(0,de.useRef)([]),Gi=(0,de.useRef)([]),Yi=e=>{Pe(e)},Ki=e=>{at.current=e},Ji=e=>{nt.current=e},Xi=e=>{st.current=e},Zi=e=>{it.current=e},Qi=e=>{ct.current=e},ec=e=>{dt.current=e},tc=e=>{gt.current=e},rc=e=>{e.length>0&&e.includes("_")&&(nc(e.split("_")[1]),e=e.split("_")[0]),ft.current=e},ac=e=>{bt.current=e},nc=e=>{yt.current=e},oc=e=>{xt.current=e},sc=e=>{vt.current=e},ic=e=>{St.current=e},cc=e=>{Rt.current=e},dc=e=>{wt.current=e},lc=e=>{kt.current=e},uc=e=>{Ct.current=e},pc=e=>{if(Pt.current=e,"none"!=e){"webinar"===e?(Ks(67),Js.current=67):"broadcast"===e?(Ks(100),Js.current=100):(Ks(0),Js.current=0,"conference"===Pt.current&&67===Ys&&(Ks(0),Js.current=0));try{setTimeout(async()=>{"conference"===Pt.current&&67===Ys&&(Ks(0),Js.current=0),await Iy()},1e3)}catch{}}},mc=e=>{Mt.current=e,It.current=e,Tt.current=e.length},gc=e=>{Tt.current=e},hc=e=>{Dt.current=e},fc=e=>{er.current=e},bc=e=>{tr.current=e},yc=e=>{rr.current=e},xc=e=>{ar.current=e},vc=e=>{nr.current=e},Sc=e=>{or.current=e},Rc=e=>{sr.current=e},wc=e=>{cr.current=e},kc=e=>{vr.current=e},Cc=e=>{Rr.current=e},jc=e=>{Cr.current=e},Pc=e=>{jr.current=e},Mc=e=>{Pr.current=e},Ic=e=>{Tr.current=e},Ac=e=>{Fr.current=e},Tc=e=>{Dr.current=e},Fc=e=>{Nr.current=e},Dc=e=>{Lr.current=e},Nc=e=>{Er.current=e},Lc=e=>{Wr.current=e},Vc=e=>{Or.current=e},Bc=e=>{zr.current=e},$c=e=>{Ur.current=e},Ec=e=>{qr.current=e},Wc=e=>{_r.current=e},Hc=e=>{Yr.current=e},Oc=e=>{Jr.current=e},zc=e=>{Qr.current=e},Uc=e=>{ea.current=e},qc=e=>{na.current=e},_c=e=>{pa.current=e},Gc=e=>{Gi.current=e},Yc=e=>{Nt.current=e},Kc=e=>{Vt.current=e},Jc=e=>{Bt.current=e},Xc=e=>{$t.current=e},Zc=e=>{Et.current=e},Qc=e=>{Wt.current=e},ed=e=>{Ht.current=e},td=e=>{Ot.current=e},rd=e=>{zt.current=e},ad=e=>{Ut.current=e,gy(e),e&&setTimeout(async()=>{window.dispatchEvent(new Event("resize"))},2e3)},nd=e=>{qt.current=e},od=e=>{_t.current=e},sd=e=>{Gt.current=e},id=e=>{Yt.current=e},cd=e=>{Kt.current=e},dd=e=>{Jt.current=e},ld=e=>{Xt.current=e},ud=e=>{Zt.current=e},pd=e=>{Qt.current=e},md=e=>{ha.current=e},gd=e=>{ba.current=e},hd=e=>{ya.current=e},fd=e=>{xa.current=e},bd=e=>{va.current=e},yd=e=>{Sa.current=e},xd=e=>{Ra.current=e},vd=e=>{wa.current=e},Sd=e=>{ka.current=e},Rd=e=>{Ca.current=e},wd=e=>{ja.current=e},kd=e=>{Pa.current=e},Cd=e=>{Ma.current=e},jd=e=>{Ia.current=e},Pd=e=>{Aa.current=e},Md=e=>{Ta.current=e},Id=e=>{Da.current=e},Ad=e=>{za.current=e},Td=e=>{en.current=e},Fd=e=>{tn.current=e},Dd=e=>{rn.current=e},Nd=e=>{an.current=e},Ld=e=>{nn.current=e},Vd=e=>{on.current=e},Bd=e=>{sn.current=e},$d=e=>{cn.current=e},Ed=e=>{dn.current=e},Wd=e=>{ln.current=e},Hd=e=>{un.current=e},Od=e=>{pn.current=e},zd=e=>{bn.current=e},Ud=e=>{Hn.current=e},qd=e=>{To.current=e},_d=e=>{Do.current=e},Gd=e=>{No.current=e},Yd=e=>{Yo.current=e},Kd=e=>{Ko.current=e},Jd=e=>{Jo.current=e},Xd=e=>{Xo.current=e},Zd=e=>{Zo.current=e},Qd=e=>{Qo.current=e},el=e=>{es.current=e},tl=e=>{ts.current=e},rl=e=>{rs.current=e},al=e=>{as.current=e},nl=e=>{ns.current=e},ol=e=>{os.current=e},sl=e=>{ss.current=e},il=e=>{cs.current=e},cl=e=>{ds.current=e},dl=e=>{ls.current=e},ll=e=>{us.current=e},ul=e=>{ms(e)},pl=e=>{hs(e)},ml=e=>{fs.current=e},gl=e=>{bs.current=e},hl=e=>{ys.current=e},fl=e=>{xs.current=e},bl=e=>{vs.current=e},yl=e=>{Ss.current=e},xl=e=>{Rs.current=e},vl=e=>{ws.current=e},Sl=e=>{ks.current=e},Rl=e=>{Cs.current=e},wl=e=>{js.current=e},kl=e=>{Ps.current=e},Cl=e=>{Ms.current=e},jl=e=>{Is.current=e},Pl=e=>{As.current=e},Ml=e=>{Ts.current=e},Il=e=>{Fs.current=e},Al=e=>{Ds.current=e},Tl=e=>{Ns.current=e},Fl=e=>{Ls.current=e},Dl=e=>{Vs.current=e},Nl=e=>{Bs.current=e},Ll=e=>{$s.current=e},Vl=e=>{Es.current=e},Bl=e=>{Ws.current=e},$l=e=>{Hs.current=e},El=e=>{Os.current=e},Wl=e=>{qs.current=e},Hl=e=>{_s.current=e},Ol=e=>{Gs.current=e},zl=e=>{Ks(e)},Ul=e=>{Js.current=e},ql=e=>{Xs.current=e},_l=e=>{Zs.current=e},Gl=e=>{Qs.current=e},Yl=e=>{ei.current=e},Kl=e=>{ti.current=e},Jl=e=>{ai(e)},Xl=e=>{ni.current=e},Zl=e=>{oi.current=e},Ql=e=>{si.current=e},eu=e=>{ii.current=e},tu=e=>{ci.current=e},ru=e=>{li(e)},au=e=>{pi(e)},nu=e=>{gi(e)},ou=e=>{fi(e)},su=e=>{yi(e)},iu=e=>{xi.current=e},cu=e=>{Si(e)},du=e=>{Ri.current=e},lu=e=>{wi.current=e},uu=e=>{ki.current=e},pu=e=>{Ci.current=e},mu=e=>{ji.current=e},gu=e=>{Pi.current=e},hu=e=>{Mi.current=e},fu=e=>{Ii.current=e},bu=e=>{Ai.current=e},yu=e=>{Ti.current=e},xu=e=>{Fi.current=e},vu=e=>{Di.current=e},Su=e=>{Li(e)},Ru=e=>{Vi.current=e},wu=e=>{$i(e)},ku=e=>{$i(t=>[...t,e])},Cu=e=>{$i(t=>t.filter(t=>t.key!==`translation-${e}`))},ju=e=>{Wi(e)},Pu=e=>{Oi(e)},Mu=e=>{Ui(e)},Iu=e=>{qi.current=e},Au=e=>{_i.current=e},Tu=(0,de.useRef)(s&&o?.messages?o.messages:[]),Fu=(0,de.useRef)(!1),Du=(0,de.useRef)(null),[Nu,Lu]=(0,de.useState)(!1),Vu=(0,de.useRef)("allow"),Bu=(0,de.useRef)("allow"),$u=(0,de.useRef)("allow"),Eu=(0,de.useRef)("allow"),Wu=(0,de.useRef)(kt.current?kt.current:"media"),Hu=(0,de.useRef)(!0),Ou=(0,de.useRef)("webinar"!==Pt.current&&"conference"!==Pt.current),zu=(0,de.useRef)(!1),Uu=(0,de.useRef)("video"),qu=(0,de.useRef)(!0),_u=(0,de.useRef)(""),Gu=(0,de.useRef)(s&&o?.waitingList?o.waitingList:[]),Yu=(0,de.useRef)(0),Ku=(0,de.useRef)(Gu.current),Ju=(0,de.useRef)(""),Xu=(0,de.useRef)(s&&o?.requests?o.requests:[]),Zu=(0,de.useRef)(0),Qu=(0,de.useRef)(Xu.current),ep=(0,de.useRef)(0),[tp,rp]=(0,de.useState)(!1),[ap,np]=(0,de.useState)(""),[op,sp]=(0,de.useState)("info"),[ip,cp]=(0,de.useState)(3e3),[dp,lp]=(0,de.useState)("top"),up=(0,de.useRef)(null),[pp]=(0,de.useState)(!0),[mp]=(0,de.useState)(0),[gp,hp]=(0,de.useState)(!1),[fp,bp]=(0,de.useState)(!1),[yp,xp]=(0,de.useState)(!1),[vp,Sp]=(0,de.useState)(!1),[Rp,wp]=(0,de.useState)(!1),[kp,Cp]=(0,de.useState)(!1),[jp,Pp]=(0,de.useState)(!1),[Mp,Ip]=(0,de.useState)(!1),[Ap,Tp]=(0,de.useState)(!1),[Fp,Dp]=(0,de.useState)(!1),[Np,Lp]=(0,de.useState)(!1),[Vp,Bp]=(0,de.useState)(!1),[$p,Ep]=(0,de.useState)(!1),[Wp,Hp]=(0,de.useState)(!1),Op=(0,de.useRef)("video"),zp=(0,de.useRef)("all"),Up=(0,de.useRef)("all"),qp=(0,de.useRef)("fullDisplay"),_p=(0,de.useRef)(!1),Gp=(0,de.useRef)("media"),Yp=(0,de.useRef)(!0),Kp=(0,de.useRef)(!0),[Jp,Xp]=(0,de.useState)("#83c0e9"),[Zp,Qp]=(0,de.useState)("#ffffff"),em=(0,de.useRef)(!1),tm=(0,de.useRef)("Add Text"),rm=(0,de.useRef)("top"),[am,nm]=(0,de.useState)("#ffffff"),om=(0,de.useRef)("landscape"),sm=(0,de.useRef)(!0),im=(0,de.useRef)(!0),[cm,dm]=(0,de.useState)("green"),[lm,um]=(0,de.useState)(!1),[pm,mm]=(0,de.useState)("00:00:00"),[gm,hm]=(0,de.useState)(!1),[fm,bm]=(0,de.useState)(!1),ym=(0,de.useRef)(!1),xm=(0,de.useRef)(!1),vm={mainHeight:0,otherHeight:0,mainWidth:0,otherWidth:0},[Sm,Rm]=(0,de.useState)(vm),wm=(0,de.useRef)(vm),km=(0,de.useRef)({rows:0,cols:0,actualRows:0}),Cm=(0,de.useRef)({rows:0,cols:0,actualRows:0}),[jm,Pm]=(0,de.useState)(!1),[Mm,Im]=(0,de.useState)(!1),Am=(0,de.useRef)(!1),Tm=(0,de.useRef)(!1),Fm=(0,de.useRef)(!1),Dm=(0,de.useRef)(!1),Nm=(0,de.useRef)(!1),Lm=(0,de.useRef)(null),Vm=(0,de.useRef)(null),Bm=(0,de.useRef)(null),$m=(0,de.useRef)(null),Em=(0,de.useRef)({}),Wm=(0,de.useRef)({}),Hm=(0,de.useRef)({}),Om=(0,de.useRef)(null),zm=(0,de.useRef)(0),Um=(0,de.useRef)(null),qm=(0,de.useRef)([]),_m=(0,de.useRef)([]),Gm=(0,de.useRef)(s&&o?.polls?o.polls:[]),Ym=(0,de.useRef)(null),[Km,Jm]=(0,de.useState)(!1),Xm=(0,de.useRef)(null),Zm=(0,de.useRef)([]),Qm=(0,de.useRef)(!1),eg=(0,de.useRef)(!1),tg=(0,de.useRef)(!1),rg=(0,de.useRef)(null),[ag,ng]=(0,de.useState)(!1),og=(0,de.useRef)("en"),sg=(0,de.useRef)(!1),ig=(0,de.useRef)(null),cg=(0,de.useRef)(null),dg=(0,de.useRef)(new Map),lg=(0,de.useRef)({}),ug=(0,de.useRef)(new Set),pg=(0,de.useRef)(new Map),[mg,gg]=(0,de.useState)(new Map),hg=gg,fg=(0,de.useRef)({perSpeaker:new Map,globalLanguage:null}),[,bg]=(0,de.useState)({perSpeaker:new Map,globalLanguage:null}),yg=e=>{fg.current="function"==typeof e?e(fg.current):e,bg(e)},xg=fg.current.perSpeaker,vg=e=>{bg(t=>{const r=e(t.perSpeaker);return{...t,perSpeaker:r}})},Sg=(0,de.useRef)(""),Rg=(0,de.useRef)(""),wg=(0,de.useRef)(null),kg=(0,de.useRef)(null),Cg=(0,de.useRef)(!1),jg=(0,de.useRef)(null),Pg=(0,de.useRef)(!1),Mg=(0,de.useRef)(!1),Ig=(0,de.useRef)(null),Ag=(0,de.useRef)(null),Tg=(0,de.useRef)(!1),Fg=(0,de.useRef)(!1),[Dg,Ng]=(0,de.useState)(!1),Lg=(0,de.useRef)(!1),Vg=(0,de.useRef)(s&&o?.breakoutRooms?o.breakoutRooms:[]),Bg=(0,de.useRef)(0),$g=(0,de.useRef)(!1),Eg=(0,de.useRef)(!1),Wg=(0,de.useRef)(!1),Hg=(0,de.useRef)(-1),Og=(0,de.useRef)([]),zg=(0,de.useRef)(0),Ug=(0,de.useRef)(-1),[qg,_g]=(0,de.useState)(!1),Gg=(0,de.useRef)(s&&o?.whiteboardUsers?o.whiteboardUsers:[]),Yg=(0,de.useRef)(null),Kg=(0,de.useRef)(!1),Jg=(0,de.useRef)(!1),Xg=(0,de.useRef)(!1),Zg=(0,de.useRef)(Et.current),[Qg,eh]=(0,de.useState)(!1),[th,rh]=(0,de.useState)(!1),ah=(0,de.useRef)([]),nh=(0,de.useRef)(!0),oh=(0,de.useRef)([]),sh=(0,de.useRef)([]),ih=(0,de.useRef)(null),ch=(0,de.useRef)(null),dh=(0,de.useRef)(null),lh=(0,de.useRef)(null),uh=(0,de.useRef)(!1),ph=(0,de.useRef)(null),[mh,gh]=(0,de.useState)(!1),hh=e=>{Tu.current=e},fh=e=>{Fu.current=e},bh=e=>{Du.current=e},yh=e=>{Lu(e)},xh=e=>{Vu.current=e},vh=e=>{Bu.current=e},Sh=e=>{$u.current=e},Rh=e=>{Eu.current=e},wh=e=>{Wu.current=e},kh=e=>{Hu.current=e},Ch=async e=>{Ou.current=e,await mn({name:ds.current,parameters:{...ry(),...ty()}})},jh=e=>{zu.current=e},Ph=async e=>{qu.current=e,await Iy()},Mh=e=>{Uu.current=e},Ih=e=>{Yu.current=e},Ah=e=>{_u.current=e},Th=e=>{Gu.current=e,Ku.current=e,Yu.current=e.length},Fh=e=>{Zu.current=e},Dh=e=>{Ju.current=e},Nh=e=>{Xu.current=e,Qu.current=e,Zu.current=e.length},Lh=e=>{ep.current=e},Vh=e=>{if(""!==e&&e.length>0){let t=Gu.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));Ku.current=t,Yu.current=t.length}else Ku.current=Gu.current,Yu.current=Gu.current.length},Bh=e=>{if(""!==e&&e.length>0){let t=Xu.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));Qu.current=t,Zu.current=t.length}else Qu.current=Xu.current,Zu.current=Xu.current.length},$h=e=>{if(""!==e&&e.length>0){let t=Mt.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));It.current=t,Tt.current=t.length}else It.current=Mt.current,Tt.current=Mt.current.length},Eh=e=>{hp(e)},Wh=e=>{bp(e),1==e?dc(!1):1==im.current&&1==sm.current&&1==za.current&&yf(!0)},Hh=e=>{xp(e)},Oh=e=>{Sp(e)},zh=e=>{wp(e)},Uh=e=>{Cp(e)},qh=e=>{Pp(e)},_h=e=>{Ip(e)},Gh=e=>{Tp(e)},Yh=e=>{Dp(e),e?ny("messages"):yh(!1)},Kh=e=>{Lp(e)},Jh=e=>{Bp(e)},Xh=e=>{Hp(e)},Zh=e=>{Ep(e)},Qh=e=>{Op.current=e,im.current=!1},ef=e=>{zp.current=e,im.current=!1},tf=e=>{Up.current=e,im.current=!1},rf=e=>{qp.current=e,im.current=!1},af=e=>{_p.current=e,im.current=!1},nf=e=>{Gp.current=e,im.current=!1},of=e=>{Yp.current=e,im.current=!1},sf=e=>{em.current=e,im.current=!1},cf=e=>{tm.current=e,im.current=!1},df=e=>{rm.current=e,im.current=!1},lf=e=>{nm(e),im.current=!1},uf=e=>{Kp.current=e,im.current=!1},pf=e=>{Xp(e),im.current=!1},mf=e=>{Qp(e),im.current=!1},gf=e=>{om.current=e,im.current=!1},hf=e=>{sm.current=e},ff=e=>{im.current=e},bf=e=>{dm(e)},yf=e=>{um(e)},xf=e=>{mm(e)},vf=e=>{hm(e)},Sf=e=>{bm(e)},Rf=e=>{ym.current=e,py(e)},wf=e=>{xm.current=e,ly(e)},kf=(0,de.useCallback)((e,t=!0)=>{Rm(r=>{if(r.mainHeight===e.mainHeight&&r.otherHeight===e.otherHeight&&r.mainWidth===e.mainWidth&&r.otherWidth===e.otherWidth)return wm.current=r,r;const a={...e};return wm.current=a,t||Iy(),a})},[]),Cf=e=>{km.current=e},jf=e=>{Cm.current=e},Pf=e=>{Pm(e)},Mf=e=>{Im(e)},If=async()=>"granted",Af=async()=>"granted",Tf=e=>{Am.current=e},Ff=e=>{Tm.current=e},Df=e=>{Fm.current=e},Nf=e=>{Dm.current=e},Lf=e=>{Nm.current=e},Vf=e=>{Lm.current=e},Bf=e=>{Vm.current=e},$f=e=>{Bm.current=e},Ef=e=>{$m.current=e},Wf=e=>{Em.current=e},Hf=e=>{Wm.current=e},Of=e=>{Hm.current=e},zf=e=>{Om.current=e},Uf=e=>{zm.current=e},qf=e=>{Um.current=e},_f=e=>{qm.current=e},Gf=e=>{_m.current=e},Yf=e=>{Gm.current=e},Kf=e=>{Ym.current=e},Jf=(0,de.useCallback)(e=>{e&&Ue>_e&&Ue>=1200?Le("polls"):e?Jm(e):(Jm(!1),"polls"===Ne&&Le("none"))},[Ue,_e,Ne]),Xf=e=>{Xm.current=e},Zf=e=>{Zm.current=e},Qf=e=>{Qm.current=e},eb=e=>{eg.current=e},tb=e=>{tg.current=e},rb=e=>{rg.current=e,ng(!0===e?.supportTranslation)},ab=e=>{og.current=e},nb=e=>{sg.current=e},ob=e=>{ig.current=e},sb=e=>{cg.current=e,fg.current={...fg.current,globalLanguage:e},bg(t=>({...t,globalLanguage:e}))},ib=e=>{dg.current="function"==typeof e?e(dg.current):e},cb=e=>{lg.current="function"==typeof e?e(lg.current):e},db=(e,t,r)=>{pg.current.set(e,{languages:t,originalProducerId:r})},lb=e=>{Sg.current=e},ub=e=>{Rg.current=e},pb=e=>{wg.current=e},mb=e=>{kg.current=e},gb=e=>{Cg.current=e},hb=e=>{jg.current=e},fb=e=>{Pg.current=e},bb=e=>{Mg.current=e},yb=e=>{Ig.current=e},xb=e=>{Ag.current=e},vb=e=>{Tg.current=e},Sb=e=>{Fg.current=e},Rb=e=>{Ng(e)},wb=e=>{Lg.current=e},kb=e=>{Vg.current=e},Cb=e=>{Bg.current=e},jb=e=>{$g.current=e},Pb=e=>{Eg.current=e},Mb=e=>{Wg.current=e},Ib=e=>{Hg.current=e},Ab=e=>{Og.current=e},Tb=e=>{zg.current=e},Fb=e=>{Ug.current=e},Db=e=>{_g(e)},Nb=e=>{Gg.current=e},Lb=e=>{Yg.current=e},Vb=e=>{Kg.current=e},Bb=e=>{Jg.current=e,(e||my)&&zl(84)},$b=e=>{Xg.current=e},Eb=e=>{Zg.current=e},Wb=e=>{eh(e)},Hb=e=>{rh(e)},Ob=e=>{ah.current=e},zb=e=>{nh.current=e},Ub=e=>{oh.current=e},qb=e=>{sh.current=e},_b=e=>{ih.current=e},Gb=e=>{ch.current=e},Yb=e=>{dh.current=e},Kb=e=>{lh.current=e},Jb=e=>{uh.current=e},Xb=e=>{ph.current=e},Zb=e=>{gh(e)};function Qb(){return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}const ey=()=>{try{null!==c&&(c={...ry(),...ty()},d&&d(c))}catch{}return{...ry(),...ty()}},ty=()=>({updateMiniCardsGrid:_a,updatePrimaryGridLayoutMeta:Cf,updateAltGridLayoutMeta:jf,mixStreams:Ga,dispStreams:Ya,stopShareScreen:Ka,checkScreenShare:Ja,startShareScreen:Xa,requestScreenShare:Za,reorderStreams:Qa,prepopulateUserMedia:mn,videoCardComponent:W,audioCardComponent:H,miniCardComponent:O,miniAudioComponent:z,miniAudioPlayerComponent:q,meetingProgressTimerComponent:De,getVideos:gn,rePort:hn,trigger:fn,consumerResume:_,connectSendTransport:Wn,connectSendTransportAudio:w,connectSendTransportVideo:vn,connectSendTransportScreen:Sn,processConsumerTransports:Rn,resumePauseStreams:wn,readjust:kn,checkGrid:Cn,getEstimate:jn,calculateRowsAndColumns:Pn,addVideosGrid:G,onScreenChanges:In,sleep:An,changeVids:Tn,compareActiveNames:Fn,compareScreenStates:Dn,createSendTransport:Nn,resumeSendTransportAudio:Ln,receiveAllPipedTransports:Vn,disconnectSendTransportVideo:Bn,disconnectSendTransportAudio:$n,disconnectSendTransportScreen:En,getPipedProducersAlt:On,signalNewConsumerTransport:y,connectRecvTransport:zn,reUpdateInter:Un,updateParticipantAudioDecibels:qn,closeAndResize:_n,autoAdjust:Gn,switchUserVideoAlt:Yn,switchUserVideo:Kn,switchUserAudio:Jn,getDomains:Io,formatNumber:Zn,connectIps:Qn,connectLocalIps:S,createDeviceClient:Na,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro,captureCanvasStream:Uo,resumePauseAudioStreams:qo,processConsumerTransportsAudio:_o,checkPermission:Oa,streamSuccessVideo:$a,streamSuccessAudio:Ea,streamSuccessScreen:Wa,streamSuccessAudioSwitch:Ha,clickVideo:La,clickAudio:Va,clickScreenShare:Ba,switchVideoAlt:fr,requestPermissionCamera:If,requestPermissionAudio:Af,getMediaDevicesList:Ay,getParticipantMedia:Ty}),ry=()=>({localUIMode:rt.current,isDarkModeValue:Me,videoCardComponent:W,audioCardComponent:H,miniCardComponent:O,miniAudioComponent:z,miniAudioPlayerComponent:q,meetingProgressTimerComponent:De,roomName:gt.current,member:ft.current,adminPasscode:bt.current,youAreCoHost:St.current,youAreHost:Rt.current,islevel:yt.current,confirmedToRecord:wt.current,meetingDisplayType:kt.current,meetingVideoOptimized:Ct.current,eventType:Pt.current,participants:Mt.current,filteredParticipants:It.current,participantsCounter:Tt.current,participantsFilter:Dt.current,consume_sockets:Nt.current,rtpCapabilities:Vt.current,roomRecvIPs:Bt.current,meetingRoomParams:$t.current,itemPageLimit:Et.current,audioOnlyRoom:Wt.current,addForBasic:Ht.current,screenPageLimit:Ot.current,shareScreenStarted:zt.current,shared:Ut.current,targetOrientation:qt.current,targetResolution:_t.current,targetResolutionHost:Gt.current,vidCons:Yt.current,frameRate:Kt.current,hParams:Jt.current,vParams:Xt.current,screenParams:Zt.current,aParams:Qt.current,recordingAudioPausesLimit:er.current,recordingAudioPausesCount:tr.current,recordingAudioSupport:rr.current,recordingAudioPeopleLimit:ar.current,recordingAudioParticipantsTimeLimit:nr.current,recordingVideoPausesCount:or.current,recordingVideoPausesLimit:sr.current,recordingVideoSupport:cr.current,recordingVideoPeopleLimit:vr.current,recordingVideoParticipantsTimeLimit:Rr.current,recordingAllParticipantsSupport:Cr.current,recordingVideoParticipantsSupport:jr.current,recordingAllParticipantsFullRoomSupport:Pr.current,recordingVideoParticipantsFullRoomSupport:Tr.current,recordingPreferredOrientation:Fr.current,recordingSupportForOtherOrientation:Dr.current,recordingMultiFormatsSupport:Nr.current,userRecordingParams:Lr.current,canRecord:Er.current,startReport:Wr.current,endReport:Or.current,recordStartTime:Ur.current,recordElapsedTime:qr.current,isTimerRunning:_r.current,canPauseResume:Yr.current,recordChangeSeconds:Jr.current,pauseLimit:Qr.current,pauseRecordCount:ea.current,canLaunchRecord:na.current,stopLaunchRecord:pa.current,participantsAll:Gi.current,firstAll:ha.current,updateMainWindow:ba.current,first_round:ya.current,landScaped:xa.current,lock_screen:va.current,screenId:Sa.current,allVideoStreams:Ra.current,newLimitedStreams:wa.current,newLimitedStreamsIDs:ka.current,activeSounds:Ca.current,screenShareIDStream:ja.current,screenShareNameStream:Pa.current,adminIDStream:Ma.current,adminNameStream:Ia.current,youYouStream:Aa.current,youYouStreamIDs:Ta.current,localStream:Da.current,recordStarted:za.current,recordResumed:en.current,recordPaused:tn.current,recordStopped:rn.current,adminRestrictSetting:an.current,videoRequestState:nn.current,videoRequestTime:on.current,videoAction:sn.current,localStreamVideo:cn.current,userDefaultVideoInputDevice:dn.current,currentFacingMode:ln.current,prevFacingMode:un.current,defVideoID:pn.current,allowed:bn.current,dispActiveNames:Hn.current,p_dispActiveNames:To.current,activeNames:Do.current,prevActiveNames:No.current,p_activeNames:Yo.current,membersReceived:Ko.current,deferScreenReceived:Jo.current,hostFirstSwitch:Xo.current,micAction:Zo.current,screenAction:Qo.current,chatAction:es.current,audioRequestState:ts.current,screenRequestState:rs.current,chatRequestState:as.current,audioRequestTime:ns.current,screenRequestTime:os.current,chatRequestTime:ss.current,updateRequestIntervalSeconds:is.current,oldSoundIds:cs.current,hostLabel:ds.current,mainScreenFilled:ls.current,localStreamScreen:us.current,screenAlreadyOn:ps,chatAlreadyOn:gs,redirectURL:fs.current,oldAllStreams:bs.current,adminVidID:ys.current,streamNames:xs.current,non_alVideoStreams:vs.current,sortAudioLoudness:Ss.current,audioDecibels:Rs.current,mixed_alVideoStreams:ws.current,non_alVideoStreams_muted:ks.current,paginatedStreams:Cs.current,localStreamAudio:js.current,defAudioID:Ps.current,userDefaultAudioInputDevice:Ms.current,userDefaultAudioOutputDevice:Is.current,prevAudioInputDevice:As.current,prevVideoInputDevice:Ts.current,audioPaused:Fs.current,mainScreenPerson:Ds.current,adminOnMainScreen:Ns.current,screenStates:Ls.current,prevScreenStates:Vs.current,updateDateState:Bs.current,lastUpdate:$s.current,nForReadjustRecord:Es.current,fixedPageLimit:Ws.current,removeAltGrid:Hs.current,nForReadjust:Os.current,lastReorderTime:qs.current,reorderInterval:zs.current,fastReorderInterval:Us.current,audStreamNames:_s.current,currentUserPage:Gs.current,mainHeightWidth:Ys,prevMainHeightWidth:Js.current,prevDoPaginate:Xs.current,doPaginate:Zs.current,shareEnded:Qs.current,lStreams:ei.current,chatRefStreams:ti.current,controlHeight:ri,isWideScreen:ni.current,isMediumScreen:oi.current,isSmallScreen:si.current,addGrid:ii.current,addAltGrid:ci.current,gridRows:di,gridCols:ui,altGridRows:mi,altGridCols:hi,numberPages:bi,currentStreams:xi,showMiniView:vi,nStream:Ri.current,defer_receive:wi.current,allAudioStreams:ki.current,screenProducer:ji.current,remoteScreenStream:Ci.current,gotAllVids:Mi.current,paginationHeightWidth:Ii.current,paginationDirection:Ai.current,gridSizes:Ti.current,screenForceFullDisplay:Fi.current,mainGridStream:Di.current,otherGridStreams:Ni,audioOnlyStreams:Vi.current,translationStreams:Bi,addTranslationStream:ku,removeTranslationStream:Cu,videoInputs:Ei,audioInputs:Hi,meetingProgressTime:zi,meetingElapsedTime:qi.current,ref_participants:_i.current,messages:Tu.current,startDirectMessage:Fu.current,directMessageDetails:Du.current,coHost:xt.current,coHostResponsibility:vt.current,audioSetting:Vu.current,videoSetting:Bu.current,screenshareSetting:$u.current,chatSetting:Eu.current,autoWave:Hu.current,forceFullDisplay:Ou.current,prevForceFullDisplay:zu.current,prevMeetingDisplayType:Uu.current,selfViewForceFull:qu.current,waitingRoomFilter:_u.current,waitingRoomList:Gu.current,waitingRoomCounter:Yu.current,filteredWaitingRoomList:Ku.current,requestFilter:Ju.current,requestList:Xu.current,requestCounter:Zu.current,filteredRequestList:Qu.current,totalReqWait:ep.current,alertVisible:tp,alertMessage:ap,alertType:op,alertDuration:ip,progressTimerVisible:pp,progressTimerValue:mp,isMenuModalVisible:gp,isRecordingModalVisible:fp,isSettingsModalVisible:yp,isRequestsModalVisible:vp,isWaitingModalVisible:Rp,isCoHostModalVisible:kp,isMediaSettingsModalVisible:jp,isDisplaySettingsModalVisible:Mp,isParticipantsModalVisible:Ap,isMessagesModalVisible:Fp,isConfirmExitModalVisible:Np,isConfirmHereModalVisible:Vp,isShareEventModalVisible:$p,isLoadingModalVisible:Wp,recordingMediaOptions:Op.current,recordingAudioOptions:zp.current,recordingVideoOptions:Up.current,recordingVideoType:qp.current,recordingVideoOptimized:_p.current,recordingDisplayType:Gp.current,recordingAddHLS:Yp.current,recordingAddText:em.current,recordingCustomText:tm.current,recordingCustomTextPosition:rm.current,recordingCustomTextColor:am,recordingNameTags:Kp.current,recordingBackgroundColor:Jp,recordingNameTagsColor:Zp,recordingOrientationVideo:om.current,clearedToResume:sm.current,clearedToRecord:im.current,recordState:cm,showRecordButtons:lm,recordingProgressTime:pm,audioSwitching:gm,videoSwitching:fm,videoAlreadyOn:ym.current,audioAlreadyOn:xm.current,componentSizes:wm.current,hasCameraPermission:jm,hasAudioPermission:Mm,transportCreated:Am.current,localTransportCreated:Tm.current,transportCreatedVideo:Fm.current,transportCreatedAudio:Dm.current,transportCreatedScreen:Nm.current,producerTransport:Lm.current,localProducerTransport:Vm.current,videoProducer:Bm.current,localVideoProducer:$m.current,params:Em.current,videoParams:Wm.current,audioParams:Hm.current,audioProducer:Om.current,audioLevel:zm.current,localAudioProducer:Um.current,consumerTransports:qm.current,consumingTransports:_m.current,polls:Gm.current,poll:Ym.current,isPollModalVisible:Km,customImage:Sg.current,selectedImage:Rg.current,segmentVideo:wg.current,selfieSegmentation:kg.current,pauseSegmentation:Cg.current,processedStream:jg.current,keepBackground:Pg.current,backgroundHasChanged:Mg.current,virtualStream:Ig.current,mainCanvas:Ag.current,prevKeepBackground:Tg.current,appliedBackground:Fg.current,isBackgroundModalVisible:Dg,autoClickBackground:Lg.current,breakoutRooms:Vg.current,currentRoomIndex:Bg.current,canStartBreakout:$g.current,breakOutRoomStarted:Eg.current,breakOutRoomEnded:Wg.current,hostNewRoom:Hg.current,limitedBreakRoom:Og.current,mainRoomsLength:zg.current,memberRoom:Ug.current,isBreakoutRoomsModalVisible:qg,whiteboardUsers:Gg.current,currentWhiteboardIndex:Yg.current,canStartWhiteboard:Kg.current,whiteboardStarted:Jg.current,whiteboardEnded:Xg.current,whiteboardLimit:Zg.current,isWhiteboardModalVisible:Qg,isConfigureWhiteboardModalVisible:th,shapes:ah.current,useImageBackground:nh.current,redoStack:oh.current,undoStack:sh.current,canvasStream:ih.current,canvasWhiteboard:ch.current,canvasScreenboard:dh.current,processedScreenStream:lh.current,annotateScreenStream:uh.current,mainScreenCanvas:ph.current,isScreenboardModalVisible:mh,permissionConfig:Xm.current,panelists:Zm.current,panelistsFocused:Qm.current,muteOthersMic:eg.current,muteOthersCamera:tg.current,validated:je,device:st.current,socket:at.current,localSocket:nt.current,checkMediaPermission:!1,onWeb:!0,mediaDevices:ua,updateRoomName:tc,updateMember:rc,updateAdminPasscode:ac,updateYouAreCoHost:ic,updateYouAreHost:cc,updateIslevel:nc,updateCoHost:oc,updateCoHostResponsibility:sc,updateConfirmedToRecord:dc,updateMeetingDisplayType:lc,updateMeetingVideoOptimized:uc,updateEventType:pc,updateParticipants:mc,updateParticipantsCounter:gc,updateParticipantsFilter:hc,updateConsume_sockets:Yc,updateRtpCapabilities:Kc,updateRoomRecvIPs:Jc,updateMeetingRoomParams:Xc,updateItemPageLimit:Zc,updateAudioOnlyRoom:Qc,updateAddForBasic:ed,updateScreenPageLimit:td,updateShareScreenStarted:rd,updateShared:ad,updateTargetOrientation:nd,updateTargetResolution:od,updateTargetResolutionHost:sd,updateVidCons:id,updateFrameRate:cd,updateHParams:dd,updateVParams:ld,updateScreenParams:ud,updateAParams:pd,updateRecordingAudioPausesLimit:fc,updateRecordingAudioPausesCount:bc,updateRecordingAudioSupport:yc,updateRecordingAudioPeopleLimit:xc,updateRecordingAudioParticipantsTimeLimit:vc,updateRecordingVideoPausesCount:Sc,updateRecordingVideoPausesLimit:Rc,updateRecordingVideoSupport:wc,updateRecordingVideoPeopleLimit:kc,updateRecordingVideoParticipantsTimeLimit:Cc,updateRecordingAllParticipantsSupport:jc,updateRecordingVideoParticipantsSupport:Pc,updateRecordingAllParticipantsFullRoomSupport:Mc,updateRecordingVideoParticipantsFullRoomSupport:Ic,updateRecordingPreferredOrientation:Ac,updateRecordingSupportForOtherOrientation:Tc,updateRecordingMultiFormatsSupport:Fc,updateUserRecordingParams:Dc,updateCanRecord:Nc,updateStartReport:Lc,updateEndReport:Vc,updateRecordTimerInterval:Bc,updateRecordStartTime:$c,updateRecordElapsedTime:Ec,updateIsTimerRunning:Wc,updateCanPauseResume:Hc,updateRecordChangeSeconds:Oc,updatePauseLimit:zc,updatePauseRecordCount:Uc,updateCanLaunchRecord:qc,updateStopLaunchRecord:_c,updateParticipantsAll:Gc,updateFirstAll:md,updateUpdateMainWindow:gd,updateFirst_round:hd,updateLandScaped:fd,updateLock_screen:bd,updateScreenId:yd,updateAllVideoStreams:xd,updateNewLimitedStreams:vd,updateNewLimitedStreamsIDs:Sd,updateActiveSounds:Rd,updateScreenShareIDStream:wd,updateScreenShareNameStream:kd,updateAdminIDStream:Cd,updateAdminNameStream:jd,updateYouYouStream:Pd,updateYouYouStreamIDs:Md,updateLocalStream:Id,updateRecordStarted:Ad,updateRecordResumed:Td,updateRecordPaused:Fd,updateRecordStopped:Dd,updateAdminRestrictSetting:Nd,updateVideoRequestState:Ld,updateVideoRequestTime:Vd,updateVideoAction:Bd,updateLocalStreamVideo:$d,updateUserDefaultVideoInputDevice:Ed,updateCurrentFacingMode:Wd,updateRef_participants:Au,updateDefVideoID:Od,updateAllowed:zd,updateDispActiveNames:Ud,updateP_dispActiveNames:qd,updateActiveNames:_d,updatePrevActiveNames:Gd,updateP_activeNames:Yd,updateMembersReceived:Kd,updateDeferScreenReceived:Jd,updateHostFirstSwitch:Xd,updateMicAction:Zd,updateScreenAction:Qd,updateChatAction:el,updateAudioRequestState:tl,updateScreenRequestState:rl,updateChatRequestState:al,updateAudioRequestTime:nl,updateScreenRequestTime:ol,updateChatRequestTime:sl,updateOldSoundIds:il,updatehostLabel:cl,updateMainScreenFilled:dl,updateLocalStreamScreen:ll,updateScreenAlreadyOn:ul,updateChatAlreadyOn:pl,updateRedirectURL:ml,updateOldAllStreams:gl,updateAdminVidID:hl,updateStreamNames:fl,updateNon_alVideoStreams:bl,updateSortAudioLoudness:yl,updateAudioDecibels:xl,updateMixed_alVideoStreams:vl,updateNon_alVideoStreams_muted:Sl,updatePaginatedStreams:Rl,updateLocalStreamAudio:wl,updateDefAudioID:kl,updateUserDefaultAudioInputDevice:Cl,updateUserDefaultAudioOutputDevice:jl,updatePrevAudioInputDevice:Pl,updatePrevVideoInputDevice:Ml,updateAudioPaused:Il,updateMainScreenPerson:Al,updateAdminOnMainScreen:Tl,updateScreenStates:Fl,updatePrevScreenStates:Dl,updateUpdateDateState:Nl,updateLastUpdate:Ll,updateNForReadjustRecord:Vl,updateFixedPageLimit:Bl,updateRemoveAltGrid:$l,updateNForReadjust:El,updateLastReorderTime:Wl,updateAudStreamNames:Hl,updateCurrentUserPage:Ol,updatePrevFacingMode:Hd,updateMainHeightWidth:zl,updatePrevMainHeightWidth:Ul,updatePrevDoPaginate:ql,updateDoPaginate:_l,updateShareEnded:Gl,updateLStreams:Yl,updateChatRefStreams:Kl,updateControlHeight:Jl,updateIsWideScreen:Xl,updateIsMediumScreen:Zl,updateIsSmallScreen:Ql,updateAddGrid:eu,updateAddAltGrid:tu,updateGridRows:ru,updateGridCols:au,updateAltGridRows:nu,updateAltGridCols:ou,updateNumberPages:su,updateCurrentStreams:iu,updateShowMiniView:cu,updateNStream:du,updateDefer_receive:lu,updateAllAudioStreams:uu,updateRemoteScreenStream:pu,updateScreenProducer:mu,updateLocalScreenProducer:gu,updateGotAllVids:hu,updatePaginationHeightWidth:fu,updatePaginationDirection:bu,updateGridSizes:yu,updateScreenForceFullDisplay:xu,updateMainGridStream:vu,updateOtherGridStreams:Su,updateAudioOnlyStreams:Ru,updateTranslationStreams:wu,updateVideoInputs:ju,updateAudioInputs:Pu,updateMeetingProgressTime:Mu,updateMeetingElapsedTime:Iu,updateMessages:hh,updateStartDirectMessage:fh,updateDirectMessageDetails:bh,updateShowMessagesBadge:yh,updateAudioSetting:xh,updateVideoSetting:vh,updateScreenshareSetting:Sh,updateChatSetting:Rh,updateDisplayOption:wh,updateAutoWave:kh,updateForceFullDisplay:Ch,updatePrevForceFullDisplay:jh,updatePrevMeetingDisplayType:Mh,updateSelfViewForceFull:Ph,updateWaitingRoomFilter:Ah,updateWaitingRoomList:Th,updateWaitingRoomCounter:Ih,updateRequestFilter:Dh,updateRequestList:Nh,updateRequestCounter:Fh,updateTotalReqWait:Lh,updateIsMenuModalVisible:Eh,updateIsRecordingModalVisible:Wh,updateIsSettingsModalVisible:Hh,updateIsRequestsModalVisible:Oh,updateIsWaitingModalVisible:zh,updateIsCoHostModalVisible:Uh,updateIsMediaSettingsModalVisible:qh,updateIsDisplaySettingsModalVisible:_h,updateIsParticipantsModalVisible:Gh,updateIsMessagesModalVisible:Yh,updateIsConfirmExitModalVisible:Kh,updateIsConfirmHereModalVisible:Jh,updateIsShareEventModalVisible:Zh,updateIsLoadingModalVisible:Xh,updateRecordingMediaOptions:Qh,updateRecordingAudioOptions:ef,updateRecordingVideoOptions:tf,updateRecordingVideoType:rf,updateRecordingVideoOptimized:af,updateRecordingDisplayType:nf,updateRecordingAddHLS:of,updateRecordingAddText:sf,updateRecordingCustomText:cf,updateRecordingCustomTextPosition:df,updateRecordingCustomTextColor:lf,updateRecordingNameTags:uf,updateRecordingBackgroundColor:pf,updateRecordingNameTagsColor:mf,updateRecordingOrientationVideo:gf,updateClearedToResume:hf,updateClearedToRecord:ff,updateRecordState:bf,updateShowRecordButtons:yf,updateRecordingProgressTime:xf,updateAudioSwitching:vf,updateVideoSwitching:Sf,updateVideoAlreadyOn:Rf,updateAudioAlreadyOn:wf,updateComponentSizes:kf,updateHasCameraPermission:Pf,updateHasAudioPermission:Mf,updateTransportCreated:Tf,updateLocalTransportCreated:Ff,updateTransportCreatedVideo:Df,updateTransportCreatedAudio:Nf,updateTransportCreatedScreen:Lf,updateProducerTransport:Vf,updateLocalProducerTransport:Bf,updateVideoProducer:$f,updateLocalVideoProducer:Ef,updateParams:Wf,updateVideoParams:Hf,updateAudioParams:Of,updateAudioProducer:zf,updateAudioLevel:Uf,updateLocalAudioProducer:qf,updateConsumerTransports:_f,updateConsumingTransports:Gf,updatePolls:Yf,updatePoll:Kf,updateIsPollModalVisible:Jf,updateCustomImage:lb,updateSelectedImage:ub,updateSegmentVideo:pb,updateSelfieSegmentation:mb,updatePauseSegmentation:gb,updateProcessedStream:hb,updateKeepBackground:fb,updateBackgroundHasChanged:bb,updateVirtualStream:yb,updateMainCanvas:xb,updatePrevKeepBackground:vb,updateAppliedBackground:Sb,updateIsBackgroundModalVisible:Rb,updateAutoClickBackground:wb,updateBreakoutRooms:kb,updateCurrentRoomIndex:Cb,updateCanStartBreakout:jb,updateBreakOutRoomStarted:Pb,updateBreakOutRoomEnded:Mb,updateHostNewRoom:Ib,updateLimitedBreakRoom:Ab,updateMainRoomsLength:Tb,updateMemberRoom:Fb,updateIsBreakoutRoomsModalVisible:Db,updateWhiteboardUsers:Nb,updateCurrentWhiteboardIndex:Lb,updateCanStartWhiteboard:Vb,updateWhiteboardStarted:Bb,updateWhiteboardEnded:$b,updateWhiteboardLimit:Eb,updateIsWhiteboardModalVisible:Wb,updateIsConfigureWhiteboardModalVisible:Hb,updateShapes:Ob,updateUseImageBackground:zb,updateRedoStack:Ub,updateUndoStack:qb,updateCanvasStream:_b,updateCanvasWhiteboard:Gb,updateCanvasScreenboard:Yb,updateProcessedScreenStream:Kb,updateAnnotateScreenStream:Jb,updateMainScreenCanvas:Xb,updateIsScreenboardModalVisible:Zb,updatePermissionConfig:Xf,updatePanelists:Zf,updatePanelistsFocused:Qf,updateMuteOthersMic:eb,updateMuteOthersCamera:tb,checkOrientation:Qb,updateDevice:Xi,updateSocket:Ki,updateLocalSocket:Ji,updateValidated:Yi,showAlert:ay,getUpdatedAllParams:ey,listenPreferences:dg.current,translationProducerMap:lg.current,activeTranslationProducerIds:ug.current,translationSubscriptions:new Map(Array.from(dg.current.entries()).map(([e,t])=>[`${e}_${t}`,{speakerId:e,language:t}])),speakerTranslationStates:mg,listenerTranslationPreferences:fg.current,updateListenerTranslationPreferences:yg,listenerTranslationOverrides:fg.current.perSpeaker,updateListenerTranslationOverrides:vg,startConsumingTranslation:async(e,t,r,a,n)=>{if(a){const e=lg.current[a];if(e){const t=[];for(const[a,n]of Object.entries(e)){if(a.toLowerCase()===r.toLowerCase())continue;const e=qm.current.findIndex(e=>e.producerId===n);if(-1!==e){const r=qm.current[e];r.socket_&&r.serverConsumerTransportId&&r.socket_.emit("consumer-close",{serverConsumerId:r.serverConsumerTransportId},()=>{}),r.consumer&&r.consumer.close(),ug.current.delete(n);const o=qm.current.filter((t,r)=>r!==e);_f(o),t.push(a)}}t.length>0&&cb(e=>{const r={...e};if(r[a]){const e={...r[a]};for(const r of t)delete e[r];r[a]=e}return r})}}ug.current.add(e);const o=n||at.current;if(o){if(await y({remoteProducerId:e,islevel:yt.current,nsock:o,parameters:{...ry(),...ty(),activeTranslationProducerIds:ug.current}}),a){cb(t=>({...t,[a]:{...t[a]||{},[r.toLowerCase()]:e}}));const n={consumerTransports:qm.current,roomName:gt.current,member:ft.current,updateConsumerTransports:_f,breakOutRoomStarted:Eg.current,breakOutRoomEnded:Wg.current,breakoutRooms:Vg.current,limitedBreakRoom:Og.current,participants:Mt.current,islevel:yt.current,eventType:Pt.current,hostNewRoom:Hg.current};await Oo({originalProducerId:a,speakerId:t,parameters:n})}}else console.warn("[Translation] No socket available for consuming translation")},setListenerPreferenceForSpeaker:async(e,t,r=!1)=>{const a=t?.toLowerCase()||null;yg(t=>({...t,perSpeaker:new Map(t.perSpeaker).set(e,{speakerId:e,language:a,wantOriginal:r})}));const n=mg.get(e);if(n?.originalProducerId){const t=lg.current[n.originalProducerId];if(t)for(const[e,n]of Object.entries(t))if(r||a&&e.toLowerCase()!==a){const e=qm.current.findIndex(e=>e.producerId===n);if(-1!==e){const t=qm.current[e];t.socket_&&t.serverConsumerTransportId&&t.socket_.emit("consumer-close",{serverConsumerId:t.serverConsumerTransportId},()=>{}),t.consumer&&t.consumer.close(),ug.current.delete(n),qm.current.splice(e,1),_f([...qm.current])}}r&&n.originalProducerId&&await zo({originalProducerId:n.originalProducerId,speakerId:e,parameters:{consumerTransports:qm.current,updateConsumerTransports:_f,roomName:gt.current,member:ft.current}})}const o=at.current;o&&o.emit("translation:setListenerPreferences",{roomName:gt.current,preferences:{perSpeaker:{[e]:{language:t,wantOriginal:r}}}},e=>{e?.success||console.warn(`[Translation] Failed to sync listener preference: ${e?.error}`)})},setListenerGlobalPreference:async e=>{const t=e?.toLowerCase()||null;yg(e=>({...e,globalLanguage:t}));for(const[e,r]of mg){const a=fg.current.perSpeaker?.get(e);if(!a&&r?.originalProducerId){const e=lg.current[r.originalProducerId];if(e)for(const[r,a]of Object.entries(e))if(t&&r.toLowerCase()!==t){const e=qm.current.findIndex(e=>e.producerId===a);if(-1!==e){const t=qm.current[e];t.socket_&&t.serverConsumerTransportId&&t.socket_.emit("consumer-close",{serverConsumerId:t.serverConsumerTransportId},()=>{}),t.consumer&&t.consumer.close(),ug.current.delete(a),qm.current.splice(e,1),_f([...qm.current])}}}}const r=at.current;r&&r.emit("translation:setListenerPreferences",{roomName:gt.current,preferences:{global:e}},e=>{e?.success||console.warn(`[Translation] Failed to sync global preference: ${e?.error}`)})},clearListenerPreferenceForSpeaker:async e=>{yg(t=>{const r=new Map(t.perSpeaker);return r.delete(e),{...t,perSpeaker:r}});const t=at.current;t&&t.emit("translation:setListenerPreferences",{roomName:gt.current,preferences:{perSpeaker:{[e]:null}}})},setListenerOverrideToOriginal:e=>{vg(t=>{const r=new Map(t);return r.set(e,{speakerId:e,wantOriginal:!0,preferredLanguage:void 0}),r})},setListenerOverrideLanguage:(e,t)=>{vg(r=>{const a=new Map(r);return a.set(e,{speakerId:e,wantOriginal:!1,preferredLanguage:t}),a})},clearListenerOverride:e=>{vg(t=>{const r=new Map(t);return r.delete(e),r})},customVideoCard:g,customAudioCard:h,customMiniCard:f,customPreJoinPage:b}),ay=({message:e,type:t,duration:r=3e3,position:a})=>{const n=a??("danger"===t||"warning"===t?"center":"top");up.current&&(clearTimeout(up.current),up.current=null),rp(!1),setTimeout(()=>{np(e),sp(t),cp(r),lp(n),rp(!0),r>0&&(up.current=setTimeout(()=>{rp(!1)},r+50))},50)};(0,de.useEffect)(()=>()=>{up.current&&clearTimeout(up.current)},[]);const ny=(0,de.useCallback)((e,t=!1)=>{"recording"===e&&sa({updateIsRecordingModalVisible:Wh,isRecordingModalVisible:fp,showAlert:ay,stopLaunchRecord:pa.current,canLaunchRecord:na.current,recordingAudioSupport:rr.current,recordingVideoSupport:cr.current,updateCanRecord:Nc,updateClearedToRecord:ff,recordStarted:za.current,recordPaused:tn.current,localUIMode:rt.current}),"background"===e&&Ng(!0),"mediaSettings"===e&&ia({updateIsMediaSettingsModalVisible:qh,isMediaSettingsModalVisible:jp,audioInputs:Hi,videoInputs:Ei,updateAudioInputs:Pu,updateVideoInputs:ju,mediaDevices:ua}),Ne===e?(Le("none"),Oe([])):(t&&"none"!==Ne?Oe(e=>[...e,Ne]):t||Oe([]),Le(e))},[Ne,Hi,Ei,Pu,ju,qh,jp,Wh,fp,ay,Nc,ff,Ng]);(0,de.useEffect)(()=>{"background"===Ne&&(Ng(!0),Le("none"),Oe([]))},[Ne]);const oy=(0,de.useCallback)(()=>{if(Ve.length>0){const e=[...Ve],t=e.pop();Oe(e),Le(t)}else Le("none")},[Ve]),sy=(0,de.useCallback)(()=>{ny("menu")},[ny]),iy=(0,de.useCallback)(()=>{ny("participants")},[ny]),cy=(0,de.useCallback)(()=>{ny("messages")},[ny]),[dy,ly]=(0,de.useState)(!!xm.current&&xm.current),[uy,py]=(0,de.useState)(!!ym.current&&ym.current),[my,gy]=(0,de.useState)(!1),[hy]=(0,de.useState)(!1),[fy]=(0,de.useState)(!1),by=[{icon:pe.faRecordVinyl,text:"Record",name:"Record",onPress:()=>{ny("recording",!0)},activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0}],yy=[{icon:pe.faPlayCircle,active:!1===tn.current,name:tn.current?"Resume":"Pause",onPress:()=>{so({parameters:{...ry(),...ty()}})},activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",alternateIcon:pe.faPauseCircle,show:!0},{icon:pe.faStopCircle,active:!1,name:"Stop",onPress:()=>{io({parameters:{...ry(),...ty()}})},activeColor:"#22C55E",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0},{customComponent:(0,ce.jsx)("div",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:2},title:"Recording duration",children:(0,ce.jsx)("span",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:0,color:Me?"#FFFFFF":"#1F2937",fontWeight:600,fontSize:"14px"},children:pm})}),name:"Timer",show:!0},{icon:pe.faDotCircle,active:!1,name:tn.current?"Paused":"Recording",onPress:()=>console.log("Status pressed"),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:!1===tn.current?"#EF4444":"#EAB308",show:!0},{icon:pe.faCog,active:!1,name:tn.current?"Settings":"Settings - Pause to enable",disabled:!tn.current,onPress:()=>{tn.current?sa({updateIsRecordingModalVisible:Wh,isRecordingModalVisible:fp,showAlert:ay,stopLaunchRecord:pa.current,canLaunchRecord:na.current,recordingAudioSupport:rr.current,recordingVideoSupport:cr.current,updateCanRecord:Nc,updateClearedToRecord:ff,recordStarted:za.current,recordPaused:tn.current,localUIMode:rt.current}):ay?.({message:"Please pause recording first to access settings",type:"danger",duration:3e3})},activeColor:"#22C55E",inActiveColor:tn.current?Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)":Me?"rgba(255,255,255,0.3)":"rgba(0,0,0,0.3)",show:!0}],xy=[{icon:pe.faRecordVinyl,text:"Record",tooltip:"Start or manage session recording to save video and audio",action:()=>{ny("recording",!0)},show:!lm&&"2"===yt.current},...lm&&"2"===yt.current?[{customComponent:(0,ce.jsxs)("div",{style:{position:"relative",backgroundColor:Me?"rgba(0, 0, 0, 0.35)":"rgba(255, 255, 255, 0.35)",borderRadius:12,padding:"8px 12px",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",overflowX:"auto",whiteSpace:"nowrap",maxWidth:"100%",scrollbarWidth:"none",msOverflowStyle:"none"},children:[(0,ce.jsx)("span",{style:{position:"absolute",top:2,right:8,fontSize:"9px",fontWeight:500,color:Me?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.5)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Recording Controls"}),(0,ce.jsx)(V,{buttons:yy,direction:"horizontal",showAspect:!0,renderButton:({button:e,defaultButton:t})=>(0,ce.jsx)(Ie,{message:e.name||"",position:"bottom",usePortal:!0,children:t}),renderButtonContent:({defaultIcon:e})=>e})]}),show:!0,renderAsButton:!1}]:[],{icon:pe.faCog,text:"Event Settings",tooltip:"Configure event permissions, audio/video controls, and moderation options",action:()=>{ny("eventSettings",!0)},show:"2"===yt.current},{icon:pe.faUsers,text:"Requests",tooltip:"Review and manage participant requests to speak or share their screen",action:()=>{ny("requests",!0)},show:"2"===yt.current||vt.current&&xt.current&&xt.current===ft.current&&1==!!vt.current.find(e=>"media"===e.name).value||!1},{icon:pe.faClock,text:"Waiting",tooltip:"View and admit participants waiting to join the session",action:()=>{ny("waiting",!0)},show:"2"===yt.current||vt.current&&xt.current&&xt.current===ft.current&&1==!!vt.current.find(e=>"waiting"===e.name).value||!1},{icon:pe.faUserPlus,text:"Co-host",tooltip:"Assign or manage co-hosts who can help moderate the session",action:()=>{ny("coHost",!0)},show:"2"===yt.current},{icon:pe.faTools,text:"Set Media",tooltip:"Configure your microphone, camera, and audio output settings",action:()=>{ny("mediaSettings",!0)},show:!0},{icon:pe.faDesktop,text:"Display",tooltip:"Customize layout, grid view, and screen display preferences",action:()=>{ny("displaySettings",!0)},show:!0},{icon:pe.faPoll,text:"Poll",tooltip:"Create polls to gather participant feedback or vote on topics",action:()=>{ny("polls",!0)},show:!0},{icon:pe.faUserFriends,text:"Breakout Rooms",tooltip:"Create smaller group rooms for focused discussions or activities",action:()=>{ny("breakoutRooms",!0)},show:"2"==yt.current},{icon:pe.faChalkboardTeacher,text:"Whiteboard",tooltip:"Configure and launch the collaborative whiteboard for drawing and annotations",action:()=>{ny("configureWhiteboard",!0)},show:"2"==yt.current},{icon:pe.faShieldAlt,text:"Permissions",tooltip:"Manage participant permission levels and configure capability settings",action:()=>{ny("permissions",!0)},show:"2"===yt.current},{icon:pe.faStar,text:"Panelists",tooltip:"Select and manage featured panelists to focus in the main display",action:()=>{ny("panelists",!0)},show:"2"===yt.current},{icon:pe.faGlobe,text:"Translation",tooltip:"Configure real-time translation for your spoken language and listening preferences",action:()=>{ny("translation",!0)},show:ag}],vy=[{icon:Me?pe.faSun:pe.faMoon,active:!0,alternateIcon:Me?pe.faSun:pe.faMoon,name:Me?"Light Mode":"Dark Mode",onPress:()=>Fe(!Me),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0},{icon:pe.faUsers,active:!0,alternateIcon:pe.faUsers,name:"People",onPress:()=>iy(),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:"2"===yt.current},{icon:pe.faShareAlt,active:!0,alternateIcon:pe.faShareAlt,name:"Share",onPress:()=>ny("shareEvent"),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0},{icon:Ou.current?pe.faCompress:pe.faExpand,active:Ou.current,alternateIcon:Ou.current?pe.faCompress:pe.faExpand,name:Ou.current?"Exit Full Display":"Full Display",onPress:()=>Ch(!Ou.current),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:"2"===yt.current&&uy},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"}),Nu&&(0,ce.jsx)("div",{style:{position:"absolute",top:-2,right:-2,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"#EF4444",borderRadius:12,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:12,fontWeight:"bold"}})})})]}),name:"Chat",onPress:()=>cy(),show:!0},{icon:pe.faSync,active:!0,alternateIcon:pe.faSync,name:"Switch Camera",onPress:()=>fr({parameters:{...ry(),...ty()}}),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:"2"===yt.current},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:uy,name:uy?"Video Off":"Video On",onPress:()=>La({parameters:{...ry(),...ty()}}),show:"2"===yt.current,activeColor:"#22C55E",inActiveColor:"#EF4444"},{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:dy,name:dy?"Mute":"Unmute",onPress:()=>Va({parameters:{...ry(),...ty()}}),activeColor:"#22C55E",inActiveColor:"#EF4444",show:"2"===yt.current},{icon:pe.faPhone,active:hy,name:"End",onPress:()=>la({updateIsConfirmExitModalVisible:Kh,isConfirmExitModalVisible:Np}),activeColor:"#22C55E",inActiveColor:"#EF4444",show:!0},{icon:pe.faPhone,active:hy,onPress:()=>console.log("End Call pressed"),activeColor:"transparent",inActiveColor:"transparent",backgroundColor:{default:"transparent"},show:!1}],Sy=[{icon:pe.faShareAlt,active:!0,alternateIcon:pe.faShareAlt,onPress:()=>ny("shareEvent"),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"}),Nu&&(0,ce.jsx)("div",{style:{position:"absolute",top:-2,right:-2,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:12,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:12,fontWeight:"bold"}})})})]}),onPress:()=>cy(),show:!0},{icon:pe.faSync,active:!0,alternateIcon:pe.faSync,onPress:()=>fr({parameters:{...ry(),...ty()}}),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:uy,onPress:()=>La({parameters:{...ry(),...ty()}}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:dy,onPress:()=>Va({parameters:{...ry(),...ty()}}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faPhone,active:hy,onPress:()=>la({updateIsConfirmExitModalVisible:Kh,isConfirmExitModalVisible:Np}),activeColor:"green",inActiveColor:"red",show:!0}],Ry=[{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:dy,name:Ke?dy?"Mute":"Unmute":void 0,tooltip:dy?"Turn off your microphone to mute yourself":"Turn on your microphone to speak",onPress:()=>Va({parameters:{...ry(),...ty()}}),activeColor:"#22C55E",inActiveColor:"#EF4444",disabled:gm,show:!0},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:uy,name:Ke?uy?"Video Off":"Video On":void 0,tooltip:uy?"Turn off your camera to hide video":"Turn on your camera to show video",onPress:()=>La({parameters:{...ry(),...ty()}}),activeColor:"#22C55E",inActiveColor:"#EF4444",disabled:fm,show:!0},{icon:pe.faDesktop,alternateIconComponent:(0,ce.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDesktop,size:"lg",style:{color:my?"#22C55E":Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"}}),!my&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBan,size:"lg",style:{color:"#EF4444",position:"absolute",top:0,right:0}})]}),active:!0,name:Ke?my?"Stop Share":"Share Screen":void 0,tooltip:my?"Stop sharing your screen with participants":"Share your screen or window with participants",onPress:()=>{Ba({parameters:{...ry(),...ty()}})},activeColor:"#22C55E",inActiveColor:"#EF4444",disabled:!1,show:!0},{icon:pe.faPhone,active:hy,name:Ke?"End":void 0,tooltip:"Leave the meeting or end for all",onPress:()=>la({updateIsConfirmExitModalVisible:Kh,isConfirmExitModalVisible:Np}),activeColor:"#22C55E",inActiveColor:"#EF4444",disabled:!1,show:!0},{icon:pe.faUsers,active:fy,name:Ke?"People":void 0,tooltip:"View all participants in the meeting",onPress:()=>iy(),activeColor:Me?"rgba(255,255,255,0.9)":"rgba(0,0,0,0.9)",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",disabled:!1,show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBars,size:"lg",color:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"}),(0,ce.jsx)("div",{style:{position:"absolute",top:-8,right:-8,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"#EF4444",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold"},children:ep.current})})})]}),name:Ke?"Menu":void 0,tooltip:"Open menu for settings and more options",onPress:()=>sy(),show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"}),Nu&&(0,ce.jsx)("div",{style:{position:"absolute",top:-6,right:-6,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"#EF4444",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold",lineHeight:"1"},children:"*"})})})]}),name:Ke?"Chat":void 0,tooltip:"Open chat to send and receive messages",onPress:()=>cy(),show:!0},...Ye?[..."2"===yt.current&&za.current&&!rn.current?[{customComponent:(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.5)",padding:"5px 10px",borderRadius:"5px"},children:[(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,ce.jsx)("span",{style:{color:tn.current?"yellow":"red",fontSize:"14px",fontWeight:"bold"},children:pm}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:tn.current?pe.faPlay:pe.faPause,onClick:e=>{e.stopPropagation(),so({parameters:{...ry(),...ty()}})},style:{cursor:"pointer",fontSize:"14px",color:"white"},title:tn.current?"Resume":"Pause"}),(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop,onClick:e=>{e.stopPropagation(),io({parameters:{...ry(),...ty()}})},style:{cursor:"pointer",fontSize:"14px",color:"red"},title:"Stop"})]}),Ke&&(0,ce.jsx)("span",{style:{fontSize:"8px",color:"white",marginTop:"2px"},children:"Recording"})]}),name:void 0,tooltip:tn.current?"Resume recording session":"Recording in progress - click to manage",onPress:()=>ny("recording"),show:!0}]:[],..."2"!==yt.current||za.current&&!rn.current?[]:[{icon:pe.faRecordVinyl,name:Ke?"Record":void 0,tooltip:"Start recording this session",active:!1,onPress:()=>ny("recording"),activeColor:"#EF4444",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0}],{icon:pe.faCog,name:Ke?"Media":void 0,tooltip:"Configure your microphone, camera, and audio settings",onPress:()=>ny("mediaSettings"),activeColor:"#22C55E",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0},{icon:pe.faTv,name:Ke?"Display":void 0,tooltip:"Adjust layout, grid view, and display preferences",onPress:()=>ny("displaySettings"),activeColor:"#22C55E",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0},..."2"===yt.current||St.current?[{customComponent:(0,ce.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center",gap:"4px"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faHandPaper,size:"lg",color:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)"}),Zu.current>0&&(0,ce.jsx)("div",{style:{position:"absolute",top:-4,right:-4,backgroundColor:"#EF4444",borderRadius:"50%",padding:"2px 4px",minWidth:"16px",minHeight:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold"},children:Zu.current})})]}),name:Ke?"Requests":void 0,tooltip:"Manage participant requests to speak or share",onPress:()=>ny("requests"),show:!0}]:[],..."2"===yt.current||Gm.current.length>0?[{icon:pe.faPoll,name:Ke?"Polls":void 0,tooltip:"Create, view, or vote on polls",onPress:()=>ny("polls"),activeColor:"#22C55E",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0}]:[],..."2"===yt.current?[{icon:pe.faObjectUngroup,name:Ke?"Rooms":void 0,tooltip:"Create and manage breakout rooms for group discussions",onPress:()=>ny("breakoutRooms"),activeColor:"#22C55E",inActiveColor:Me?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.7)",show:!0}]:[]]:[]];async function wy({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,isLocal:d=!1}){let l;if(d){const d=await ie({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,parameters:{imgSrc:i,showAlert:ay,updateIsLoadingModalVisible:Xh,connectSocket:ma,connectLocalSocket:ga,updateSocket:Ki,updateLocalSocket:Ji,updateValidated:Yi,updateApiUserName:Zi,updateApiToken:Qi,updateLink:ec,updateRoomName:tc,updateMember:rc},checkConnect:t.length>0&&!0===r&&!dt.current.includes("mediasfu.com"),localLink:t,joinMediaSFURoom:p});l=await Go({localRoom:d})}else l=await async function(e){const{socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s}=e;try{return await fa({socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s})}catch(e){throw console.log("error",e),setTimeout(()=>{Pe(!1),Xh(!1),ay?.({message:"Failed to join the room. Please check your connection and try again.",type:"danger",duration:3e3})},1e3),new Error("Failed to join the room. Please check your connection and try again.")}}({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c});async function u(e){try{(!e.roomRecvIPs||e.roomRecvIPs&&0==e.roomRecvIPs.length)&&(e.roomRecvIPs=["none"],""!==dt.current&&dt.current.includes("mediasfu.com")&&!d&&await Vn({community:!0,nsock:ey().socket,parameters:{...ry(),...ty()}}));try{Fa({parameters:{...ry(),...ty(),data:e}})}catch{}if(e.isHost?nc("2"):"2"!==n&&nc("1"),e.secureCode&&""!=e.secureCode&&ac(e.secureCode),e.rtpCapabilities)try{let t=await Na({rtpCapabilities:e.rtpCapabilities});t&&Xi(t)}catch(e){console.log("error Device",e)}}catch(e){console.log("error updateRoomParametersClient",e)}}if(l&&l.success){if(""!==dt.current&&dt.current.includes("mediasfu.com")&&d)return void(ot.current=l);""!==dt.current&&dt.current.includes("mediasfu.com")&&!d?ot.current?(ot.current.recordingParams=l.recordingParams,ot.current.meetingRoomParams=l.meetingRoomParams):ot.current=l:(ot.current=l,dt.current.includes("mediasfu.com")||(ot.current.meetingRoomParams=l.meetingRoomParams)),await u(l)}else{if(""!==dt.current&&dt.current.includes("mediasfu.com")&&!d)return void await u(ot.current);try{ay&&ay({message:l.reason,type:"danger",duration:3e3})}catch{}}}function ky(e){if(e)try{e.getTracks().forEach(e=>{try{e.stop()}catch(e){}})}catch(e){}}async function Cy(e){if(e)try{e.closed||e.close()}catch(e){}}async function jy(e){if(e)try{e.closed||e.close()}catch(e){}}async function Py(){ny("none"),Yh(!1),Gh(!1),zh(!1),Oh(!1),Uh(!1),Hh(!1),_h(!1),qh(!1),Eh(!1),Zh(!1),Kh(!1),Hb(!1),Wb(!1),Wh(!1),Jf(!1),Db(!1),Rb(!1),Xh(!1),Jh(!1);try{await Cy(Bm.current),await Cy($m.current),await Cy(Om.current),await Cy(Um.current),await Cy(ji.current),await Cy(Pi.current)}catch(e){console.log("Error closing producers:",e)}Bm.current=null,$m.current=null,Om.current=null,Um.current=null,ji.current=null,Pi.current=null;try{for(const e of qm.current)try{e.consumerTransport&&!e.consumerTransport.closed&&e.consumerTransport.close()}catch(e){}}catch(e){console.log("Error closing consumer transports:",e)}qm.current=[],_m.current=[];try{await jy(Lm.current),await jy(Vm.current)}catch(e){console.log("Error closing producer transports:",e)}Lm.current=null,Vm.current=null,Am.current=!1,Tm.current=!1,Fm.current=!1,Dm.current=!1,Nm.current=!1,ky(Da.current),ky(cn.current),ky(js.current),ky(us.current),ky(wg.current),ky(jg.current),ky(Ig.current),ky(ih.current),ky(lh.current),Da.current=null,cn.current=null,js.current=null,us.current=null,wg.current=null,jg.current=null,Ig.current=null,ih.current=null,lh.current=null,await async function(e){for(const t of e)try{const e=Object.keys(t)[0];e&&t[e]&&(t[e].removeAllListeners?.(),t[e].disconnect())}catch(e){console.log(`Error disconnecting socket with IP: ${Object.keys(t)[0]}`,e)}}(Nt.current),Nt.current=[];try{at.current&&at.current.connected&&(at.current.removeAllListeners?.(),at.current.disconnect())}catch(e){console.log("Error disconnecting main socket:",e)}try{nt.current&&nt.current.connected&&(nt.current.removeAllListeners?.(),nt.current.disconnect())}catch(e){console.log("Error disconnecting local socket:",e)}st.current=null,await(async()=>{const e=me,t=ry();for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[`update${r.charAt(0).toUpperCase()+r.slice(1)}`];if("function"==typeof a)try{a(e[r])}catch{}}})(),Mu("00:00:00"),Iu(0),xf("00:00:00"),Ec(0),yf(!1),ly(!1),py(!1),gy(!1),zr.current&&(clearInterval(zr.current),zr.current=null),setTimeout(async function(){Yi(!1),window.location.reload()},500)}(0,de.useEffect)(()=>{dm(za&&!rn?tn?"yellow":"red":"green")},[za,tn,rn]),(0,de.useEffect)(()=>{(my||Jg.current)&&zl(84)},[my]);const My=async()=>{const e=window.innerWidth,t=window.innerHeight;qe(e),Ge(t);let r=0;"webinar"==Pt.current||Pt.current,r=Number((40/t).toFixed(3)),r!==ri&&Jl(r);let a=Ys;"conference"==Pt.current&&67===Ys?(a=0,Ks(0)):"broadcast"==Pt.current&&100!==Ys?(a=100,Ks(100)):"chat"==Pt.current&&0!==Ys&&(a=0,Ks(0));const{mainHeight:n,otherHeight:o,mainWidth:s,otherWidth:i}=(({containerWidthFraction:e=1,containerHeightFraction:t=1,mainSize:r,doStack:a=!0,defaultFraction:n})=>{const o=window.innerWidth,s=(o-(Ye&&"none"!==Ne?Je(o):0))*e,i=window.innerHeight*t*n;let c=s>=768;return!c&&s>1.5*i&&(c=!0),Xl(c),a?c?{mainHeight:i,otherHeight:i,mainWidth:Math.floor(r/100*s),otherWidth:Math.floor((100-r)/100*s)}:{mainHeight:Math.floor(r/100*i),otherHeight:Math.floor((100-r)/100*i),mainWidth:s,otherWidth:s}:{mainHeight:i,otherHeight:i,mainWidth:s,otherWidth:s}})({containerWidthFraction:1,containerHeightFraction:1,mainSize:a,doStack:!0,defaultFraction:"webinar"==Pt.current||"conference"==Pt.current?1-r:1});kf({mainHeight:n,otherHeight:o,mainWidth:s,otherWidth:i}),"portrait"===Qb()&&(ni.current||(zt.current||Ut.current)&&xu(!0)),await mn({name:ds.current,parameters:{...ry(),...ty()}}),await In({changed:!0,parameters:{...ry(),...ty()}})},Iy=(0,de.useCallback)(async()=>{await My()},[]),Ay=async e=>{try{let t=(await ua.enumerateDevices()).filter(t=>t.kind===e);return t}catch{return[]}},Ty=async(e="",t,r="video")=>{try{let a=null;if(e&&""!==e){if("video"===r){const t=Ra.current.find(t=>t.producerId===e);t&&(a=t.stream)}else if("audio"===r){const t=ki.current.find(t=>t.producerId===e);t&&(a=t.stream)}}else if(t&&""!==t){const e=Mt.current.find(e=>e.name===t);if(e){const t=e.id;if("video"===r){const e=Ra.current.find(e=>e.producerId===t);e&&(a=e.stream)}else if("audio"===r){const e=ki.current.find(e=>e.producerId===t);e&&(a=e.stream)}}}return a}catch{return null}};async function Fy(e,a,n=!1){const o=at.current,s=r&&nt.current&&nt.current.id?nt.current:o;if(o.id){n||(o.on("disconnect",async()=>{await Wo({showAlert:ay,redirectURL:fs.current,onWeb:!0,updateValidated:Yi}),ym.current&&await La({parameters:{...ry(),...ty()}}),xm.current&&await Va({parameters:{...ry(),...ty()}}),await Py()}),o.on("allMembers",async t=>{if(t){for(const e of t.members)e.name!==ft.current&&e.translationEnabled&&e.translationDefaultOutputLanguage&&e.translationOriginalProducerId&&hg(t=>{const r=new Map(t);return r.set(e.name,{speakerId:e.name,speakerName:e.name,inputLanguage:e.translationInputLanguage||"en",outputLanguage:e.translationDefaultOutputLanguage,originalProducerId:e.translationOriginalProducerId,enabled:!0}),r});await $o({apiUserName:e,apiKey:"",apiToken:a,members:t.members,requestss:t.requests?t.requests:Xu.current,coHoste:t.coHost?t.coHost:xt.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:vt.current,parameters:{...ry(),...ty()},consume_sockets:Nt.current}),setTimeout(async()=>{try{for(const e of t.members)e.name!==ft.current&&e.translationEnabled&&e.translationDefaultOutputLanguage&&e.translationOriginalProducerId&&await Oo({originalProducerId:e.translationOriginalProducerId,speakerId:e.name,parameters:{...ry(),...ty()}})}catch(e){console.error("[Translation] Error processing translation states for new joiner:",e)}},2e3)}}),o.on("allMembersRest",async t=>{if(t){for(const e of t.members)e.name!==ft.current&&e.translationEnabled&&e.translationDefaultOutputLanguage&&e.translationOriginalProducerId&&hg(t=>{const r=new Map(t);return r.set(e.name,{speakerId:e.name,speakerName:e.name,inputLanguage:e.translationInputLanguage||"en",outputLanguage:e.translationDefaultOutputLanguage,originalProducerId:e.translationOriginalProducerId,enabled:!0}),r});await Eo({apiUserName:e,apiKey:"",members:t.members,apiToken:a,settings:t.settings,coHoste:t.coHost?t.coHost:xt.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:vt.current,parameters:{...ry(),...ty()},consume_sockets:Nt.current}),setTimeout(async()=>{try{for(const e of t.members)e.name!==ft.current&&e.translationEnabled&&e.translationDefaultOutputLanguage&&e.translationOriginalProducerId&&await Oo({originalProducerId:e.translationOriginalProducerId,speakerId:e.name,parameters:{...ry(),...ty()}})}catch(e){console.error("[Translation] Error processing translation states for new joiner (rest):",e)}},2e3)}}),o.on("userWaiting",async({name:e})=>{await co({name:e,showAlert:ay,totalReqWait:ep.current,updateTotalReqWait:Lh})}),o.on("personJoined",async({name:e})=>{await lo({name:e,showAlert:ay})}),o.on("allWaitingRoomMembers",async e=>{await uo({waitingParticipants:e.waitingParticipants?e.waitingParticipants:e.waitingParticipantss?e.waitingParticipantss:Gu.current,updateTotalReqWait:Lh,updateWaitingRoomList:Th})}),o.on("ban",async({name:e})=>{await mo({name:e,parameters:{...ry(),...ty()}})}),o.on("updatedCoHost",async e=>{await go({coHost:e.coHost?e.coHost:xt.current,coHostResponsibility:e.coHostResponsibilities?e.coHostResponsibilities:vt.current,youAreCoHost:St.current,updateCoHost:oc,updateCoHostResponsibility:sc,updateYouAreCoHost:ic,showAlert:ay,eventType:Pt.current,islevel:yt.current,member:ft.current})}),o.on("participantRequested",async({userRequest:e})=>{await ho({userRequest:e,requestList:Xu.current,waitingRoomList:Gu.current,updateTotalReqWait:Lh,updateRequestList:Nh})}),o.on("screenProducerId",async({producerId:e})=>{fo({producerId:e,screenId:Sa.current,membersReceived:Ko.current,shareScreenStarted:zt.current,deferScreenReceived:Jo.current,participants:Mt.current,updateScreenId:yd,updateShareScreenStarted:rd,updateDeferScreenReceived:Jd})}),o.on("updateMediaSettings",async({settings:e})=>{bo({settings:e,updateAudioSetting:xh,updateVideoSetting:vh,updateScreenshareSetting:Sh,updateChatSetting:Rh})}),o.on("producer-media-paused",async({producerId:e,kind:t,name:r})=>{await yo({producerId:e,kind:t,name:r,parameters:{...ry(),...ty()}})}),o.on("producer-media-resumed",async({kind:e,name:t})=>{await xo({kind:e,name:t,parameters:{...ry(),...ty()}})}),o.on("producer-media-closed",async({producerId:e,kind:t})=>{e&&t&&await vo({producerId:e,kind:t,parameters:{...ry(),...ty()}})}),o.on("controlMediaHost",async({type:e})=>{await So({type:e,parameters:{...ry(),...ty()}})}),o.on("meetingEnded",async function(){await Ro({showAlert:ay,redirectURL:fs.current,onWeb:!0,eventType:Pt.current,updateValidated:Yi}),ym.current&&await La({parameters:{...ry(),...ty()}}),xm.current&&await Va({parameters:{...ry(),...ty()}}),await Py()}),o.on("disconnectUserSelf",async function(){await wo({socket:o,member:ft.current,roomName:gt.current})}),o.on("receiveMessage",async({message:e})=>{await ko({message:e,messages:Tu.current,participantsAll:Mt.current,member:ft.current,eventType:Pt.current,islevel:yt.current,coHost:xt.current,updateMessages:hh,updateShowMessagesBadge:yh})}),o.on("meetingTimeRemaining",async({timeRemaining:e})=>{await Co({timeRemaining:e,showAlert:ay,eventType:Pt.current})}),o.on("meetingStillThere",async()=>{await jo({updateIsConfirmHereModalVisible:Jh})}),o.on("updateConsumingDomains",async({domains:t,alt_domains:r})=>{await Ao({domains:t,alt_domains:r,apiUserName:e,apiKey:"",apiToken:a,parameters:{...ry(),...ty()}})}),o.on("hostRequestResponse",({requestResponse:e})=>{Bo({requestResponse:e,showAlert:ay,requestList:Xu.current,updateRequestList:Nh,updateMicAction:Zd,updateVideoAction:Bd,updateScreenAction:Qd,updateChatAction:el,updateAudioRequestState:tl,updateVideoRequestState:Ld,updateScreenRequestState:rl,updateChatRequestState:al,updateAudioRequestTime:nl,updateVideoRequestTime:Vd,updateScreenRequestTime:ol,updateChatRequestTime:sl,updateRequestIntervalSeconds:is.current})}),o.on("pollUpdated",async e=>{try{await eo({data:e,polls:Gm.current,poll:Ym.current,member:ft.current,islevel:yt.current,showAlert:ay,updatePolls:Yf,updatePoll:Kf,updateIsPollModalVisible:Jf})}catch{}}),o.on("breakoutRoomUpdated",async e=>{try{await no({data:e,parameters:{...ry(),...ty()}})}catch{}}),o.on("permissionUpdated",async e=>{try{await(async({data:e,showAlert:t,updateIslevel:r})=>{try{const{newLevel:a,message:n}=e;r&&r(a),t&&n&&t({message:n,type:"1"===a?"success":"info",duration:3e3})}catch(e){console.error("Error handling permissionUpdated:",e)}})({data:e,showAlert:ay,updateIslevel:nc})}catch{}}),o.on("permissionConfigUpdated",async e=>{try{await(async({data:e,updatePermissionConfig:t})=>{try{const{config:r}=e;t&&t(r)}catch(e){console.error("Error handling permissionConfigUpdated:",e)}})({data:e,updatePermissionConfig:Xf})}catch{}}),o.on("panelistsUpdated",async e=>{try{await(async({data:e,updatePanelists:t})=>{try{const{panelists:r}=e;t&&t(r.map(e=>({id:e.id,name:e.name,audioID:"",videoID:""})))}catch(e){console.error("Error handling panelistsUpdated:",e)}})({data:e,updatePanelists:Zf})}catch{}}),o.on("panelistFocusChanged",async e=>{try{await(async({data:e,updatePanelistsFocused:t,updateMuteOthersMic:r,updateMuteOthersCamera:a,updatePanelists:n,currentPanelistsFocused:o,currentPanelists:s,onScreenChanges:i})=>{try{const{focusEnabled:c,panelists:d,muteOthersMic:l,muteOthersCamera:u}=e,p=void 0!==o&&o!==c,m=(s||[]).map(e=>e.id).sort().join(",")!==d.map(e=>e.id).sort().join(",");t&&t(c),r&&r(l),a&&a(u),n&&n(d.map(e=>({id:e.id,name:e.name,audioID:"",videoID:""}))),(p||m)&&i&&await i()}catch(e){console.error("Error handling panelistFocusChanged:",e)}})({data:e,updatePanelistsFocused:Qf,updateMuteOthersMic:eb,updateMuteOthersCamera:tb,updatePanelists:Zf,currentPanelistsFocused:Qm.current,currentPanelists:Zm.current,onScreenChanges:async()=>{await In({changed:!0,parameters:{...ry(),...ty()}})}})}catch{}}),o.on("controlMedia",async e=>{try{await(async({data:e,showAlert:t,clickAudio:r,clickVideo:a,audioAlreadyOn:n,videoAlreadyOn:o})=>{try{const{type:s,action:i,reason:c}=e;"mute"===i&&("audio"===s&&n&&r?r():"video"===s&&o&&a&&a(),t&&c&&t({message:`Your ${"audio"===s?"microphone":"camera"} has been muted. ${c}`,type:"info",duration:3e3}))}catch(e){console.error("Error handling controlMedia:",e)}})({data:e,showAlert:ay,clickAudio:()=>Va({parameters:{...ry(),...ty()}}),clickVideo:()=>La({parameters:{...ry(),...ty()}}),audioAlreadyOn:xm.current,videoAlreadyOn:ym.current})}catch{}}),o.on("addedAsPanelist",async e=>{try{await(async({data:e,showAlert:t})=>{try{const{message:r}=e;t&&t({message:r||"You have been added as a panelist",type:"success",duration:3e3})}catch(e){console.error("Error handling addedAsPanelist:",e)}})({data:e,showAlert:ay})}catch{}}),o.on("removedFromPanelists",async e=>{try{await(async({data:e,showAlert:t})=>{try{const{message:r}=e;t&&t({message:r||"You have been removed from panelists",type:"info",duration:3e3})}catch(e){console.error("Error handling removedFromPanelists:",e)}})({data:e,showAlert:ay})}catch{}}),o.on("translation:roomConfig",async e=>{try{await(async({data:e,updateTranslationConfig:t,updateTranslationSupported:r})=>{try{const{config:a}=e;r&&r(a.supportTranslation),t&&a.supportTranslation&&t(a)}catch(e){console.error("Error handling translation:roomConfig:",e)}})({data:e,updateTranslationConfig:rb})}catch{}}),o.on("translation:configUpdated",async e=>{try{await(async({data:e,updateTranslationConfig:t,showAlert:r})=>{try{const{config:a}=e;t&&t(a),r&&r({message:"Translation settings updated by host",type:"info",duration:2e3})}catch(e){console.error("Error handling translation:configUpdated:",e)}})({data:e,updateTranslationConfig:rb,showAlert:ay})}catch{}}),o.on("translation:languageSet",async e=>{try{await(async({data:e,updateMySpokenLanguage:t,updateMySpokenLanguageEnabled:r,showAlert:a})=>{try{const{success:n,language:o,enabled:s,error:i}=e;n?(t&&t(o),r&&r(s)):a&&i&&a({message:i,type:"danger",duration:3e3})}catch(e){console.error("Error handling translation:languageSet:",e)}})({data:e,updateMySpokenLanguage:ab,updateMySpokenLanguageEnabled:nb,showAlert:ay})}catch{}}),o.on("translation:subscribed",async e=>{try{const t={consumerTransports:qm.current,roomName:gt.current,member:ft.current,updateConsumerTransports:_f,breakOutRoomStarted:Eg.current,breakOutRoomEnded:Wg.current,breakoutRooms:Vg.current,limitedBreakRoom:Og.current,participants:Mt.current,islevel:yt.current,eventType:Pt.current,hostNewRoom:Hg.current},r=Ho(e.speakerId,t);await(async({data:e,updateListenPreferences:t,updateTranslationProducerMap:r,startConsumingTranslation:a,showAlert:n})=>{try{const{speakerId:o,language:s,channelCreated:i,producerId:c,originalProducerId:d}=e;t&&t(e=>{const t=new Map(e);return t.set(o,s),t}),c&&d&&r&&r(e=>({...e,[d]:{...e[d]||{},[s]:c}})),c&&a&&await a(c,o,s),n&&i&&n({message:`Translation channel created for ${s}`,type:"success",duration:2e3})}catch(e){console.error("Error handling translation:subscribed:",e)}})({data:e,updateListenPreferences:ib,updateTranslationProducerMap:cb,showAlert:ay,startConsumingTranslation:r&&e.producerId?async r=>{await y({remoteProducerId:r,islevel:yt.current,nsock:at.current,parameters:{...ry(),...ty()}}),e.originalProducerId&&await Oo({originalProducerId:e.originalProducerId,speakerId:e.speakerId,parameters:t})}:void 0})}catch{}}),o.on("translation:unsubscribed",async e=>{try{const t={consumerTransports:qm.current,roomName:gt.current,member:ft.current,updateConsumerTransports:_f,breakOutRoomStarted:Eg.current,breakOutRoomEnded:Wg.current,breakoutRooms:Vg.current,limitedBreakRoom:Og.current,participants:Mt.current,islevel:yt.current,eventType:Pt.current,hostNewRoom:Hg.current};await(async({data:e,updateListenPreferences:t,stopConsumingTranslation:r})=>{try{const{speakerId:a,language:n}=e;t&&t(e=>{const t=new Map(e);return t.delete(a),t}),r&&await r(a,n)}catch(e){console.error("Error handling translation:unsubscribed:",e)}})({data:e,updateListenPreferences:ib,stopConsumingTranslation:async(e,r)=>{const a=await(async e=>{const{language:t,translationProducerMap:r,parameters:a}=e;try{const{consumerTransports:e,updateConsumerTransports:n}=a;let o=null,s=null;for(const[e,a]of Object.entries(r))if(a&&a[t]){s=a[t],o=e;break}if(!s)return o;const i=e.findIndex(e=>e.producerId===s);if(-1===i)return o;const c=e[i];return c.socket_&&c.consumer&&c.socket_.emit("consumer-close",{serverConsumerId:c.serverConsumerTransportId},()=>{}),c.consumer&&c.consumer.close(),n(e.filter((e,t)=>t!==i)),o}catch(e){return console.error("[TranslationSwitch] Error stopping translation consumer:",e),null}})({speakerId:e,language:r,translationProducerMap:lg.current,parameters:t});a&&(await zo({originalProducerId:a,speakerId:e,parameters:t}),cb(e=>{const t={...e};if(t[a]){const e={...t[a]};delete e[r],0===Object.keys(e).length?delete t[a]:t[a]=e}return t}))}})}catch(e){console.error("[Translation] Error handling unsubscribed:",e)}}),o.on("translation:channelsAvailable",async e=>{try{await(async({data:e,updateAvailableTranslationChannels:t,myDefaultListenLanguage:r,socket:a,roomName:n})=>{try{const{speakerId:o,languages:s,originalProducerId:i}=e;t&&t(o,s,i),r&&s.includes(r)&&a&&n&&a.emit("translation:subscribe",{roomName:n,speakerId:o,language:r,originalProducerId:i})}catch(e){console.error("Error handling translation:channelsAvailable:",e)}})({data:e,updateAvailableTranslationChannels:db,myDefaultListenLanguage:cg.current,socket:at.current,roomName:gt.current})}catch{}}),o.on("translation:memberState",async e=>{try{await(async({data:e,updateParticipantTranslationState:t})=>{try{const{memberId:r,state:a}=e;t&&t(r,a)}catch(e){console.error("Error handling translation:memberState:",e)}})({data:e})}catch{}}),o.on("translation:error",async e=>{try{await(async({data:e,showAlert:t})=>{try{const{error:r,code:a,availableChannels:n,maxChannels:o,message:s}=e;if(t){let e=r;switch(a){case"max_channels":e=n&&n.length>0?`Maximum ${o||5} translation channels reached. Available: ${n.join(", ")}`:s||"Maximum translation channels reached. Please wait for a slot to open.";break;case"speaker_not_found":e="Speaker not found or has left the meeting.";break;case"language_not_allowed":e="This language is not available for translation in this room.";break;default:e=r||"Translation error occurred"}t({message:e,type:"danger",duration:5e3})}}catch(e){console.error("Error handling translation:error:",e)}})({data:e,showAlert:ay})}catch{}}),o.on("translation:speakerDisabled",async e=>{try{const t={consumerTransports:qm.current,roomName:gt.current,member:ft.current,updateConsumerTransports:_f,breakOutRoomStarted:Eg.current,breakOutRoomEnded:Wg.current,breakoutRooms:Vg.current,limitedBreakRoom:Og.current,participants:Mt.current,islevel:yt.current,eventType:Pt.current,hostNewRoom:Hg.current};if(!Ho(e.speakerId,t))return;const r=mg.get(e.speakerId),a=r?.originalProducerId;if(a){await zo({originalProducerId:a,speakerId:e.speakerId,parameters:t});const r=lg.current;if(r&&r[a])for(const e of Object.values(r[a]))ug.current?.delete?.(e)}hg(t=>{const r=new Map(t);return r.delete(e.speakerId),r}),a&&cb(e=>{const t={...e};return delete t[a],t})}catch(e){console.error("[Translation] Error handling speakerDisabled:",e)}}),o.on("translation:transcript",async e=>{try{await(async({data:e,updateTranscripts:t,onTranscriptReceived:r,maxTranscripts:a=100})=>{try{t&&t(t=>{const r=[...t,e];return r.length>a?r.slice(-a):r}),r&&r(e)}catch(e){console.error("Error handling translation:transcript:",e)}})({data:e,onTranscriptReceived:()=>{}})}catch{}}),o.on("translation:speakerOutputChanged",async e=>{try{const t={consumerTransports:qm.current,roomName:gt.current,member:ft.current,updateConsumerTransports:_f,breakOutRoomStarted:Eg.current,breakOutRoomEnded:Wg.current,breakoutRooms:Vg.current,limitedBreakRoom:Og.current,participants:Mt.current,islevel:yt.current,eventType:Pt.current,hostNewRoom:Hg.current};if(!Ho(e.speakerId,t))return;const r=xg.get(e.speakerId)||null;await(async({data:e,pauseOriginalProducer:t,resumeOriginalProducer:r,stopConsumingTranslationForSpeaker:a,updateSpeakerTranslationState:n,showAlert:o,listenerOverride:s})=>{try{const{speakerId:i,speakerName:c,outputLanguage:d,originalProducerId:l,enabled:u}=e;n&&n(i,d,l);const p=!0===s?.wantOriginal,m=s?.preferredLanguage&&s.preferredLanguage.toLowerCase()!==d?.toLowerCase();if(p)return void(o&&o({message:`${c} is speaking in ${d?Hr(d):"translated"} but you're hearing original`,type:"info",duration:3e3}));if(m)return void(t&&l&&await t(l,i));u&&d&&l?(t&&await t(l,i),o&&o({message:`${c} is now speaking in ${Hr(d)}`,type:"info",duration:3e3})):u&&d||(a&&await a(i),r&&l&&await r(l,i),o&&!u&&o({message:`${c} returned to original language`,type:"info",duration:3e3}))}catch(e){console.error("Error handling translation:speakerOutputChanged:",e)}})({data:e,pauseOriginalProducer:async(e,r)=>{await Oo({originalProducerId:e,speakerId:r,parameters:t})},resumeOriginalProducer:async(e,r)=>{await zo({originalProducerId:e,speakerId:r,parameters:t})},stopConsumingTranslationForSpeaker:async()=>{const e=lg.current;for(const[t,r]of Object.entries(e)){for(const[,e]of Object.entries(r)){const t=qm.current.findIndex(t=>t.producerId===e);if(-1!==t){const r=qm.current[t];r.socket_&&r.serverConsumerTransportId&&r.socket_.emit("consumer-close",{serverConsumerId:r.serverConsumerTransportId},()=>{}),r.consumer&&r.consumer.close(),ug.current.delete(e),qm.current.splice(t,1),_f([...qm.current])}}delete e[t]}lg.current={...e}},showAlert:ay,listenerOverride:r}),hg(t=>{const r=new Map(t);return e.enabled&&e.outputLanguage?r.set(e.speakerId,{speakerId:e.speakerId,speakerName:e.speakerName,inputLanguage:e.inputLanguage,outputLanguage:e.outputLanguage,originalProducerId:e.originalProducerId,enabled:!0}):r.delete(e.speakerId),r})}catch{}}),o.on("updateListenerPreferences",e=>{e.listenerId===at.current?.id&&yg({perSpeaker:new Map(Object.entries(e.preferences.perSpeaker||{}).map(([e,t])=>[e,{speakerId:e,language:t.language,wantOriginal:t.wantOriginal}])),globalLanguage:e.preferences.globalLanguage})})),n&&["roomRecordParams","startRecords","reInitiateRecording","RecordingNotice","timeLeftRecording","stoppedRecording"].forEach(e=>{o.off(e),s.off(e)}),s.on("roomRecordParams",async({recordParams:e})=>{await po({recordParams:e,parameters:{...ry(),...ty()}})}),s.on("startRecords",async()=>{await Po({roomName:gt.current,member:ft.current,socket:s})}),s.on("reInitiateRecording",async()=>{await Mo({roomName:gt.current,member:ft.current,socket:s,adminRestrictSetting:an.current})}),s.on("RecordingNotice",async({state:e,userRecordingParam:t,pauseCount:r,timeDone:a})=>{await Fo({state:e,userRecordingParam:t,pauseCount:r,timeDone:a,parameters:{...ry(),...ty()}})}),s.on("timeLeftRecording",async({timeLeft:e})=>{Lo({timeLeft:e,showAlert:ay})}),s.on("stoppedRecording",async({state:e,reason:t})=>{await Vo({state:e,reason:t,showAlert:ay})}),""!==t&&o&&!n&&await wy({socket:o,roomName:gt.current,islevel:yt.current,member:ft.current,sec:a,apiUserName:e,isLocal:!0});let i=!1;if(i=!(!nt.current||nt.current.id==s.id),!n&&i)return await Fy(e,a,!0),await An({ms:1e3}),Xh(!1),o;if(""!==dt.current&&dt.current.includes("mediasfu.com")){const t=ct.current;await wy({socket:r&&s&&s.id?s:o,roomName:gt.current,islevel:yt.current,member:ft.current,sec:t,apiUserName:e})}return await Xn({socket:o,roomName:gt.current,updateMessages:hh}),n||await mn({name:ds.current,parameters:{...ry(),...ty()}}),o}return null}(0,de.useEffect)(()=>{if(!je)return;const e=km.current;e.rows<=0||e.cols<=0||e.actualRows<=0||(async()=>{const t={...ry(),...ty(),getUpdatedAllParams:ey};try{await _a({rows:e.rows,cols:e.cols,defal:!0,actualRows:e.actualRows,parameters:t});const r=Cm.current;r.rows>0&&r.cols>0&&r.actualRows>0&&await _a({rows:r.rows,cols:r.cols,defal:!1,actualRows:r.actualRows,parameters:t})}catch(e){console.error("Error updating grid sizes after component resize",e)}})()},[Sm,je]),(0,de.useEffect)(()=>(qe(window.innerWidth),Ge(window.innerHeight),window.addEventListener("resize",Iy),window.addEventListener("orientationchange",Iy),()=>{window.removeEventListener("resize",Iy),window.removeEventListener("orientationchange",Iy)}),[Iy]),(0,de.useEffect)(()=>{je&&(async()=>{(va.current||Ut.current)&&ya.current||await My()})().catch(e=>{console.error("Error handling media resize",e)})},[je,Ys]),(0,de.useEffect)(()=>{if(!je)return;const e=setTimeout(()=>{(async()=>{await My()})().catch(console.error)},50);return()=>clearTimeout(e)},[Ne,je]),(0,de.useEffect)(()=>{je&&(async()=>{await mn({name:ds.current,parameters:{...ry(),...ty()}}),await In({changed:!0,parameters:{...ry(),...ty()}})})().catch(console.error)},[Me,je]),(0,de.useEffect)(()=>{if(xd([{producerId:"youyou",stream:void 0,id:"youyou",name:"youyou"}]),fl([{id:"youyou",name:"youyou",producerId:""}]),je){try{!1===rt.current?(Xh(!0),(async()=>{const e=await Fy(it.current,ct.current);Ki(e)})()):Xh(!1)}catch(e){console.log("error connectAndaAddSocketMethods",e)}oo({startTime:Date.now()/1e3,parameters:{...ry(),...ty()}});try{null!==c&&(c={...ry(),...ty()},d&&d(c))}catch{console.log("error updateSourceParameters")}}},[je]);const Dy=(0,de.useCallback)(()=>{const e={isDarkMode:Me,renderMode:"sidebar"},r=!!Ye&&0===Ve.length;let a=null;switch(Ne){case"menu":a=(0,ce.jsx)(J,{...e,backgroundColor:tt,isVisible:!0,onClose:Xe,customButtons:xy,roomName:gt.current,adminPasscode:bt.current,islevel:yt.current,eventType:Pt.current,localLink:t,onToggleTheme:Fe,renderHeader:({defaultHeader:e})=>r?e:null});break;case"participants":a=(0,ce.jsx)(re,{...e,backgroundColor:tt,isParticipantsModalVisible:Ap,onParticipantsClose:Xe,participantsCounter:Tt.current,onParticipantsFilterChange:$h,parameters:{updateParticipants:mc,updateIsParticipantsModalVisible:Gh,updateDirectMessageDetails:bh,updateStartDirectMessage:fh,updateIsMessagesModalVisible:Yh,showAlert:ay,filteredParticipants:It.current,participants:It.current,roomName:gt.current,islevel:yt.current,member:ft.current,coHostResponsibility:vt.current,coHost:xt.current,eventType:Pt.current,startDirectMessage:Fu.current,directMessageDetails:Du.current,socket:at.current,getUpdatedAllParams:ry}});break;case"messages":a=(0,ce.jsx)(ae,{...e,backgroundColor:tt,isMessagesModalVisible:!0,onMessagesClose:Xe,messages:Tu.current,eventType:Pt.current,member:ft.current,islevel:yt.current,coHostResponsibility:vt.current,coHost:xt.current,startDirectMessage:Fu.current,directMessageDetails:Du.current,updateStartDirectMessage:fh,updateDirectMessageDetails:bh,showAlert:ay,roomName:gt.current,socket:at.current,chatSetting:Eu.current});break;case"requests":a=(0,ce.jsx)(Z,{...e,backgroundColor:tt,isRequestsModalVisible:!0,onRequestClose:Xe,requestCounter:Zu.current,onRequestFilterChange:Bh,updateRequestList:Nh,requestList:Qu.current,roomName:gt.current,socket:at.current,parameters:{updateRequestCounter:Fh,updateRequestFilter:Dh,updateRequestList:Nh,getUpdatedAllParams:ey}});break;case"waiting":a=(0,ce.jsx)(Q,{...e,backgroundColor:tt,isWaitingModalVisible:!0,onWaitingRoomClose:Xe,waitingRoomCounter:Yu.current,onWaitingRoomFilterChange:Vh,waitingRoomList:Ku.current,updateWaitingList:Th,roomName:gt.current,socket:at.current,parameters:{filteredWaitingRoomList:Ku.current,getUpdatedAllParams:ey}});break;case"coHost":a=(0,ce.jsx)(ee,{...e,backgroundColor:tt,isCoHostModalVisible:!0,updateIsCoHostModalVisible:Uh,onCoHostClose:Xe,coHostResponsibility:vt.current,participants:Mt.current,currentCohost:xt.current,roomName:gt.current,showAlert:ay,updateCoHostResponsibility:sc,updateCoHost:oc,socket:at.current});break;case"mediaSettings":a=(0,ce.jsx)(te,{...e,backgroundColor:tt,isMediaSettingsModalVisible:!0,onMediaSettingsClose:Xe,onOpenBackgroundSidebar:()=>ny("background",!0),parameters:{...ry(),...ty()}});break;case"displaySettings":a=(0,ce.jsx)(ne,{...e,backgroundColor:tt,isDisplaySettingsModalVisible:!0,onDisplaySettingsClose:Xe,parameters:{...ry(),...ty()}});break;case"eventSettings":a=(0,ce.jsx)(X,{...e,backgroundColor:tt,isEventSettingsModalVisible:!0,updateIsSettingsModalVisible:Hh,onEventSettingsClose:Xe,audioSetting:Vu.current,videoSetting:Bu.current,screenshareSetting:$u.current,chatSetting:Eu.current,updateAudioSetting:xh,updateVideoSetting:vh,updateScreenshareSetting:Sh,updateChatSetting:Rh,roomName:gt.current,socket:at.current});break;case"recording":a=(0,ce.jsx)(be,{...e,backgroundColor:tt,isRecordingModalVisible:!0,onClose:Xe,startRecording:ca,confirmRecording:da,parameters:{...ry(),...ty()}});break;case"polls":a=(0,ce.jsx)(ye,{...e,backgroundColor:tt,isPollModalVisible:!0,onClose:Xe,member:ft.current,islevel:yt.current,polls:Gm.current,poll:Ym.current,socket:at.current,roomName:gt.current,showAlert:ay,updateIsPollModalVisible:Jm,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro});break;case"breakoutRooms":a=(0,ce.jsx)(Se,{...e,backgroundColor:tt,isVisible:!0,onBreakoutRoomsClose:Xe,parameters:{...ry(),...ty()}});break;case"shareEvent":a=(0,ce.jsx)(fe,{...e,isShareEventModalVisible:$p,onShareEventClose:Xe,roomName:gt.current,islevel:yt.current,adminPasscode:bt.current,eventType:Pt.current,localLink:t});break;case"configureWhiteboard":a=(0,ce.jsx)(Re,{...e,backgroundColor:tt,isVisible:!0,onConfigureWhiteboardClose:Xe,parameters:{...ry(),...ty()}});break;case"permissions":a=(0,ce.jsx)(Vr,{...e,isPermissionsModalVisible:!0,onPermissionsClose:Xe,parameters:{participants:Mt.current,member:ft.current,islevel:yt.current,socket:at.current,roomName:gt.current,showAlert:ay,permissionConfig:Xm.current??void 0,updatePermissionConfig:e=>{Xm.current=e},audioSetting:Vu.current,videoSetting:Bu.current,screenshareSetting:$u.current,chatSetting:Eu.current,getUpdatedAllParams:()=>({participants:Mt.current,member:ft.current,islevel:yt.current,socket:at.current,roomName:gt.current,showAlert:ay,permissionConfig:Xm.current??void 0,updatePermissionConfig:e=>{Xm.current=e},audioSetting:Vu.current,videoSetting:Bu.current,screenshareSetting:$u.current,chatSetting:Eu.current,getUpdatedAllParams:()=>({})})},backgroundColor:tt});break;case"panelists":a=(0,ce.jsx)(Br,{...e,isPanelistsModalVisible:!0,onPanelistsClose:Xe,parameters:{participants:Mt.current,panelists:Zm.current,member:ft.current,islevel:yt.current,socket:at.current,roomName:gt.current,showAlert:ay,itemPageLimit:Et.current,panelistsFocused:Qm.current,updatePanelists:e=>{Zm.current=e},updatePanelistsFocused:e=>{Qm.current=e},getUpdatedAllParams:()=>({participants:Mt.current,panelists:Zm.current,member:ft.current,islevel:yt.current,socket:at.current,roomName:gt.current,showAlert:ay,itemPageLimit:Et.current,panelistsFocused:Qm.current,updatePanelists:e=>{Zm.current=e},updatePanelistsFocused:e=>{Qm.current=e},getUpdatedAllParams:()=>({})})},backgroundColor:tt});break;case"translation":a=(0,ce.jsx)(Gr,{isVisible:!0,onClose:Xe,translationConfig:rg.current,member:ft.current,islevel:yt.current,audioProducerId:Om.current?.id||null,participants:Mt.current,mySpokenLanguage:og.current,mySpokenLanguageEnabled:sg.current,myDefaultOutputLanguage:ig.current,myDefaultListenLanguage:cg.current,listenPreferences:dg.current,updateMySpokenLanguage:ab,updateMySpokenLanguageEnabled:nb,updateMyDefaultOutputLanguage:ob,updateMyDefaultListenLanguage:sb,updateListenPreferences:ib,socket:at.current,roomName:gt.current,showAlert:ay,isDarkMode:Me,renderMode:"sidebar"});break;default:a=null}return a},[Ne,Me,tt,Xe,Dg,xy,gt,bt,yt,Pt,t,Tt,It,Tu,vt,xt,Fu,Du,Eu,Zu,Qu,Yu,Ku,Mt,Vu,Bu,$u,Gm,Ym,ft,ry,ty,$h,Bh,Vh,ay,at,mc,Gh,bh,fh,Yh,Fh,Dh,Nh,Th,Uh,sc,oc,Hh,xh,vh,Sh,Rh,to,ao,ro,ca,da,Fe,Jm,Ye,Ve.length]),Ny=(0,de.useCallback)(()=>0===Ve.length?null:(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid "+(Me?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"),backgroundColor:Me?"rgba(15, 23, 42, 0.5)":"rgba(248, 250, 252, 0.5)"},children:[(0,ce.jsxs)("button",{onClick:oy,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"transparent",border:"none",cursor:"pointer",color:"#22c55e",fontSize:"15px",fontWeight:500,borderRadius:"8px"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=Me?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,ce.jsx)("span",{style:{fontSize:"16px"},children:""}),"Back to Menu"]}),(0,ce.jsx)("div",{style:{flex:1}}),(0,ce.jsx)("button",{onClick:Xe,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",border:"none",backgroundColor:Me?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",color:Me?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.7)",cursor:"pointer",fontSize:"16px",fontWeight:300,transition:"background-color 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=Me?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=Me?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},children:""})]}),[Ne,Ve.length,Me,oy,Xe]);return(0,ce.jsxs)("div",{className:"MediaSFU",style:{height:"100vh",width:"100vw",maxWidth:"100vw",maxHeight:"100vh",overflow:"hidden",...v},children:[x&&je?le().createElement(x,{parameters:{...ry(),...ty()}}):je?l?(0,ce.jsxs)(k,{children:[(0,ce.jsxs)(C,{backgroundColor:tt,defaultFraction:1-ri,updateIsWideScreen:Xl,updateIsMediumScreen:Zl,updateIsSmallScreen:Ql,showControls:"webinar"==Pt.current||"conference"==Pt.current,containerProps:{style:{display:"flex",flexDirection:"row",flex:1,minWidth:0,width:"auto"}},children:[(0,ce.jsxs)(j,{doStack:!0,mainSize:Ys,updateComponentSizes:kf,defaultFraction:1-ri,componentSizes:Sm,sidebarWidth:Ye&&Qe?Ze:0,showControls:"webinar"==Pt.current||"conference"==Pt.current,containerProps:{style:{flex:1,minWidth:0}},children:[(0,ce.jsxs)(P,{height:Sm.mainHeight,width:Sm.mainWidth,backgroundColor:tt,mainSize:Ys,showAspect:Ys>0,timeBackgroundColor:cm,meetingProgressTime:zi,timerComponent:De,children:[(0,ce.jsx)(F,{customWidth:Sm.mainWidth,customHeight:Sm.mainHeight,rows:1,columns:1,componentsToRender:Di.current?Di.current:[],showAspect:Di.current.length>0&&!(Jg.current&&!Xg.current),localStreamScreen:us.current,annotateScreenStream:uh.current,isDarkMode:Me,Screenboard:Ut.current&&(0,ce.jsx)(E,{customWidth:Sm.mainWidth,customHeight:Sm.mainHeight,parameters:{...ry(),...ty()},showAspect:Ut.current})}),(0,ce.jsx)($,{customWidth:Sm.mainWidth,customHeight:Sm.mainHeight,parameters:{...ry(),...ty()},showAspect:Jg.current&&!Xg.current}),(0,ce.jsx)(B,{buttons:vy,position:"right",location:"bottom",direction:"vertical",showAspect:"broadcast"==Pt.current}),(0,ce.jsx)(B,{buttons:by,direction:"horizontal",showAspect:"broadcast"==Pt.current&&!lm&&"2"==yt.current,location:"bottom",position:"middle"}),(0,ce.jsx)(B,{buttons:yy,direction:"horizontal",showAspect:"broadcast"==Pt.current&&lm&&"2"==yt.current,location:"bottom",position:"middle"}),(0,ce.jsx)(oa,{participantsCount:Tt.current,position:"bottomLeft",showBadge:Ys>0,isDarkMode:Me})]}),(0,ce.jsxs)(I,{height:Sm.otherHeight,width:Sm.otherWidth,backgroundColor:tt,showAspect:100!=Ys,timeBackgroundColor:cm,showTimer:0==Ys,meetingProgressTime:zi,timerComponent:De,children:[(0,ce.jsx)("div",{style:{width:"horizontal"===Ai.current?Sm.otherWidth:Ii.current,height:"horizontal"===Ai.current?Ii.current:Sm.otherHeight,padding:0,margin:0,display:Zs.current?"flex":"none",flexDirection:"horizontal"===Ai.current?"row":"column",justifyContent:"center",alignItems:"center"},children:(0,ce.jsx)(N,{totalPages:bi,currentUserPage:Gs.current,showAspect:Zs.current,paginationHeight:Ii.current,direction:Ai.current,parameters:{...ry(),...ty()}})}),(0,ce.jsx)(D,{componentsToRender:[...Vi.current||[],...Bi||[]]}),(0,ce.jsx)(B,{buttons:Sy,position:"right",location:"bottom",direction:"vertical",showAspect:"chat"==Pt.current}),(0,ce.jsx)(A,{customWidth:Ti.current.gridWidth,customHeight:Ti.current.gridHeight,rows:di,columns:ui,componentsToRender:Ni[0],backgroundColor:tt}),(0,ce.jsx)(T,{customWidth:Ti.current.altGridWidth,customHeight:Ti.current.altGridHeight,rows:mi,columns:hi,componentsToRender:Ni[1],backgroundColor:tt}),(0,ce.jsx)(oa,{participantsCount:Tt.current,position:"topRight",showBadge:0===Ys,isDarkMode:Me})]})]}),Ye&&(0,ce.jsx)("div",{style:{width:Qe?Ze:0,height:"100%",overflow:"hidden",transition:"width 300ms ease-in-out",backgroundColor:Qe?Me?"rgba(30, 41, 59, 0.98)":"rgba(241, 245, 249, 0.98)":"transparent",borderLeft:Qe?"1px solid "+(Me?"rgba(255,255,255,0.12)":"rgba(0,0,0,0.12)"):"none",boxShadow:Qe?"-2px 0 8px rgba(0,0,0,0.1)":"none",display:"flex",flexDirection:"column",flexShrink:0},children:(0,ce.jsxs)("div",{style:{width:Ze,height:"100%",display:Qe?"flex":"none",flexDirection:"column",overflow:"hidden"},children:[Ny(),(0,ce.jsx)("div",{style:{flex:1,overflow:"auto"},children:Dy()})]})})]}),(0,ce.jsx)(M,{backgroundColor:tt,showControls:"webinar"==Pt.current||"conference"==Pt.current,defaultFractionSub:ri,children:(0,ce.jsx)(L,{buttons:Ry,buttonColor:Me?"white":"black",buttonBackgroundColor:{default:"transparent",pressed:"transparent"},alignment:"space-between",vertical:!1,buttonsContainerStyle:{marginTop:2,marginBottom:2,backgroundColor:"transparent"},renderButton:({defaultButton:e,button:t,index:r})=>{const a=t.tooltip||t.name||"";return a?(0,ce.jsx)(Ie,{message:a,isDarkMode:Me,position:"top",children:e},r):e}})})]}):(0,ce.jsx)(ce.Fragment,{children:" "}):b?le().createElement(b,{localLink:t,connectMediaSFU:r,parameters:{imgSrc:i,showAlert:ay,updateIsLoadingModalVisible:Xh,connectSocket:ma,connectLocalSocket:ga,updateSocket:Ki,updateLocalSocket:Ji,updateValidated:Yi,updateApiUserName:Zi,updateApiToken:Qi,updateLink:ec,updateRoomName:tc,updateMember:rc,updateSelfieSegmentation:mb},credentials:a,returnUI:l,noUIPreJoinOptions:u,createMediaSFURoom:m,joinMediaSFURoom:p}):R?.welcomePage?(0,ce.jsx)(ke,{parameters:{imgSrc:i,showAlert:ay,updateIsLoadingModalVisible:Xh,connectSocket:ma,updateSocket:Ki,updateValidated:Yi,updateApiUserName:Zi,updateApiToken:Qi,updateLink:ec,updateRoomName:tc,updateMember:rc}}):(0,ce.jsx)(Ce,{parameters:{imgSrc:i,showAlert:ay,updateIsLoadingModalVisible:Xh,connectSocket:ma,connectLocalSocket:ga,updateSocket:Ki,updateLocalSocket:Ji,updateValidated:Yi,updateApiUserName:Zi,updateApiToken:Qi,updateLink:ec,updateRoomName:tc,updateMember:rc,updateAudioPreference:Cl,updateVideoPreference:Ed,updateAudioOutputPreference:jl,updateIsDarkMode:Fe,updateEventType:pc,updateVirtualBackground:ub,updateCurrentFacingMode:Wd,updateKeepBackground:fb,updateAppliedBackground:Sb,updateSelfieSegmentation:mb},credentials:a,localLink:t,connectMediaSFU:r,returnUI:l,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m}),l&&!x&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(oe,{backgroundColor:tt,isConfirmExitModalVisible:Np,onConfirmExitClose:()=>Kh(!1),member:ft.current,roomName:gt.current,socket:at.current,islevel:yt.current}),(0,ce.jsx)(se,{backgroundColor:tt,isConfirmHereModalVisible:Vp,onConfirmHereClose:()=>Jh(!1),member:ft.current,roomName:gt.current,socket:at.current}),(0,ce.jsx)(we,{backgroundColor:tt,isVisible:mh,onClose:()=>Zb(!1),parameters:{...ry(),...ty()}}),(0,ce.jsx)(xe,{isDarkMode:Me,backgroundColor:tt,isVisible:Dg,onClose:()=>Ng(!1),parameters:{...ry(),...ty(),selfieSegmentation:kg.current}}),(0,ce.jsx)(K,{visible:tp,message:ap,type:op,duration:ip,onHide:()=>rp(!1),textColor:"#ffffff",position:dp,isDarkMode:Me}),(0,ce.jsx)(Y,{isVisible:Wp,backgroundColor:tt,displayColor:Me?"white":"black"})]}),je&&!Ye&&(0,ce.jsx)("div",{style:{position:"fixed",top:0,right:0,bottom:0,zIndex:1e3,display:et?"flex":"none",flexDirection:"column",pointerEvents:"none"},children:(0,ce.jsxs)("div",{style:{position:"relative",width:Math.min(.85*Ue,400),minWidth:280,height:"100%",backgroundColor:Me?"rgba(30, 41, 59, 0.98)":"rgba(241, 245, 249, 0.98)",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.25)",borderLeft:"1px solid "+(Me?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"),display:"flex",flexDirection:"column",overflow:"hidden",animation:"slideInRight 300ms cubic-bezier(0.16, 1, 0.3, 1)",pointerEvents:"auto"},children:[Ve.length>0&&(0,ce.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:"1px solid "+(Me?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"),backgroundColor:Me?"rgba(15, 23, 42, 0.5)":"rgba(248, 250, 252, 0.5)"},children:[(0,ce.jsxs)("button",{onClick:oy,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",background:"transparent",border:"none",cursor:"pointer",color:"#22c55e",fontSize:"15px",fontWeight:500,borderRadius:"8px"},children:[(0,ce.jsx)("span",{style:{fontSize:"16px"},children:""}),"Back"]}),(0,ce.jsx)("button",{onClick:Xe,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",borderRadius:"50%",border:"none",backgroundColor:Me?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",color:Me?"rgba(255,255,255,0.8)":"rgba(0,0,0,0.7)",cursor:"pointer",fontSize:"18px",fontWeight:300,transition:"background-color 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=Me?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=Me?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},children:""})]}),(0,ce.jsx)("div",{style:{flex:1,overflow:"auto"},children:Dy()})]})}),(0,ce.jsx)("style",{children:"\n          @keyframes slideInRight {\n            from {\n              transform: translateX(100%);\n            }\n            to {\n              transform: translateX(0);\n            }\n          }\n        "})]})},Ko=({isVisible:e,backgroundColor:t="rgba(0, 0, 0, 0.5)",displayColor:r="black",loadingText:a="Loading...",showSpinner:n=!0,spinnerIcon:o=pe.faSpinner,containerProps:s,contentProps:i,spinnerWrapperProps:c,spinnerProps:d,textProps:l,renderSpinner:u,renderContent:p})=>{const{className:m,style:g,...h}=s??{},f=["mediasfu-loading-modal",m].filter(Boolean).join(" ")||void 0,b={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:t,display:e?"flex":"none",alignItems:"center",justifyContent:"center",zIndex:999,...g},{className:y,style:x,...v}=i??{},S=["mediasfu-loading-modal__content",y].filter(Boolean).join(" ")||void 0,R={backgroundColor:t,borderRadius:10,padding:16,maxWidth:240,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:12,...x},{className:w,style:k,...C}=c??{},j=["mediasfu-loading-modal__spinner-wrapper",w].filter(Boolean).join(" ")||void 0,P={marginBottom:4,display:"flex",alignItems:"center",justifyContent:"center",...k},M=n?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:o,spin:!0,style:{fontSize:"48px",color:r},...d}):null,I=u?u({defaultSpinner:M,isVisible:e,displayColor:r}):M,{className:A,style:T,...F}=l??{},D=["mediasfu-loading-modal__text",A].filter(Boolean).join(" ")||void 0,N={color:r,...T},L=(0,ce.jsxs)("div",{className:S,style:R,...v,children:[I&&(0,ce.jsx)("div",{className:j,style:P,...C,children:I}),a&&(0,ce.jsx)("div",{className:D,style:N,...F,children:a})]}),V=p?p({defaultContent:L,isVisible:e,displayColor:r,loadingText:a}):L;return(0,ce.jsx)("div",{...h,className:f,style:b,children:V})},Jo=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Xo=({visible:e,message:t,type:r="success",duration:a=4e3,onHide:n,textColor:o="black",overlayProps:s,containerProps:i,messageProps:c,renderMessage:d,renderContent:l})=>{const[u,p]=(0,de.useState)(r);(0,de.useEffect)(()=>{r&&p(r)},[r]),(0,de.useEffect)(()=>{let t;return e&&a>0&&(t=setTimeout(()=>{n?.()},a)),()=>{t&&clearTimeout(t)}},[e,a,n]);const{className:m,style:g,onClick:h,...f}=s??{},b=Jo("mediasfu-alert__overlay",m),y={display:e?"flex":"none",justifyContent:"center",alignItems:"center",position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3,padding:16,...g},{className:x,style:v,...S}=i??{},R=Jo("mediasfu-alert__container","modalView",x),w={backgroundColor:"success"===u?"#16a34a":"#dc2626",borderRadius:12,padding:"20px 24px",maxWidth:420,width:"100%",boxShadow:"0 20px 45px rgba(0,0,0,0.25)",transition:"transform 0.2s ease, opacity 0.2s ease",color:o,cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",...v},{className:k,style:C,...j}=c??{},P=Jo("mediasfu-alert__message","modalText",k),M={margin:0,color:o,fontSize:"1rem",fontWeight:600,lineHeight:1.4,...C},I=(0,ce.jsx)("p",{className:P,style:M,...j,children:t}),A=d?d({defaultMessage:I}):I,T=(0,ce.jsx)("div",{role:"alert","aria-live":"danger"===u?"assertive":"polite",className:R,style:w,onClick:e=>{i?.onClick?.(e),e.defaultPrevented||n?.()},...S,children:A}),F=l?l({defaultContent:T}):T;return(0,ce.jsx)("div",{className:b,style:y,onClick:e=>{h?.(e),e.defaultPrevented||e.target!==e.currentTarget||n?.()},...f,children:F})},Zo=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Qo=({meetingID:e,shareButtons:t=[],eventType:r,localLink:a="",containerProps:n,renderContainer:o,renderButtons:s,renderButton:i,renderIcon:c,getShareUrl:d})=>{const l=(0,de.useMemo)(()=>{if(d)return d({meetingID:e,eventType:r,localLink:a});const t="chat"===r?"chat":"broadcast"===r?"broadcast":"meeting";return a&&!a.includes("mediasfu.com")?`${a}/meeting/${e}`:`https://${t}.mediasfu.com/${t}/${e}`},[r,d,a,e]),u=[{icon:pe.faCopy,action:async()=>{try{await navigator.clipboard.writeText(l)}catch(e){console.error("Failed to copy to clipboard",e)}},show:!0},{icon:pe.faEnvelope,action:()=>{const e=`mailto:?subject=Join my meeting&body=Here's the link to the meeting: ${l}`;window.open(e,"_blank")},show:!0},{icon:Oe.faFacebook,action:()=>{const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(l)}`;window.open(e,"_blank")},show:!0},{icon:Oe.faWhatsapp,action:()=>{const e=`https://wa.me/?text=${encodeURIComponent(l)}`;window.open(e,"_blank")},show:!0},{icon:Oe.faTelegram,action:()=>{const e=`https://t.me/share/url?url=${encodeURIComponent(l)}`;window.open(e,"_blank")},show:!0}],p=t.length>0?t.filter(e=>e.show):u.filter(e=>e.show),{className:m,style:g,...h}=n??{},f=p.map((e,t)=>{const{wrapperProps:r,iconProps:a,icon:n,color:o,iconColor:s}=e,{className:d,style:u,onClick:m,...g}=r??{},{className:h,style:f,icon:b,...y}=a??{},x=(0,ce.jsx)(ue.FontAwesomeIcon,{icon:b??n,className:Zo(void 0,h),style:{color:s??f?.color??"#ffffff",fontSize:24,...f},...y}),v=c?c({defaultIcon:x,button:e,shareUrl:l}):x,S=(0,ce.jsx)("div",{className:Zo("share-button",d),style:{alignItems:"center",justifyContent:"center",padding:10,borderRadius:5,margin:"0 5px",backgroundColor:o||"black",marginRight:t!==p.length-1?10:0,cursor:"pointer",...u},onClick:async t=>{await Promise.resolve(m?.(t)),t.defaultPrevented||await Promise.resolve(e.action())},...g,children:v}),R=i?i({defaultButton:S,button:e,index:t,shareUrl:l}):S;return(0,ce.jsx)(le().Fragment,{children:R},t)}),b=s?s({defaultButtons:f,buttons:p,shareUrl:l}):f,y=(0,ce.jsx)("div",{className:Zo("mediasfu-shareButtonsContainer",m),style:{display:"flex",flexDirection:"row",margin:"10px 0",...g},...h,children:b});return o?o({defaultContainer:y,buttons:p,shareUrl:l}):y},es=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},ts={fontSize:20,marginRight:5},rs=({buttons:e,containerProps:t,fallbackSpinner:r,renderContainer:a,renderButtons:n,renderButton:o})=>{const{className:s,style:i,...c}=t??{},d=r??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0}),l=e.map((e,t)=>{const{buttonProps:r,contentProps:a,iconProps:n,icon:s,customComponent:i,renderAsButton:c=!0}=e,{className:l,style:u,onClick:p,onKeyDown:m,type:g,disabled:h,tabIndex:f,role:b,...y}=r??{},x=e.show??!0,v=e.disabled??h??!1,{className:S,style:R,...w}=a??{},{className:k,style:C,icon:j,...P}=n??{},M=j??s,I=(0,ce.jsx)("div",{className:es("buttonContent",S),style:{...R},...w,children:M?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:M,className:es(void 0,k),style:{...ts,...e.iconStyle,...C},...P}),e.text&&(0,ce.jsx)("span",{className:"customButtonText",style:e.textStyle,children:e.text})]}):i||d}),A=es("customButton",l),T={backgroundColor:x?e.backgroundColor??"transparent":"transparent",display:x?"flex":"none",...u},F=c?(0,ce.jsx)("button",{type:g??"button",onClick:async t=>{await Promise.resolve(p?.(t)),t.defaultPrevented||await Promise.resolve(e.action?.())},onKeyDown:m,tabIndex:f,role:b,className:A,style:T,disabled:v,...y,children:I}):(0,ce.jsx)("div",{className:A,style:T,"aria-disabled":v||void 0,role:b??(e.action?"button":void 0),tabIndex:f??(e.action?0:void 0),onClick:e.action||p?async t=>{p&&await Promise.resolve(p(t)),t.defaultPrevented||v||t.currentTarget===t.target&&e.action&&await Promise.resolve(e.action())}:void 0,onKeyDown:e.action||m?async t=>{m&&m(t),t.defaultPrevented||v||"Enter"!==t.key&&" "!==t.key||!e.action||(t.preventDefault(),await Promise.resolve(e.action()))}:void 0,...y,children:I}),D=o?o({defaultButton:F,button:e,index:t,isVisible:x}):F;return(0,ce.jsx)(le().Fragment,{children:D},t)}),u=n?n({defaultButtons:l,buttons:e}):l,p=(0,ce.jsx)("div",{className:es("mediasfu-customButtonsContainer",s),style:{...i},...c,children:u});return a?a({defaultContainer:p,buttons:e}):p},as=({backgroundColor:e="#83c0e9",isVisible:t,onClose:r,customButtons:a=[],shareButtons:n=!0,position:o="bottomRight",roomName:s,adminPasscode:i,islevel:c,eventType:d,localLink:l,title:u="Menu",menuIcon:p,menuIconProps:m,closeIcon:g,closeIconProps:h,overlayProps:f,contentProps:b,headerProps:y,titleWrapperProps:x,badgeWrapperProps:v,closeButtonProps:S,dividerProps:R,bodyProps:w,scrollWrapperProps:k,customButtonsWrapperProps:C,customButtonsComponentProps:j,meetingPasscodeWrapperProps:P,meetingPasscodeComponentProps:M,meetingIdWrapperProps:I,meetingIdComponentProps:A,shareButtonsWrapperProps:T,shareButtonsComponentProps:F,sectionsDividerProps:D,renderHeader:N,renderTitle:L,renderCustomButtons:V,renderMeetingPasscode:B,renderMeetingId:$,renderShareButtons:E,renderBody:W,renderContent:H})=>{const O="undefined"!=typeof window?Math.min(.7*window.innerWidth,400):320,{className:z,style:U,...q}=f??{},_=["mediasfu-menu-modal__overlay",z].filter(Boolean).join(" ").trim()||void 0,G={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:t?"flex":"none",alignItems:"center",justifyContent:"center",padding:16,zIndex:999,...U},{className:Y,style:K,...J}=b??{},X=["mediasfu-menu-modal__content",Y].filter(Boolean).join(" ").trim()||void 0,Z={position:"fixed",backgroundColor:e,borderRadius:12,padding:16,width:O,maxHeight:"85%",overflow:"hidden",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 12px 36px rgba(0,0,0,0.25)",top:o.includes("top")?10:"auto",bottom:o.includes("bottom")?10:"auto",left:o.includes("Left")?10:"auto",right:o.includes("Right")?10:"auto",...K},{className:Q,style:ee,...te}=y??{},re=["mediasfu-menu-modal__header",Q].filter(Boolean).join(" ").trim()||void 0,ae={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...ee},{className:ne,style:oe,...se}=x??{},ie=["mediasfu-menu-modal__title",ne].filter(Boolean).join(" ").trim()||void 0,de={display:"flex",alignItems:"center",gap:8,fontSize:18,fontWeight:700,color:"black",...oe},{className:le,style:me,...ge}=v??{},he=["mediasfu-menu-modal__title-icon",le].filter(Boolean).join(" ").trim()||void 0,fe={display:"inline-flex",alignItems:"center",justifyContent:"center",...me},{className:be,style:ye,onClick:xe,...ve}=S??{},Se=["mediasfu-menu-modal__close",be].filter(Boolean).join(" ").trim()||void 0,Re={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...ye},{style:we,...ke}=R??{},Ce={height:1,backgroundColor:"black",border:"none",margin:"4px 0",...we},{className:je,style:Pe,...Me}=w??{},Ie=["mediasfu-menu-modal__body",je].filter(Boolean).join(" ").trim()||void 0,Ae={display:"flex",flexDirection:"column",gap:12,flex:1,minHeight:0,...Pe},{className:Te,style:Fe,...De}=k??{},Ne=["mediasfu-menu-modal__scroll",Te].filter(Boolean).join(" ").trim()||void 0,Le={overflowY:"auto",maxHeight:"100%",paddingRight:4,...Fe},{className:Ve,style:Be,...$e}=C??{},Ee=["mediasfu-menu-modal__custom-buttons",Ve].filter(Boolean).join(" ").trim()||void 0,We={margin:0,padding:0,...Be},He={buttons:a,...j??{}},{className:Oe,style:ze,...Ue}=P??{},qe=["mediasfu-menu-modal__passcode",Oe].filter(Boolean).join(" ").trim()||void 0,_e={margin:"10px 0",...ze},Ge={meetingPasscode:i,...M??{}},{className:Ye,style:Ke,...Xe}=I??{},Ze=["mediasfu-menu-modal__meeting-id",Ye].filter(Boolean).join(" ").trim()||void 0,Qe={marginBottom:10,...Ke},et={meetingID:s,...A??{}},{className:rt,style:at,...nt}=T??{},ot=["mediasfu-menu-modal__share-buttons",rt].filter(Boolean).join(" ").trim()||void 0,st={marginTop:10,...at},it={meetingID:s,eventType:d,localLink:l,...F??{}},{style:ct,...dt}=D??{},lt={height:1,backgroundColor:"#ffffff",border:"none",margin:"10px 0",...ct},ut=p??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBars,style:{fontSize:20,color:"black",...m?.style??{}},...m}),pt=g??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,style:{fontSize:20,color:"black",...h?.style??{}},...h}),mt=(0,ce.jsxs)("div",{className:ie,style:de,...se,children:[(0,ce.jsx)("span",{className:he,style:fe,...ge,children:ut}),(0,ce.jsx)("span",{children:u})]}),gt=L?L({defaultTitle:mt,menuIcon:ut,titleContent:u}):mt,ht=(0,ce.jsx)("div",{className:Ee,style:We,...$e,children:(0,ce.jsx)(rs,{...He})}),ft=V?V({defaultCustomButtons:ht,buttons:He.buttons}):ht,bt="2"===c,yt=bt?(0,ce.jsx)("div",{className:qe,style:_e,...Ue,children:(0,ce.jsx)(tt,{...Ge})}):null,xt=B?B({defaultMeetingPasscode:yt,adminPasscode:i,isHost:bt}):yt,vt=(0,ce.jsx)("div",{className:Ze,style:Qe,...Xe,children:(0,ce.jsx)(Je,{...et})}),St=$?$({defaultMeetingId:vt,roomName:s}):vt,Rt=Boolean(n),wt=Rt?(0,ce.jsx)("div",{className:ot,style:st,...nt,children:(0,ce.jsx)(Qo,{...it})}):null,kt=E?E({defaultShareButtons:wt,hasShareButtons:Rt}):wt,Ct=(0,ce.jsxs)("div",{className:Ne,style:Le,...De,children:[ft,(0,ce.jsx)("hr",{style:lt,...dt}),xt,St,kt]}),jt=W?W({defaultBody:Ct}):Ct,Pt=(0,ce.jsxs)("div",{className:re,style:ae,...te,children:[gt,(0,ce.jsx)("button",{type:"button",className:Se,style:Re,onClick:e=>{xe?.(e),e.defaultPrevented||r()},...ve,children:pt})]}),Mt=N?N({defaultHeader:Pt,onClose:r}):Pt,It=(0,ce.jsxs)("div",{className:X,style:Z,...J,children:[Mt,(0,ce.jsx)("hr",{style:Ce,...ke}),(0,ce.jsx)("div",{className:Ie,style:Ae,...Me,children:jt})]}),At=H?H({defaultContent:It}):It;return(0,ce.jsx)("div",{className:_,style:G,...q,children:At})},ns=({isRecordingModalVisible:e,onClose:t,backgroundColor:r="#83c0e9",position:a="bottomRight",confirmRecording:n,startRecording:o,parameters:s,title:i="Recording Settings",overlayProps:c,contentProps:d,headerProps:l,titleProps:u,closeButtonProps:p,closeIconComponent:m,headerDividerProps:g,bodyProps:h,panelsWrapperProps:f,panelsScrollProps:b,panelsContainerProps:y,panelsActionsDividerProps:x,actionsWrapperProps:v,confirmButtonProps:S,startButtonProps:R,confirmButtonLabel:w="Confirm",startButtonLabel:k=(0,ce.jsxs)(ce.Fragment,{children:["Start ",(0,ce.jsx)("i",{className:"fas fa-play"})]}),renderHeader:C,renderPanels:j,renderActions:P,renderBody:M,renderContent:I})=>{const{recordPaused:A}=s,T="undefined"!=typeof window?Math.min(.8*window.innerWidth,350):320,{className:F,style:D,...N}=c??{},L=["mediasfu-recording-modal",F].filter(Boolean).join(" ").trim()||void 0,V={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...D},{className:B,style:$,...E}=d??{},W=["mediasfu-recording-modal__content",B].filter(Boolean).join(" ").trim()||void 0,H={position:"fixed",backgroundColor:r,borderRadius:10,padding:16,width:T,maxHeight:"85%",overflow:"hidden",top:a.includes("top")?10:"auto",bottom:a.includes("bottom")?10:"auto",left:a.includes("Left")?10:"auto",right:a.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...$},{className:O,style:z,...U}=l??{},q=["modal-header",O].filter(Boolean).join(" ").trim()||void 0,_={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...z},{className:G,style:Y,...K}=u??{},J=["modal-title",G].filter(Boolean).join(" ").trim()||void 0,X={margin:0,fontSize:"1.25rem",fontWeight:700,color:"black",...Y},{className:Z,style:Q,onClick:ee,...te}=p??{},re=["btn-close-recording",Z].filter(Boolean).join(" ").trim()||void 0,ae={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...Q},ne=m??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),oe=e=>{ee?.(e),e.defaultPrevented||t()},{style:se,...ie}=g??{},de={height:1,backgroundColor:"black",marginTop:5,marginBottom:5,border:"none",...se},{className:le,style:me,...ge}=h??{},he=["modal-body",le].filter(Boolean).join(" ").trim()||void 0,fe={display:"flex",flexDirection:"column",gap:16,flex:1,minHeight:0,...me},{className:be,style:ye,...xe}=f??{},ve=["recording-modal__panels-wrapper",be].filter(Boolean).join(" ").trim()||void 0,Se={flex:1,display:"flex",flexDirection:"column",minHeight:0,...ye},{className:Re,style:we,...ke}=b??{},Ce=["recording-modal__panels-scroll",Re].filter(Boolean).join(" ").trim()||void 0,je={overflowY:"auto",maxHeight:"calc(100% - 120px)",padding:0,...we},{className:Pe,style:Me,...Ie}=y??{},Ae=["recording-modal__panels",Pe].filter(Boolean).join(" ").trim()||void 0,Te={margin:0,padding:0,display:"flex",flexDirection:"column",gap:12,...Me},{className:Fe,style:De,...Ne}=x??{},Le=["recording-modal__divider",Fe].filter(Boolean).join(" ").trim()||void 0,Ve={height:1,backgroundColor:"white",marginTop:0,marginBottom:0,...De},{className:Be,style:$e,...Ee}=v??{},We=["recording-modal__actions",Be].filter(Boolean).join(" ").trim()||void 0,He={display:"flex",justifyContent:"space-between",marginTop:20,gap:16,flexWrap:"wrap",...$e},{className:Oe,style:ze,onClick:Ue,...qe}=S??{},_e=["recording-modal__confirm",Oe].filter(Boolean).join(" ").trim()||void 0,Ge={flex:1,padding:8,borderRadius:5,display:"inline-flex",justifyContent:"center",alignItems:"center",margin:"0 10px",background:"#4CAF50",cursor:"pointer",border:"none",color:"black",fontSize:14,...ze},Ye=()=>{n({parameters:{...s}})},Ke=e=>{Ue?.(e),e.defaultPrevented||Ye()},{className:Je,style:Xe,onClick:Ze,...Qe}=R??{},et=["recording-modal__start",Je].filter(Boolean).join(" ").trim()||void 0,tt={flex:1,padding:8,borderRadius:5,display:"inline-flex",justifyContent:"center",alignItems:"center",margin:"0 10px",background:"#f44336",cursor:"pointer",border:"none",color:"black",fontSize:14,...Xe},rt=()=>{o({parameters:{...s}})},at=e=>{Ze?.(e),e.defaultPrevented||rt()},nt=(()=>{const e=(0,ce.jsxs)("div",{className:q,style:_,...U,children:[(0,ce.jsx)("h2",{className:J,style:X,...K,children:i}),(0,ce.jsx)("button",{type:"button",className:re,style:ae,onClick:oe,...te,children:ne})]});return C?C({defaultHeader:e,onClose:t}):e})(),ot=(()=>{const e=(0,ce.jsx)("div",{className:ve,style:Se,...xe,children:(0,ce.jsx)("div",{className:Ce,style:je,...ke,children:(0,ce.jsxs)("div",{className:Ae,style:Te,...Ie,children:[(0,ce.jsx)(Wt,{parameters:s}),(0,ce.jsx)(Zt,{parameters:s})]})})});return j?j({defaultPanels:e,parameters:s}):e})(),st=(()=>{const e=(0,ce.jsxs)("div",{className:We,style:He,...Ee,children:[(0,ce.jsx)("button",{type:"button",className:_e,style:Ge,onClick:Ke,...qe,children:w}),!A&&(0,ce.jsx)("button",{type:"button",className:et,style:tt,onClick:at,...Qe,children:k})]});return P?P({defaultActions:e,recordPaused:A,handleConfirm:Ye,handleStart:rt}):e})(),it=(0,ce.jsxs)("div",{className:he,style:fe,...ge,children:[ot,(0,ce.jsx)("div",{className:Le,style:Ve,...Ne}),st]}),ct=M?M({defaultBody:it}):it,dt=(0,ce.jsxs)("div",{className:W,style:H,...E,children:[nt,(0,ce.jsx)("hr",{style:de,...ie}),ct]}),lt=I?I({defaultContent:dt}):dt;return(0,ce.jsx)("div",{className:L,style:V,...N,children:lt})},os=({isRequestsModalVisible:e,onRequestClose:t,requestCounter:r,onRequestFilterChange:a,onRequestItemPress:n=_,requestList:o,updateRequestList:s,roomName:i,socket:c,renderRequestComponent:d=cr,backgroundColor:l="#83c0e9",position:u="topRight",parameters:p,title:m="Requests",overlayProps:g,contentProps:h,headerProps:f,titleProps:b,badgeWrapperProps:y,badgeProps:x,closeButtonProps:v,closeIconComponent:S,bodyProps:R,searchWrapperProps:w,searchInputProps:k,requestsWrapperProps:C,requestItemWrapperProps:j,emptyState:P,renderHeader:M,renderSearch:I,renderRequest:A,renderBody:T,renderContent:F})=>{const D=(0,de.useMemo)(()=>p?.getUpdatedAllParams?p.getUpdatedAllParams().filteredRequestList:p?.filteredRequestList?p.filteredRequestList:o,[p,o]),[N,L]=(0,de.useState)(D),[V,B]=(0,de.useState)(p?.filteredRequestList?.length??r),[$,E]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(p?.getUpdatedAllParams){const e=p.getUpdatedAllParams();return L(e.filteredRequestList),void B(e.filteredRequestList.length)}if(p?.filteredRequestList)return L(p.filteredRequestList),void B(p.filteredRequestList.length);L(o),B(o.length)},[p,o,$]);const W="undefined"!=typeof window?Math.min(.8*window.innerWidth,350):320,{className:H,style:O,...z}=g??{},U=["mediasfu-requests-modal",H].filter(Boolean).join(" ").trim()||void 0,q={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...O},{className:G,style:Y,...K}=h??{},J=["mediasfu-requests-modal__content",G].filter(Boolean).join(" ").trim()||void 0,X={position:"fixed",backgroundColor:l,borderRadius:10,padding:16,width:W,maxHeight:"65%",overflowY:"auto",top:u.includes("top")?10:"auto",bottom:u.includes("bottom")?10:"auto",left:u.includes("Left")?10:"auto",right:u.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...Y},{className:Z,style:Q,...ee}=f??{},te=["modal-header",Z].filter(Boolean).join(" ").trim()||void 0,re={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...Q},{className:ae,style:ne,...oe}=b??{},se=["modal-title",ae].filter(Boolean).join(" ").trim()||void 0,ie={display:"flex",alignItems:"center",gap:8,margin:0,...ne},{className:me,style:ge,...he}=y??{},fe=["requests-counter",me].filter(Boolean).join(" ").trim()||void 0,be={backgroundColor:"#fff",color:"#000",borderRadius:10,padding:5,display:"inline-flex",alignItems:"center",justifyContent:"center",...ge},{className:ye,style:xe,...ve}=x??{},Se=["badge",ye].filter(Boolean).join(" ").trim()||void 0,Re={...xe},{className:we,style:ke,onClick:Ce,...je}=v??{},Pe=["btn-close-requests",we].filter(Boolean).join(" ").trim()||void 0,Me={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...ke},Ie=S??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),{className:Ae,style:Te,...Fe}=R??{},De=["modal-body",Ae].filter(Boolean).join(" ").trim()||void 0,Ne={display:"flex",flexDirection:"column",gap:12,...Te},{className:Le,style:Ve,...Be}=w??{},$e=["form-group",Le].filter(Boolean).join(" ").trim()||void 0,Ee={...Ve},{className:We,style:He,...Oe}=C??{},ze=["requests-list",We].filter(Boolean).join(" ").trim()||void 0,Ue={display:"flex",flexDirection:"column",gap:8,maxHeight:"calc(100% - 150px)",overflowY:"auto",...He},{className:qe,style:_e,...Ge}=j??{},Ye=["request-item-wrapper",qe].filter(Boolean).join(" ").trim()||void 0,Ke=(e,t)=>{const r=(0,ce.jsx)("div",{className:Ye,style:{marginTop:5,..._e},...Ge,children:d({request:e,onRequestItemPress:n,requestList:N,updateRequestList:s,roomName:i,socket:c})});return A?A({request:e,index:t,defaultRequest:r,handleRespond:t=>{n({request:e,updateRequestList:s,requestList:N,roomName:i,socket:c,action:t})}}):r},Je=(0,ce.jsxs)("div",{className:te,style:re,...ee,children:[(0,ce.jsxs)("div",{className:se,style:ie,...oe,children:[m,(0,ce.jsx)("div",{className:fe,style:be,...he,children:(0,ce.jsx)("span",{className:Se,style:Re,...ve,children:V})})]}),(0,ce.jsx)("button",{type:"button",className:Pe,style:Me,onClick:e=>{Ce?.(e),e.defaultPrevented||t()},...je,children:Ie})]}),Xe=M?M({defaultHeader:Je,counter:V,onClose:t}):Je,Ze=(0,ce.jsx)("input",{placeholder:"Search ...",...k,className:k?.className,style:{width:"90%",padding:10,borderRadius:5,border:"1px solid #000",fontSize:16,marginBottom:10,...k?.style},onChange:e=>{k?.onChange?.(e),e.defaultPrevented||(a(e.target.value),E(e=>!e))}}),Qe=I?I({defaultSearch:Ze,onFilter:e=>{a(e),E(e=>!e)}}):Ze,et=N.length?N.map((e,t)=>(0,ce.jsx)(le().Fragment,{children:Ke(e,t)},e.id??t)):P?"function"==typeof P?P({counter:V}):P:null,tt=(0,ce.jsxs)("div",{className:De,style:Ne,...Fe,children:[(0,ce.jsx)("div",{className:$e,style:Ee,...Be,children:Qe}),(0,ce.jsx)("div",{className:ze,style:Ue,...Oe,children:et})]}),rt=T?T({defaultBody:tt,counter:V}):tt,at=(0,ce.jsxs)("div",{className:J,style:X,...K,children:[Xe,(0,ce.jsx)("hr",{className:"hr"}),rt]}),nt=F?F({defaultContent:at,counter:V}):at;return(0,ce.jsx)("div",{className:U,style:q,...z,children:nt})},ss=({isWaitingModalVisible:e,onWaitingRoomClose:t,waitingRoomCounter:r,onWaitingRoomFilterChange:a,waitingRoomList:n,updateWaitingList:o,roomName:s,socket:i,onWaitingRoomItemPress:c=X,position:d="topRight",backgroundColor:l="#83c0e9",parameters:u,title:p="Waiting",overlayProps:m,contentProps:g,headerProps:h,titleProps:f,badgeWrapperProps:b,badgeProps:y,closeButtonProps:x,closeIconComponent:v,bodyProps:S,searchWrapperProps:R,searchInputProps:w,waitingListProps:k,participantRowProps:C,acceptButtonProps:j,rejectButtonProps:P,acceptIconComponent:M,rejectIconComponent:I,emptyState:A,renderHeader:T,renderSearch:F,renderParticipant:D,renderBody:N})=>{const L=(0,de.useMemo)(()=>u?.filteredWaitingRoomList??n,[u,n]),[V,B]=(0,de.useState)(L),[$,E]=(0,de.useState)(u?.filteredWaitingRoomList?.length??r),[W,H]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(u?.getUpdatedAllParams){const e=u.getUpdatedAllParams();B(e.filteredWaitingRoomList),E(e.filteredWaitingRoomList.length)}else u?.filteredWaitingRoomList?(B(u.filteredWaitingRoomList),E(u.filteredWaitingRoomList.length)):(B(n),E(n.length))},[u,n,W]);const O="undefined"!=typeof window?Math.min(.8*window.innerWidth,350):320,{className:z,style:U,...q}=m??{},_=["mediasfu-waiting-modal",z].filter(Boolean).join(" ")||void 0,G={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...U},{className:Y,style:K,...J}=g??{},Z=["mediasfu-waiting-modal__content",Y].filter(Boolean).join(" ")||void 0,Q={position:"fixed",backgroundColor:l,borderRadius:10,padding:16,width:O,maxHeight:"65%",overflowY:"auto",top:d.includes("top")?10:"auto",bottom:d.includes("bottom")?10:"auto",left:d.includes("Left")?10:"auto",right:d.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...K},{className:ee,style:te,...re}=h??{},ae=["modal-header",ee].filter(Boolean).join(" ")||void 0,ne={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...te},{className:oe,style:se,...ie}=f??{},me=["modal-title",oe].filter(Boolean).join(" ")||void 0,ge={display:"flex",alignItems:"center",gap:8,margin:0,...se},{className:he,style:fe,...be}=b??{},ye=["waiting-counter",he].filter(Boolean).join(" ")||void 0,xe={backgroundColor:"#fff",color:"#000",borderRadius:10,padding:5,display:"inline-flex",alignItems:"center",justifyContent:"center",...fe},{className:ve,style:Se,...Re}=y??{},we=["badge",ve].filter(Boolean).join(" ")||void 0,ke={...Se},{className:Ce,style:je,onClick:Pe,...Me}=x??{},Ie=["btn-close-waitings",Ce].filter(Boolean).join(" ")||void 0,Ae={background:"none",border:"none",padding:4,cursor:"pointer",color:"black",display:"inline-flex",alignItems:"center",justifyContent:"center",...je},Te=v??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),{className:Fe,style:De,...Ne}=S??{},Le=["modal-body",Fe].filter(Boolean).join(" ")||void 0,Ve={display:"flex",flexDirection:"column",gap:12,...De},{className:Be,style:$e,...Ee}=R??{},We=["form-group",Be].filter(Boolean).join(" ")||void 0,He={...$e},{className:Oe,style:ze,...Ue}=k??{},qe=["waiting-list",Oe].filter(Boolean).join(" ")||void 0,_e={display:"flex",flexDirection:"column",gap:6,...ze},{className:Ge,style:Ye,...Ke}=C??{},Je=["waiting-item",Ge].filter(Boolean).join(" ")||void 0,{className:Xe,style:Ze,onClick:Qe,...et}=j??{},tt=[Xe].filter(Boolean).join(" ")||void 0,{className:rt,style:at,onClick:nt,...ot}=P??{},st=[rt].filter(Boolean).join(" ")||void 0,it=(e,t)=>{const r=()=>{c({participantId:e.id,participantName:e.name,updateWaitingList:o,waitingList:n,roomName:s,type:!0,socket:i})},a=()=>{c({participantId:e.id,participantName:e.name,updateWaitingList:o,waitingList:n,roomName:s,type:!1,socket:i})},d=(0,ce.jsx)("button",{type:"button",className:tt,style:Ze,onClick:e=>{Qe?.(e),e.defaultPrevented||r()},...et,children:M??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck,size:"lg",color:"green"})}),l=(0,ce.jsx)("button",{type:"button",className:st,style:at,onClick:e=>{nt?.(e),e.defaultPrevented||a()},...ot,children:I??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg",color:"red"})}),u=(0,ce.jsxs)("div",{className:Je,style:{marginTop:5,flexDirection:"row",flex:1,display:"flex",alignItems:"center",gap:8,...Ye},...Ke,children:[(0,ce.jsx)("div",{className:"col7",children:e.name}),(0,ce.jsx)("div",{className:"col2",children:d}),(0,ce.jsx)("div",{className:"col2",children:l}),(0,ce.jsx)("div",{className:"col1"})]});return D?D({participant:e,index:t,defaultParticipant:u,handleAccept:r,handleReject:a}):u},ct=(0,ce.jsxs)("div",{className:ae,style:ne,...re,children:[(0,ce.jsxs)("div",{className:me,style:ge,...ie,children:[p,(0,ce.jsx)("div",{className:ye,style:xe,...be,children:(0,ce.jsx)("span",{className:we,style:ke,...Re,children:$})})]}),(0,ce.jsx)("button",{type:"button",className:Ie,style:Ae,onClick:e=>{Pe?.(e),e.defaultPrevented||t()},...Me,children:Te})]}),dt=T?T({defaultHeader:ct,counter:$,onClose:t}):ct,lt=(0,ce.jsx)("input",{style:{width:"90%",padding:10,borderRadius:5,border:"1px solid #000",fontSize:16,marginBottom:10,...w?.style},placeholder:"Search ...",...w,className:w?.className,onChange:e=>{w?.onChange?.(e),e.defaultPrevented||(a(e.target.value),H(e=>!e))}}),ut=F?F({defaultSearch:lt,onFilter:e=>{a(e),H(e=>!e)}}):lt,pt=V.length?V.map((e,t)=>(0,ce.jsx)(le().Fragment,{children:it(e,t)},e.id??t)):A?"function"==typeof A?A({counter:$}):A:null,mt=(0,ce.jsxs)("div",{className:Le,style:Ve,...Ne,children:[(0,ce.jsx)("div",{className:We,style:He,...Ee,children:ut}),(0,ce.jsx)("div",{className:qe,style:_e,...Ue,children:pt})]}),gt=N?N({defaultBody:mt,counter:$}):mt;return(0,ce.jsx)("div",{className:_,style:G,...q,children:(0,ce.jsxs)("div",{className:Z,style:Q,...J,children:[dt,(0,ce.jsx)("hr",{className:"hr"}),gt]})})},is=({isDisplaySettingsModalVisible:e,onDisplaySettingsClose:t,onModifyDisplaySettings:r=N,parameters:a,position:n="topRight",backgroundColor:o="#83c0e9"})=>{let s=.8*window.innerWidth;s>350&&(s=350);const i={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999},c={position:"fixed",backgroundColor:o,borderRadius:10,padding:10,width:s,maxHeight:"65%",overflowY:"auto",top:n.includes("top")?10:"auto",bottom:n.includes("bottom")?10:"auto",left:n.includes("Left")?10:"auto",right:n.includes("Right")?10:"auto"},{meetingDisplayType:d,autoWave:l,forceFullDisplay:u,meetingVideoOptimized:p}=a,[m,g]=(0,de.useState)(d),[h,f]=(0,de.useState)(l),[b,y]=(0,de.useState)(u),[x,v]=(0,de.useState)(p);return(0,ce.jsx)("div",{style:i,children:(0,ce.jsxs)("div",{style:c,children:[(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:15},children:[(0,ce.jsx)("h2",{style:{fontSize:18,fontWeight:"bold",color:"black"},children:"Display Settings"}),(0,ce.jsx)("div",{className:"btn-close-media-settings",onClick:t,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon",size:"xl"})})]}),(0,ce.jsx)("hr",{style:{height:1,backgroundColor:"black",marginTop:5,marginBottom:5}}),(0,ce.jsxs)("div",{style:{flex:1},children:[(0,ce.jsxs)("div",{style:{marginBottom:10},children:[(0,ce.jsx)("label",{style:{fontSize:"medium",color:"black",marginBottom:5,fontWeight:"bold"},children:"Display Option:"}),(0,ce.jsxs)("select",{style:{fontSize:"medium",padding:"12px 10px",border:"1px solid gray",borderRadius:4,color:"black",paddingRight:30,backgroundColor:"white"},value:m,onChange:e=>g(e.target.value),children:[(0,ce.jsx)("option",{value:"video",children:"Video Participants Only"}),(0,ce.jsx)("option",{value:"media",children:"Media Participants Only"}),(0,ce.jsx)("option",{value:"all",children:"Show All Participants"})]})]}),(0,ce.jsx)("div",{style:{height:1,backgroundColor:"#ffffff",marginTop:2,marginBottom:2}}),(0,ce.jsxs)("div",{style:{marginBottom:10},children:[(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,ce.jsx)("label",{style:{fontSize:"medium",color:"black",fontWeight:"bold"},children:"Display Audiographs"}),(0,ce.jsx)("button",{onClick:()=>f(!h),children:(0,ce.jsx)("span",{style:{fontSize:"large",color:h?"green":"red",fontWeight:"bolder"},children:""})})]}),(0,ce.jsx)("div",{style:{height:1,backgroundColor:"#ffffff",marginTop:2,marginBottom:2}}),(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,ce.jsx)("label",{style:{fontSize:"medium",color:"black",fontWeight:"bold"},children:"Force Full Display"}),(0,ce.jsx)("button",{onClick:()=>y(!b),children:(0,ce.jsx)("span",{style:{fontSize:"large",color:b?"green":"red",fontWeight:"bolder"},children:""})})]}),(0,ce.jsx)("div",{style:{height:1,backgroundColor:"#ffffff",marginTop:2,marginBottom:2}}),(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,ce.jsx)("label",{style:{fontSize:"medium",color:"black",fontWeight:"bold"},children:"Force Video Participants"}),(0,ce.jsx)("button",{onClick:()=>v(!x),children:(0,ce.jsx)("span",{style:{fontSize:"large",color:x?"green":"red",fontWeight:"bolder"},children:""})})]}),(0,ce.jsx)("div",{style:{height:1,backgroundColor:"#ffffff",marginTop:2,marginBottom:2}})]})]}),(0,ce.jsx)("div",{style:{marginTop:10,flexDirection:"row",justifyContent:"flex-end"},children:(0,ce.jsx)("button",{style:{flex:1,padding:5,borderRadius:5,justifyContent:"center",alignItems:"center",backgroundColor:"black"},onClick:async()=>{await r({parameters:{...a,meetingDisplayType:m,autoWave:h,forceFullDisplay:b,meetingVideoOptimized:x}})},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:"medium"},children:"Save"})})})]})})},cs=({isEventSettingsModalVisible:e,onEventSettingsClose:t,onModifyEventSettings:r=G,audioSetting:a,videoSetting:n,screenshareSetting:o,chatSetting:s,position:i="topRight",backgroundColor:c="#83c0e9",updateAudioSetting:d,updateVideoSetting:l,updateScreenshareSetting:u,updateChatSetting:p,updateIsSettingsModalVisible:m,roomName:g,socket:h,showAlert:f,title:b="Event Settings",overlayProps:y,contentProps:x,headerProps:v,titleProps:S,closeButtonProps:R,closeIconComponent:w,headerDividerProps:k,bodyProps:C,settingFieldProps:j,audioFieldProps:P,videoFieldProps:M,screenshareFieldProps:I,chatFieldProps:A,settingLabelProps:T,audioLabelProps:F,videoLabelProps:D,screenshareLabelProps:N,chatLabelProps:L,settingSelectProps:V,audioSelectProps:B,videoSelectProps:$,screenshareSelectProps:E,chatSelectProps:W,separatorProps:H,footerProps:O,saveButtonProps:z,saveButtonLabel:U,audioLabel:q,videoLabel:_,screenshareLabel:Y,chatLabel:K,disallowOptionLabel:J,allowOptionLabel:X,approvalOptionLabel:Z,chatDisallowOptionLabel:Q,chatAllowOptionLabel:ee,audioOptions:te,videoOptions:re,screenshareOptions:ae,chatOptions:ne,renderHeader:oe,renderBody:se,renderSettings:ie,renderSettingSection:me,renderSeparator:ge,renderFooter:he,renderContent:fe})=>{const[be,ye]=(0,de.useState)(a),[xe,ve]=(0,de.useState)(n),[Se,Re]=(0,de.useState)(o),[we,ke]=(0,de.useState)(s),Ce="undefined"!=typeof window?Math.min(.8*window.innerWidth,350):320,{className:je,style:Pe,...Me}=y??{},Ie=["mediasfu-event-modal",je].filter(Boolean).join(" ").trim()||void 0,Ae={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...Pe},{className:Te,style:Fe,...De}=x??{},Ne=["mediasfu-event-modal__content",Te].filter(Boolean).join(" ").trim()||void 0,Le={position:"fixed",backgroundColor:c,borderRadius:10,padding:16,width:Ce,maxHeight:"65%",overflow:"hidden",top:i.includes("top")?10:"auto",bottom:i.includes("bottom")?10:"auto",left:i.includes("Left")?10:"auto",right:i.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:16,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...Fe},{className:Ve,style:Be,...$e}=v??{},Ee=["modal-header",Ve].filter(Boolean).join(" ").trim()||void 0,We={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...Be},{className:He,style:Oe,...ze}=S??{},Ue=["modal-title",He].filter(Boolean).join(" ").trim()||void 0,qe={margin:0,fontSize:"1.25rem",fontWeight:700,color:"black",...Oe},{className:_e,style:Ge,onClick:Ye,...Ke}=R??{},Je=["btn-close-settings",_e].filter(Boolean).join(" ").trim()||void 0,Xe={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...Ge},Ze=w??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),{className:Qe,style:et,...tt}=k??{},rt=["hr",Qe].filter(Boolean).join(" ").trim()||void 0,at={height:1,backgroundColor:"black",marginTop:4,marginBottom:4,border:"none",...et},{className:nt,style:ot,...st}=C??{},it=["modal-body",nt].filter(Boolean).join(" ").trim()||void 0,ct={display:"flex",flexDirection:"column",gap:12,flex:1,minHeight:0,overflowY:"auto",paddingRight:4,...ot},{className:dt,style:lt,...ut}=j??{},pt=["form-group",dt].filter(Boolean).join(" ").trim(),{className:mt,style:gt,...ht}=T??{},ft=["label",mt].filter(Boolean).join(" ").trim(),{className:bt,style:yt,...xt}=V??{},vt=["picker-select",bt].filter(Boolean).join(" ").trim(),{className:St,style:Rt,...wt}=H??{},kt=["sep",St].filter(Boolean).join(" ").trim()||void 0,Ct={...Rt},{className:jt,style:Pt,...Mt}=O??{},It=["modal-footer",jt].filter(Boolean).join(" ").trim()||void 0,At={display:"flex",justifyContent:"flex-end",gap:8,...Pt},{className:Tt,style:Ft,onClick:Dt,...Nt}=z??{},Lt=["btn-apply-settings",Tt].filter(Boolean).join(" ").trim()||void 0,Vt={...Ft};(0,de.useEffect)(()=>{e&&(ye(a),ve(n),Re(o),ke(s))},[e,a,n,o,s]);const Bt=q??"User audio:",$t=_??"User video:",Et=Y??"User screenshare:",Wt=K??"User chat:",Ht=J??"Disallow",Ot=X??"Allow",zt=[{value:"disallow",label:Ht},{value:"allow",label:Ot},{value:"approval",label:Z??"Upon approval"}],Ut=te??zt,qt=re??zt,_t=ae??zt,Gt=ne??[{value:"disallow",label:Q??Ht},{value:"allow",label:ee??Ot}],Yt=e=>{const{className:t,style:r,...a}=e??{};return{className:[pt,t].filter(Boolean).join(" ").trim()||void 0,style:{...lt,...r},props:{...ut,...a}}},Kt=e=>{const{className:t,style:r,...a}=e??{};return{className:[ft,t].filter(Boolean).join(" ").trim()||void 0,style:{...gt,...r},props:{...ht,...a}}},Jt=e=>{const{className:t,style:r,...a}=e??{};return{className:[vt,t].filter(Boolean).join(" ").trim()||void 0,style:{...yt,...r},props:{...xt,...a}}},Xt=Yt(P),Zt=Yt(M),Qt=Yt(I),er=Yt(A),tr=Kt(F),rr=Kt(D),ar=Kt(N),nr=Kt(L),or=Jt(B),sr=Jt($),ir=Jt(E),cr=Jt(W),dr=[{key:"audio",label:Bt,value:be,options:Ut},{key:"video",label:$t,value:xe,options:qt},{key:"screenshare",label:Et,value:Se,options:_t},{key:"chat",label:Wt,value:we,options:Gt}],lr=[{renderInfo:dr[0],setValue:ye,fieldConfig:Xt,labelConfig:tr,selectConfig:or},{renderInfo:dr[1],setValue:ve,fieldConfig:Zt,labelConfig:rr,selectConfig:sr},{renderInfo:dr[2],setValue:Re,fieldConfig:Qt,labelConfig:ar,selectConfig:ir},{renderInfo:dr[3],setValue:ke,fieldConfig:er,labelConfig:nr,selectConfig:cr}],ur=lr.flatMap(({renderInfo:e,setValue:t,fieldConfig:r,labelConfig:a,selectConfig:n},o)=>{const s=(0,ce.jsx)("select",{className:n.className,style:n.style,value:e.value,onChange:e=>t(e.target.value),...n.props,children:e.options.map(t=>(0,ce.jsx)("option",{value:t.value,children:t.label},`${e.key}-${t.value}`))}),i=(0,ce.jsxs)("div",{className:r.className,style:r.style,...r.props,children:[(0,ce.jsx)("label",{className:a.className,style:a.style,...a.props,children:e.label}),s]}),c=me?me({defaultSection:i,defaultSelect:s,section:e,index:o,onChange:t}):i,d=[(0,ce.jsx)(le().Fragment,{children:c},`${e.key}-section`)];if(o<lr.length-1){const t=(0,ce.jsx)("div",{className:kt,style:Ct,...wt}),r=ge?ge({defaultSeparator:t,index:o}):t;d.push((0,ce.jsx)(le().Fragment,{children:r},`${e.key}-separator`))}return d}),pr=(0,ce.jsx)(ce.Fragment,{children:ur}),mr=ie?ie({defaultSettings:pr,sections:dr}):pr,gr=(0,ce.jsx)("div",{className:it,style:ct,...st,children:mr}),hr=se?se({defaultBody:gr}):gr,fr=(0,ce.jsxs)("div",{className:Ee,style:We,...$e,children:[(0,ce.jsx)("div",{className:Ue,style:qe,...ze,children:b}),(0,ce.jsx)("button",{type:"button",className:Je,style:Xe,onClick:e=>{Ye?.(e),e.defaultPrevented||t()},...Ke,children:Ze})]}),br=oe?oe({defaultHeader:fr}):fr,yr=(0,ce.jsx)("div",{className:It,style:At,...Mt,children:(0,ce.jsx)("button",{type:"button",className:Lt,style:Vt,onClick:async e=>{Dt?.(e),e.defaultPrevented||await(async()=>{await r({audioSet:be,videoSet:xe,screenshareSet:Se,chatSet:we,updateAudioSetting:d,updateVideoSetting:l,updateScreenshareSetting:u,updateChatSetting:p,updateIsSettingsModalVisible:m,roomName:g,socket:h,showAlert:f})})()},...Nt,children:U??"Save"})}),xr=he?he({defaultFooter:yr}):yr,vr=(0,ce.jsxs)("div",{className:Ne,style:Le,...De,children:[br,(0,ce.jsx)("hr",{className:rt,style:at,...tt}),hr,xr]}),Sr=fe?fe({defaultContent:vr}):vr;return(0,ce.jsx)("div",{className:Ie,style:Ae,...Me,children:Sr})},ds=({isCoHostModalVisible:e,onCoHostClose:t,onModifyEventSettings:r=D,currentCohost:a="No coHost",participants:n,coHostResponsibility:o,position:s="topRight",backgroundColor:i="#83c0e9",roomName:c,showAlert:d,updateCoHostResponsibility:l,updateCoHost:u,updateIsCoHostModalVisible:p,socket:m,title:g="Manage Co-Host",overlayProps:h,contentProps:f,headerProps:b,titleProps:y,closeButtonProps:x,closeIconComponent:v,headerDividerProps:S,bodyProps:R,currentCoHostFieldProps:w,currentCoHostLabelProps:k,currentCoHostInputProps:C,selectCoHostFieldProps:j,selectCoHostLabelProps:P,selectCoHostSelectProps:M,responsibilitiesWrapperProps:I,responsibilitiesHeaderRowProps:A,responsibilityHeaderLabelProps:T,responsibilitySelectHeaderProps:F,responsibilityDedicatedHeaderProps:N,responsibilityRowProps:L,responsibilityNameProps:V,responsibilitySelectProps:B,responsibilityDedicatedProps:$,responsibilitySelectCheckboxProps:E,responsibilityDedicatedCheckboxProps:W,footerProps:H,saveButtonProps:O,currentCoHostLabel:z,selectCoHostLabel:U,responsibilityHeaderLabel:q,responsibilitySelectLabel:_,responsibilityDedicatedLabel:G,saveButtonLabel:Y,responsibilityItems:K,renderHeader:J,renderBody:X,renderResponsibilities:Z,renderResponsibilityRow:Q,renderFooter:ee,renderContent:te})=>{const re="undefined"!=typeof window?Math.min(.8*window.innerWidth,400):320,{className:ae,style:ne,...oe}=h??{},se=["mediasfu-cohost-modal",ae].filter(Boolean).join(" ").trim()||void 0,ie={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...ne},{className:me,style:ge,...he}=f??{},fe=["mediasfu-cohost-modal__content",me].filter(Boolean).join(" ").trim()||void 0,be={position:"fixed",backgroundColor:i,borderRadius:10,padding:16,width:re,maxHeight:"65%",maxWidth:re,overflow:"hidden",top:s.includes("top")?10:"auto",bottom:s.includes("bottom")?10:"auto",left:s.includes("Left")?10:"auto",right:s.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...ge},{className:ye,style:xe,...ve}=b??{},Se=["modal-header",ye].filter(Boolean).join(" ").trim()||void 0,Re={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...xe},{className:we,style:ke,...Ce}=y??{},je=["modal-title",we].filter(Boolean).join(" ").trim()||void 0,Pe={margin:0,fontSize:"1.25rem",fontWeight:700,color:"black",...ke},{className:Me,style:Ie,onClick:Ae,...Te}=x??{},Fe=["btn-close-settings",Me].filter(Boolean).join(" ").trim()||void 0,De={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...Ie},Ne=v??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),Le=e=>{Ae?.(e),e.defaultPrevented||t()},{style:Ve,...Be}=S??{},$e={height:1,backgroundColor:"black",marginTop:5,marginBottom:5,border:"none",...Ve},{className:Ee,style:We,...He}=R??{},Oe=["modal-body",Ee].filter(Boolean).join(" ").trim()||void 0,ze={display:"flex",flexDirection:"column",gap:16,flex:1,minHeight:0,overflowY:"auto",paddingRight:4,...We},{className:Ue,style:qe,..._e}=w??{},Ge=["form-group",Ue].filter(Boolean).join(" ").trim()||void 0,Ye={display:"flex",flexDirection:"column",gap:6,...qe},{className:Ke,style:Je,...Xe}=k??{},Ze=["font-weight-bold",Ke].filter(Boolean).join(" ").trim()||void 0,Qe={...Je},{className:et,style:tt,...rt}=C??{},at=["form-control",et].filter(Boolean).join(" ").trim()||void 0,nt={...tt},{className:ot,style:st,...it}=j??{},ct=["form-group",ot].filter(Boolean).join(" ").trim()||void 0,dt={display:"flex",flexDirection:"column",gap:6,...st},{className:lt,style:ut,...pt}=P??{},mt=["font-weight-bold",lt].filter(Boolean).join(" ").trim()||void 0,gt={...ut},{className:ht,style:ft,...bt}=M??{},yt=["form-control",ht].filter(Boolean).join(" ").trim()||void 0,xt={...ft},{className:vt,style:St,...Rt}=I??{},wt=["cohost-responsibilities",vt].filter(Boolean).join(" ").trim()||void 0,kt={display:"flex",flexDirection:"column",gap:12,...St},{className:Ct,style:jt,...Pt}=A??{},Mt=["row",Ct].filter(Boolean).join(" ").trim()||void 0,It={fontWeight:"bold",...jt},{className:At,style:Tt,...Ft}=T??{},Dt=["col-5",At].filter(Boolean).join(" ").trim()||void 0,Nt={...Tt},{className:Lt,style:Vt,...Bt}=F??{},$t=["col-3",Lt].filter(Boolean).join(" ").trim()||void 0,Et={...Vt},{className:Wt,style:Ht,...Ot}=N??{},zt=["col-4",Wt].filter(Boolean).join(" ").trim()||void 0,Ut={...Ht},{className:qt,style:_t,...Gt}=L??{},Yt=["row",qt].filter(Boolean).join(" ").trim()||void 0,Kt={marginBottom:10,..._t},{className:Jt,style:Xt,...Zt}=V??{},Qt=["col-5",Jt].filter(Boolean).join(" ").trim()||void 0,er={fontWeight:"bold",...Xt},{className:tr,style:rr,...ar}=B??{},nr=["col-3",tr].filter(Boolean).join(" ").trim()||void 0,or={...rr},{className:sr,style:ir,...cr}=$??{},dr=["col-4",sr].filter(Boolean).join(" ").trim()||void 0,lr={...ir},{className:ur,style:pr,...mr}=E??{},gr=[ur].filter(Boolean).join(" ").trim()||void 0,hr={...pr},{className:fr,style:br,...yr}=W??{},xr=[fr].filter(Boolean).join(" ").trim()||void 0,vr={...br},{className:Sr,style:Rr,...wr}=H??{},kr=["modal-footer",Sr].filter(Boolean).join(" ").trim()||void 0,Cr={display:"flex",justifyContent:"flex-end",gap:8,...Rr},{className:jr,style:Pr,onClick:Mr,...Ir}=O??{},Ar=["btn-apply-settings",jr].filter(Boolean).join(" ").trim()||void 0,Tr={...Pr},[Fr,Dr]=(0,de.useState)(a),[Nr,Lr]=(0,de.useState)([...o]),[Vr,Br]=(0,de.useState)([...o]),$r=Vr.reduce((e,t)=>{const r=`manage${t.name.charAt(0).toUpperCase()+t.name.slice(1)}`;return e[r]=t.value,e[`dedicateTo${r}`]=t.dedicated,e},{}),[Er,Wr]=(0,de.useState)($r),Hr=K??[{name:"manageParticipants",label:"Manage Participants"},{name:"manageMedia",label:"Manage Media"},{name:"manageWaiting",label:"Manage Waiting Room"},{name:"manageChat",label:"Manage Chat"}],Or=e=>{if(Wr(t=>({...t,[e]:!t[e]})),e.startsWith("dedicateTo")){const t=e.replace("dedicateTomanage","").toLowerCase(),r=Nr.find(e=>e.name===t)?.dedicated;void 0!==r&&(Nr.find(e=>e.name===t).dedicated=!r),Lr([...Nr])}else if(e.startsWith("manage")){const t=e.replace("manage","").toLowerCase(),r=Nr.find(e=>e.name===t)?.value;void 0!==r&&(Nr.find(e=>e.name===t).value=!r),Lr([...Nr])}};(0,de.useEffect)(()=>{e&&(()=>{Br([...o]),Lr([...o]);const e=Vr.reduce((e,t)=>{const r=`manage${t.name.charAt(0).toUpperCase()+t.name.slice(1)}`;return e[r]=t.value,e[`dedicateTo${r}`]=t.dedicated,e},{});Wr(e)})()},[e,o]);const zr=z??"Current Co-host:",Ur=U??"Select New Co-host:",qr=q??"Responsibility",_r=_??"Select",Gr=G??"Dedicated",Yr=Y??"Save",Kr=e=>Or(e),Jr=e=>Or(`dedicateTo${e}`),Xr=(()=>{const e=(0,ce.jsxs)("div",{className:Mt,style:It,...Pt,children:[(0,ce.jsx)("label",{className:Dt,style:Nt,...Ft,children:qr}),(0,ce.jsx)("label",{className:$t,style:Et,...Bt,children:_r}),(0,ce.jsx)("label",{className:zt,style:Ut,...Ot,children:Gr})]}),t=Hr.map((e,t)=>{const r=Boolean(Er[e.name]),a=`dedicateTo${e.name}`,n=Boolean(Er[e.name]&&Er[a]),o=(0,ce.jsxs)("div",{className:Yt,style:Kt,...Gt,children:[(0,ce.jsx)("div",{className:Qt,style:er,...Zt,children:e.label}),(0,ce.jsx)("div",{className:nr,style:or,...ar,children:(0,ce.jsx)("input",{type:"checkbox",className:gr,style:hr,checked:r,onChange:()=>Kr(e.name),...mr})}),(0,ce.jsx)("div",{className:dr,style:lr,...cr,children:(0,ce.jsx)("input",{type:"checkbox",className:xr,style:vr,checked:n,onChange:()=>Jr(e.name),disabled:!r,...yr})})]}),s=Q?Q({defaultRow:o,item:e,index:t,isSelected:r,isDedicated:n,toggleSelect:()=>Kr(e.name),toggleDedicated:()=>Jr(e.name)}):o;return(0,ce.jsx)(le().Fragment,{children:s},e.name)}),r=(0,ce.jsxs)("div",{className:wt,style:kt,...Rt,children:[e,t]});return Z?Z({defaultResponsibilities:r,items:Hr,responsibilities:Er,toggleSelect:Kr,toggleDedicated:Jr}):r})(),Zr=n?.filter(e=>e.name!==a&&"2"!==e.islevel)??[],Qr=(0,ce.jsxs)("div",{className:Oe,style:ze,...He,children:[(0,ce.jsxs)("div",{className:Ge,style:Ye,..._e,children:[(0,ce.jsx)("label",{className:Ze,style:Qe,...Xe,children:zr}),(0,ce.jsx)("input",{className:at,style:nt,value:a,readOnly:!0,...rt})]}),(0,ce.jsxs)("div",{className:ct,style:dt,...it,children:[(0,ce.jsx)("label",{className:mt,style:gt,...pt,children:Ur}),(0,ce.jsxs)("select",{className:yt,style:xt,value:Fr,onChange:e=>Dr(e.target.value),...bt,children:[(0,ce.jsx)("option",{value:"",children:"Select a participant"}),Zr.map(e=>(0,ce.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),Xr]}),ea=X?X({defaultBody:Qr}):Qr,ta=(0,ce.jsx)("div",{className:kr,style:Cr,...wr,children:(0,ce.jsx)("button",{type:"button",className:Ar,style:Tr,onClick:e=>{Mr?.(e),e.defaultPrevented||r({roomName:c,showAlert:d,selectedParticipant:Fr,coHost:a,coHostResponsibility:Nr,updateCoHostResponsibility:l,updateCoHost:u,updateIsCoHostModalVisible:p,socket:m})},...Ir,children:Yr})}),ra=ee?ee({defaultFooter:ta}):ta,aa=(()=>{const e=(0,ce.jsxs)("div",{className:Se,style:Re,...ve,children:[(0,ce.jsx)("div",{className:je,style:Pe,...Ce,children:g}),(0,ce.jsx)("button",{type:"button",className:Fe,style:De,onClick:Le,...Te,children:Ne})]});return J?J({defaultHeader:e}):e})(),na=(0,ce.jsxs)("div",{className:fe,style:be,...he,children:[aa,(0,ce.jsx)("hr",{style:$e,...Be}),ea,ra]}),oa=te?te({defaultContent:na}):na;return(0,ce.jsx)("div",{className:se,style:ie,...oe,children:oa})},ls=({participant:e,isBroadcast:t,onMuteParticipants:r,onMessageParticipants:a,onRemoveParticipants:n,socket:o,coHostResponsibility:s,member:i,islevel:c,showAlert:d,coHost:l,roomName:u,updateIsMessagesModalVisible:p,updateDirectMessageDetails:m,updateStartDirectMessage:g,participants:h,updateParticipants:f})=>(0,ce.jsxs)("div",{className:"container",style:{flexDirection:"row",alignItems:"center",marginBottom:"0px",marginTop:"0px"},children:[(0,ce.jsx)("div",{className:"nameContainer",style:{flex:"4"},children:(0,ce.jsx)("p",{className:"nameText",style:{fontSize:"16px"},children:"2"===e.islevel?`${e.name} (host)`:e.name})}),!t&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{className:"iconContainer",style:{flex:"1",alignItems:"center"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDotCircle,style:{fontSize:"20px",color:e.muted?"red":"green"}})}),(0,ce.jsx)("div",{className:"buttonContainer",style:{flex:"2",alignItems:"flex-end"},children:(0,ce.jsx)("button",{onClick:()=>r({socket:o,coHostResponsibility:s,participant:e,member:i,islevel:c,showAlert:d,coHost:l,roomName:u}),style:{padding:"5px",borderRadius:"5px",alignItems:"center",backgroundColor:"#007bff",color:"white"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:e.muted?pe.faMicrophoneSlash:pe.faMicrophone,style:{fontSize:"20px"}})})}),(0,ce.jsx)("div",{className:"buttonContainer",style:{flex:"2",alignItems:"flex-end"},children:(0,ce.jsx)("button",{onClick:()=>a({coHostResponsibility:s,participant:e,member:i,islevel:c,showAlert:d,coHost:l,updateIsMessagesModalVisible:p,updateDirectMessageDetails:m,updateStartDirectMessage:g}),style:{padding:"5px",borderRadius:"5px",alignItems:"center",backgroundColor:"#007bff",color:"white"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComment,style:{fontSize:"20px",color:"white"}})})})]}),(0,ce.jsx)("div",{className:"buttonContainer",style:{flex:"2",alignItems:"flex-end"},children:(0,ce.jsx)("button",{onClick:()=>n({coHostResponsibility:s,participant:e,member:i,islevel:c,showAlert:d,coHost:l,participants:h,socket:o,roomName:u,updateParticipants:f}),style:{padding:"5px",borderRadius:"5px",alignItems:"center",backgroundColor:"#dc3545",color:"white"},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTrash,style:{fontSize:"20px",color:"white"}})})})]}),us=({participants:e,isBroadcast:t,onMuteParticipants:r,onMessageParticipants:a,onRemoveParticipants:n,socket:o,coHostResponsibility:s,member:i,islevel:c,showAlert:d,coHost:l,roomName:u,updateIsMessagesModalVisible:p,updateDirectMessageDetails:m,updateStartDirectMessage:g,updateParticipants:h})=>(0,ce.jsx)("div",{children:e.map((f,b)=>(0,ce.jsxs)(le().Fragment,{children:[(0,ce.jsx)(ls,{participant:f,isBroadcast:t,onMuteParticipants:r,onMessageParticipants:a,onRemoveParticipants:n,socket:o,coHostResponsibility:s,member:i,islevel:c,showAlert:d,coHost:l,roomName:u,updateIsMessagesModalVisible:p,updateDirectMessageDetails:m,updateStartDirectMessage:g,participants:e,updateParticipants:h}),b<e.length-1&&(0,ce.jsx)("hr",{className:"separator"})]},f.name))}),ps={container:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"10px"},nameContainer:{flex:8},nameText:{fontSize:"16px"},iconContainer:{flex:4,alignItems:"center"}},ms=({participant:e,member:t,coHost:r})=>(0,ce.jsxs)("div",{className:"container",style:ps.container,children:[(0,ce.jsx)("div",{className:"name-container",style:ps.nameContainer,children:(0,ce.jsx)("span",{className:"name-text",style:ps.nameText,children:"2"===e.islevel?e.name===t?`${e.name} (you)`:`${e.name} (host)`:e.name===t?`${e.name} (you)`:r===e.name?`${e.name} (co-host)`:e.name})}),(0,ce.jsx)("div",{className:"icon-container",style:ps.iconContainer,children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCircle,style:{color:e.muted?"red":"green"}})})]}),gs=({participants:e,coHost:t,member:r})=>(0,ce.jsx)("div",{children:e.map((a,n)=>(0,ce.jsxs)(le().Fragment,{children:[(0,ce.jsx)(ms,{participant:a,coHost:t,member:r}),n<e.length-1&&(0,ce.jsx)("hr",{className:"separator"})]},a.name))}),hs=({isParticipantsModalVisible:e,onParticipantsClose:t,onParticipantsFilterChange:r,participantsCounter:a,onMuteParticipants:n=$,onMessageParticipants:o=B,onRemoveParticipants:s=E,RenderParticipantList:i=us,RenderParticipantListOthers:c=gs,parameters:d,backgroundColor:l=d?.backgroundColor??"#83c0e9",position:u=d?.position??"topRight",title:p="Participants",overlayProps:m,contentProps:g,headerProps:h,titleProps:f,badgeWrapperProps:b,badgeProps:y,closeButtonProps:x,closeIconComponent:v,bodyProps:S,searchWrapperProps:R,searchInputProps:w,listsWrapperProps:k,moderatorListProps:C,attendeeListProps:j,emptyState:P,renderHeader:M,renderSearch:I,renderLists:A,renderBody:T,renderContent:F})=>{const{coHostResponsibility:D,coHost:N,member:L,islevel:V,participants:W,eventType:H,socket:O,showAlert:z,roomName:U,updateIsMessagesModalVisible:q,updateDirectMessageDetails:_,updateStartDirectMessage:G,updateParticipants:Y,filteredParticipants:K,getUpdatedAllParams:J}=d,X=(0,de.useMemo)(()=>J?J().filteredParticipants:K||W,[K,J,W]),[Z,Q]=(0,de.useState)(X),[ee,te]=(0,de.useState)(K?.length??a),[re,ae]=(0,de.useState)(!1);(0,de.useEffect)(()=>{if(J){const e=J();return Q(e.filteredParticipants),void te(e.filteredParticipants.length)}if(K)return Q(K),void te(K.length);Q(W),te(W.length)},[K,W,J,re]);const ne="undefined"!=typeof window?Math.min(.8*window.innerWidth,400):360,{className:oe,style:se,...ie}=m??{},le=["mediasfu-participants-modal",oe].filter(Boolean).join(" ").trim()||void 0,me={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...se},{className:ge,style:he,...fe}=g??{},be=["mediasfu-participants-modal__content",ge].filter(Boolean).join(" ").trim()||void 0,ye={position:"fixed",backgroundColor:l,borderRadius:10,padding:16,width:ne,maxHeight:"75%",overflowY:"auto",top:u.includes("top")?10:"auto",bottom:u.includes("bottom")?10:"auto",left:u.includes("Left")?10:"auto",right:u.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...he},{className:xe,style:ve,...Se}=h??{},Re=["modal-header",xe].filter(Boolean).join(" ").trim()||void 0,we={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...ve},{className:ke,style:Ce,...je}=f??{},Pe=["modal-title",ke].filter(Boolean).join(" ").trim()||void 0,Me={display:"flex",alignItems:"center",gap:8,margin:0,...Ce},{className:Ie,style:Ae,...Te}=b??{},Fe=["participants-counter",Ie].filter(Boolean).join(" ").trim()||void 0,De={backgroundColor:"#fff",color:"#000",borderRadius:10,padding:5,display:"inline-flex",alignItems:"center",justifyContent:"center",...Ae},{className:Ne,style:Le,...Ve}=y??{},Be=["badge",Ne].filter(Boolean).join(" ").trim()||void 0,$e={...Le},{className:Ee,style:We,onClick:He,...Oe}=x??{},ze=["btn-close-participants",Ee].filter(Boolean).join(" ").trim()||void 0,Ue={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...We},qe=v??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),{className:_e,style:Ge,...Ye}=S??{},Ke=["modal-body",_e].filter(Boolean).join(" ").trim()||void 0,Je={display:"flex",flexDirection:"column",gap:12,...Ge},{className:Xe,style:Ze,...Qe}=R??{},et=["form-group",Xe].filter(Boolean).join(" ").trim()||void 0,tt={...Ze},{className:rt,style:at,...nt}=k??{},ot=["participants-lists",rt].filter(Boolean).join(" ").trim()||void 0,st={display:"flex",flexDirection:"column",gap:12,overflowY:"auto",...at},{className:it,style:ct,...dt}=C??{},lt=["participants-list--moderator",it].filter(Boolean).join(" ").trim()||void 0,{className:ut,style:pt,...mt}=j??{},gt=["participants-list--attendee",ut].filter(Boolean).join(" ").trim()||void 0,ht=(()=>{try{const e=D?.find(e=>"participants"===e.name);return W&&"2"===V||N===L&&!0===(e?.value??!1)}catch{return W&&"2"===V||!1}})(),ft=(0,ce.jsx)("div",{className:ot,style:st,...nt,children:Z&&0!==Z.length?ht?(0,ce.jsx)("div",{className:lt,style:ct,...dt,children:(0,ce.jsx)(i,{participants:Z,isBroadcast:"broadcast"===H,onMuteParticipants:n,onMessageParticipants:o,onRemoveParticipants:s,socket:O,coHostResponsibility:D,member:L,islevel:V,showAlert:z,coHost:N,roomName:U,updateIsMessagesModalVisible:q,updateDirectMessageDetails:_,updateStartDirectMessage:G,updateParticipants:Y})}):(0,ce.jsx)("div",{className:gt,style:pt,...mt,children:(0,ce.jsx)(c,{participants:Z,coHost:N,member:L})}):P?"function"==typeof P?P({counter:ee}):P:(0,ce.jsx)("div",{className:"participants-empty",children:"No participants"})}),bt=A?A({defaultLists:ft,participants:Z,hasModeratorControls:ht}):ft,yt=(0,ce.jsxs)("div",{className:Re,style:we,...Se,children:[(0,ce.jsxs)("div",{className:Pe,style:Me,...je,children:[p,(0,ce.jsx)("div",{className:Fe,style:De,...Te,children:(0,ce.jsx)("span",{className:Be,style:$e,...Ve,children:ee})})]}),(0,ce.jsx)("button",{type:"button",className:ze,style:Ue,onClick:e=>{He?.(e),e.defaultPrevented||t()},...Oe,children:qe})]}),xt=M?M({defaultHeader:yt,counter:ee,onClose:t}):yt,vt=(0,ce.jsx)("input",{type:"text",placeholder:"Search ...",...w,className:w?.className,style:{width:"90%",padding:10,borderRadius:5,border:"1px solid #000",fontSize:16,marginBottom:10,...w?.style},onChange:e=>{w?.onChange?.(e),e.defaultPrevented||(r(e.target.value),ae(e=>!e))}}),St=I?I({defaultSearch:vt,onFilter:e=>{r(e),ae(e=>!e)}}):vt,Rt=(0,ce.jsxs)("div",{className:Ke,style:Je,...Ye,children:[(0,ce.jsx)("div",{className:et,style:tt,...Qe,children:St}),bt]}),wt=T?T({defaultBody:Rt,counter:ee}):Rt,kt=(0,ce.jsxs)("div",{className:be,style:ye,...fe,children:[xt,(0,ce.jsx)("hr",{className:"hr"}),wt]}),Ct=F?F({defaultContent:kt,counter:ee}):kt;return(0,ce.jsx)("div",{className:le,style:me,...ie,children:Ct})},fs=({messages:e,messagesLength:t,type:r,username:a,onSendMessagePress:n,backgroundColor:o="#f5f5f5",focusedInput:s,showAlert:i,eventType:c,member:d,islevel:l,startDirectMessage:u,updateStartDirectMessage:p,directMessageDetails:m,updateDirectMessageDetails:g,coHostResponsibility:h,coHost:f,roomName:b,socket:y,chatSetting:x})=>{const v=(0,de.useRef)(null),[S,R]=(0,de.useState)(null),[w,k]=(0,de.useState)(null),[C,j]=(0,de.useState)(""),[P,M]=(0,de.useState)("");(0,de.useEffect)(()=>{if(u&&m&&s){v.current?.focus();const e={text:"Replying to: ",username:m.name};R(e),k(m.name)}else R(null),v.current&&(v.current.value="")},[m,s,u]);const I={inputContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10,marginTop:"auto"},input:{flex:1,minHeight:40,maxHeight:80,resize:"vertical",border:"1px solid gray",borderRadius:5,padding:10,overflowY:"auto"},sendButton:{backgroundColor:"#83c0e9",padding:10,borderRadius:5,display:"flex",alignItems:"center"}};return(0,ce.jsxs)("div",{style:{maxHeight:"100%",backgroundColor:o,overflowY:"auto"},children:[e&&e.map((e,t)=>(0,ce.jsx)("div",{style:{marginBottom:10},children:(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:e.sender===a?"flex-end":"flex-start",marginBottom:10},children:[(0,ce.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:3},children:[e.sender===a&&!e.group&&(0,ce.jsxs)("span",{style:{fontWeight:"bold",color:"black",fontSize:8,marginLeft:6},children:["To: ",e.receivers.join(", ")]}),(0,ce.jsx)("span",{style:{fontWeight:"bold",color:"black",fontSize:8,marginRight:10},children:e.sender===a?"":e.sender}),(0,ce.jsx)("span",{style:{fontSize:8,color:"#999999"},children:e.timestamp}),e.sender!==a&&!e.group&&(0,ce.jsx)("div",{style:{padding:1,marginLeft:5,borderRadius:2,backgroundColor:"transparent",cursor:"pointer"},onClick:()=>(e=>{R({text:"Replying to: ",username:e}),k(e)})(e.sender),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faReply,size:"xs",color:"black"})})]}),(0,ce.jsx)("div",{style:{backgroundColor:e.sender===d?"#DCF8C6":"#1ce5c7",padding:10,borderRadius:10},children:(0,ce.jsx)("span",{style:{color:"black"},children:e.message})})]})},t)),S&&(0,ce.jsxs)("div",{style:{flexDirection:"row",alignItems:"center",padding:2,backgroundColor:"#e6e6e6",borderRadius:5,marginBottom:1},children:[(0,ce.jsxs)("span",{style:{fontWeight:"bold",marginRight:2,fontSize:8},children:["Replying to:"," "]}),(0,ce.jsx)("span",{style:{color:"red",fontSize:8},children:S.username})]}),(0,ce.jsxs)("div",{style:I.inputContainer,children:[(0,ce.jsx)("input",{ref:s&&u&&m?v:null,type:"text",style:I.input,placeholder:"direct"===r?s&&u&&m?"Send a direct message to "+m.name:"Select a message to reply to":"chat"===c?"Send a message":"Send a message to everyone",maxLength:350,onChange:e=>{return t=e.target.value,void("direct"===r?j(t):M(t));var t},value:"direct"===r?C:P}),(0,ce.jsx)("button",{style:I.sendButton,onClick:async()=>{const e="direct"===r?C:P;e?e.length>350?i?.({message:"Message is too long",type:"danger",duration:3e3}):""!==e.trim()?"direct"!==r||w||"2"!==l?(await n({message:e,receivers:"direct"===r?[w]:[],group:"group"===r,messagesLength:t,member:d,sender:a,islevel:l,showAlert:i,coHostResponsibility:h,coHost:f,roomName:b,socket:y,chatSetting:x}),"direct"===r?j(""):M(""),v.current&&(v.current.value=""),S&&(R(null),k(null)),s&&(g(null),p(!1))):i?.({message:"Please select a message to reply to",type:"danger",duration:3e3}):i?.({message:"Message is not valid.",type:"danger",duration:3e3}):i?.({message:"Please enter a message",type:"danger",duration:3e3})},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPaperPlane,size:"sm",color:"white"})})]})]})},bs=({isMessagesModalVisible:e,onMessagesClose:t,onSendMessagePress:r=V,messages:a,eventType:n,member:o,islevel:s,coHostResponsibility:i,coHost:c,startDirectMessage:d,directMessageDetails:l,updateStartDirectMessage:u,updateDirectMessageDetails:p,showAlert:m,roomName:g,socket:h,chatSetting:f,position:b="topRight",backgroundColor:y="#f5f5f5",activeTabBackgroundColor:x="#2b7ce5",title:v="Messages",overlayProps:S,contentProps:R,headerProps:w,titleProps:k,tabListProps:C,tabButtonProps:j,closeButtonProps:P,closeIconComponent:M,bodyProps:I,directPanelWrapperProps:A,groupPanelWrapperProps:T,emptyState:F,renderHeader:D,renderTabs:N,renderTabButton:L,renderPanels:B,renderBody:$,renderContent:E})=>{const W=(0,de.useMemo)(()=>"webinar"===n||"conference"===n?"direct":"group",[n]),[H,O]=(0,de.useState)(W),[z,U]=(0,de.useState)(!1),[q,_]=(0,de.useState)([]),[G,Y]=(0,de.useState)([]);(0,de.useEffect)(()=>{if(!e)return;const t=i?.find(e=>"chat"===e.name)?.value,r=a.filter(e=>!e.group&&(e.sender===o||e.receivers.includes(o)||"2"===s||c===o&&!0===t)),n=a.filter(e=>e.group);_(r),Y(n)},[c,i,e,s,o,a]),(0,de.useEffect)(()=>{d&&l?"webinar"!==n&&"conference"!==n||(O("direct"),U(!0)):"broadcast"!==n&&"chat"!==n||O("group")},[d,l,n]);const K="undefined"!=typeof window?Math.min(.85*window.innerWidth,420):360,{className:J,style:X,...Z}=S??{},Q=["mediasfu-messages-modal",J].filter(Boolean).join(" ").trim()||void 0,ee={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...X},{className:te,style:re,...ae}=R??{},ne=["mediasfu-messages-modal__content",te].filter(Boolean).join(" ").trim()||void 0,oe={position:"fixed",backgroundColor:y,borderRadius:10,padding:16,width:K,maxHeight:"75%",overflow:"hidden",top:b.includes("top")?10:"auto",bottom:b.includes("bottom")?10:"auto",left:b.includes("Left")?10:"auto",right:b.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...re},{className:se,style:ie,...le}=w??{},me=["modal-header",se].filter(Boolean).join(" ").trim()||void 0,ge={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...ie},{className:he,style:fe,...be}=k??{},ye=["modal-title",he].filter(Boolean).join(" ").trim()||void 0,xe={display:"flex",alignItems:"center",gap:8,margin:0,...fe},{className:ve,style:Se,...Re}=C??{},we=["messages-tabs",ve].filter(Boolean).join(" ").trim()||void 0,ke={display:"flex",gap:8,...Se},{className:Ce,style:je,...Pe}=j??{},Me={padding:"6px 12px",fontWeight:"bold",borderRadius:4,border:"none",cursor:"pointer",backgroundColor:"transparent"},{className:Ie,style:Ae,onClick:Te,...Fe}=P??{},De=["btn-close-messages",Ie].filter(Boolean).join(" ").trim()||void 0,Ne={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...Ae},Le=M??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),{className:Ve,style:Be,...$e}=I??{},Ee=["modal-body",Ve].filter(Boolean).join(" ").trim()||void 0,We={display:"flex",flexDirection:"column",gap:12,flex:1,minHeight:0,...Be},{className:He,style:Oe,...ze}=A??{},Ue=["messages-panel messages-panel--direct",He].filter(Boolean).join(" ").trim()||void 0,{className:qe,style:_e,...Ge}=T??{},Ye=["messages-panel messages-panel--group",qe].filter(Boolean).join(" ").trim()||void 0,Ke=()=>{O("direct"),U(!0)},Je=()=>{O("group"),U(!1)},Xe=e=>{const t=H===e,r="direct"===e?Ke:Je,a=(0,ce.jsx)("button",{type:"button",className:Ce,style:{...Me,...t&&{color:"#ffffff",backgroundColor:x},...je},onClick:e=>{Pe?.onClick?.(e),e.defaultPrevented||r()},...Pe,children:"direct"===e?"Direct":"Group"});return L?L({type:e,isActive:t,defaultButton:a,switchTo:r}):a},Ze="webinar"===n||"conference"===n?(0,ce.jsxs)("div",{className:we,style:ke,...Re,children:[Xe("direct"),Xe("group")]}):null,Qe=N?N({defaultTabs:Ze,activeTab:H,switchToDirect:Ke,switchToGroup:Je}):Ze,et=(0,ce.jsxs)("div",{className:me,style:ge,...le,children:[(0,ce.jsx)("div",{className:ye,style:xe,...be,children:v}),(0,ce.jsx)("button",{type:"button",className:De,style:Ne,onClick:e=>{Te?.(e),e.defaultPrevented||t()},...Fe,children:Le})]}),tt=D?D({defaultHeader:et,activeTab:H,onClose:t}):et,rt=(e,t,b,x,v,S)=>(0,ce.jsx)("div",{className:x,style:{display:H===e?"block":"none",overflowY:"auto",maxHeight:"100%",...v},...b,children:H===e?(0,ce.jsxs)(ce.Fragment,{children:[!t.length&&S,(0,ce.jsx)(fs,{messages:t,messagesLength:a.length,type:e,onSendMessagePress:r,username:o,backgroundColor:y,focusedInput:"direct"===e&&z,showAlert:m,eventType:n,member:o,islevel:s,coHostResponsibility:i,coHost:c,directMessageDetails:l,updateStartDirectMessage:u,updateDirectMessageDetails:p,roomName:g,socket:h,chatSetting:f,startDirectMessage:d})]}):null}),at=F?"function"==typeof F?F({type:"direct"}):F:(0,ce.jsx)("div",{className:"messages-empty",children:"No direct messages yet."}),nt=F?"function"==typeof F?F({type:"group"}):F:(0,ce.jsx)("div",{className:"messages-empty",children:"No group messages yet."}),ot=(0,ce.jsxs)(ce.Fragment,{children:[rt("direct",q,ze??{},Ue,Oe,at),rt("group",G,Ge??{},Ye,_e,nt)]}),st=B?B({defaultPanels:ot,activeTab:H}):ot,it=(0,ce.jsxs)("div",{className:Ee,style:We,...$e,children:[Qe,(0,ce.jsx)("div",{className:"messages-panels",style:{flex:1,minHeight:0},children:st})]}),ct=$?$({defaultBody:it,activeTab:H}):it,dt=(0,ce.jsxs)("div",{className:ne,style:oe,...ae,children:[tt,(0,ce.jsx)("hr",{className:"hr"}),ct]}),lt=E?E({defaultContent:dt,activeTab:H}):dt;return(0,ce.jsx)("div",{className:Q,style:ee,...Z,children:lt})},ys=({isMediaSettingsModalVisible:e,onMediaSettingsClose:t,switchCameraOnPress:r=fr,switchVideoOnPress:a=J,switchAudioOnPress:n=K,parameters:o,position:s="topRight",backgroundColor:i="#83c0e9"})=>{const{userDefaultVideoInputDevice:c,videoInputs:d,audioInputs:l,userDefaultAudioInputDevice:u,isBackgroundModalVisible:p,updateIsBackgroundModalVisible:m}=o,[g,h]=(0,de.useState)(c),[f,b]=(0,de.useState)(u);let y=.8*window.innerWidth;y>350&&(y=350);const x={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999},v={position:"fixed",backgroundColor:i,borderRadius:10,padding:10,width:y,maxHeight:"65%",overflowY:"auto",top:s.includes("top")?10:"auto",bottom:s.includes("bottom")?10:"auto",left:s.includes("Left")?10:"auto",right:s.includes("Right")?10:"auto"};return(0,ce.jsx)("div",{style:x,children:(0,ce.jsxs)("div",{style:v,children:[(0,ce.jsxs)("div",{className:"modal-header",children:[(0,ce.jsx)("div",{className:"modal-title",children:"Media Settings"}),(0,ce.jsx)("div",{className:"btn-close-media-settings",onClick:t,style:{cursor:"pointer",marginLeft:"auto",marginRight:10},children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon",size:"xl"})})]}),(0,ce.jsx)("hr",{className:"hr"}),(0,ce.jsxs)("div",{className:"modal-body",children:[(0,ce.jsxs)("div",{className:"form-group",children:[(0,ce.jsxs)("label",{children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCamera})," Select Camera:"]}),(0,ce.jsx)("select",{value:g||"",onChange:e=>(async e=>{e!==g&&(h(e),await a({videoPreference:e,parameters:o}))})(e.target.value),className:"form-control",children:d.map(e=>(0,ce.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId))})]}),(0,ce.jsxs)("div",{className:"form-group",style:{marginTop:10},children:[(0,ce.jsxs)("label",{children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faMicrophone})," Select Microphone:"]}),(0,ce.jsx)("select",{value:f||"",onChange:e=>(async e=>{e!==f&&(b(e),await n({audioPreference:e,parameters:o}))})(e.target.value),className:"form-control",children:l.map(e=>(0,ce.jsx)("option",{value:e.deviceId,children:e.label},e.deviceId))})]}),(0,ce.jsx)("div",{className:"form-group",children:(0,ce.jsxs)("button",{onClick:async()=>{await r({parameters:o})},style:{backgroundColor:"#83c0e9",color:"black",padding:10,borderRadius:5,border:"none",cursor:"pointer",width:"100%",marginTop:20},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt})," Switch Camera"]})}),(0,ce.jsx)("hr",{}),(0,ce.jsx)("div",{className:"form-group",children:(0,ce.jsxs)("button",{onClick:()=>{m(!p)},style:{backgroundColor:"#83c0e9",color:"black",padding:10,borderRadius:5,border:"none",cursor:"pointer",width:"100%"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPhotoFilm})," Virtual Background"]})})]})]})})},xs=({isConfirmExitModalVisible:e,onConfirmExitClose:t,position:r="topRight",backgroundColor:a="#83c0e9",exitEventOnConfirm:n=L,member:o,ban:s,roomName:i,socket:c,islevel:d,title:l="Confirm Exit",confirmLabel:u,cancelLabel:p,message:m,overlayProps:g,contentProps:h,headerProps:f,titleProps:b,closeButtonProps:y,closeIconComponent:x,bodyProps:v,messageProps:S,footerProps:R,cancelButtonProps:w,confirmButtonProps:k,headerDividerProps:C,bodyDividerProps:j,renderHeader:P,renderBody:M,renderFooter:I,renderHeaderDivider:A,renderBodyDivider:T,renderMessage:F,renderContent:D})=>{const N=u??("2"===d?"End Event":"Exit"),V=p??"Cancel",B="function"==typeof m?m({islevel:d}):void 0!==m?m:"2"===d?"This will end the event for all. Confirm exit.":"Are you sure you want to exit?",$="undefined"!=typeof window?.8*window.innerWidth:320,E=Math.min($,350),{className:W,style:H,...O}=g??{},z=["mediasfu-confirm-exit__overlay",W].filter(Boolean).join(" ")||void 0,U={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...H},{className:q,style:_,...G}=h??{},Y=["mediasfu-confirm-exit__content",q].filter(Boolean).join(" ")||void 0,K={position:"fixed",backgroundColor:a,borderRadius:10,padding:16,width:E,maxHeight:"65%",overflowY:"auto",top:r.includes("top")?10:"auto",bottom:r.includes("bottom")?10:"auto",left:r.includes("Left")?10:"auto",right:r.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0,0,0,0.25)",..._},{className:J,style:X,...Z}=f??{},Q=["mediasfu-confirm-exit__header",J].filter(Boolean).join(" ")||void 0,ee={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...X},{className:te,style:re,...ae}=b??{},ne=["mediasfu-confirm-exit__title",te].filter(Boolean).join(" ")||void 0,oe={margin:0,fontSize:"1.1rem",...re},{className:se,style:ie,onClick:de,...le}=y??{},me=["mediasfu-confirm-exit__close",se].filter(Boolean).join(" ")||void 0,ge={background:"none",border:"none",padding:4,cursor:"pointer",color:"black",display:"inline-flex",alignItems:"center",justifyContent:"center",...ie},he=x??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg"}),{className:fe,style:be,...ye}=C??{},xe=["mediasfu-confirm-exit__divider",fe].filter(Boolean).join(" ")||void 0,ve={margin:"6px 0",height:1,border:"none",backgroundColor:"rgba(0,0,0,0.15)",...be},{className:Se,style:Re,...we}=v??{},ke=["mediasfu-confirm-exit__body",Se].filter(Boolean).join(" ")||void 0,Ce={fontSize:"0.95rem",...Re},{className:je,style:Pe,...Me}=S??{},Ie=["mediasfu-confirm-exit__message",je].filter(Boolean).join(" ")||void 0,Ae={margin:0,...Pe},{className:Te,style:Fe,...De}=j??{},Ne=["mediasfu-confirm-exit__divider",Te].filter(Boolean).join(" ")||void 0,Le={margin:"6px 0",height:1,border:"none",backgroundColor:"rgba(0,0,0,0.15)",...Fe},{className:Ve,style:Be,...$e}=R??{},Ee=["mediasfu-confirm-exit__footer",Ve].filter(Boolean).join(" ")||void 0,We={display:"flex",justifyContent:"flex-end",gap:12,flexWrap:"wrap",...Be},{className:He,style:Oe,onClick:ze,...Ue}=w??{},qe=["mediasfu-confirm-exit__cancel",He].filter(Boolean).join(" ")||void 0,_e={borderRadius:6,backgroundColor:"black",color:"white",padding:"6px 14px",border:"none",cursor:"pointer",...Oe},{className:Ge,style:Ye,onClick:Ke,...Je}=k??{},Xe=["mediasfu-confirm-exit__confirm",Ge].filter(Boolean).join(" ")||void 0,Ze={borderRadius:6,backgroundColor:"red",color:"white",padding:"6px 14px",border:"none",cursor:"pointer",...Ye},Qe=()=>{n({socket:c,member:o,roomName:i,ban:s}),t()},et=(0,ce.jsxs)("div",{className:Q,style:ee,...Z,children:[(0,ce.jsx)("h2",{className:ne,style:oe,...ae,children:l}),(0,ce.jsx)("button",{type:"button",onClick:e=>{de?.(e),e.defaultPrevented||t()},className:me,style:ge,"aria-label":"Close confirm exit modal",...le,children:he})]}),tt=P?P({defaultHeader:et,title:l,onClose:t}):et,rt=(0,ce.jsx)("p",{className:Ie,style:Ae,...Me,children:B}),at=F?F({defaultMessage:rt,resolvedMessage:B}):rt,nt=(0,ce.jsx)("div",{className:ke,style:Ce,...we,children:at}),ot=M?M({defaultBody:nt,message:B}):nt,st=(0,ce.jsxs)("div",{className:Ee,style:We,...$e,children:[(0,ce.jsx)("button",{type:"button",onClick:e=>{ze?.(e),e.defaultPrevented||t()},className:qe,style:_e,...Ue,children:V}),(0,ce.jsx)("button",{type:"button",onClick:e=>{Ke?.(e),e.defaultPrevented||Qe()},className:Xe,style:Ze,...Je,children:N})]}),it=I?I({defaultFooter:st,onCancel:t,onConfirm:Qe}):st,ct=(0,ce.jsx)("hr",{className:xe,style:ve,...ye}),dt=A?A({defaultDivider:ct}):ct,lt=(0,ce.jsx)("hr",{className:Ne,style:Le,...De}),ut=T?T({defaultDivider:lt}):lt,pt=(0,ce.jsxs)("div",{className:Y,style:K,...G,children:[tt,dt,ot,ut,it]}),mt=D?D({defaultContent:pt}):pt;return(0,ce.jsx)("div",{className:z,style:U,...O,children:mt})},vs=({isConfirmHereModalVisible:e,onConfirmHereClose:t,backgroundColor:r="#83c0e9",countdownDuration:a=120,socket:n,localSocket:o,roomName:s,member:i,title:c="Are you still there?",message:d="Please confirm if you are still present.",countdownLabel:l="Time remaining:",confirmButtonLabel:u="Yes",onTimeout:p,overlayProps:m,contentProps:g,containerProps:h,spinnerWrapperProps:f,spinnerIcon:b,spinnerIconProps:y,titleProps:x,messageProps:v,countdownWrapperProps:S,countdownValueProps:R,confirmButtonProps:w,renderSpinner:k,renderTitle:C,renderMessage:j,renderCountdown:P,renderConfirmButton:M,renderBody:I,renderContent:A})=>{const[T,F]=(0,de.useState)(a),D=(0,de.useRef)(null),N=(0,de.useMemo)(()=>Math.max(0,a??120),[a]),L=(0,de.useCallback)(()=>{D.current&&(clearInterval(D.current),D.current=null)},[]),V=(0,de.useCallback)(()=>{if(n.emit("disconnectUser",{member:i,roomName:s,ban:!1}),o&&o.id)try{o.emit("disconnectUser",{member:i,roomName:s,ban:!1})}catch{}},[o,i,s,n]),B=(0,de.useCallback)(()=>{L(),t()},[L,t]),$=(0,de.useCallback)(()=>{V(),p?.(),B()},[B,V,p]);(0,de.useEffect)(()=>{F(N)},[N,e]),(0,de.useEffect)(()=>{if(!e)return void L();L();let t=N;return F(N),D.current=setInterval(()=>{t-=1,F(Math.max(t,0)),t<=0&&(L(),$())},1e3),()=>{L()}},[L,$,N,e]);const{className:E,style:W,...H}=m??{},O=["mediasfu-confirm-here__overlay",E].filter(Boolean).join(" ").trim()||void 0,z={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:r??"rgba(0, 0, 0, 0.5)",display:e?"flex":"none",alignItems:"center",justifyContent:"center",padding:16,zIndex:999,...W},{className:U,style:q,..._}=g??{},G="undefined"!=typeof window?Math.min(.9*window.innerWidth,400):320,Y=["mediasfu-confirm-here__content",U].filter(Boolean).join(" ").trim()||void 0,K={backgroundColor:r,borderRadius:12,padding:24,width:"100%",maxWidth:G,boxShadow:"0 15px 45px rgba(0,0,0,0.25)",display:"flex",flexDirection:"column",...q},{className:J,style:X,...Z}=h??{},Q=["mediasfu-confirm-here__inner",J].filter(Boolean).join(" ").trim()||void 0,ee={textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:16,...X},{className:te,style:re,...ae}=f??{},ne=["mediasfu-confirm-here__spinner",te].filter(Boolean).join(" ").trim()||void 0,oe={fontSize:"3rem",color:"black",...re},{style:se,...ie}=y??{},le={fontSize:"inherit",color:"inherit",...se},{className:me,style:ge,...he}=x??{},fe=["mediasfu-confirm-here__title",me].filter(Boolean).join(" ").trim()||void 0,be={fontSize:"1.5rem",fontWeight:700,margin:0,color:"black",...ge},{className:ye,style:xe,...ve}=v??{},Se=["mediasfu-confirm-here__message",ye].filter(Boolean).join(" ").trim()||void 0,Re={fontSize:"1rem",color:"black",margin:0,...xe},{className:we,style:ke,...Ce}=S??{},je=["mediasfu-confirm-here__countdown",we].filter(Boolean).join(" ").trim()||void 0,Pe={fontSize:"0.95rem",color:"black",margin:0,...ke},{className:Me,style:Ie,...Ae}=R??{},Te=["mediasfu-confirm-here__countdown-value",Me].filter(Boolean).join(" ").trim()||void 0,Fe={fontWeight:700,...Ie},{className:De,style:Ne,onClick:Le,...Ve}=w??{},Be=["mediasfu-confirm-here__confirm",De].filter(Boolean).join(" ").trim()||void 0,$e={backgroundColor:"#dc3545",color:"white",padding:"0.5rem 1rem",borderRadius:6,border:"none",cursor:"pointer",fontWeight:600,fontSize:"1rem",minWidth:120,...Ne},Ee=(0,de.useMemo)(()=>"function"==typeof d?d({counter:T,countdownDuration:N}):d,[T,N,d]),We=(0,ce.jsx)("div",{className:ne,style:oe,...ae,children:b??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSpinner,spin:!0,style:le,...ie})}),He=k?k({defaultSpinner:We}):We,Oe=(0,ce.jsx)("h2",{className:fe,style:be,...he,children:c}),ze=C?C({defaultTitle:Oe}):Oe,Ue=(0,ce.jsx)("p",{className:Se,style:Re,...ve,children:Ee}),qe=j?j({defaultMessage:Ue,counter:T,countdownDuration:N}):Ue,_e=(0,ce.jsxs)("p",{className:je,style:Pe,...Ce,children:[l," "," ",(0,ce.jsx)("span",{className:Te,style:Fe,...Ae,children:T})]}),Ge=P?P({defaultCountdown:_e,counter:T,countdownLabel:l}):_e,Ye=(0,ce.jsx)("button",{type:"button",className:Be,style:$e,onClick:e=>{Le?.(e),e.defaultPrevented||B()},...Ve,children:u}),Ke=M?M({defaultButton:Ye}):Ye,Je=(0,ce.jsxs)("div",{className:Q,style:ee,...Z,children:[He,ze,qe,Ge,Ke]}),Xe=I?I({defaultBody:Je,spinner:He,title:ze,message:qe,countdown:Ge,confirmButton:Ke}):Je,Ze=(0,ce.jsx)("div",{className:Y,style:K,..._,children:Xe}),Qe=A?A({defaultContent:Ze}):Ze;return(0,ce.jsx)("div",{className:O,style:z,...H,children:Qe})},Ss=({backgroundColor:e="rgba(255, 255, 255, 0.25)",isShareEventModalVisible:t,onShareEventClose:r,shareButtons:a=!0,position:n="topRight",roomName:o,adminPasscode:s,islevel:i,eventType:c,localLink:d,overlayProps:l,contentProps:u,headerProps:p,closeButtonProps:m,closeIcon:g,closeIconProps:h,dividerProps:f,bodyProps:b,meetingPasscodeWrapperProps:y,meetingPasscodeComponentProps:x,meetingIdWrapperProps:v,meetingIdComponentProps:S,shareButtonsWrapperProps:R,shareButtonsComponentProps:w,renderHeader:k,renderCloseButton:C,renderDivider:j,renderMeetingPasscode:P,renderMeetingId:M,renderShareButtons:I,renderBody:A,renderContent:T})=>{const F="undefined"!=typeof window?window.innerWidth:420,D=Math.min(.8*F,350),{className:N,style:L,...V}=l??{},B=["mediasfu-share-event__overlay",N].filter(Boolean).join(" ").trim()||void 0,$={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:t?"block":"none",zIndex:999,...L},{className:E,style:W,...H}=u??{},O=["mediasfu-share-event__content",E].filter(Boolean).join(" ").trim()||void 0,z={position:"fixed",backgroundColor:e,borderRadius:10,padding:16,width:D,maxHeight:"65%",overflowY:"auto",boxShadow:"0 12px 36px rgba(0,0,0,0.25)",display:"flex",flexDirection:"column",gap:12,top:n.includes("top")?10:"auto",bottom:n.includes("bottom")?10:"auto",left:n.includes("Left")?10:"auto",right:n.includes("Right")?10:"auto",...W},{className:U,style:q,..._}=p??{},G=["mediasfu-share-event__header",U].filter(Boolean).join(" ").trim()||void 0,Y={display:"flex",flexDirection:"row-reverse",alignItems:"center",marginBottom:4,...q},{className:K,style:J,onClick:X,...Z}=m??{},Q=["mediasfu-share-event__close",K].filter(Boolean).join(" ").trim()||void 0,ee={background:"none",border:"none",padding:6,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...J},{style:te,...re}=h??{},ae=g??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"lg",style:{fontSize:"20px",color:"black",...te},...re}),ne=()=>{r()},oe=(0,ce.jsx)("button",{type:"button",className:Q,style:ee,onClick:e=>{X?.(e),e.defaultPrevented||ne()},"aria-label":"Close share event modal",...Z,children:ae}),se=C?C({defaultCloseButton:oe,onClose:ne}):oe,ie=(0,ce.jsx)("div",{className:G,style:Y,..._,children:se}),de=k?k({defaultHeader:ie,closeButton:se}):ie,{className:le,style:me,...ge}=f??{},he=["mediasfu-share-event__divider",le].filter(Boolean).join(" ").trim()||void 0,fe={border:"none",height:1,backgroundColor:"rgba(0,0,0,0.2)",margin:"4px 0",...me},be=(0,ce.jsx)("hr",{className:he,style:fe,...ge}),ye=j?j({defaultDivider:be}):be,{className:xe,style:ve,...Se}=b??{},Re=["mediasfu-share-event__body",xe].filter(Boolean).join(" ").trim()||void 0,we={display:"flex",flexDirection:"column",gap:12,...ve},{className:ke,style:Ce,...je}=y??{},Pe=["mediasfu-share-event__passcode",ke].filter(Boolean).join(" ").trim()||void 0,Me={marginBottom:4,...Ce},Ie={meetingPasscode:s,...x??{}},Ae="2"===i?(0,ce.jsx)("div",{className:Pe,style:Me,...je,children:(0,ce.jsx)(tt,{...Ie})}):null,Te=P?P({defaultMeetingPasscode:Ae,adminPasscode:s,isHost:"2"===i}):Ae,{className:Fe,style:De,...Ne}=v??{},Le=["mediasfu-share-event__meeting-id",Fe].filter(Boolean).join(" ").trim()||void 0,Ve={marginBottom:4,...De},Be={meetingID:o,...S??{}},$e=(0,ce.jsx)("div",{className:Le,style:Ve,...Ne,children:(0,ce.jsx)(Je,{...Be})}),Ee=M?M({defaultMeetingId:$e,roomName:o}):$e,{className:We,style:He,...Oe}=R??{},ze=["mediasfu-share-event__share-buttons",We].filter(Boolean).join(" ").trim()||void 0,Ue={marginTop:4,...He},qe={meetingID:o,eventType:c,localLink:d,...w??{}},_e=a?(0,ce.jsx)("div",{className:ze,style:Ue,...Oe,children:(0,ce.jsx)(Qo,{...qe})}):null,Ge=I?I({defaultShareButtons:_e,hasShareButtons:Boolean(a)}):_e,Ye=(0,ce.jsxs)("div",{className:Re,style:we,...Se,children:[Te,Ee,Ge]}),Ke=A?A({defaultBody:Ye,meetingPasscode:Te,meetingId:Ee,shareButtons:Ge}):Ye,Xe=(0,ce.jsxs)("div",{className:O,style:z,role:"dialog","aria-modal":!0,...H,children:[de,ye,Ke]}),Ze=T?T({defaultContent:Xe}):Xe;return(0,ce.jsx)("div",{className:B,style:$,...V,children:Ze})},Rs=new(ae()),ws={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",backgroundColor:"#53C6E0",overflow:"auto"},logoContainer:{marginTop:"30px",paddingTop:"10px",marginBottom:"10px"},logoImage:{width:"100px",height:"100px",borderRadius:"50%"},inputContainer:{marginBottom:"10px",flexDirection:"column",display:"flex",alignItems:"center",justifyContent:"center"},inputField:{height:"30px",borderColor:"gray",borderWidth:"1px",marginBottom:"10px",padding:"0 5px",borderRadius:"5px"},confirmButton:{backgroundColor:"black",color:"white",padding:"5px 5px",borderRadius:"5px",marginBottom:"10px"},scannerContainer:{marginBottom:"10px",width:"100%",justifyContent:"center",alignItems:"center",justifySelf:"center",justifyItems:"center"},additionalOptionsContainer:{textAlign:"center"},link:{color:"blue",textDecoration:"none",fontWeight:"bold",marginLeft:"5px"},scanButton:{backgroundColor:"black",color:"white",padding:"10px 20px",borderRadius:"5px",marginBottom:"20px"},scanButtonContainer:{display:"flex",justifyContent:"center",alignItems:"center"},orContainer:{display:"flex",alignItems:"center",justifyContent:"center",margin:"10px 0"},horizontalLine:{width:"40%",margin:"0 10px"},orText:{color:"black",fontSize:"medium",fontWeight:"bold"}},ks=({parameters:e})=>{const[t,r]=(0,de.useState)(""),[a,n]=(0,de.useState)(""),[o,s]=(0,de.useState)(""),[i,c]=(0,de.useState)(""),[,d]=(0,de.useState)(!1),[l]=(0,de.useState)(null),{showAlert:u,updateIsLoadingModalVisible:p,connectSocket:m,updateSocket:g,updateValidated:h,updateApiUserName:f,updateApiToken:b,updateLink:y,updateRoomName:x,updateMember:v}=e,S=async({apiUserName:e,apiToken:t,link:r,apiKey:a="",userName:n})=>{let o=parseInt(Rs.get("unsuccessfulAttempts")||"0"),s=parseInt(Rs.get("lastRequestTimestamp")||"0");if(o>=10){if(Date.now()-s<108e5)return u?.({message:"Too many unsuccessful attempts. Please try again later.",type:"danger",duration:3e3}),void Rs.set("lastRequestTimestamp",Date.now().toString());o=0,Rs.set("unsuccessfulAttempts",o.toString()),Rs.set("lastRequestTimestamp",Date.now().toString())}try{p(!0);const s=m({apiUserName:e,apiKey:a,apiToken:t,link:r}),i=new Promise((e,t)=>setTimeout(()=>t(new Error("Request timed out")),1e4)),c=await Promise.race([s,i]);c&&c instanceof ee.Socket&&c.id?(o=0,Rs.set("unsuccessfulAttempts",o.toString()),Rs.set("lastRequestTimestamp",Date.now().toString()),g(c),f(e),b(t),y(r),x(e),v(n),h(!0)):(o+=1,Rs.set("unsuccessfulAttempts",o.toString()),Rs.set("lastRequestTimestamp",Date.now().toString()),p(!1),u?.(o>=10?{message:"Too many unsuccessful attempts. Please try again later.",type:"danger",duration:3e3}:{message:"Invalid credentials.",type:"danger",duration:3e3}))}catch{u?.({message:"Unable to connect. Check your credentials and try again.",type:"danger",duration:3e3}),o+=1,Rs.set("unsuccessfulAttempts",o.toString()),Rs.set("lastRequestTimestamp",Date.now().toString()),p(!1)}};(0,de.useEffect)(()=>{try{if(l&&l.length>0){const e=l[0].rawValue.trim().split(";");let t,a,n,s,i;async function c(){await S({apiUserName:i,apiToken:n,link:a,userName:t})}5===e.length?([t,a,n,s,i]=e,0!==t.length&&0!==a.length&&0!==n.length&&0!==s.length&&0!==i.length||u?.({message:"Invalid scanned data.",type:"danger",duration:3e3}),R(t)&&R(n)&&R(s)&&R(i)||u?.({message:"Invalid scanned data.",type:"danger",duration:3e3}),(64!=n.length||t.length>12||t.length<2||i.length>32||i.length<8||!a.includes("mediasfu.com")||o.toLowerCase().startsWith("d"))&&u?.({message:"Invalid scanned data.",type:"danger",duration:3e3})):u?.({message:"Invalid scanned data.",type:"danger",duration:3e3}),r(t),d(!1),c()}}catch{u?.({message:"Invalid scanned data.",type:"danger",duration:3e3})}},[l]);const R=e=>0===e.length||/^[a-zA-Z0-9]+$/.test(e);return(0,ce.jsxs)("div",{style:ws.container,children:[(0,ce.jsx)("div",{style:ws.logoContainer,children:(0,ce.jsx)("img",{src:e.imgSrc||"https://mediasfu.com/images/logo192.png",style:ws.logoImage,alt:"Logo"})}),(0,ce.jsxs)("div",{style:ws.inputContainer,children:[(0,ce.jsx)("input",{type:"text",placeholder:"Event Display Name",value:t||"",onChange:e=>{var t;(t=e.target.value).length<=12&&R(t)&&r(t)},style:ws.inputField}),(0,ce.jsx)("input",{type:"text",placeholder:"Event Token (Secret)",value:a||"",onChange:e=>{var t;(t=e.target.value).length<=64&&R(t)&&n(t)},style:ws.inputField}),(0,ce.jsx)("input",{type:"text",placeholder:"Event ID",value:o||"",onChange:e=>{var t;(t=e.target.value).length<=32&&R(t)&&s(t)},style:ws.inputField}),(0,ce.jsx)("input",{type:"text",placeholder:"Event Link",value:i||"",onChange:e=>c(e.target.value),style:ws.inputField})]}),(0,ce.jsx)("button",{onClick:async()=>(p(!0),0===t.length||0===a.length||0===o.length||0===i.length?(u?.({message:"Please fill all the fields.",type:"danger",duration:3e3}),void p(!1)):R(t)&&R(a)&&R(o)&&i.includes("mediasfu.com")&&!o.toLowerCase().startsWith("d")?64!=a.length||t.length>12||t.length<2||o.length>32||o.length<8||i.length<12?(u?.({message:"Please enter valid details.",type:"danger",duration:3e3}),void p(!1)):(await S({apiUserName:o,apiToken:a,link:i,userName:t}),void p(!1)):(u?.({message:"Please enter valid details.",type:"danger",duration:3e3}),void p(!1))),style:ws.confirmButton,children:"Confirm"}),(0,ce.jsxs)("div",{style:ws.additionalOptionsContainer,children:[(0,ce.jsx)("p",{children:"Provide the event details either by typing manually or scanning the QR-code to autofill."}),(0,ce.jsx)("p",{children:"Do not have a secret?"}),(0,ce.jsx)("a",{href:"https://meeting.mediasfu.com/meeting/start/",target:"_blank",rel:"noreferrer",style:ws.link,children:"Get one from mediasfu.com"})]})]})},Cs=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},js={apiUserName:"yourAPIUSERNAME",apiKey:"yourAPIKEY"},Ps={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",height:"100vh",width:"100vw",backgroundColor:"#53C6E0",overflow:"auto"},Ms={marginBottom:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},Is={height:"30px",borderColor:"gray",borderWidth:"1px",marginBottom:"10px",padding:"0 5px",borderRadius:"5px"},As={height:"30px",borderColor:"gray",borderWidth:"1px",marginBottom:"10px",padding:"0 5px",borderRadius:"5px"},Ts={backgroundColor:"black",color:"white",padding:"5px 20px",borderRadius:"5px",marginBottom:"10px",marginTop:"10px"},Fs={display:"flex",justifyContent:"center",alignItems:"center"},Ds={backgroundColor:"black",color:"white",padding:"5px 20px",borderRadius:"5px"},Ns={color:"red",marginBottom:"10px"},Ls={marginTop:"30px",paddingTop:"10px",marginBottom:"10px"},Vs={width:"100px",height:"100px",borderRadius:"50%"},Bs={display:"flex",alignItems:"center",justifyContent:"center",margin:"10px 0"},$s={color:"black",fontSize:"medium",fontWeight:"bold"},Es=({localLink:e="",connectMediaSFU:t=!0,parameters:r,credentials:a=js,returnUI:n=!1,noUIPreJoinOptions:o,createMediaSFURoom:s=Rr,joinMediaSFURoom:i=Q,containerProps:c,logoContainerProps:d,logoImageProps:l,inputContainerProps:u,orContainerProps:p,orTextProps:m,toggleContainerProps:g,toggleButtonProps:h,createButtonProps:f,joinButtonProps:b,createNameInputProps:y,durationInputProps:x,capacityInputProps:v,eventTypeSelectProps:S,joinNameInputProps:R,eventIdInputProps:w,errorProps:k,renderContainer:C,renderLogo:j,renderCreateForm:P,renderJoinForm:M,renderToggle:I,renderError:A,renderContent:T})=>{const[F,D]=(0,de.useState)(!1),[N,L]=(0,de.useState)(""),[V,B]=(0,de.useState)(""),[$,E]=(0,de.useState)(""),[W,H]=(0,de.useState)(""),[O,z]=(0,de.useState)(""),[U,q]=(0,de.useState)(""),_=(0,de.useRef)(!1),G=(0,de.useRef)(!1),Y=(0,de.useRef)(void 0),K=(0,de.useRef)(void 0),{showAlert:J,updateIsLoadingModalVisible:X,connectLocalSocket:Z,updateSocket:ee,updateValidated:te,updateApiUserName:re,updateApiToken:ae,updateLink:ne,updateRoomName:se,updateMember:ie}=r,le=async()=>{if(_.current)return;_.current=!0;let r={};if(n){if(!(N&&V&&$&&W))return void q("Please fill all the fields.");r={action:"create",duration:parseInt(V),capacity:parseInt(W),eventType:$,userName:N,recordOnly:!1}}else{if(!o||!("action"in o)||"create"!==o.action)throw _.current=!1,new Error("Invalid options provided for creating a room without UI.");r=o}if(X(!0),e.length>0){const e=Math.random().toString(30).substring(2,14)+Math.random().toString(30).substring(2,14);let a=(new Date).getTime().toString(30)+(new Date).getUTCMilliseconds()+Math.floor(10+99*Math.random()).toString();a="m"+a;const n=Y.current?.meetingRoomParams_;n.type=$;const o={eventID:a,duration:r.duration,capacity:r.capacity,userName:r.userName,scheduledDate:new Date,secureCode:e,waitRoom:!1,recordingParams:Y.current?.recordingParams_,eventRoomParams:n,videoPreference:null,audioPreference:null,audioOutputPreference:null,mediasfuURL:""};if(t&&K.current&&Y.current&&Y.current.apiUserName&&Y.current.apiKey){const e=Y.current.apiUserName,t=Y.current.apiKey,a=`prejoin_pending_local_create_${r.userName}_${r.duration}_${r.capacity}`,n=3e4;try{const e=localStorage.getItem(a);if(e){const t=JSON.parse(e);if(Date.now()-(t?.timestamp??0)<n)return _.current=!1,X(!1),void q("Room creation already in progress");try{localStorage.removeItem(a)}catch{}}}catch{}try{localStorage.setItem(a,JSON.stringify({timestamp:Date.now(),payload:{action:"create",userName:r.userName,duration:r.duration,capacity:r.capacity}})),setTimeout(()=>{try{localStorage.removeItem(a)}catch{}},n)}catch{}r.recordOnly=!0;try{const n=await ge({payload:r,apiUserName:e,apiKey:t,validate:!1});try{localStorage.removeItem(a)}catch{}if(n&&n.success&&n.data&&"roomName"in n.data)o.eventID=n.data.roomName,o.secureCode=n.data.secureCode||"",o.mediasfuURL=n.data.publicURL,await me({createData:o,link:n.data.link});else{_.current=!1,X(!1),q("Unable to create room on MediaSFU.");try{ee(K.current),await me({createData:o}),_.current=!1}catch(e){_.current=!1,X(!1),q(`Unable to create room. ${e}`)}}}catch(e){try{localStorage.removeItem(a)}catch{}_.current=!1,X(!1),q(`Unable to create room on MediaSFU. ${e}`)}}else try{ee(K.current),await me({createData:o}),_.current=!1}catch(e){_.current=!1,X(!1),q(`Unable to create room. ${e}`)}}else{const e=`prejoin_pending_mediasfu_create_${r.userName}_${r.duration}_${r.capacity}`,t=3e4;try{const r=localStorage.getItem(e);if(r){const a=JSON.parse(r);if(Date.now()-(a?.timestamp??0)<t)return _.current=!1,X(!1),void q("Room creation already in progress");try{localStorage.removeItem(e)}catch{}}}catch{}try{localStorage.setItem(e,JSON.stringify({timestamp:Date.now(),payload:{action:"create",userName:r.userName,duration:r.duration,capacity:r.capacity}})),setTimeout(()=>{try{localStorage.removeItem(e)}catch{}},t)}catch{}try{await ge({payload:r,apiUserName:a.apiUserName,apiKey:a.apiKey,validate:!0});try{localStorage.removeItem(e)}catch{}_.current=!1}catch(t){try{localStorage.removeItem(e)}catch{}_.current=!1,X(!1),q(`Unable to create room. ${t}`)}}},ue=async()=>{if(_.current)return;_.current=!0;let t={};if(n){if(!N||!O)return void q("Please fill all the fields.");t={action:"join",meetingID:O,userName:N}}else{if(!o||!("action"in o)||"join"!==o.action)throw new Error("Invalid options provided for joining a room without UI.");t=o}if(e.length>0&&!e.includes("mediasfu.com")){const e={eventID:t.meetingID,userName:t.userName,secureCode:"",videoPreference:null,audioPreference:null,audioOutputPreference:null};return await pe({joinData:e}),void(_.current=!1)}X(!0);const s=await i({payload:t,apiUserName:a.apiUserName,apiKey:a.apiKey,localLink:e});s.success&&s.data&&"roomName"in s.data?(await oe({apiUserName:s.data.roomName,apiToken:s.data.secret,link:s.data.link,userName:t.userName,parameters:r}),_.current=!1):(_.current=!1,X(!1),q(`Unable to join room. ${s.data&&"error"in s.data?s.data.error:""}`))},pe=async({joinData:t,link:r=e})=>{K.current?.emit("joinEventRoom",t,e=>{e.success?(ee(K.current),re(Y.current?.apiUserName||""),ae(e.secret),ne(r),se(t.eventID),ie(t.userName),X(!1),te(!0)):(X(!1),q(`Unable to join room. ${e.reason}`))})},me=async({createData:t,link:r=e})=>{K.current?.emit("createRoom",t,e=>{e.success?(ee(K.current),re(Y.current?.apiUserName||""),ae(e.secret),ne(r),se(t.eventID),ie(t.userName+"_2"),X(!1),te(!0)):(X(!1),q(`Unable to create room. ${e.reason}`))})},ge=async({payload:t,apiUserName:a,apiKey:n,validate:o=!0})=>{const i=await s({payload:t,apiUserName:a,apiKey:n,localLink:e});if(i.success&&i.data&&"roomName"in i.data)return await oe({apiUserName:i.data.roomName,apiToken:i.data.secret,link:i.data.link,userName:t.userName,parameters:r,validate:o}),i;X(!1),q(`Unable to create room. ${i.data&&"error"in i.data?i.data.error:""}`)},he=async({returnUI:e,noUIPreJoinOptions:t})=>{if(!e&&t)if("action"in t&&"create"===t.action){const e=t;if(!(e.userName&&e.duration&&e.eventType&&e.capacity))throw new Error("Please provide all the required parameters: userName, duration, eventType, capacity");await le()}else{if(!("action"in t)||"join"!==t.action)throw new Error("Invalid options provided for creating/joining a room without UI.");{const e=t;if(!e.userName||!e.meetingID)throw new Error("Please provide all the required parameters: userName, meetingID");await ue()}}};(0,de.useEffect)(()=>{if(e.length>0&&!G.current&&!K.current)try{Z?.({link:e}).then(e=>{Y.current=e.data,K.current=e.socket,G.current=!0,!n&&o&&he({returnUI:n,noUIPreJoinOptions:o})}).catch(t=>{J?.({message:`Unable to connect to ${e}. ${t}`,type:"danger",duration:3e3})})}catch{J?.({message:`Unable to connect to ${e}. Something went wrong.`,type:"danger",duration:3e3})}else 0!==e.length||K.current||!n&&o&&he({returnUI:n,noUIPreJoinOptions:o})},[]);const fe=(0,de.useCallback)(()=>{D(e=>!e),q("")},[]);if(!n)return(0,ce.jsx)(ce.Fragment,{});const{className:be,style:ye,...xe}=c??{},{className:ve,style:Se,...Re}=d??{},{className:we,style:ke,...Ce}=u??{},{className:je,style:Pe,...Me}=p??{},{className:Ie,style:Ae,...Te}=m??{},{className:Fe,style:De,...Ne}=g??{},{className:Le,style:Ve,onClick:Be,...$e}=h??{},{className:Ee,style:We,...He}=k??{},{style:Oe,alt:ze,src:Ue,...qe}=l??{},{style:_e,onChange:Ge,type:Ye,placeholder:Ke,...Je}=y??{},{style:Xe,onChange:Ze,type:Qe,placeholder:et,...tt}=x??{},{style:rt,onChange:at,type:nt,placeholder:ot,...st}=v??{},{style:it,onChange:ct,...dt}=S??{},{style:lt,onChange:ut,type:pt,placeholder:mt,...gt}=R??{},{style:ht,onChange:ft,type:bt,placeholder:yt,...xt}=w??{},{style:vt,onClick:St,children:Rt,...wt}=f??{},{style:kt,onClick:Ct,children:jt,...Pt}=b??{},Mt=(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("input",{type:Ye??"text",placeholder:Ke??"Display Name",value:N,onChange:e=>{Ge?.(e),e.defaultPrevented||L(e.target.value)},style:{...Is,..._e},...Je}),(0,ce.jsx)("input",{type:Qe??"text",placeholder:et??"Duration (minutes)",value:V,onChange:e=>{Ze?.(e),e.defaultPrevented||B(e.target.value)},style:{...Is,...Xe},...tt}),(0,ce.jsxs)("select",{value:$,onChange:e=>{ct?.(e),e.defaultPrevented||E(e.target.value)},style:{...As,...it},...dt,children:[(0,ce.jsx)("option",{value:"",children:"Select Event Type"}),(0,ce.jsx)("option",{value:"chat",children:"Chat"}),(0,ce.jsx)("option",{value:"broadcast",children:"Broadcast"}),(0,ce.jsx)("option",{value:"webinar",children:"Webinar"}),(0,ce.jsx)("option",{value:"conference",children:"Conference"})]}),(0,ce.jsx)("input",{type:nt??"text",placeholder:ot??"Room Capacity",value:W,onChange:e=>{at?.(e),e.defaultPrevented||H(e.target.value)},style:{...Is,...rt},...st}),(0,ce.jsx)("button",{type:"button",onClick:async e=>{await Promise.resolve(St?.(e)),e.defaultPrevented||await le()},style:{...Ts,...vt},...wt,children:Rt??"Create Room"})]}),It=P?P({defaultContent:Mt,values:{name:N,duration:V,eventType:$,capacity:W},submit:le,setValues:{onNameChange:e=>{Ge?.(e),e.defaultPrevented||L(e.target.value)},onDurationChange:e=>{Ze?.(e),e.defaultPrevented||B(e.target.value)},onEventTypeChange:e=>{ct?.(e),e.defaultPrevented||E(e.target.value)},onCapacityChange:e=>{at?.(e),e.defaultPrevented||H(e.target.value)}}}):Mt,At=(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("input",{type:pt??"text",placeholder:mt??"Display Name",value:N,onChange:e=>{ut?.(e),e.defaultPrevented||L(e.target.value)},style:{...Is,...lt},...gt}),(0,ce.jsx)("input",{type:bt??"text",placeholder:yt??"Event ID",value:O,onChange:e=>{ft?.(e),e.defaultPrevented||z(e.target.value)},style:{...Is,...ht},...xt}),(0,ce.jsx)("button",{type:"button",onClick:async e=>{await Promise.resolve(Ct?.(e)),e.defaultPrevented||await ue()},style:{...Ts,...kt},...Pt,children:jt??"Join Room"})]}),Tt=M?M({defaultContent:At,values:{name:N,eventID:O},submit:ue,setValues:{onNameChange:e=>{ut?.(e),e.defaultPrevented||L(e.target.value)},onEventIDChange:e=>{ft?.(e),e.defaultPrevented||z(e.target.value)}}}):At,{children:Ft,...Dt}=Te,Nt=U?(0,ce.jsx)("p",{className:Cs("prejoin-error",Ee),style:{...Ns,...We},...He,children:U}):null,Lt=A?A({defaultError:Nt,error:U}):Nt,Vt=(0,ce.jsx)("div",{className:Cs("prejoin-logo-container",ve),style:{...Ls,...Se},...Re,children:(0,ce.jsx)("img",{src:Ue??r.imgSrc??"https://mediasfu.com/images/logo192.png",style:{...Vs,...Oe},alt:ze??"Logo",...qe})}),Bt=j?j({defaultLogo:Vt}):Vt,$t=(0,ce.jsxs)("div",{className:Cs("prejoin-input-container",we),style:{...Ms,...ke},...Ce,children:[F?It:Tt,Lt]}),Et=(0,ce.jsx)("div",{className:Cs("prejoin-or-container",je),style:{...Bs,...Pe},...Me,children:(0,ce.jsx)("span",{className:Cs("prejoin-or-text",Ie),style:{...$s,...Ae},...Dt,children:Ft??"OR"})}),Wt=(0,ce.jsx)("button",{type:"button",className:Cs("prejoin-toggle-button",Le),style:{...Ds,...Ve},onClick:async e=>{await Promise.resolve(Be?.(e)),e.defaultPrevented||fe()},...$e,children:$e.children??(F?"Switch to Join Mode":"Switch to Create Mode")}),Ht=(0,ce.jsx)("div",{className:Cs("prejoin-toggle-container",Fe),style:{...Fs,...De},...Ne,children:Wt}),Ot=I?I({defaultToggle:Ht,isCreateMode:F,toggle:fe}):Ht,zt=(0,ce.jsxs)(ce.Fragment,{children:[Bt,$t,Et,Ot]}),Ut=T?T({defaultContent:zt,isCreateMode:F,error:U}):zt,qt=(0,ce.jsx)("div",{className:Cs("prejoin-container",be),style:{...Ps,...ye},...xe,children:Ut});return C?C({defaultContainer:qt,isCreateMode:F,error:U}):qt},Ws=({isPollModalVisible:e,onClose:t,position:r="topRight",backgroundColor:a="#f5f5f5",member:n,islevel:o,polls:s,poll:i,socket:c,roomName:d,showAlert:l,updateIsPollModalVisible:u,handleCreatePoll:p,handleEndPoll:m,handleVotePoll:g,title:h="Polls",overlayProps:f,contentProps:b,headerProps:y,titleProps:x,closeButtonProps:v,closeIconComponent:S,bodyProps:R,sectionsWrapperProps:w,previousPollsWrapperProps:k,previousPollsHeaderProps:C,createPollWrapperProps:j,createPollFormProps:P,activePollWrapperProps:M,pollQuestionInputProps:I,pollTypeSelectProps:A,pollOptionInputProps:T,voteButtonProps:F,endPollButtonProps:D,submitPollButtonProps:N,emptyPreviousPolls:L,emptyActivePoll:V,renderHeader:B,renderPreviousPolls:$,renderCreatePoll:E,renderActivePoll:W,renderBody:H,renderContent:O})=>{const[z,U]=(0,de.useState)({question:"",type:"",options:[]}),q=(0,de.useMemo)(()=>i??null,[i]);(0,de.useEffect)(()=>{if(!e||!s?.length||!i)return;const t=s.filter(e=>"active"===e?.status&&i.id===e?.id).length;"2"===o&&0===t&&"active"===i.status&&(i.status="inactive")},[e,s,i,o]);const _="undefined"!=typeof window?Math.min(.7*window.innerWidth,360):320,{className:G,style:Y,...K}=f??{},J=["mediasfu-poll-modal",G].filter(Boolean).join(" ").trim()||void 0,X={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...Y},{className:Z,style:Q,...ee}=b??{},te=["mediasfu-poll-modal__content",Z].filter(Boolean).join(" ").trim()||void 0,re={position:"fixed",backgroundColor:a,borderRadius:10,padding:16,width:_,maxHeight:"75%",overflow:"hidden",top:r.includes("top")?10:"auto",bottom:r.includes("bottom")?10:"auto",left:r.includes("Left")?10:"auto",right:r.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...Q},{className:ae,style:ne,...oe}=y??{},se=["modal-header",ae].filter(Boolean).join(" ").trim()||void 0,ie={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...ne},{className:le,style:me,...ge}=x??{},he=["modal-title",le].filter(Boolean).join(" ").trim()||void 0,fe={margin:0,fontSize:"1.25rem",fontWeight:700,color:"black",...me},{className:be,style:ye,onClick:xe,...ve}=v??{},Se=["btn-close-poll",be].filter(Boolean).join(" ").trim()||void 0,Re={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...ye},we=S??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),ke=e=>{xe?.(e),e.defaultPrevented||t()},{className:Ce,style:je,...Pe}=R??{},Me=["modal-body",Ce].filter(Boolean).join(" ").trim()||void 0,Ie={display:"flex",flexDirection:"column",gap:16,flex:1,minHeight:0,overflow:"hidden",...je},{className:Ae,style:Te,...Fe}=w??{},De=["poll-modal-sections",Ae].filter(Boolean).join(" ").trim()||void 0,Ne={display:"flex",flexDirection:"column",gap:16,overflowY:"auto",...Te},Le=(e,t)=>{const r=e.reduce((e,t)=>e+t,0);return r>0?(e[t]/r*100).toFixed(2):"0"},Ve=()=>{switch(z.type){case"trueFalse":case"yesNo":return(0,ce.jsx)("div",{className:"poll-options poll-options--preset",children:z.options.map((e,t)=>(0,ce.jsxs)("div",{className:"form-check",children:[(0,ce.jsx)("input",{className:"form-check-input",type:"radio",name:"pollOption",value:e.toLowerCase(),id:`option-${e}`,readOnly:!0}),(0,ce.jsx)("label",{className:"form-check-label",htmlFor:`option-${e}`,children:e})]},t))});case"custom":return(0,ce.jsxs)("div",{className:"poll-options poll-options--custom",children:[z.options.map((e,t)=>(0,ce.jsx)("div",{className:"form-group",children:(0,ce.jsx)("input",{type:"text",className:"form-control",placeholder:`Option ${t+1}`,maxLength:50,value:e,...T,onChange:e=>{if(T?.onChange?.(e),!e.defaultPrevented){const r=[...z.options];r[t]=e.target.value,U(e=>({...e,options:r}))}}})},`custom-option-${t}`)),[...Array(Math.max(0,5-z.options.length))].map((e,t)=>(0,ce.jsx)("div",{className:"form-group",children:(0,ce.jsx)("input",{type:"text",className:"form-control",placeholder:`Option ${z.options.length+t+1}`,maxLength:50,...T,onChange:e=>{T?.onChange?.(e),!e.defaultPrevented&&e.target.value&&U(t=>({...t,options:[...t.options,e.target.value]}))}})},`custom-empty-${t}`))]});default:return null}},Be=e=>{if(A?.onChange?.(e),e.defaultPrevented)return;const{value:t}=e.target;let r=[];switch(t){case"trueFalse":r=["True","False"];break;case"yesNo":r=["Yes","No"];break;default:r=[]}U(e=>({...e,type:t,options:r}))},$e=(0,ce.jsxs)("div",{className:De,style:Ne,...Fe,children:[(()=>{const{className:e,style:t,...r}=k??{},a=["poll-section poll-section--previous",e].filter(Boolean).join(" ").trim()||void 0,n=["poll-section__title",C?.className].filter(Boolean).join(" ").trim()||void 0,o={fontWeight:600,marginBottom:8,...C?.style},i=s.filter(e=>!(!e||q&&e.id===q.id&&"active"===e.status)),p=i.length?i.map((e,t)=>(0,ce.jsxs)("div",{className:"poll-card",children:[(0,ce.jsx)("h6",{children:"Question:"}),(0,ce.jsx)("textarea",{className:"form-control",rows:3,disabled:!0,value:e.question}),(0,ce.jsx)("h6",{style:{marginTop:8},children:"Options:"}),e.options.map((t,r)=>(0,ce.jsxs)("div",{children:[t,": ",e.votes[r]," votes (",Le(e.votes,r),"%)"]},`${e.id}-${r}`)),"active"===e.status&&(0,ce.jsx)("button",{type:"button",className:"btn btn-danger btn-block",...D,onClick:t=>{D?.onClick?.(t),t.defaultPrevented||m({pollId:e.id,socket:c,showAlert:l,roomName:d,updateIsPollModalVisible:u})},children:"End Poll"})]},e.id??t)):L??(0,ce.jsx)("div",{className:"poll-empty",children:"No polls available"}),g=(0,ce.jsxs)("div",{className:a,style:{display:"flex",flexDirection:"column",gap:12,overflowY:"auto",maxHeight:"25%",...t},...r,children:[(0,ce.jsx)("h5",{className:n,style:o,...C,children:"Previous Polls"}),p]});return $?$({defaultPreviousPolls:g,previousPolls:i}):g})(),(()=>{if("2"!==o)return null;const{className:e,style:t,...r}=j??{},a=["poll-section poll-section--create",e].filter(Boolean).join(" ").trim()||void 0,n=(0,ce.jsxs)("div",{className:a,style:{display:"flex",flexDirection:"column",gap:12,overflowY:"auto",maxHeight:"30%",...t},...r,children:[(0,ce.jsx)("h5",{children:"Create a New Poll"}),(0,ce.jsxs)("form",{...P,onSubmit:e=>{P?.onSubmit?.(e),e.defaultPrevented||(e.preventDefault(),p({poll:z,socket:c,roomName:d,showAlert:l,updateIsPollModalVisible:u}),U({question:"",type:"",options:[]}))},children:[(0,ce.jsxs)("div",{className:"form-group",children:[(0,ce.jsx)("label",{htmlFor:"poll-question",children:"Question"}),(0,ce.jsx)("input",{id:"poll-question",type:"text",className:"form-control",placeholder:"Enter poll question",maxLength:200,value:z.question,...I,onChange:e=>{I?.onChange?.(e),e.defaultPrevented||U(t=>({...t,question:e.target.value}))}})]}),(0,ce.jsxs)("div",{className:"form-group",children:[(0,ce.jsx)("label",{htmlFor:"poll-type",children:"Poll Type"}),(0,ce.jsxs)("select",{id:"poll-type",className:"form-control",value:z.type,...A,onChange:Be,children:[(0,ce.jsx)("option",{value:"",children:"Select poll type"}),(0,ce.jsx)("option",{value:"trueFalse",children:"True / False"}),(0,ce.jsx)("option",{value:"yesNo",children:"Yes / No"}),(0,ce.jsx)("option",{value:"custom",children:"Custom"})]})]}),Ve(),(0,ce.jsx)("button",{type:"submit",className:"btn btn-primary",...N,children:"Create Poll"})]})]});return E?E({defaultCreatePoll:n,newPoll:z,setNewPoll:U}):n})(),(()=>{const{className:e,style:t,...r}=M??{},a=["poll-section poll-section--active",e].filter(Boolean).join(" ").trim()||void 0,s=(0,ce.jsxs)("div",{className:a,style:{display:"flex",flexDirection:"column",gap:12,overflowY:"auto",maxHeight:"35%",...t},...r,children:[(0,ce.jsx)("h5",{children:"Current Poll"}),q?(0,ce.jsxs)("div",{className:"poll-card poll-card--active",children:[(0,ce.jsx)("h6",{children:"Question:"}),(0,ce.jsx)("textarea",{className:"form-control",rows:3,disabled:!0,value:q.question}),(0,ce.jsx)("h6",{style:{marginTop:8},children:"Options:"}),q.options.map((e,t)=>(0,ce.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-block",...F,onClick:e=>{F?.onClick?.(e),e.defaultPrevented||g({pollId:q.id,optionIndex:t,member:n,socket:c,showAlert:l,roomName:d,updateIsPollModalVisible:u})},children:e},`${q.id}-${t}`)),"2"===o&&(0,ce.jsx)("button",{type:"button",className:"btn btn-danger btn-block",...D,onClick:e=>{D?.onClick?.(e),e.defaultPrevented||m({pollId:q.id,socket:c,showAlert:l,roomName:d,updateIsPollModalVisible:u})},children:"End Poll"})]}):V??(0,ce.jsx)("div",{className:"poll-empty",children:"No active poll"})]});return W?W({defaultActivePoll:s,activePoll:q}):s})()]}),Ee=(0,ce.jsx)("div",{className:Me,style:Ie,...Pe,children:$e}),We=H?H({defaultBody:Ee}):Ee,He=(0,ce.jsxs)("div",{className:te,style:re,...ee,children:[(()=>{const e=(0,ce.jsxs)("div",{className:se,style:ie,...oe,children:[(0,ce.jsx)("h2",{className:he,style:fe,...ge,children:h}),(0,ce.jsx)("button",{type:"button",className:Se,style:Re,onClick:ke,...ve,children:we})]});return B?B({defaultHeader:e}):e})(),(0,ce.jsx)("hr",{className:"hr"}),We]}),Oe=O?O({defaultContent:He}):He;return(0,ce.jsx)("div",{className:J,style:X,...K,children:Oe})},Hs=({isVisible:e,onClose:t,parameters:r,position:a="topLeft",backgroundColor:n="#f5f5f5",title:o="Background Settings",overlayProps:s,contentProps:i,headerProps:c,titleProps:d,closeButtonProps:l,closeIconComponent:u,headerDividerProps:p,bodyProps:m,defaultImagesContainerProps:g,uploadWrapperProps:h,uploadLabelProps:f,uploadLabel:b="Upload Custom Image",uploadInputProps:y,mainCanvasProps:x,backgroundCanvasProps:v,captureVideoProps:S,previewVideoProps:R,loadingOverlayProps:w,loadingSpinner:k,buttonsWrapperProps:C,applyButtonProps:j,saveButtonProps:P,applyButtonLabel:M="Preview Background",applyButtonAppliedLabel:I="Apply Background",saveButtonLabel:A="Save Background",renderHeader:T,renderButtons:F,renderBody:D,renderContent:N})=>{let{customImage:L,selectedImage:V,segmentVideo:B,selfieSegmentation:$,pauseSegmentation:E,processedStream:W,keepBackground:H,backgroundHasChanged:O,virtualStream:z,mainCanvas:U,prevKeepBackground:q,appliedBackground:_,videoAlreadyOn:G,audioOnlyRoom:Y,islevel:K,recordStarted:J,recordResumed:X,recordPaused:Z,recordStopped:Q,recordingMediaOptions:ee,mediaDevices:te,showAlert:re,localStreamVideo:ae,vidCons:ne,frameRate:oe,targetResolution:se,updateCustomImage:ie,updateSelectedImage:le,updateSegmentVideo:me,updateSelfieSegmentation:ge,updatePauseSegmentation:he,updateProcessedStream:fe,updateKeepBackground:be,updateBackgroundHasChanged:ye,updateVirtualStream:xe,updatePrevKeepBackground:ve,updateAppliedBackground:Se,videoProducer:Re,transportCreated:we,videoParams:ke,updateVideoParams:Ce,autoClickBackground:je,updateAutoClickBackground:Pe,createSendTransport:Me,connectSendTransportVideo:Ie,disconnectSendTransportVideo:Ae,onScreenChanges:Te,sleep:Fe}=r;const De=(0,de.useRef)(null),Ne=(0,de.useRef)(null),Le=(0,de.useRef)(null),Ve=(0,de.useRef)(null),Be=(0,de.useRef)(null),$e=(0,de.useRef)(null),Ee=(0,de.useRef)(null),We=(0,de.useRef)(null),He=(0,de.useRef)(null),Oe="undefined"!=typeof window?Math.min(.8*window.innerWidth,500):360,{className:ze,style:Ue,...qe}=s??{},_e=["mediasfu-background-modal",ze].filter(Boolean).join(" ").trim()||void 0,Ge={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...Ue},{className:Ye,style:Ke,...Je}=i??{},Xe=["mediasfu-background-modal__content",Ye].filter(Boolean).join(" ").trim()||void 0,Ze={position:"fixed",backgroundColor:n,borderRadius:10,padding:16,width:Oe,maxWidth:Oe,maxHeight:"75%",overflow:"hidden",top:a.includes("top")?10:"auto",bottom:a.includes("bottom")?10:"auto",left:a.includes("Left")?10:"auto",right:a.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...Ke},{className:Qe,style:et,...tt}=c??{},rt=["modal-header",Qe].filter(Boolean).join(" ").trim()||void 0,at={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...et},{className:nt,style:ot,...st}=d??{},it=["modal-title",nt].filter(Boolean).join(" ").trim()||void 0,ct={margin:0,fontSize:"1.25rem",fontWeight:700,color:"black",...ot},{className:dt,style:lt,onClick:ut,...pt}=l??{},mt=["btn-close-background",dt].filter(Boolean).join(" ").trim()||void 0,gt={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...lt},ht=u??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),ft=e=>{ut?.(e),e.defaultPrevented||t()},{style:bt,...yt}=p??{},xt={height:1,backgroundColor:"black",marginTop:5,marginBottom:5,border:"none",...bt},{className:vt,style:St,...Rt}=m??{},wt=["modal-body",vt].filter(Boolean).join(" ").trim()||void 0,kt={display:"flex",flexDirection:"column",gap:16,overflowY:"auto",paddingRight:4,...St},{className:Ct,style:jt,...Pt}=g??{},Mt=["background-modal__thumbnails",Ct].filter(Boolean).join(" ").trim()||void 0,It={maxWidth:"95%",overflowX:"auto",display:"flex",flexWrap:"wrap",gap:8,...jt},{className:At,style:Tt,...Ft}=h??{},Dt=["background-modal__upload","form-group",At].filter(Boolean).join(" ").trim()||void 0,Nt={maxWidth:"70%",overflowX:"auto",display:"flex",flexDirection:"column",gap:4,...Tt},{className:Lt,style:Vt,...Bt}=f??{},$t=[Lt].filter(Boolean).join(" ").trim()||void 0,Et={fontWeight:600,...Vt},{className:Wt,style:Ht,...Ot}=y??{},zt=["form-control",Wt].filter(Boolean).join(" ").trim()||void 0,Ut={...Ht},{className:qt,style:_t,...Gt}=x??{},Yt=["d-none",qt].filter(Boolean).join(" ").trim()||void 0,Kt={..._t},{className:Jt,style:Xt,...Zt}=v??{},Qt=["d-none",Jt].filter(Boolean).join(" ").trim()||void 0,er={width:"100%",maxWidth:"100%",height:"auto",backgroundColor:"transparent",border:"1px solid black",...Xt},{className:tr,style:rr,...ar}=S??{},nr=["d-none",tr].filter(Boolean).join(" ").trim()||void 0,or={...rr},{className:sr,style:ir,...cr}=R??{},dr=["d-none",sr].filter(Boolean).join(" ").trim()||void 0,lr={width:"100%",maxWidth:"400px",height:"auto",backgroundColor:"transparent",border:"1px solid black",...ir},{className:ur,style:pr,...mr}=w??{},gr=[ur].filter(Boolean).join(" ").trim()||void 0,hr={position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,...pr},{className:fr,style:br,...yr}=C??{},xr=["background-modal__buttons",fr].filter(Boolean).join(" ").trim()||void 0,vr={display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",...br},{className:Sr,style:Rr,onClick:wr,...kr}=j??{},jr=["btn","btn-primary",Sr].filter(Boolean).join(" ").trim()||void 0,Pr={...Rr},{className:Mr,style:Ir,onClick:Ar,...Tr}=P??{},Fr=["btn","btn-success","d-none",Mr].filter(Boolean).join(" ").trim()||void 0,Dr={...Ir},Nr=M??"Preview Background",Lr=I??Nr;(0,de.useEffect)(()=>{if(e)$||Er().catch(()=>console.log("Error preloading model:")),$r(),V?zr(V,V):Or(),We.current?.classList.add("d-none"),We.current&&(We.current.disabled=!0),Ee.current?.classList.remove("d-none"),Ee.current&&(Ee.current.disabled=!1),W&&q==H&&H&&_?Ee.current&&(Ee.current.innerText=Lr):Ee.current&&(Ee.current.innerText=Nr),je&&(async()=>{let e=0;for(;e<20&&(!Be.current||!Ve.current||!He.current);)await new Promise(e=>setTimeout(e,100)),e++;if(!Be.current||!Ve.current||!He.current)return console.error("Background modal refs not ready after waiting"),je=!1,Pe(!1),void t();try{await qr(),await Gr()}catch(e){console.error("Error auto-applying background:",e)}finally{je=!1,Pe(je),t()}})();else try{if(!_||_&&!H||_&&!G){const e=Be.current;if(E=!0,he(!0),!G)try{e&&(e.srcObject instanceof MediaStream&&e.srcObject.getTracks().forEach(e=>e.stop()),e.srcObject=null),B&&(B.getTracks().forEach(e=>e.stop()),B=null),z&&(z.getTracks().forEach(e=>e.stop()),z=null),me(B),xe(z)}catch{}}Ve.current?.classList.add("d-none"),Le.current?.classList.remove("d-none")}catch{}},[e]);const Vr=(0,de.useRef)(null),Br=(0,de.useRef)(null),$r=()=>{const e=De.current;if(!e)return;e.innerHTML="",["wall","wall2","shelf","clock","desert","flower"].forEach(t=>{const r=`https://mediasfu.com/images/backgrounds/${t}_thumbnail.jpg`,a=`https://mediasfu.com/images/backgrounds/${t}_small.jpg`,n=`https://mediasfu.com/images/backgrounds/${t}_large.jpg`,o=`https://mediasfu.com/images/backgrounds/${t}.jpg`,s=document.createElement("img");s.src=r,s.classList.add("img-thumbnail","m-1"),s.style.width="80px",s.style.cursor="pointer",s.addEventListener("click",async()=>{"fhd"==se||"qhd"==se?await zr(a,n):await zr(a,o)}),e.appendChild(s)});const t=document.createElement("div");if(t.classList.add("img-thumbnail","m-1","d-flex","align-items-center","justify-content-center"),t.style.width="76px",t.style.minHeight="60px",t.style.cursor="pointer",t.style.backgroundColor="#f8f9fa",t.style.border="1px solid #dee2e6",t.style.position="relative",t.innerHTML='<span style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); color:#000;">None</span>',t.addEventListener("click",()=>{V="",le(V),ie(""),Wr(),Ve.current?.classList.add("d-none"),Le.current?.classList.remove("d-none"),Or(),Hr()}),e.appendChild(t),L){const t=document.createElement("img");t.src=L,t.classList.add("img-thumbnail","m-1"),t.style.width="80px",t.style.cursor="pointer",t.addEventListener("click",()=>{L&&zr(L,L)}),e.appendChild(t)}};async function Er(){$=new Cr.SelfieSegmentation({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/${e}`}),$.setOptions({modelSelection:1,selfieMode:!1}),await $.initialize(),ge($)}const Wr=()=>{$e.current?.classList.remove("d-none")},Hr=()=>{$e.current?.classList.add("d-none")},Or=()=>{const e=Le.current?.getContext("2d");e&&Le.current&&(e.clearRect(0,0,Le.current.width,Le.current.height),e.font="30px Arial",e.fillStyle="#000",e.textAlign="center",e.textBaseline="middle",e.fillText("No Background",Le.current.width/2,Le.current.height/2),We.current?.classList.add("d-none"),Ee.current?.classList.remove("d-none"),Ee.current.disabled=!1,Ee.current.innerText=W&&q==H&&H&&_?Lr:Nr)},zr=async(e,t)=>{Wr(),Le.current?.classList.remove("d-none"),Ve.current?.classList.add("d-none");const r=new Image;r.crossOrigin="anonymous",r.onload=async()=>{const e=Le.current?.getContext("2d");e&&Le.current&&(Le.current.width=r.width,Le.current.height=r.height,e.drawImage(r,0,0),Ur(r),Hr())},r.src=e,V=t,le(V),We.current?.classList.add("d-none"),We.current.disabled=!0,Ee.current?.classList.remove("d-none"),Ee.current.disabled=!1,Ee.current.innerText=W&&q==H&&H&&_?Lr:Nr},Ur=e=>{const t=Le.current?.getContext("2d");t&&Le.current&&(t.clearRect(0,0,Le.current.width,Le.current.height),t.drawImage(e,0,0))},qr=async()=>{if(Y)return void re?.({message:"You cannot use a background in an audio only event.",type:"danger"});Wr(),Ve.current?.classList.remove("d-none"),Le.current?.classList.add("d-none");const e=!!V;if(E=!1,he(!1),await _r(e),e){let e=0;for(;!W&&e<30;){await new Promise(e=>setTimeout(e,100));const t=r.getUpdatedAllParams();W=t.processedStream,e++}}Hr(),Ee.current?.classList.add("d-none"),Ee.current&&(Ee.current.disabled=!0),W&&q==H&&H&&_?(We.current?.classList.add("d-none"),We.current&&(We.current.disabled=!0)):(We.current?.classList.remove("d-none"),We.current&&(We.current.disabled=!1))},_r=async e=>{const t=Be.current,r=Ve.current,a=new Image;if(a.crossOrigin="anonymous",a.src=V||"",U||(U=He.current),!U||!t||!r)return;const n=U;n.width=t.videoWidth,n.height=t.videoHeight;let o=n.getContext("2d");if(O=!0,ye(!0),q=H,ve(H),!e){const e=W?.getVideoTracks();e?.forEach(e=>e.stop()),W=null,H=!1,fe(null),be(!1),r.classList.remove("d-none")}const s=async e=>{try{const t=()=>{$&&!E&&e&&0!==e.videoWidth&&0!==e.videoHeight&&($.send({image:e}),requestAnimationFrame(t))};e.onloadeddata=()=>{t()},setTimeout(async()=>{if(W=n.captureStream(oe||5),r.srcObject=W,fe(W),r.classList.remove("d-none"),H=!0,be(H),r.paused)try{await r.play()}catch{}},100)}catch{}};if(G){if(Br.current&&"live"===Br.current.readyState&&ae.getVideoTracks()[0]?.label===Br.current?.label);else{const e=ae.getVideoTracks()[0];Br.current=e.clone(),Br.current&&(Vr.current=new MediaStream([Br.current])),B=Vr.current,me(B)}t.srcObject=B,t.paused&&t.play(),t.width=B.getVideoTracks()[0]?.getSettings().width||0,t.height=B.getVideoTracks()[0]?.getSettings().height||0,n.width=t.width,n.height=t.height,o=n.getContext("2d");try{e?await s(t):r.srcObject=Vr.current||ae}catch(e){console.log("Error segmenting image:",e)}}else{if(B&&"live"===B.getVideoTracks()[0]?.readyState);else{try{const e=await te.getUserMedia({video:{...ne,frameRate:{ideal:oe}},audio:!1});B=e,me(B),t.srcObject=B,t.paused&&t.play()}catch{try{const e=await te.getUserMedia({video:{...ne},audio:!1});B=e,me(B),t.srcObject=B,t.paused&&t.play()}catch(e){console.log("Error getting user media:",e)}}t.width=B.getVideoTracks()[0]?.getSettings().width||0,t.height=B.getVideoTracks()[0]?.getSettings().height||0,n.width=t.width,n.height=t.height,o=n.getContext("2d")}try{e?await s(t):r.srcObject=t.srcObject}catch{}}let i="no-repeat";try{(a.width<n.width||a.height<n.height)&&(i="repeat")}catch{}const c=e=>{try{if(!E&&n&&n.width>0&&n.height>0&&a&&a.width>0&&a.height>0){o.save(),o.clearRect(0,0,n.width,n.height),o.drawImage(e.segmentationMask,0,0,n.width,n.height),o.globalCompositeOperation="source-out";const t=o.createPattern(a,i);o.fillStyle=t||"",o.fillRect(0,0,n.width,n.height),o.globalCompositeOperation="destination-atop",o.drawImage(e.image,0,0,n.width,n.height),o.restore()}}catch(e){console.log("Error applying background:",e)}};$||await Er().catch(()=>console.log("Error preloading model: "));try{$.onResults(c)}catch{}},Gr=async()=>{if(Y)re?.({message:"You cannot use a background in an audio only event.",type:"danger"});else{if(O&&G){if("2"===K&&(J||X)&&!Z&&!Q&&"video"===ee)return void re?.({message:"Please pause the recording before changing the background.",type:"danger"});if(H&&V&&W)z=W,xe(z),ke={track:z.getVideoTracks()[0]},Ce(ke);else if(ae&&"live"===ae.getVideoTracks()[0]?.readyState)ke={track:ae.getVideoTracks()[0]},Ce(ke);else{try{if(ae&&"live"!==ae.getVideoTracks()[0]?.readyState){ae.removeTrack(ae.getVideoTracks()[0]);const e=B?.getVideoTracks()[0]?.clone();e&&ae.addTrack(e)}}catch(e){console.log("Error handling local stream video:",e)}ke={track:Vr.current?.getVideoTracks()[0]||void 0},Ce(ke)}if(H?(_=!0,Se(_)):(_=!1,Se(_)),we)try{Re?.id&&Re.track?.id!==ke.track?.id&&(await Ae({parameters:r}),await Fe({ms:500})),await Ie({videoParams:ke,parameters:r})}catch{}else await Me({option:"video",parameters:{...r,videoParams:ke}});await Te({changed:!0,parameters:r})}H?(_=!0,Se(_)):(_=!1,Se(_)),We.current?.classList.add("d-none"),We.current.disabled=!0}},Yr=k??(0,ce.jsx)(()=>(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("style",{children:"\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  "}),(0,ce.jsx)("div",{style:{width:"50px",height:"50px",border:"5px solid rgba(255, 255, 255, 0.3)",borderRadius:"50%",borderTop:"5px solid white",animation:"spin 1s linear infinite"}})]}),{}),Kr=e=>{wr?.(e),e.defaultPrevented||qr()},Jr=e=>{Ar?.(e),e.defaultPrevented||Gr()},Xr=(()=>{const e=(0,ce.jsxs)("div",{className:rt,style:at,...tt,children:[(0,ce.jsx)("h2",{className:it,style:ct,...st,children:o}),(0,ce.jsx)("button",{type:"button",className:mt,style:gt,onClick:ft,...pt,children:ht})]});return T?T({defaultHeader:e,onClose:t}):e})(),Zr=(()=>{const e=(0,ce.jsxs)("div",{className:xr,style:vr,...yr,children:[(0,ce.jsx)("button",{type:"button",id:"applyBackgroundButton",ref:Ee,className:jr,style:Pr,onClick:Kr,...kr,children:Nr}),(0,ce.jsx)("button",{type:"button",id:"saveBackgroundButton",ref:We,className:Fr,style:Dr,onClick:Jr,...Tr,children:A})]});return F?F({defaultButtons:e,applyButtonRef:Ee,saveButtonRef:We}):e})(),Qr=(0,ce.jsxs)("div",{className:wt,style:kt,...Rt,children:[(0,ce.jsx)("div",{id:"defaultImages",ref:De,className:Mt,style:It,...Pt}),(0,ce.jsxs)("div",{className:Dt,style:Nt,...Ft,children:[(0,ce.jsx)("label",{htmlFor:"uploadImage",className:$t,style:Et,...Bt,children:b}),(0,ce.jsx)("input",{type:"file",id:"uploadImage",className:zt,style:Ut,ref:Ne,onChange:e=>{try{const t=e.target.files?.[0];if(t){if(t.size>4194304)return void re?.({message:"File size must be less than 2MB.",type:"danger"});let e=1280,r=1280,a=2560,n=2560;"fhd"==se?(e=1920,r=1920):"qhd"==se&&(e=2560,r=2560);const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{o.width<e||o.height<r||o.width>a||o.height>n?re?.({message:`Image dimensions must be at least ${e}x${r}.`,type:"danger"}):(L=o.src,ie(L),zr(o.src,o.src))};const s=new FileReader;s.onload=e=>{e.target&&e.target.result&&(o.src=e.target.result.toString())},s.readAsDataURL(t)}}catch{}},...Ot})]}),(0,ce.jsx)("canvas",{id:"mainCanvas",ref:He,className:Yt,style:Kt,...Gt}),(0,ce.jsx)("canvas",{id:"backgroundCanvas",ref:Le,className:Qt,style:er,...Zt}),(0,ce.jsx)("video",{id:"captureVideo",muted:!0,ref:Be,className:nr,style:or,autoPlay:!0,playsInline:!0,...ar}),(0,ce.jsx)("video",{id:"previewVideo",muted:!0,ref:Ve,className:dr,style:lr,autoPlay:!0,playsInline:!0,...cr}),(0,ce.jsx)("div",{id:"loadingOverlay",ref:$e,className:["d-none",gr].filter(Boolean).join(" ").trim()||void 0,style:hr,...mr,children:Yr}),Zr]}),ea=D?D({defaultBody:Qr}):Qr,ta=(0,ce.jsxs)("div",{className:Xe,style:Ze,...Je,children:[Xr,(0,ce.jsx)("hr",{style:xt,...yt}),ea]}),ra=N?N({defaultContent:ta}):ta;return(0,ce.jsx)("div",{className:_e,style:Ge,...qe,children:ra})},Os=({rooms:e,handleEditRoom:t,handleDeleteRoom:r,handleRemoveParticipant:a})=>(0,ce.jsx)(ce.Fragment,{children:e.map((e,n)=>(0,ce.jsxs)("div",{className:"card mb-3 text-dark",children:[(0,ce.jsxs)("div",{className:"card-header d-flex justify-content-between align-items-center",children:[(0,ce.jsxs)("span",{children:["Room ",n+1," ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers})]}),(0,ce.jsxs)("div",{children:[(0,ce.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:()=>t(n),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPen})}),(0,ce.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>r(n),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})]})]}),(0,ce.jsx)("div",{className:"card-body",children:(0,ce.jsx)("ul",{className:"list-group",children:e.map((e,t)=>(0,ce.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center text-dark",children:[e.name,(0,ce.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>a(n,e),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})]},t))})})]},n))}),zs=({editRoomModalVisible:e,setEditRoomModalVisible:t,currentRoom:r,participantsRef:a,handleAddParticipant:n,handleRemoveParticipant:o,currentRoomIndex:s})=>{const i={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3,display:e?"flex":"none",justifyContent:"center",alignItems:"center"},c={border:"1px solid #ccc",borderRadius:5,padding:10,marginBottom:20};return(0,ce.jsx)("div",{style:i,children:(0,ce.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:10,padding:20,width:"80%",maxWidth:"500px",maxHeight:"80%",overflowY:"auto"},children:[(0,ce.jsxs)("div",{className:"modal-header",children:[(0,ce.jsxs)("h5",{className:"modal-title",children:["Edit Room ",s+1," ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPen})]}),(0,ce.jsx)("button",{type:"button",className:"close",onClick:()=>t(!1),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})]}),(0,ce.jsxs)("div",{className:"modal-body",children:[(0,ce.jsxs)("div",{style:c,children:[(0,ce.jsxs)("h5",{children:["Assigned Participants ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers})]}),(0,ce.jsx)("ul",{className:"list-group",children:r&&r.length>0?r.map((e,t)=>(0,ce.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center text-dark",children:[e.name,(0,ce.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>o(s,e),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes})})]},t)):(0,ce.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center text-dark",children:"None assigned"})})]}),(0,ce.jsxs)("div",{style:c,children:[(0,ce.jsxs)("h5",{children:["Unassigned Participants ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers})]}),(0,ce.jsx)("ul",{className:"list-group",children:a.current.filter(e=>null==e.breakRoom).length>0?a.current.filter(e=>null==e.breakRoom).map((e,t)=>(0,ce.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center text-dark",children:[e.name,(0,ce.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>n(s,e),children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus})})]},t)):(0,ce.jsx)("li",{className:"list-group-item d-flex justify-content-between align-items-center text-dark",children:"None pending"})})]})]}),(0,ce.jsx)("div",{className:"modal-footer",children:(0,ce.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>t(!1),children:"Close"})})]})})},Us=({isVisible:e,onBreakoutRoomsClose:t,parameters:r,position:a="topRight",backgroundColor:n="#83c0e9",title:o=(0,ce.jsxs)(ce.Fragment,{children:["Breakout Rooms ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDoorOpen})]}),overlayProps:s,contentProps:i,headerProps:c,titleProps:d,closeButtonProps:l,closeIconComponent:u,headerDividerProps:p,bodyProps:m,controlsWrapperProps:g,numRoomsFieldProps:h,numRoomsLabelProps:f,numRoomsInputProps:b,actionsWrapperProps:y,randomAssignButtonProps:x,manualAssignButtonProps:v,addRoomButtonProps:S,saveRoomsButtonProps:R,newParticipantFieldProps:w,newParticipantLabelProps:k,newParticipantSelectProps:C,roomsContainerProps:j,startButtonProps:P,stopButtonProps:M,numRoomsLabel:I,newParticipantActionLabel:A,randomAssignButtonLabel:T,manualAssignButtonLabel:F,addRoomButtonLabel:D,saveRoomsButtonLabel:N,startBreakoutButtonLabel:L,updateBreakoutButtonLabel:V,stopBreakoutButtonLabel:B,renderHeader:$,renderControls:E,renderRoomList:W,renderStartButton:H,renderStopButton:O,renderBody:z,renderContent:U})=>{const{participants:q,showAlert:_,socket:G,localSocket:Y,itemPageLimit:K,meetingDisplayType:J,prevMeetingDisplayType:X,roomName:Z,shareScreenStarted:Q,shared:ee,breakOutRoomStarted:te,breakOutRoomEnded:re,currentRoomIndex:ae,canStartBreakout:ne,breakoutRooms:oe,updateBreakOutRoomStarted:se,updateBreakOutRoomEnded:ie,updateCurrentRoomIndex:le,updateCanStartBreakout:me,updateBreakoutRooms:ge,updateMeetingDisplayType:he}=r,fe=(0,de.useRef)(q),be=(0,de.useRef)(oe&&oe.length>0?[...oe]:[]),[ye,xe]=(0,de.useState)(""),[ve,Se]=(0,de.useState)("autoAssignNewRoom"),[Re,we]=(0,de.useState)([]),[ke,Ce]=(0,de.useState)(!1),[je,Pe]=(0,de.useState)(!1),[Me,Ie]=(0,de.useState)(!1),Ae="undefined"!=typeof window?Math.min(.9*window.innerWidth,600):360,{className:Te,style:Fe,...De}=s??{},Ne=["mediasfu-breakout-modal",Te].filter(Boolean).join(" ").trim()||void 0,Le={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"block":"none",zIndex:999,...Fe},{className:Ve,style:Be,...$e}=i??{},Ee=["mediasfu-breakout-modal__content",Ve].filter(Boolean).join(" ").trim()||void 0,We={position:"fixed",backgroundColor:n,borderRadius:10,padding:16,width:Ae,maxHeight:"65%",maxWidth:Ae,overflow:"hidden",top:a.includes("top")?10:"auto",bottom:a.includes("bottom")?10:"auto",left:a.includes("Left")?10:"auto",right:a.includes("Right")?10:"auto",display:"flex",flexDirection:"column",gap:12,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.25)",...Be},{className:He,style:Oe,...ze}=c??{},Ue=["modal-header",He].filter(Boolean).join(" ").trim()||void 0,qe={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...Oe},{className:_e,style:Ge,...Ye}=d??{},Ke=["modal-title",_e].filter(Boolean).join(" ").trim()||void 0,Je={margin:0,fontSize:"1.25rem",fontWeight:700,color:"black",...Ge},{className:Xe,style:Ze,onClick:Qe,...et}=l??{},tt=["btn-close-breakout",Xe].filter(Boolean).join(" ").trim()||void 0,rt={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...Ze},at=u??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),nt=e=>{Qe?.(e),e.defaultPrevented||t()},{style:ot,...st}=p??{},it={height:1,backgroundColor:"black",marginTop:5,marginBottom:5,border:"none",...ot},{className:ct,style:dt,...lt}=m??{},ut=["modal-body",ct].filter(Boolean).join(" ").trim()||void 0,pt={display:"flex",flexDirection:"column",gap:16,flex:1,minHeight:0,overflowY:"auto",paddingRight:4,...dt},{className:mt,style:gt,...ht}=g??{},ft=["breakout-modal__controls",mt].filter(Boolean).join(" ").trim()||void 0,bt={display:"flex",flexDirection:"column",gap:12,...gt},{className:yt,style:xt,...vt}=h??{},St=["form-group",yt].filter(Boolean).join(" ").trim()||void 0,Rt={...xt},{className:wt,style:kt,...Ct}=f??{},jt=[wt].filter(Boolean).join(" ").trim()||void 0,Pt={fontWeight:600,...kt},{className:Mt,style:It,...At}=b??{},Tt=["form-control",Mt].filter(Boolean).join(" ").trim()||void 0,Ft={...It},{className:Dt,style:Nt,...Lt}=w??{},Vt=["form-group",Dt].filter(Boolean).join(" ").trim()||void 0,Bt={...Nt},{className:$t,style:Et,...Wt}=k??{},Ht=[$t].filter(Boolean).join(" ").trim()||void 0,Ot={fontWeight:600,...Et},{className:zt,style:Ut,...qt}=C??{},_t=["form-control",zt].filter(Boolean).join(" ").trim()||void 0,Gt={...Ut},{className:Yt,style:Kt,...Jt}=j??{},Xt=["breakout-modal__rooms",Yt].filter(Boolean).join(" ").trim()||void 0,Zt={display:"flex",flexDirection:"column",gap:12,...Kt},{className:Qt,style:er,...tr}=y??{},rr=["breakout-modal__actions","form-group","d-flex","justify-content-between","align-items-center",Qt].filter(Boolean).join(" ").trim()||void 0,ar={gap:8,flexWrap:"wrap",...er},{className:nr,style:or,onClick:sr,...ir}=x??{},cr=["btn","btn-primary",nr].filter(Boolean).join(" ").trim()||void 0,dr={...or},{className:lr,style:ur,onClick:pr,...mr}=v??{},gr=["btn","btn-secondary",lr].filter(Boolean).join(" ").trim()||void 0,hr={...ur},{className:fr,style:br,onClick:yr,...xr}=S??{},vr=["btn","btn-success",fr].filter(Boolean).join(" ").trim()||void 0,Sr={...br},{className:Rr,style:wr,onClick:kr,...Cr}=R??{},jr=["btn","btn-info",Rr].filter(Boolean).join(" ").trim()||void 0,Pr={...wr},{className:Mr,style:Ir,onClick:Ar,...Tr}=P??{},Fr=["btn","btn-primary","mr-2","mb-2",Mr].filter(Boolean).join(" ").trim()||void 0,Dr={...Ir},{className:Nr,style:Lr,onClick:Vr,...Br}=M??{},$r=["btn","btn-danger","mr-2","mb-2",Nr].filter(Boolean).join(" ").trim()||void 0,Er={...Lr},Wr=(0,de.useRef)(null),Hr=()=>{ne?(Pe(!0),Ie(te&&!re)):(Pe(!1),Ie(!1))};(0,de.useEffect)(()=>{if(e){const e=q.filter(e=>"2"!=e.islevel);fe.current=e,be.current=oe&&oe.length>0?[...oe]:[],Hr()}},[e]);const Or=e=>{le(e),we(be.current[e]),Ce(!0),me(!1),Hr()},zr=(e,t)=>{const r=[...be.current];r[e]=r[e].filter(e=>e!==t),be.current=r,t.breakRoom=null,null!=ae&&Or(ae)},Ur=I??(0,ce.jsxs)(ce.Fragment,{children:["Number of Rooms ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers})]}),qr=A??(0,ce.jsxs)(ce.Fragment,{children:["New Participant Action ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faUsers})]}),_r=T??(0,ce.jsxs)(ce.Fragment,{children:["Random Assign ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faRandom})]}),Gr=F??(0,ce.jsxs)(ce.Fragment,{children:["Manual Assign ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faHandPointer})]}),Yr=D??(0,ce.jsxs)(ce.Fragment,{children:["Add Room ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlus})]}),Kr=N??(0,ce.jsxs)(ce.Fragment,{children:["Save Rooms ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSave})]}),Jr=te&&!re,Xr=Jr?V??(0,ce.jsxs)(ce.Fragment,{children:["Update Breakout ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt})]}):L??(0,ce.jsxs)(ce.Fragment,{children:["Start Breakout ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlay})]}),Zr=B??(0,ce.jsxs)(ce.Fragment,{children:["Stop Breakout ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStop})]}),Qr=e=>{sr?.(e),e.defaultPrevented||(()=>{const e=parseInt(ye);if(!e||e<=0)return void _?.({message:"Please enter a valid number of rooms",type:"danger"});const t=Array.from({length:e},()=>[]);[...fe.current].sort(()=>.5-Math.random()).forEach((r,a)=>{const n=a%e;if(t[n].length<K){const e={name:r.name,breakRoom:n};t[n].push(e),r.breakRoom=n}else for(let a=0;a<e;a++)if(t[a].length<K){t[a].push(r),r.breakRoom=a;break}}),be.current=t,Hr()})()},ea=e=>{pr?.(e),e.defaultPrevented||(()=>{const e=parseInt(ye);!e||e<=0?_?.({message:"Please enter a valid number of rooms",type:"danger"}):(be.current=Array.from({length:e},()=>[]),me(!1),Hr())})()},ta=e=>{yr?.(e),e.defaultPrevented||(be.current=[...be.current,[]],me(!1),Hr())},ra=e=>{kr?.(e),e.defaultPrevented||((()=>{if(0===be.current.length)return _?.({message:"There must be at least one room",type:"danger"}),!1;for(let e of be.current){if(0===e.length)return _?.({message:"Rooms must not be empty",type:"danger"}),!1;const t=e.map(e=>e.name),r=new Set(t);if(t.length!==r.size)return _?.({message:"Duplicate participant names in a room",type:"danger"}),!1;if(e.length>K)return _?.({message:"A room exceeds the participant limit",type:"danger"}),!1}return!0})()?(ge(be.current),me(!0),Hr(),_?.({message:"Rooms saved successfully",type:"success"})):_?.({message:"Rooms validation failed",type:"danger"}))},aa=(0,ce.jsx)("div",{ref:Wr,className:Xt,style:Zt,...Jt,children:(0,ce.jsx)(Os,{rooms:be.current,handleEditRoom:Or,handleDeleteRoom:e=>{be.current[e].forEach(e=>e.breakRoom=null);const t=[...be.current];t.splice(e,1),t.forEach((e,t)=>{e.forEach(e=>e.breakRoom=t)}),be.current=t,Hr()},handleRemoveParticipant:zr})}),na=W?W({defaultRoomList:aa,rooms:be.current}):aa,oa=je?(0,ce.jsx)("button",{type:"button",className:Fr,style:Dr,onClick:e=>{Ar?.(e),e.defaultPrevented||(()=>{if(Q||ee)_?.({message:"You cannot start breakout rooms while screen sharing is active",type:"danger"});else if(ne){const e=te&&!re?"updateBreakout":"startBreakout",r=be.current.map(e=>e.map(({name:e,breakRoom:t})=>({name:e,breakRoom:t})));if(G.emit(e,{breakoutRooms:r,newParticipantAction:ve,roomName:Z},e=>{e.success?(_?.({message:"Breakout rooms active",type:"success"}),se(!0),ie(!1),t(),"all"!==J&&he("all")):_?.({message:e.reason,type:"danger"})}),Y&&Y.id)try{Y.emit(e,{breakoutRooms:r,newParticipantAction:ve,roomName:Z},e=>{e.success})}catch{console.log("Error starting local breakout rooms:")}}})()},...Tr,children:Xr}):null,sa=H?H({defaultStartButton:oa,isUpdating:Jr}):oa,ia=Me?(0,ce.jsx)("button",{type:"button",className:$r,style:Er,onClick:e=>{Vr?.(e),e.defaultPrevented||(()=>{if(G.emit("stopBreakout",{roomName:Z},e=>{e.success?(_?.({message:"Breakout rooms stopped",type:"success"}),se(!1),ie(!0),t(),J!==X&&he(X)):_?.({message:e.reason,type:"danger"})}),Y&&Y.id)try{Y.emit("stopBreakout",{roomName:Z},e=>{e.success})}catch{console.log("Error stopping local breakout rooms:")}})()},...Br,children:Zr}):null,ca=O?O({defaultStopButton:ia}):ia,da=(()=>{const e=(0,ce.jsxs)("div",{className:Ue,style:qe,...ze,children:[(0,ce.jsx)("h2",{className:Ke,style:Je,...Ye,children:o}),(0,ce.jsx)("button",{type:"button",className:tt,style:rt,onClick:nt,...et,children:at})]});return $?$({defaultHeader:e}):e})(),la=(()=>{const e=(0,ce.jsxs)("div",{className:ft,style:bt,...ht,children:[(0,ce.jsxs)("div",{className:St,style:Rt,...vt,children:[(0,ce.jsx)("label",{htmlFor:"numRooms",className:jt,style:Pt,...Ct,children:Ur}),(0,ce.jsx)("input",{type:"number",id:"numRooms",className:Tt,style:Ft,value:ye,onChange:e=>xe(e.target.value),...At})]}),(0,ce.jsxs)("div",{className:rr,style:ar,...tr,children:[(0,ce.jsx)("button",{type:"button",className:cr,style:dr,onClick:Qr,...ir,children:_r}),(0,ce.jsx)("button",{type:"button",className:gr,style:hr,onClick:ea,...mr,children:Gr}),(0,ce.jsx)("button",{type:"button",className:vr,style:Sr,onClick:ta,...xr,children:Yr}),(0,ce.jsx)("button",{type:"button",className:jr,style:Pr,onClick:ra,...Cr,children:Kr})]}),(0,ce.jsxs)("div",{className:Vt,style:Bt,...Lt,children:[(0,ce.jsx)("label",{htmlFor:"newParticipantAction",className:Ht,style:Ot,...Wt,children:qr}),(0,ce.jsxs)("select",{id:"newParticipantAction",className:_t,style:Gt,value:ve,onChange:e=>Se(e.target.value),...qt,children:[(0,ce.jsx)("option",{value:"autoAssignNewRoom",children:"Add to new room"}),(0,ce.jsx)("option",{value:"autoAssignAvailableRoom",children:"Add to open room"}),(0,ce.jsx)("option",{value:"manualAssign",children:"No action"})]})]})]});return E?E({defaultControls:e}):e})(),ua=(0,ce.jsxs)("div",{className:ut,style:pt,...lt,children:[la,na,sa,ca]}),pa=z?z({defaultBody:ua}):ua,ma=(0,ce.jsxs)("div",{className:Ee,style:We,...$e,children:[da,(0,ce.jsx)("hr",{style:it,...st}),pa]}),ga=U?U({defaultContent:ma}):ma;return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{className:Ne,style:Le,...De,children:ga}),(0,ce.jsx)(zs,{editRoomModalVisible:ke,setEditRoomModalVisible:Ce,currentRoom:Re,participantsRef:fe,handleAddParticipant:(e,t)=>{if(be.current[e].length<K){const r=[...be.current],a={name:t.name,breakRoom:e};r[e].push(a),be.current=r,t.breakRoom=e,null!=ae&&Or(ae)}else _?.({message:"Room is full",type:"danger"})},handleRemoveParticipant:zr,currentRoomIndex:ae})]})},qs=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},_s=({isVisible:e,onConfigureWhiteboardClose:t,parameters:r,backgroundColor:a="#83c0e9",position:n="topRight",title:o="Configure Whiteboard",overlayProps:s,contentProps:i,headerProps:c,titleProps:d,closeButtonProps:l,closeIconComponent:u,headerDividerProps:p,bodyProps:m,listsWrapperProps:g,assignedSectionProps:h,pendingSectionProps:f,assignedTitleProps:b,pendingTitleProps:y,assignedListProps:x,pendingListProps:v,assignedItemProps:S,pendingItemProps:R,assignedActionButtonProps:w,pendingActionButtonProps:k,footerProps:C,saveButtonProps:j,actionsWrapperProps:P,startButtonProps:M,updateButtonProps:I,stopButtonProps:A,sectionDividerProps:T,assignedTitle:F="Assigned",pendingTitle:D="Pending",saveButtonLabel:N="Save",startButtonLabel:L="Start",updateButtonLabel:V="Update",stopButtonLabel:B="Stop",addIcon:$,removeIcon:E,saveIcon:W,startIcon:H,updateIcon:O,stopIcon:z,emptyAssignedState:U,emptyPendingState:q,renderTitle:_,renderHeader:G,renderLists:Y,renderAssignedList:K,renderPendingList:J,renderAssignedItem:X,renderPendingItem:Z,renderFooter:Q,renderActions:te,renderBody:re,renderContent:ae})=>{let{participants:ne,showAlert:oe,socket:se,itemPageLimit:ie,islevel:me,roomName:ge,eventType:he,shareScreenStarted:fe,shared:be,breakOutRoomStarted:ye,breakOutRoomEnded:xe,recordStarted:ve,recordResumed:Se,recordPaused:Re,recordStopped:we,recordingMediaOptions:ke,canStartWhiteboard:Ce,whiteboardStarted:je,whiteboardEnded:Pe,updateWhiteboardStarted:Me,updateWhiteboardEnded:Ie,updateWhiteboardUsers:Ae,updateCanStartWhiteboard:Te,updateIsConfigureWhiteboardModalVisible:Fe,onScreenChanges:De,captureCanvasStream:Ne,prepopulateUserMedia:Le,rePort:Ve,hostLabel:Be}=r;const[$e,Ee]=(0,de.useState)([]),[We]=(0,de.useState)(ie),[He,Oe]=(0,de.useState)(!1),ze=(0,de.useRef)(null),Ue=(0,de.useRef)(null),qe="undefined"!=typeof window?Math.min(.75*window.innerWidth,420):360,_e={top:n.includes("top")?10:"auto",bottom:n.includes("bottom")?10:"auto",left:n.includes("Left")?10:"auto",right:n.includes("Right")?10:"auto"},{className:Ge,style:Ye,...Ke}=s??{},Je=qs("mediasfu-configure-whiteboard__overlay",Ge),Xe={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:e?"flex":"none",alignItems:"center",justifyContent:"center",padding:16,zIndex:999,...Ye},{className:Ze,style:Qe,...et}=i??{},tt=qs("mediasfu-configure-whiteboard__content",Ze),rt={position:"fixed",backgroundColor:a,borderRadius:12,padding:16,width:qe,maxHeight:"80%",overflow:"hidden",display:"flex",flexDirection:"column",gap:16,boxShadow:"0 12px 36px rgba(0,0,0,0.24)",..._e,...Qe},{className:at,style:nt,...ot}=c??{},st=qs("mediasfu-configure-whiteboard__header",at),it={display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,...nt},{className:ct,style:dt,children:lt,...ut}=d??{},pt=qs("mediasfu-configure-whiteboard__title",ct),mt={margin:0,fontSize:"1.25rem",fontWeight:700,color:"black",...dt},{className:gt,style:ht,onClick:ft,...bt}=l??{},yt=qs("mediasfu-configure-whiteboard__close",gt),xt={background:"none",border:"none",padding:4,cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"black",...ht},vt=u??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,className:"icon"}),{style:St,...Rt}=p??{},wt={height:1,backgroundColor:"rgba(0,0,0,0.2)",border:"none",margin:"4px 0",...St},{className:kt,style:Ct,...jt}=m??{},Pt=qs("mediasfu-configure-whiteboard__body",kt),Mt={display:"flex",flexDirection:"column",gap:16,flex:1,minHeight:0,overflow:"hidden",...Ct},{className:It,style:At,...Tt}=g??{},Ft=qs("mediasfu-configure-whiteboard__lists-wrapper",It),Dt={display:"flex",flexDirection:"row",gap:16,alignItems:"flex-start",justifyContent:"stretch",flexWrap:"wrap",...At},{className:Nt,style:Lt,...Vt}=h??{},Bt=qs("mediasfu-configure-whiteboard__assigned-section",Nt),$t={flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:8,...Lt},{className:Et,style:Wt,...Ht}=f??{},Ot=qs("mediasfu-configure-whiteboard__pending-section",Et),zt={flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:8,...Wt},{className:Ut,style:qt,children:_t,...Gt}=b??{},Yt=qs("mediasfu-configure-whiteboard__assigned-title",Ut),Kt={margin:0,fontSize:"1rem",fontWeight:600,color:"black",...qt},{className:Jt,style:Xt,children:Zt,...Qt}=y??{},er=qs("mediasfu-configure-whiteboard__pending-title",Jt),tr={margin:0,fontSize:"1rem",fontWeight:600,color:"black",...Xt},{className:rr,style:ar,...nr}=x??{},or=qs("mediasfu-configure-whiteboard__assigned-list","mediasfu-configure-whiteboard__list",rr),sr={listStyle:"none",margin:0,display:"flex",flexDirection:"column",gap:8,maxHeight:240,overflowY:"auto",borderRadius:8,border:"1px solid rgba(0,0,0,0.15)",backgroundColor:"rgba(255,255,255,0.9)",padding:8,...ar},{className:ir,style:cr,...dr}=v??{},lr=qs("mediasfu-configure-whiteboard__pending-list","mediasfu-configure-whiteboard__list",ir),ur={listStyle:"none",margin:0,display:"flex",flexDirection:"column",gap:8,maxHeight:240,overflowY:"auto",borderRadius:8,border:"1px solid rgba(0,0,0,0.15)",backgroundColor:"rgba(255,255,255,0.9)",padding:8,...cr},{className:pr,style:mr,...gr}=S??{},hr=qs("mediasfu-configure-whiteboard__assigned-item","mediasfu-configure-whiteboard__list-item",pr),fr={display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px",borderRadius:6,backgroundColor:"rgba(131,192,233,0.15)",color:"#1f2933",...mr},{className:br,style:yr,...xr}=R??{},vr=qs("mediasfu-configure-whiteboard__pending-item","mediasfu-configure-whiteboard__list-item",br),Sr={display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"6px 8px",borderRadius:6,backgroundColor:"rgba(131,192,233,0.05)",color:"#1f2933",...yr},{className:Rr,style:wr,onClick:kr,...Cr}=w??{},jr=qs("btn","btn-danger","btn-sm","mediasfu-configure-whiteboard__assigned-action",Rr),Pr={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:6,...wr},{className:Mr,style:Ir,onClick:Ar,...Tr}=k??{},Fr=qs("btn","btn-primary","btn-sm","mediasfu-configure-whiteboard__pending-action",Mr),Dr={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:6,...Ir},{className:Nr,style:Lr,...Vr}=C??{},Br=qs("mediasfu-configure-whiteboard__footer",Nr),$r={display:"flex",justifyContent:"flex-end",...Lr},{className:Er,style:Wr,children:Hr,onClick:Or,...zr}=j??{},Ur=qs("btn","btn-info","mediasfu-configure-whiteboard__save-button",Er),qr={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,...Wr},{className:_r,style:Gr,...Yr}=P??{},Kr=qs("mediasfu-configure-whiteboard__actions",_r),Jr={display:"flex",flexDirection:"column",gap:8,alignItems:"stretch",...Gr},{className:Xr,style:Zr,children:Qr,onClick:ea,...ta}=M??{},ra=qs("btn","btn-success","mediasfu-configure-whiteboard__start-button",Xr),aa={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,...Zr},{className:na,style:oa,children:sa,onClick:ia,...ca}=I??{},da=qs("btn","btn-warning","mediasfu-configure-whiteboard__update-button",na),la={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,...oa},{className:ua,style:pa,children:ma,onClick:ga,...ha}=A??{},fa=qs("btn","btn-danger","mediasfu-configure-whiteboard__stop-button",ua),ba={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:8,...pa},{style:ya,...xa}=T??{},va={border:"none",height:1,backgroundColor:"rgba(0,0,0,0.15)",margin:"8px 0",...ya},Sa=()=>{const e=wa();Ce=e,Te(e)};(0,de.useEffect)(()=>{if(e){const e=ne.filter(e=>"2"!=e.islevel);Ee(e),Sa()}},[e]),(0,de.useEffect)(()=>{se&&se instanceof ee.Socket&&se.on("whiteboardUpdated",async e=>{if("2"==me&&e.members){const t=e.members.filter(e=>!e.isBanned);Ee(t)}Ae(e.whiteboardUsers),"started"==e.status?(je=!0,Pe=!1,Me(!0),Ie(!1),"2"!=me&&(fe=!0,await De({changed:!0,parameters:r}))):"ended"==e.status&&(Pe=!0,je=!1,Me(!1),Ie(!0),fe=!1,await De({changed:!0,parameters:r}),await Le({name:Be,parameters:r}),await Ve({restart:!0,parameters:r}))})},[se,he,me]);const Ra=(e,t)=>{Oe(!0);const r=$e.filter(e=>e.useBoard);if(t&&r.length>=We-1)return void oe?.({message:`Participant limit exceeded - you can only add ${We-1} other participants`,type:"danger"});const a=$e.map(r=>r.name==e.name?{...r,useBoard:t}:r);Ee(a)},wa=()=>!($e.filter(e=>e.useBoard).length>We&&(oe?.({message:"Participant limit exceeded",type:"danger"}),1)),ka=async()=>{if(!fe&&!be||je)if(!ye||xe){if(Ce){const e=je&&!Pe?"updateWhiteboard":"startWhiteboard",t=$e.filter(e=>e.useBoard).map(({name:e,useBoard:t})=>({name:e,useBoard:t}));se.emit(e,{whiteboardUsers:t,roomName:ge},async e=>{e.success?(oe?.({message:"Whiteboard active",type:"success"}),je=!0,Pe=!1,Me(!0),Ie(!1),Fe(!1),"2"!=me&&(fe=!0,await De({changed:!0,parameters:r})),"2"==me&&(ve||Se)&&(Re||we||"video"!=ke||await Ne({parameters:r}))):oe?.({message:e.reason,type:"danger"})})}}else oe?.({message:"You cannot start whiteboard while breakout rooms are active",type:"danger"});else oe?.({message:"You cannot start whiteboard while screen sharing is active",type:"danger"})},Ca=(0,de.useMemo)(()=>$e.filter(e=>e.useBoard),[$e]),ja=(0,de.useMemo)(()=>$e.filter(e=>!e.useBoard),[$e]),Pa=(0,ce.jsx)("h6",{className:Yt,style:Kt,...Gt,children:_t??F}),Ma=(0,ce.jsx)("h6",{className:er,style:tr,...Qt,children:Zt??D}),Ia=E??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes}),Aa=$??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faCheck}),Ta=W??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSave}),Fa=H??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faPlay}),Da=O??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faSyncAlt}),Na=z??(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes}),La=(e,t,r)=>null!=e?e:(0,ce.jsxs)(ce.Fragment,{children:[t,r?(0,ce.jsx)("span",{className:"mediasfu-configure-whiteboard__button-icon",children:r}):null]}),Va="function"==typeof U?U({participants:$e}):U,Ba=Ca.length>0?Ca.map((e,t)=>{const r=()=>Ra(e,!1),a=(0,ce.jsxs)("li",{className:hr,style:fr,...gr,children:[(0,ce.jsx)("span",{children:e.name}),(0,ce.jsx)("button",{type:"button",className:jr,style:Pr,onClick:e=>{kr?.(e),e.defaultPrevented||r()},...Cr,children:Ia})]}),n=X?.({defaultItem:a,participant:e,remove:r,index:t})??a;return le().isValidElement(n)?le().cloneElement(n,{key:e.name}):(0,ce.jsx)(le().Fragment,{children:n},e.name)}):[le().isValidElement(Va)?le().cloneElement(Va,{key:"empty-assigned"}):(0,ce.jsx)(le().Fragment,{children:Va??(0,ce.jsx)("li",{className:hr,style:{...fr,justifyContent:"center"},children:"None"})},"empty-assigned")],$a="function"==typeof q?q({participants:$e}):q,Ea=ja.length>0?ja.map((e,t)=>{const r=()=>Ra(e,!0),a=(0,ce.jsxs)("li",{className:vr,style:Sr,...xr,children:[(0,ce.jsx)("span",{children:e.name}),(0,ce.jsx)("button",{type:"button",className:Fr,style:Dr,onClick:e=>{Ar?.(e),e.defaultPrevented||r()},...Tr,children:Aa})]}),n=Z?.({defaultItem:a,participant:e,add:r,index:t})??a;return le().isValidElement(n)?le().cloneElement(n,{key:e.name}):(0,ce.jsx)(le().Fragment,{children:n},e.name)}):[le().isValidElement($a)?le().cloneElement($a,{key:"empty-pending"}):(0,ce.jsx)(le().Fragment,{children:$a??(0,ce.jsx)("li",{className:vr,style:{...Sr,justifyContent:"center"},children:"None"})},"empty-pending")],Wa=(0,ce.jsxs)("div",{className:Bt,style:$t,...Vt,children:[Pa,(0,ce.jsx)("ul",{className:or,style:sr,ref:ze,...nr,children:Ba})]}),Ha=K?K({defaultAssignedList:Wa,participants:Ca,removeParticipant:e=>Ra(e,!1)}):Wa,Oa=(0,ce.jsxs)("div",{className:Ot,style:zt,...Ht,children:[Ma,(0,ce.jsx)("ul",{className:lr,style:ur,ref:Ue,...dr,children:Ea})]}),za=J?J({defaultPendingList:Oa,participants:ja,addParticipant:e=>Ra(e,!0)}):Oa,Ua=(0,ce.jsxs)("div",{className:Ft,style:Dt,...Tt,children:[Ha,za]}),qa=Y?Y({defaultLists:Ua,assignedParticipants:Ca,pendingParticipants:ja}):Ua,_a=(0,ce.jsx)("button",{type:"button",className:Ur,style:qr,onClick:e=>{Or?.(e),e.defaultPrevented||(wa()?(Oe(!1),Ce=!0,Te(!0),Sa(),oe?.({message:"Whiteboard saved successfully",type:"success"})):oe?.({message:"Whiteboard validation failed",type:"danger"}))},...zr,children:La(Hr,N,Ta)}),Ga=(0,ce.jsx)("div",{className:Br,style:$r,...Vr,children:_a}),Ya=Q?Q({defaultFooter:Ga,isEditing:He,canStartWhiteboard:Ce}):Ga,Ka=(0,ce.jsx)("button",{type:"button",className:ra,style:aa,onClick:e=>{ea?.(e),e.defaultPrevented||ka()},...ta,children:La(Qr,L,Fa)}),Ja=(0,ce.jsx)("button",{type:"button",className:da,style:la,onClick:e=>{ia?.(e),e.defaultPrevented||ka()},...ca,children:La(sa,V,Da)}),Xa=(0,ce.jsx)("button",{type:"button",className:fa,style:ba,onClick:e=>{ga?.(e),e.defaultPrevented||(async()=>{se.emit("stopWhiteboard",{roomName:ge},async e=>{e.success?(oe?.({message:"Whiteboard stopped",type:"success"}),Pe=!0,je=!1,Me(!1),Ie(!0),Fe(!1),fe=!1,await De({changed:!0,parameters:r}),await Le({name:Be,parameters:r}),await Ve({restart:!0,parameters:r})):oe?.({message:e.reason,type:"danger"})})})()},...ha,children:La(ma,B,Na)}),Za=He?null:(0,ce.jsxs)("div",{className:Kr,style:Jr,...Yr,children:[Ce?je&&!Pe?Ja:Ka:null,je&&!Pe?Xa:null]}),Qa=te?te({defaultActions:Za,isEditing:He,canStartWhiteboard:Ce,whiteboardStarted:je,whiteboardEnded:Pe}):Za,en=!He&&Qa?(0,ce.jsx)("hr",{style:va,...xa}):null,tn=(0,ce.jsxs)("div",{className:Pt,style:Mt,...jt,children:[qa,Ya,en,Qa]}),rn=re?re({defaultBody:tn,isEditing:He,assignedParticipants:Ca,pendingParticipants:ja}):tn,an=(0,ce.jsx)("h2",{className:pt,style:mt,...ut,children:lt??o}),nn=_?_({defaultTitle:an}):an,on=(0,ce.jsxs)("div",{className:st,style:it,...ot,children:[nn,(0,ce.jsx)("button",{type:"button",className:yt,style:xt,onClick:e=>{ft?.(e),e.defaultPrevented||t()},...bt,children:vt})]}),sn=G?G({defaultHeader:on}):on,cn=(0,ce.jsx)("hr",{style:wt,...Rt}),dn=(0,ce.jsxs)("div",{className:tt,style:rt,...et,children:[sn,cn,rn]}),ln=ae?ae({defaultContent:dn,isEditing:He,canStartWhiteboard:Ce}):dn;return(0,ce.jsx)("div",{className:Je,style:Xe,...Ke,children:ln})},Gs=({totalPages:e,currentUserPage:t,handlePageChange:r=C,position:a="middle",location:n="middle",direction:o="horizontal",buttonsContainerStyle:s,activePageStyle:i={backgroundColor:"#2c678f"},inactivePageStyle:c,backgroundColor:d="#ffffff",paginationHeight:l=40,showAspect:u=!0,parameters:p,containerProps:m,pageButtonProps:g,renderContainer:h,renderPageButton:f,renderPageContent:b})=>{let{getUpdatedAllParams:y}=p;p=y();const{mainRoomsLength:x,memberRoom:v,breakOutRoomStarted:S,breakOutRoomEnded:R,member:w,breakoutRooms:k,hostNewRoom:j,roomName:P,islevel:M,showAlert:I,socket:A}=p,T=(0,de.useMemo)(()=>Array.from({length:e+1},(e,t)=>t),[e]),{className:F,style:D,...N}=m??{},L=["mediasfu-pagination",F].filter(Boolean).join(" ").trim()||void 0,V=async(e,a=x)=>{if(e!==t)if(S&&!R&&0!==e){const t=k.find(e=>e.find(e=>e.name===w)),n=e-a;let o=-1;if(t&&(o=k.indexOf(t)),(-1===o||o!==n)&&n>=0){if("2"!==M)return void(I&&I({message:`You are not part of the breakout room ${n+1}.`,type:"danger"}));await r({page:e,parameters:p,breakRoom:n,inBreakRoom:!0}),j!==n&&A.emit("updateHostBreakout",{newRoom:n,roomName:P},()=>{})}else await r({page:e,parameters:p,breakRoom:n,inBreakRoom:n>=0}),"2"===M&&-1!==j&&A.emit("updateHostBreakout",{prevRoom:j,newRoom:-1,roomName:P},()=>{})}else await r({page:e,parameters:p,breakRoom:0,inBreakRoom:!1}),"2"===M&&-1!==j&&A.emit("updateHostBreakout",{prevRoom:j,newRoom:-1,roomName:P},()=>{})},B=e=>{const r=e===t,a=0===e;let n=e;if(S&&!R&&e>=x){const t=e-(x-1);n=v+1!==t&&"2"!==M?(0,ce.jsxs)(ce.Fragment,{children:["Room ",t," ",(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faLock})]}):`Room ${t}`}const o=a?(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faStar,size:"lg",color:r?"yellow":"gray"}):(0,ce.jsx)("span",{className:"pageText",style:{color:r?"#ffffff":"#000000"},children:n}),d=b?b({defaultContent:o,page:e,isActive:r,isHomePage:a,label:n}):o,l=g?.({page:e,isActive:r,isHomePage:a}),{onClick:u,className:p,style:m,...h}=l??{},y=["pageButton",r?"active":void 0,p].filter(Boolean).join(" ").trim()||void 0,w={...s??{},...r?i:c,...m},k=(0,ce.jsx)("button",{type:"button",className:y,style:w,onClick:async t=>{u&&await Promise.resolve(u(t)),t.defaultPrevented||await V(e)},...h,children:d},e);return f?f({defaultButton:k,page:e,isActive:r,isHomePage:a,onSelect:()=>V(e),label:n}):k},$={backgroundColor:d,justifyContent:"middle"===a?"space-evenly":"left"===a?"flex-start":"flex-end",alignItems:"middle"===n?"center":"top"===n?"flex-start":"flex-end",padding:0,margin:0,width:"horizontal"===o?"100%":l,height:"horizontal"===o?l:"100%",display:u?"flex":"none",maxHeight:"horizontal"===o?l:"100%",maxWidth:"horizontal"===o?"100%":l,flexDirection:"vertical"===o?"column":"row",...D},E=(0,ce.jsx)("div",{className:L,style:$,...N,children:T.map(e=>(0,ce.jsx)(le().Fragment,{children:B(e)},e))});return h?h({defaultContainer:E,pages:T}):E},Ys=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Ks=le().memo(({customWidth:e,customHeight:t,rows:r,columns:a,componentsToRender:n,backgroundColor:o="transparent",gridWrapperProps:s,rowProps:i,cellProps:c,emptyCellFallback:d,renderCell:l,renderRow:u,renderGrid:p})=>{const{className:m,style:g,...h}=s??{},f=Ys("mediasfu-flexible-grid",m),b={padding:0,display:"flex",flexDirection:"column",...g},{className:y,style:x,...v}=i??{},S=Ys("mediasfu-flexible-grid__row",y),R={display:"flex",flexDirection:"row",...x},{className:w,style:k,...C}=c??{},j=Ys("mediasfu-flexible-grid__cell",w),P={flex:1,width:e,height:t,backgroundColor:o,margin:"1px",padding:0,...k},M=(e,t,r)=>"function"==typeof d?d({row:e,column:t,index:r}):d??null,I=(0,de.useMemo)(()=>{const e=[];for(let t=0;t<r;t++){const r=[];for(let e=0;e<a;e++){const o=t*a+e,s=n[o],i=s??M(t,e,o),c=(le().isValidElement(s)&&null!=s.key?s.key:void 0)??`${t}-${e}`,d=(0,ce.jsx)("div",{className:j,style:P,...C,children:i},c),u=l?l({defaultCell:d,component:s,row:t,column:e,index:o}):d;le().isValidElement(u)?r.push(le().cloneElement(u,{key:u.key??c})):r.push((0,ce.jsx)(le().Fragment,{children:u},`${t}-${e}`))}const o=(0,ce.jsx)("div",{className:S,style:R,...v,children:r},t),s=u?u({defaultRow:o,rowIndex:t,cells:r}):o;le().isValidElement(s)?e.push(le().cloneElement(s,{key:s.key??t})):e.push((0,ce.jsx)(le().Fragment,{children:s},t))}return e},[r,a,n,j,P,C,l,u,S,R,v,d]),A=(0,ce.jsx)("div",{className:f,style:b,...h,children:I}),T=p?p({defaultGrid:A,rows:I}):A;return(0,ce.jsx)(ce.Fragment,{children:T})},(e,t)=>{if(e.customWidth!==t.customWidth||e.customHeight!==t.customHeight||e.rows!==t.rows||e.columns!==t.columns||e.backgroundColor!==t.backgroundColor||e.gridWrapperProps!==t.gridWrapperProps||e.rowProps!==t.rowProps||e.cellProps!==t.cellProps||e.emptyCellFallback!==t.emptyCellFallback||e.renderCell!==t.renderCell||e.renderRow!==t.renderRow||e.renderGrid!==t.renderGrid)return!1;const r=e.componentsToRender,a=t.componentsToRender;if(r.length!==a.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==a[e])return!1;return!0}),Js=(...e)=>{const t=e.filter(Boolean).join(" ").trim();return t.length>0?t:void 0},Xs=le().memo(({customWidth:e,customHeight:t,rows:r,columns:a,componentsToRender:n,showAspect:o=!1,backgroundColor:s="transparent",Screenboard:i,annotateScreenStream:c=!1,localStreamScreen:d,containerProps:l,rowProps:u,cellProps:p,screenboardContainerProps:m,renderCell:g,renderRow:h,renderGrid:f,renderScreenboard:b})=>{const[y,x]=(0,de.useState)(0),[v,S]=(0,de.useState)(0),[R,w]=(0,de.useState)(0),[k,C]=(0,de.useState)(0);(0,de.useEffect)(()=>{if(c&&d){const t=d.getVideoTracks()[0];if(t){const r=t.getSettings().height||0,a=t.getSettings().width||0;x(a),S(r);const n=Math.floor((e-a)/2);w(n),C(n<0?n:0)}}else x(e),S(t),w(0),C(0)},[e,t,d,c]);const{className:j,style:P,...M}=l??{},I=Js("mediasfu-flexible-video",j),A={padding:0,flex:1,margin:0,position:"relative",display:o?"flex":"none",maxWidth:e,overflowX:"hidden",overflowY:"auto",left:R>0?R:0,...P??{}},{className:T,style:F,...D}=u??{},N=Js("mediasfu-flexible-video__row",T),L={display:"flex",flexDirection:"row",...F??{}},{className:V,style:B,...$}=p??{},E=Js("mediasfu-flexible-video__cell",V),W={flex:1,width:y,height:v,backgroundColor:s,margin:"1px",padding:0,borderRadius:"0px",left:R,...B??{}},H=[];for(let e=0;e<r;e++){const t=[];for(let r=0;r<a;r++){const o=e*a+r,s=n[o],i=(le().isValidElement(s)&&null!=s.key?s.key:void 0)??`${e}-${r}`,c=(0,ce.jsx)("div",{className:E,style:W,...$,children:s},i),d=g?g({defaultCell:c,component:s,row:e,column:r,index:o}):c;le().isValidElement(d)?t.push(le().cloneElement(d,{key:d.key??i})):t.push((0,ce.jsx)(le().Fragment,{children:d},`${e}-${r}`))}const r=(0,ce.jsx)("div",{className:N,style:L,...D,children:t},e),o=h?h({defaultRow:r,rowIndex:e,cells:t}):r;le().isValidElement(o)?H.push(le().cloneElement(o,{key:o.key??e})):H.push((0,ce.jsx)(le().Fragment,{children:o},e))}const{className:O,style:z,...U}=m??{},q=Js("mediasfu-flexible-video__screenboard",O),_={position:"absolute",top:0,left:k,width:y,height:v,backgroundColor:"rgba(0, 0, 0, 0.005)",zIndex:2,pointerEvents:c?"auto":"none",...z??{}},G=i?(0,ce.jsx)("div",{className:q,style:_,...U,children:i}):null,Y=b?b({defaultScreenboard:G}):G,K=(0,ce.jsxs)("div",{className:I,style:A,...M,children:[H,Y]}),J=f?f({defaultGrid:K,rows:H}):K;return(0,ce.jsx)(ce.Fragment,{children:J})}),Zs=({updateIsMenuModalVisible:e,isMenuModalVisible:t})=>{e(!t)},Qs=({updateIsWaitingModalVisible:e,isWaitingModalVisible:t})=>{e(!t)},ei=({updateIsCoHostModalVisible:e,isCoHostModalVisible:t})=>{e(!t)},ti=({updateIsDisplaySettingsModalVisible:e,isDisplaySettingsModalVisible:t})=>{e(!t)},ri=({updateIsSettingsModalVisible:e,isSettingsModalVisible:t})=>{e(!t)},ai=({updateIsRequestsModalVisible:e,isRequestsModalVisible:t})=>{e(!t)},ni=({updateIsParticipantsModalVisible:e,isParticipantsModalVisible:t})=>{e(!t)},oi=({updateIsMessagesModalVisible:e,isMessagesModalVisible:t})=>{e(!t)},si=({updateIsPollModalVisible:e,isPollModalVisible:t})=>{e(!t)},ii=({updateIsBackgroundModalVisible:e,isBackgroundModalVisible:t})=>{e(!t)},ci=({updateIsBreakoutRoomsModalVisible:e,isBreakoutRoomsModalVisible:t})=>{e(!t)},di=({updateIsConfigureWhiteboardModalVisible:e,isConfigureWhiteboardModalVisible:t})=>{e(!t)},li=({PrejoinPage:e=ks,localLink:t="",connectMediaSFU:r=!0,credentials:a={apiUserName:"",apiKey:""},useLocalUIMode:n=!1,seedData:o={},useSeed:s=!1,imgSrc:i="https://mediasfu.com/images/logo192.png",sourceParameters:c,updateSourceParameters:d,returnUI:l=!0,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m,customVideoCard:g,customAudioCard:h,customMiniCard:f,customPreJoinPage:b,customComponent:x,containerStyle:v,uiOverrides:R})=>{const k=(0,de.useMemo)(()=>Ua(R?.mainContainer,He),[R?.mainContainer]),C=(0,de.useMemo)(()=>Ua(R?.mainAspect,ge),[R?.mainAspect]),j=(0,de.useMemo)(()=>Ua(R?.mainScreen,$e),[R?.mainScreen]),P=(0,de.useMemo)(()=>Ua(R?.mainGrid,Ee),[R?.mainGrid]),M=(0,de.useMemo)(()=>Ua(R?.subAspect,We),[R?.subAspect]),I=(0,de.useMemo)(()=>Ua(R?.otherGrid,Be),[R?.otherGrid]),A=(0,de.useMemo)(()=>Ua(R?.flexibleGrid,Ks),[R?.flexibleGrid]),T=(0,de.useMemo)(()=>Ua(R?.flexibleGridAlt,Ks),[R?.flexibleGridAlt]),F=(0,de.useMemo)(()=>Ua(R?.flexibleVideo,Xs),[R?.flexibleVideo]),D=(0,de.useMemo)(()=>Ua(R?.audioGrid,ht),[R?.audioGrid]),N=(0,de.useMemo)(()=>Ua(R?.pagination,Gs),[R?.pagination]),L=(0,de.useMemo)(()=>Ua(R?.controlButtons,he),[R?.controlButtons]),V=(0,de.useMemo)(()=>Ua(R?.controlButtonsAlt,ve),[R?.controlButtonsAlt]),B=(0,de.useMemo)(()=>Ua(R?.controlButtonsTouch,Ce),[R?.controlButtonsTouch]),$=(0,de.useMemo)(()=>Ua(R?.whiteboard,ut),[R?.whiteboard]),E=(0,de.useMemo)(()=>Ua(R?.screenboard,pt),[R?.screenboard]),W=(0,de.useMemo)(()=>Ua(R?.videoCard,dn),[R?.videoCard]),H=(0,de.useMemo)(()=>Ua(R?.audioCard,pn),[R?.audioCard]),O=(0,de.useMemo)(()=>Ua(R?.miniCard,sn),[R?.miniCard]),z=(0,de.useMemo)(()=>Ua(R?.miniAudio,jt),[R?.miniAudio]),U=(0,de.useMemo)(()=>Ua(R?.meetingProgressTimer,Ve),[R?.meetingProgressTimer]),q=(0,de.useMemo)(()=>Ua(R?.miniAudioPlayer,yn),[R?.miniAudioPlayer]),_=(0,de.useMemo)(()=>qa(R?.consumerResume,xn),[R?.consumerResume]),G=(0,de.useMemo)(()=>qa(R?.addVideosGrid,Mn),[R?.addVideosGrid]),Y=(0,de.useMemo)(()=>Ua(R?.loadingModal,Ko),[R?.loadingModal]),K=(0,de.useMemo)(()=>Ua(R?.alert,Xo),[R?.alert]),J=(0,de.useMemo)(()=>Ua(R?.menuModal,as),[R?.menuModal]),X=(0,de.useMemo)(()=>Ua(R?.eventSettingsModal,cs),[R?.eventSettingsModal]),Z=(0,de.useMemo)(()=>Ua(R?.requestsModal,os),[R?.requestsModal]),Q=(0,de.useMemo)(()=>Ua(R?.waitingRoomModal,ss),[R?.waitingRoomModal]),ee=(0,de.useMemo)(()=>Ua(R?.coHostModal,ds),[R?.coHostModal]),te=(0,de.useMemo)(()=>Ua(R?.mediaSettingsModal,ys),[R?.mediaSettingsModal]),re=(0,de.useMemo)(()=>Ua(R?.participantsModal,hs),[R?.participantsModal]),ae=(0,de.useMemo)(()=>Ua(R?.messagesModal,bs),[R?.messagesModal]),ne=(0,de.useMemo)(()=>Ua(R?.displaySettingsModal,is),[R?.displaySettingsModal]),oe=(0,de.useMemo)(()=>Ua(R?.confirmExitModal,xs),[R?.confirmExitModal]),se=(0,de.useMemo)(()=>Ua(R?.confirmHereModal,vs),[R?.confirmHereModal]),fe=(0,de.useMemo)(()=>Ua(R?.shareEventModal,Ss),[R?.shareEventModal]),be=(0,de.useMemo)(()=>Ua(R?.recordingModal,ns),[R?.recordingModal]),ye=(0,de.useMemo)(()=>Ua(R?.pollModal,Ws),[R?.pollModal]),xe=(0,de.useMemo)(()=>Ua(R?.backgroundModal,Hs),[R?.backgroundModal]),Se=(0,de.useMemo)(()=>Ua(R?.breakoutRoomsModal,Us),[R?.breakoutRoomsModal]),Re=(0,de.useMemo)(()=>Ua(R?.configureWhiteboardModal,_s),[R?.configureWhiteboardModal]),we=(0,de.useMemo)(()=>Ua(R?.screenboardModal,mt),[R?.screenboardModal]),ke=(0,de.useMemo)(()=>Ua(R?.welcomePage,ks),[R?.welcomePage]),je=(0,de.useMemo)(()=>Ua(R?.preJoinPage,e),[R?.preJoinPage]),[Pe,Me]=(0,de.useState)(n),Ie=(0,de.useRef)(n),Ae=(0,de.useRef)({}),Te=(0,de.useRef)(null),Fe=(0,de.useRef)(null),De=(0,de.useRef)(null),Ne=(0,de.useRef)(""),Le=(0,de.useRef)(""),Oe=(0,de.useRef)(""),ze=(0,de.useRef)(""),Ue=(0,de.useRef)(s&&o?.member?o?.member:""),qe=(0,de.useRef)(""),_e=(0,de.useRef)(s&&o?.member&&o.member==o?.host?"2":"1"),Ge=(0,de.useRef)(""),Ye=(0,de.useRef)([{name:"participants",value:!1,dedicated:!1},{name:"media",value:!1,dedicated:!1},{name:"waiting",value:!1,dedicated:!1},{name:"chat",value:!1,dedicated:!1}]),Ke=(0,de.useRef)(!!Ge.current&&Ge.current==Ue.current),Je=(0,de.useRef)(!!_e&&"2"==_e.current),Xe=(0,de.useRef)(!1),Ze=(0,de.useRef)("media"),Qe=(0,de.useRef)(!1),et=(0,de.useRef)(s&&o?.eventType?o?.eventType:"webinar"),tt=(0,de.useRef)(s&&o?.participants?o?.participants:[]),rt=(0,de.useRef)(tt.current),at=(0,de.useRef)(0),nt=(0,de.useRef)(""),ot=(0,de.useRef)([]),st=(0,de.useRef)(null),it=(0,de.useRef)([]),ct=(0,de.useRef)(null),dt=(0,de.useRef)(4),lt=(0,de.useRef)(!1),gt=(0,de.useRef)(!1),ft=(0,de.useRef)(4),bt=(0,de.useRef)(!1),yt=(0,de.useRef)(!1),xt=(0,de.useRef)("landscape"),vt=(0,de.useRef)("sd"),St=(0,de.useRef)("sd"),Rt=(0,de.useRef)({width:640,height:360}),wt=(0,de.useRef)(10),kt=(0,de.useRef)({}),Ct=(0,de.useRef)({}),Pt=(0,de.useRef)({}),Mt=(0,de.useRef)({}),It=(0,de.useRef)(0),At=(0,de.useRef)(0),Tt=(0,de.useRef)(!1),Ft=(0,de.useRef)(0),Dt=(0,de.useRef)(0),Nt=(0,de.useRef)(0),Lt=(0,de.useRef)(0),Vt=(0,de.useRef)(!1),Bt=(0,de.useRef)(0),$t=(0,de.useRef)(0),Et=(0,de.useRef)(!1),Wt=(0,de.useRef)(!1),Ht=(0,de.useRef)(!1),Ot=(0,de.useRef)(!1),zt=(0,de.useRef)("landscape"),Ut=(0,de.useRef)(!1),qt=(0,de.useRef)(!1),_t=(0,de.useRef)({mainSpecs:{mediaOptions:"video",audioOptions:"all",videoOptions:"all",videoType:"fullDisplay",videoOptimized:!1,recordingDisplayType:"media",addHLS:!1},dispSpecs:{nameTags:!0,backgroundColor:"#000000",nameTagsColor:"#ffffff",orientationVideo:"portrait"}}),Gt=(0,de.useRef)(!1),Yt=(0,de.useRef)(!1),Kt=(0,de.useRef)(!1),Jt=(0,de.useRef)(null),Xt=(0,de.useRef)(0),Zt=(0,de.useRef)(0),Qt=(0,de.useRef)(!1),er=(0,de.useRef)(!1),tr=(0,de.useRef)(15e3),rr=(0,de.useRef)(0),ar=(0,de.useRef)(0),nr=(0,de.useRef)(!0),or=(0,de.useRef)(!1),sr=(0,de.useRef)(!1),ir=(0,de.useRef)(!1),cr=(0,de.useRef)(!1),dr=(0,de.useRef)(!1),lr=(0,de.useRef)(!1),ur=(0,de.useRef)(""),pr=(0,de.useRef)([]),mr=(0,de.useRef)([]),gr=(0,de.useRef)([]),hr=(0,de.useRef)([]),br=(0,de.useRef)(""),yr=(0,de.useRef)(""),xr=(0,de.useRef)(""),vr=(0,de.useRef)(""),Sr=(0,de.useRef)([]),Rr=(0,de.useRef)([]),wr=(0,de.useRef)(null),kr=(0,de.useRef)(!1),Cr=(0,de.useRef)(!1),jr=(0,de.useRef)(!1),Pr=(0,de.useRef)(!1),Mr=(0,de.useRef)(!1),Ir=(0,de.useRef)(null),Ar=(0,de.useRef)(0),Tr=(0,de.useRef)(!1),Fr=(0,de.useRef)(null),Dr=(0,de.useRef)(""),Nr=(0,de.useRef)("user"),Lr=(0,de.useRef)("user"),Vr=(0,de.useRef)(""),Br=(0,de.useRef)(!1),$r=(0,de.useRef)([]),Er=(0,de.useRef)([]),Wr=(0,de.useRef)([]),Hr=(0,de.useRef)([]),Or=(0,de.useRef)([]),zr=(0,de.useRef)(!1),Ur=(0,de.useRef)(!1),qr=(0,de.useRef)(!1),_r=(0,de.useRef)(!1),Gr=(0,de.useRef)(!1),Yr=(0,de.useRef)(!1),Kr=(0,de.useRef)(null),Jr=(0,de.useRef)(null),Xr=(0,de.useRef)(null),Zr=(0,de.useRef)(0),Qr=(0,de.useRef)(0),ea=(0,de.useRef)(0),ta=(0,de.useRef)(240),ra=(0,de.useRef)([]),aa=(0,de.useRef)("Host"),na=(0,de.useRef)(!1),oa=(0,de.useRef)(null),[pa,ha]=(0,de.useState)(!1),[ba,ya]=(0,de.useState)(!1),xa=(0,de.useRef)(""),va=(0,de.useRef)([]),Sa=(0,de.useRef)(""),Ra=(0,de.useRef)([]),wa=(0,de.useRef)([]),ka=(0,de.useRef)(!1),Ca=(0,de.useRef)([]),ja=(0,de.useRef)([]),Pa=(0,de.useRef)([]),Ma=(0,de.useRef)([]),Ia=(0,de.useRef)(null),Aa=(0,de.useRef)(""),Ta=(0,de.useRef)(""),Da=(0,de.useRef)(""),za=(0,de.useRef)(""),en=(0,de.useRef)(""),tn=(0,de.useRef)(!1),rn=(0,de.useRef)(""),an=(0,de.useRef)(!1),nn=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),on=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),cn=(0,de.useRef)(null),ln=(0,de.useRef)(null),un=(0,de.useRef)(0),bn=(0,de.useRef)(4),Hn=(0,de.useRef)(!1),To=(0,de.useRef)(0),Do=(0,de.useRef)(3e4),No=(0,de.useRef)(1e4),Ho=(0,de.useRef)(0),Oo=(0,de.useRef)([]),zo=(0,de.useRef)(0),[Yo,Jo]=(0,de.useState)("webinar"===et.current?67:"broadcast"===et.current?100:0),Zo=(0,de.useRef)(Yo),Qo=(0,de.useRef)(!1),es=(0,de.useRef)(!1),ts=(0,de.useRef)(!1),rs=(0,de.useRef)([]),ls=(0,de.useRef)([]),[us,ps]=(0,de.useState)(0),ms=(0,de.useRef)(!1),gs=(0,de.useRef)(!1),fs=(0,de.useRef)(!1),Rs=(0,de.useRef)(!1),ws=(0,de.useRef)(!1),[Cs,js]=(0,de.useState)(0),[Ps,Ms]=(0,de.useState)(0),[Is,As]=(0,de.useState)(0),[Ts,Fs]=(0,de.useState)(0),[Ds,Ns]=(0,de.useState)(0),Ls=(0,de.useRef)([]),[Vs,Bs]=(0,de.useState)(!1),$s=(0,de.useRef)(null),Es=(0,de.useRef)(!1),Os=(0,de.useRef)([]),zs=(0,de.useRef)([]),qs=(0,de.useRef)(null),Ys=(0,de.useRef)(null),Js=(0,de.useRef)(!1),ii=(0,de.useRef)(40),li=(0,de.useRef)("horizontal"),ui=(0,de.useRef)({gridWidth:0,gridHeight:0,altGridWidth:0,altGridHeight:0}),pi=(0,de.useRef)(!1),mi=(0,de.useRef)([]),[gi,hi]=(0,de.useState)([[],[]]),fi=(0,de.useRef)([]),[bi,yi]=(0,de.useState)([]),[xi,vi]=(0,de.useState)([]),[Si,Ri]=(0,de.useState)("00:00:00"),wi=(0,de.useRef)(0),ki=(0,de.useRef)([]),Ci=(0,de.useRef)([]),ji=e=>{Me(e)},Pi=e=>{Ae.current=e},Mi=e=>{Te.current=e},Ii=e=>{De.current=e},Ai=e=>{Ne.current=e},Ti=e=>{Le.current=e},Fi=e=>{Oe.current=e},Di=e=>{ze.current=e},Ni=e=>{e.length>0&&e.includes("_")&&(Vi(e.split("_")[1]),e=e.split("_")[0]),Ue.current=e},Li=e=>{qe.current=e},Vi=e=>{_e.current=e},Bi=e=>{Ge.current=e},$i=e=>{Ye.current=e},Ei=e=>{Ke.current=e},Wi=e=>{Je.current=e},Hi=e=>{Xe.current=e},Oi=e=>{Ze.current=e},zi=e=>{Qe.current=e},Ui=e=>{if(et.current=e,"none"!=e)try{setTimeout(()=>{hb()},1e3)}catch{}},qi=e=>{tt.current=e,rt.current=e,at.current=e.length},_i=e=>{at.current=e},Gi=e=>{nt.current=e},Yi=e=>{It.current=e},Ki=e=>{At.current=e},Ji=e=>{Tt.current=e},Xi=e=>{Ft.current=e},Zi=e=>{Dt.current=e},Qi=e=>{Nt.current=e},ec=e=>{Lt.current=e},tc=e=>{Vt.current=e},rc=e=>{Bt.current=e},ac=e=>{$t.current=e},nc=e=>{Et.current=e},oc=e=>{Wt.current=e},sc=e=>{Ht.current=e},ic=e=>{Ot.current=e},cc=e=>{zt.current=e},dc=e=>{Ut.current=e},lc=e=>{qt.current=e},uc=e=>{_t.current=e},pc=e=>{Gt.current=e},mc=e=>{Yt.current=e},gc=e=>{Kt.current=e},hc=e=>{Jt.current=e},fc=e=>{Xt.current=e},bc=e=>{Zt.current=e},yc=e=>{Qt.current=e},xc=e=>{er.current=e},vc=e=>{tr.current=e},Sc=e=>{rr.current=e},Rc=e=>{ar.current=e},wc=e=>{nr.current=e},kc=e=>{or.current=e},Cc=e=>{Ci.current=e},jc=e=>{ot.current=e},Pc=e=>{st.current=e},Mc=e=>{it.current=e},Ic=e=>{ct.current=e},Ac=e=>{dt.current=e},Tc=e=>{lt.current=e},Fc=e=>{gt.current=e},Dc=e=>{ft.current=e},Nc=e=>{bt.current=e},Lc=e=>{yt.current=e,ab(e),e&&setTimeout(async()=>{window.dispatchEvent(new Event("resize"))},2e3)},Vc=e=>{xt.current=e},Bc=e=>{vt.current=e},$c=e=>{St.current=e},Ec=e=>{Rt.current=e},Wc=e=>{wt.current=e},Hc=e=>{kt.current=e},Oc=e=>{Ct.current=e},zc=e=>{Pt.current=e},Uc=e=>{Mt.current=e},qc=e=>{sr.current=e},_c=e=>{ir.current=e},Gc=e=>{cr.current=e},Yc=e=>{dr.current=e},Kc=e=>{lr.current=e},Jc=e=>{ur.current=e},Xc=e=>{pr.current=e},Zc=e=>{mr.current=e},Qc=e=>{gr.current=e},ed=e=>{hr.current=e},td=e=>{br.current=e},rd=e=>{yr.current=e},ad=e=>{xr.current=e},nd=e=>{vr.current=e},od=e=>{Sr.current=e},sd=e=>{Rr.current=e},id=e=>{wr.current=e},cd=e=>{kr.current=e},dd=e=>{Cr.current=e},ld=e=>{jr.current=e},ud=e=>{Pr.current=e},pd=e=>{Mr.current=e},md=e=>{Ir.current=e},gd=e=>{Ar.current=e},hd=e=>{Tr.current=e},fd=e=>{Fr.current=e},bd=e=>{Dr.current=e},yd=e=>{Nr.current=e},xd=e=>{Lr.current=e},vd=e=>{Vr.current=e},Sd=e=>{Br.current=e},Rd=e=>{$r.current=e},wd=e=>{Er.current=e},kd=e=>{Wr.current=e},Cd=e=>{Hr.current=e},jd=e=>{Or.current=e},Pd=e=>{zr.current=e},Md=e=>{Ur.current=e},Id=e=>{qr.current=e},Ad=e=>{_r.current=e},Td=e=>{Gr.current=e},Fd=e=>{Yr.current=e},Dd=e=>{Kr.current=e},Nd=e=>{Jr.current=e},Ld=e=>{Xr.current=e},Vd=e=>{Zr.current=e},Bd=e=>{Qr.current=e},$d=e=>{ea.current=e},Ed=e=>{ra.current=e},Wd=e=>{aa.current=e},Hd=e=>{na.current=e},Od=e=>{oa.current=e},zd=e=>{ha(e)},Ud=e=>{ya(e)},qd=e=>{xa.current=e},_d=e=>{va.current=e},Gd=e=>{Sa.current=e},Yd=e=>{Ra.current=e},Kd=e=>{wa.current=e},Jd=e=>{ka.current=e},Xd=e=>{Ca.current=e},Zd=e=>{ja.current=e},Qd=e=>{Pa.current=e},el=e=>{Ma.current=e},tl=e=>{Ia.current=e},rl=e=>{Aa.current=e},al=e=>{Ta.current=e},nl=e=>{Da.current=e},ol=e=>{za.current=e},sl=e=>{en.current=e},il=e=>{tn.current=e},cl=e=>{rn.current=e},dl=e=>{an.current=e},ll=e=>{nn.current=e},ul=e=>{on.current=e},pl=e=>{cn.current=e},ml=e=>{ln.current=e},gl=e=>{un.current=e},hl=e=>{bn.current=e},fl=e=>{Hn.current=e},bl=e=>{To.current=e},yl=e=>{Ho.current=e},xl=e=>{Oo.current=e},vl=e=>{zo.current=e},Sl=e=>{Jo(e)},Rl=e=>{Zo.current=e},wl=e=>{Qo.current=e},kl=e=>{es.current=e},Cl=e=>{ts.current=e},jl=e=>{rs.current=e},Pl=e=>{ls.current=e},Ml=e=>{ps(e)},Il=e=>{ms.current=e},Al=e=>{gs.current=e},Tl=e=>{fs.current=e},Fl=e=>{Rs.current=e},Dl=e=>{ws.current=e},Nl=e=>{js(e)},Ll=e=>{Ms(e)},Vl=e=>{As(e)},Bl=e=>{Fs(e)},$l=e=>{Ns(e)},El=e=>{Ls.current=e},Wl=e=>{Bs(e)},Hl=e=>{$s.current=e},Ol=e=>{Es.current=e},zl=e=>{Os.current=e},Ul=e=>{zs.current=e},ql=e=>{qs.current=e},_l=e=>{Ys.current=e},Gl=e=>{Js.current=e},Yl=e=>{ii.current=e},Kl=e=>{li.current=e},Jl=e=>{ui.current=e},Xl=e=>{pi.current=e},Zl=e=>{mi.current=e},Ql=e=>{hi(e)},eu=e=>{fi.current=e},tu=e=>{yi(e)},ru=e=>{vi(e)},au=e=>{Ri(e)},nu=e=>{wi.current=e},ou=e=>{ki.current=e},su=(0,de.useRef)(s&&o?.messages?o.messages:[]),iu=(0,de.useRef)(!1),cu=(0,de.useRef)(null),[du,lu]=(0,de.useState)(!1),uu=(0,de.useRef)("allow"),pu=(0,de.useRef)("allow"),mu=(0,de.useRef)("allow"),gu=(0,de.useRef)("allow"),hu=(0,de.useRef)(Ze.current?Ze.current:"media"),fu=(0,de.useRef)(!0),bu=(0,de.useRef)("webinar"!==et.current&&"conference"!==et.current),yu=(0,de.useRef)(!1),xu=(0,de.useRef)("video"),vu=(0,de.useRef)(""),Su=(0,de.useRef)(s&&o?.waitingList?o.waitingList:[]),Ru=(0,de.useRef)(0),wu=(0,de.useRef)(Su.current),ku=(0,de.useRef)(""),Cu=(0,de.useRef)(s&&o?.requests?o.requests:[]),ju=(0,de.useRef)(0),Pu=(0,de.useRef)(Cu.current),Mu=(0,de.useRef)(0),[Iu,Au]=(0,de.useState)(!1),[Tu,Fu]=(0,de.useState)(""),[Du,Nu]=(0,de.useState)("info"),[Lu,Vu]=(0,de.useState)(3e3),[Bu]=(0,de.useState)(!0),[$u]=(0,de.useState)(0),[Eu,Wu]=(0,de.useState)(!1),[Hu,Ou]=(0,de.useState)(!1),[zu,Uu]=(0,de.useState)(!1),[qu,_u]=(0,de.useState)(!1),[Gu,Yu]=(0,de.useState)(!1),[Ku,Ju]=(0,de.useState)(!1),[Xu,Zu]=(0,de.useState)(!1),[Qu,ep]=(0,de.useState)(!1),[tp,rp]=(0,de.useState)(!1),[ap,np]=(0,de.useState)(!1),[op,sp]=(0,de.useState)(!1),[ip,cp]=(0,de.useState)(!1),[dp,lp]=(0,de.useState)(!1),[up,pp]=(0,de.useState)(!1),mp=(0,de.useRef)("video"),gp=(0,de.useRef)("all"),hp=(0,de.useRef)("all"),fp=(0,de.useRef)("fullDisplay"),bp=(0,de.useRef)(!1),yp=(0,de.useRef)("media"),xp=(0,de.useRef)(!0),vp=(0,de.useRef)(!0),[Sp,Rp]=(0,de.useState)("#83c0e9"),[wp,kp]=(0,de.useState)("#ffffff"),Cp=(0,de.useRef)(!1),jp=(0,de.useRef)("Add Text"),Pp=(0,de.useRef)("top"),[Mp,Ip]=(0,de.useState)("#ffffff"),Ap=(0,de.useRef)("landscape"),Tp=(0,de.useRef)(!0),Fp=(0,de.useRef)(!0),[Dp,Np]=(0,de.useState)("green"),[Lp,Vp]=(0,de.useState)(!1),[Bp,$p]=(0,de.useState)("00:00:00"),[Ep,Wp]=(0,de.useState)(!1),[Hp,Op]=(0,de.useState)(!1),zp=(0,de.useRef)(!1),Up=(0,de.useRef)(!1),qp={mainHeight:0,otherHeight:0,mainWidth:0,otherWidth:0},[_p,Gp]=(0,de.useState)(qp),Yp=(0,de.useRef)(qp),Kp=(0,de.useRef)({rows:0,cols:0,actualRows:0}),Jp=(0,de.useRef)({rows:0,cols:0,actualRows:0}),[Xp,Zp]=(0,de.useState)(!1),[Qp,em]=(0,de.useState)(!1),tm=(0,de.useRef)(!1),rm=(0,de.useRef)(!1),am=(0,de.useRef)(!1),nm=(0,de.useRef)(!1),om=(0,de.useRef)(!1),sm=(0,de.useRef)(null),im=(0,de.useRef)(null),cm=(0,de.useRef)(null),dm=(0,de.useRef)(null),lm=(0,de.useRef)({}),um=(0,de.useRef)({}),pm=(0,de.useRef)({}),mm=(0,de.useRef)(null),gm=(0,de.useRef)(0),hm=(0,de.useRef)(null),fm=(0,de.useRef)([]),bm=(0,de.useRef)([]),ym=(0,de.useRef)(s&&o?.polls?o.polls:[]),xm=(0,de.useRef)(null),[vm,Sm]=(0,de.useState)(!1),Rm=(0,de.useRef)(null),wm=(0,de.useRef)([]),km=(0,de.useRef)(!1),Cm=(0,de.useRef)(!1),jm=(0,de.useRef)(!1),Pm=(0,de.useRef)(""),Mm=(0,de.useRef)(""),Im=(0,de.useRef)(null),Am=(0,de.useRef)(null),Tm=(0,de.useRef)(!1),Fm=(0,de.useRef)(null),Dm=(0,de.useRef)(!1),Nm=(0,de.useRef)(!1),Lm=(0,de.useRef)(null),Vm=(0,de.useRef)(null),Bm=(0,de.useRef)(!1),$m=(0,de.useRef)(!1),[Em,Wm]=(0,de.useState)(!1),Hm=(0,de.useRef)(!1),Om=(0,de.useRef)(s&&o?.breakoutRooms?o.breakoutRooms:[]),zm=(0,de.useRef)(0),Um=(0,de.useRef)(!1),qm=(0,de.useRef)(!1),_m=(0,de.useRef)(!1),Gm=(0,de.useRef)(-1),Ym=(0,de.useRef)([]),Km=(0,de.useRef)(0),Jm=(0,de.useRef)(-1),[Xm,Zm]=(0,de.useState)(!1),Qm=(0,de.useRef)(s&&o?.whiteboardUsers?o.whiteboardUsers:[]),eg=(0,de.useRef)(null),tg=(0,de.useRef)(!1),rg=(0,de.useRef)(!1),ag=(0,de.useRef)(!1),ng=(0,de.useRef)(dt.current),[og,sg]=(0,de.useState)(!1),[ig,cg]=(0,de.useState)(!1),dg=(0,de.useRef)([]),lg=(0,de.useRef)(!0),ug=(0,de.useRef)([]),pg=(0,de.useRef)([]),mg=(0,de.useRef)(null),gg=(0,de.useRef)(null),hg=(0,de.useRef)(null),fg=(0,de.useRef)(null),bg=(0,de.useRef)(!1),yg=(0,de.useRef)(null),[xg,vg]=(0,de.useState)(!1),Sg=e=>{su.current=e},Rg=e=>{iu.current=e},wg=e=>{cu.current=e},kg=e=>{lu(e)},Cg=e=>{uu.current=e},jg=e=>{pu.current=e},Pg=e=>{mu.current=e},Mg=e=>{gu.current=e},Ig=e=>{hu.current=e},Ag=e=>{fu.current=e},Tg=e=>{bu.current=e},Fg=e=>{yu.current=e},Dg=e=>{xu.current=e},Ng=e=>{Ru.current=e},Lg=e=>{vu.current=e},Vg=e=>{Su.current=e,wu.current=e,Ru.current=e.length},Bg=e=>{ju.current=e},$g=e=>{ku.current=e},Eg=e=>{Cu.current=e,Pu.current=e,ju.current=e.length},Wg=e=>{Mu.current=e},Hg=e=>{Wu(e)},Og=e=>{Ou(e),1==e?Hi(!1):1==Fp.current&&1==Tp.current&&1==kr.current&&xh(!0)},zg=e=>{Uu(e)},Ug=e=>{_u(e)},qg=e=>{Yu(e)},_g=e=>{Ju(e)},Gg=e=>{Zu(e)},Yg=e=>{ep(e)},Kg=e=>{rp(e)},Jg=e=>{np(e),0==e&&kg(!1)},Xg=e=>{sp(e)},Zg=e=>{cp(e)},Qg=e=>{pp(e)},eh=e=>{lp(e)},th=e=>{mp.current=e,Fp.current=!1},rh=e=>{gp.current=e,Fp.current=!1},ah=e=>{hp.current=e,Fp.current=!1},nh=e=>{fp.current=e,Fp.current=!1},oh=e=>{bp.current=e,Fp.current=!1},sh=e=>{yp.current=e,Fp.current=!1},ih=e=>{xp.current=e,Fp.current=!1},ch=e=>{Cp.current=e,Fp.current=!1},dh=e=>{jp.current=e,Fp.current=!1},lh=e=>{Pp.current=e,Fp.current=!1},uh=e=>{Ip(e),Fp.current=!1},ph=e=>{vp.current=e,Fp.current=!1},mh=e=>{Rp(e),Fp.current=!1},gh=e=>{kp(e),Fp.current=!1},hh=e=>{Ap.current=e,Fp.current=!1},fh=e=>{Tp.current=e},bh=e=>{Fp.current=e},yh=e=>{Np(e)},xh=e=>{Vp(e)},vh=e=>{$p(e)},Sh=e=>{Wp(e)},Rh=e=>{Op(e)},wh=e=>{zp.current=e,tb(e)},kh=e=>{Up.current=e,Qf(e)},Ch=(0,de.useCallback)(e=>{Gp(t=>{if(t.mainHeight===e.mainHeight&&t.otherHeight===e.otherHeight&&t.mainWidth===e.mainWidth&&t.otherWidth===e.otherWidth)return Yp.current=t,t;const r={...e};return Yp.current=r,r})},[]),jh=e=>{Kp.current=e},Ph=e=>{Jp.current=e},Mh=e=>{Zp(e)},Ih=e=>{em(e)},Ah=async()=>"granted",Th=async()=>"granted",Fh=e=>{tm.current=e},Dh=e=>{rm.current=e},Nh=e=>{am.current=e},Lh=e=>{nm.current=e},Vh=e=>{om.current=e},Bh=e=>{sm.current=e},$h=e=>{im.current=e},Eh=e=>{cm.current=e},Wh=e=>{dm.current=e},Hh=e=>{lm.current=e},Oh=e=>{um.current=e},zh=e=>{pm.current=e},Uh=e=>{mm.current=e},qh=e=>{gm.current=e},_h=e=>{hm.current=e},Gh=e=>{fm.current=e},Yh=e=>{bm.current=e},Kh=e=>{ym.current=e},Jh=e=>{xm.current=e},Xh=e=>{Sm(e)},Zh=e=>{Rm.current=e},Qh=e=>{wm.current=e},ef=e=>{km.current=e},tf=e=>{Cm.current=e},rf=e=>{jm.current=e},af=e=>{Pm.current=e},nf=e=>{Mm.current=e},of=e=>{Im.current=e},sf=e=>{Am.current=e},cf=e=>{Tm.current=e},df=e=>{Fm.current=e},lf=e=>{Dm.current=e},uf=e=>{Nm.current=e},pf=e=>{Lm.current=e},mf=e=>{Vm.current=e},gf=e=>{Bm.current=e},hf=e=>{$m.current=e},ff=e=>{Wm(e)},bf=e=>{Hm.current=e},yf=e=>{Om.current=e},xf=e=>{zm.current=e},vf=e=>{Um.current=e},Sf=e=>{qm.current=e},Rf=e=>{_m.current=e},wf=e=>{Gm.current=e},kf=e=>{Ym.current=e},Cf=e=>{Km.current=e},jf=e=>{Jm.current=e},Pf=e=>{Zm(e)},Mf=e=>{Qm.current=e},If=e=>{eg.current=e},Af=e=>{tg.current=e},Tf=e=>{rg.current=e},Ff=e=>{ag.current=e},Df=e=>{ng.current=e},Nf=e=>{sg(e)},Lf=e=>{cg(e)},Vf=e=>{dg.current=e},Bf=e=>{lg.current=e},$f=e=>{ug.current=e},Ef=e=>{pg.current=e},Wf=e=>{mg.current=e},Hf=e=>{gg.current=e},Of=e=>{hg.current=e},zf=e=>{fg.current=e},Uf=e=>{bg.current=e},qf=e=>{yg.current=e},_f=e=>{vg(e)};function Gf(){return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}const Yf=()=>{try{null!==c&&(c={...Jf(),...Kf()},d&&d(c))}catch{}return{...Jf(),...Kf()}},Kf=()=>({updateMiniCardsGrid:_a,updatePrimaryGridLayoutMeta:jh,updateAltGridLayoutMeta:Ph,mixStreams:Ga,dispStreams:Ya,stopShareScreen:Ka,checkScreenShare:Ja,startShareScreen:Xa,requestScreenShare:Za,reorderStreams:Qa,prepopulateUserMedia:mn,videoCardComponent:W,audioCardComponent:H,miniCardComponent:O,miniAudioComponent:z,miniAudioPlayerComponent:q,meetingProgressTimerComponent:U,getVideos:gn,rePort:hn,trigger:fn,consumerResume:_,connectSendTransport:Wn,connectSendTransportAudio:w,connectSendTransportVideo:vn,connectSendTransportScreen:Sn,processConsumerTransports:Rn,resumePauseStreams:wn,readjust:kn,checkGrid:Cn,getEstimate:jn,calculateRowsAndColumns:Pn,addVideosGrid:G,onScreenChanges:In,sleep:An,changeVids:Tn,compareActiveNames:Fn,compareScreenStates:Dn,createSendTransport:Nn,resumeSendTransportAudio:Ln,receiveAllPipedTransports:Vn,disconnectSendTransportVideo:Bn,disconnectSendTransportAudio:$n,disconnectSendTransportScreen:En,getPipedProducersAlt:On,signalNewConsumerTransport:y,connectRecvTransport:zn,reUpdateInter:Un,updateParticipantAudioDecibels:qn,closeAndResize:_n,autoAdjust:Gn,switchUserVideoAlt:Yn,switchUserVideo:Kn,switchUserAudio:Jn,getDomains:Io,formatNumber:Zn,connectIps:Qn,connectLocalIps:S,createDeviceClient:Na,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro,captureCanvasStream:Uo,resumePauseAudioStreams:qo,processConsumerTransportsAudio:_o,checkPermission:Oa,streamSuccessVideo:$a,streamSuccessAudio:Ea,streamSuccessScreen:Wa,streamSuccessAudioSwitch:Ha,clickVideo:La,clickAudio:Va,clickScreenShare:Ba,switchVideoAlt:fr,requestPermissionCamera:Ah,requestPermissionAudio:Th,getMediaDevicesList:fb,getParticipantMedia:bb}),Jf=()=>({localUIMode:Ie.current,videoCardComponent:W,audioCardComponent:H,miniCardComponent:O,miniAudioComponent:z,miniAudioPlayerComponent:q,meetingProgressTimerComponent:U,roomName:ze.current,member:Ue.current,adminPasscode:qe.current,youAreCoHost:Ke.current,youAreHost:Je.current,islevel:_e.current,confirmedToRecord:Xe.current,meetingDisplayType:Ze.current,meetingVideoOptimized:Qe.current,eventType:et.current,participants:tt.current,filteredParticipants:rt.current,participantsCounter:at.current,participantsFilter:nt.current,consume_sockets:ot.current,rtpCapabilities:st.current,roomRecvIPs:it.current,meetingRoomParams:ct.current,itemPageLimit:dt.current,audioOnlyRoom:lt.current,addForBasic:gt.current,screenPageLimit:ft.current,shareScreenStarted:bt.current,shared:yt.current,targetOrientation:xt.current,targetResolution:vt.current,targetResolutionHost:St.current,vidCons:Rt.current,frameRate:wt.current,hParams:kt.current,vParams:Ct.current,screenParams:Pt.current,aParams:Mt.current,recordingAudioPausesLimit:It.current,recordingAudioPausesCount:At.current,recordingAudioSupport:Tt.current,recordingAudioPeopleLimit:Ft.current,recordingAudioParticipantsTimeLimit:Dt.current,recordingVideoPausesCount:Nt.current,recordingVideoPausesLimit:Lt.current,recordingVideoSupport:Vt.current,recordingVideoPeopleLimit:Bt.current,recordingVideoParticipantsTimeLimit:$t.current,recordingAllParticipantsSupport:Et.current,recordingVideoParticipantsSupport:Wt.current,recordingAllParticipantsFullRoomSupport:Ht.current,recordingVideoParticipantsFullRoomSupport:Ot.current,recordingPreferredOrientation:zt.current,recordingSupportForOtherOrientation:Ut.current,recordingMultiFormatsSupport:qt.current,userRecordingParams:_t.current,canRecord:Gt.current,startReport:Yt.current,endReport:Kt.current,recordStartTime:Xt.current,recordElapsedTime:Zt.current,isTimerRunning:Qt.current,canPauseResume:er.current,recordChangeSeconds:tr.current,pauseLimit:rr.current,pauseRecordCount:ar.current,canLaunchRecord:nr.current,stopLaunchRecord:or.current,participantsAll:Ci.current,firstAll:sr.current,updateMainWindow:ir.current,first_round:cr.current,landScaped:dr.current,lock_screen:lr.current,screenId:ur.current,allVideoStreams:pr.current,newLimitedStreams:mr.current,newLimitedStreamsIDs:gr.current,activeSounds:hr.current,screenShareIDStream:br.current,screenShareNameStream:yr.current,adminIDStream:xr.current,adminNameStream:vr.current,youYouStream:Sr.current,youYouStreamIDs:Rr.current,localStream:wr.current,recordStarted:kr.current,recordResumed:Cr.current,recordPaused:jr.current,recordStopped:Pr.current,adminRestrictSetting:Mr.current,videoRequestState:Ir.current,videoRequestTime:Ar.current,videoAction:Tr.current,localStreamVideo:Fr.current,userDefaultVideoInputDevice:Dr.current,currentFacingMode:Nr.current,prevFacingMode:Lr.current,defVideoID:Vr.current,allowed:Br.current,dispActiveNames:$r.current,p_dispActiveNames:Er.current,activeNames:Wr.current,prevActiveNames:Hr.current,p_activeNames:Or.current,membersReceived:zr.current,deferScreenReceived:Ur.current,hostFirstSwitch:qr.current,micAction:_r.current,screenAction:Gr.current,chatAction:Yr.current,audioRequestState:Kr.current,screenRequestState:Jr.current,chatRequestState:Xr.current,audioRequestTime:Zr.current,screenRequestTime:Qr.current,chatRequestTime:ea.current,updateRequestIntervalSeconds:ta.current,oldSoundIds:ra.current,hostLabel:aa.current,mainScreenFilled:na.current,localStreamScreen:oa.current,screenAlreadyOn:pa,chatAlreadyOn:ba,redirectURL:xa.current,oldAllStreams:va.current,adminVidID:Sa.current,streamNames:Ra.current,non_alVideoStreams:wa.current,sortAudioLoudness:ka.current,audioDecibels:Ca.current,mixed_alVideoStreams:ja.current,non_alVideoStreams_muted:Pa.current,paginatedStreams:Ma.current,localStreamAudio:Ia.current,defAudioID:Aa.current,userDefaultAudioInputDevice:Ta.current,userDefaultAudioOutputDevice:Da.current,prevAudioInputDevice:za.current,prevVideoInputDevice:en.current,audioPaused:tn.current,mainScreenPerson:rn.current,adminOnMainScreen:an.current,screenStates:nn.current,prevScreenStates:on.current,updateDateState:cn.current,lastUpdate:ln.current,nForReadjustRecord:un.current,fixedPageLimit:bn.current,removeAltGrid:Hn.current,nForReadjust:To.current,lastReorderTime:Ho.current,reorderInterval:Do.current,fastReorderInterval:No.current,audStreamNames:Oo.current,currentUserPage:zo.current,mainHeightWidth:Yo,prevMainHeightWidth:Zo.current,prevDoPaginate:Qo.current,doPaginate:es.current,shareEnded:ts.current,lStreams:rs.current,chatRefStreams:ls.current,controlHeight:us,isWideScreen:ms.current,isMediumScreen:gs.current,isSmallScreen:fs.current,addGrid:Rs.current,addAltGrid:ws.current,gridRows:Cs,gridCols:Ps,altGridRows:Is,altGridCols:Ts,numberPages:Ds,currentStreams:Ls,showMiniView:Vs,nStream:$s.current,defer_receive:Es.current,allAudioStreams:Os.current,screenProducer:qs.current,remoteScreenStream:zs.current,gotAllVids:Js.current,paginationHeightWidth:ii.current,paginationDirection:li.current,gridSizes:ui.current,screenForceFullDisplay:pi.current,mainGridStream:mi.current,otherGridStreams:gi,audioOnlyStreams:fi.current,videoInputs:bi,audioInputs:xi,meetingProgressTime:Si,meetingElapsedTime:wi.current,ref_participants:ki.current,messages:su.current,startDirectMessage:iu.current,directMessageDetails:cu.current,coHost:Ge.current,coHostResponsibility:Ye.current,audioSetting:uu.current,videoSetting:pu.current,screenshareSetting:mu.current,chatSetting:gu.current,autoWave:fu.current,forceFullDisplay:bu.current,prevForceFullDisplay:yu.current,prevMeetingDisplayType:xu.current,waitingRoomFilter:vu.current,waitingRoomList:Su.current,waitingRoomCounter:Ru.current,filteredWaitingRoomList:wu.current,requestFilter:ku.current,requestList:Cu.current,requestCounter:ju.current,filteredRequestList:Pu.current,totalReqWait:Mu.current,alertVisible:Iu,alertMessage:Tu,alertType:Du,alertDuration:Lu,progressTimerVisible:Bu,progressTimerValue:$u,isMenuModalVisible:Eu,isRecordingModalVisible:Hu,isSettingsModalVisible:zu,isRequestsModalVisible:qu,isWaitingModalVisible:Gu,isCoHostModalVisible:Ku,isMediaSettingsModalVisible:Xu,isDisplaySettingsModalVisible:Qu,isParticipantsModalVisible:tp,isMessagesModalVisible:ap,isConfirmExitModalVisible:op,isConfirmHereModalVisible:ip,isLoadingModalVisible:up,recordingMediaOptions:mp.current,recordingAudioOptions:gp.current,recordingVideoOptions:hp.current,recordingVideoType:fp.current,recordingVideoOptimized:bp.current,recordingDisplayType:yp.current,recordingAddHLS:xp.current,recordingAddText:Cp.current,recordingCustomText:jp.current,recordingCustomTextPosition:Pp.current,recordingCustomTextColor:Mp,recordingNameTags:vp.current,recordingBackgroundColor:Sp,recordingNameTagsColor:wp,recordingOrientationVideo:Ap.current,clearedToResume:Tp.current,clearedToRecord:Fp.current,recordState:Dp,showRecordButtons:Lp,recordingProgressTime:Bp,audioSwitching:Ep,videoSwitching:Hp,videoAlreadyOn:zp.current,audioAlreadyOn:Up.current,componentSizes:Yp.current,hasCameraPermission:Xp,hasAudioPermission:Qp,transportCreated:tm.current,localTransportCreated:rm.current,transportCreatedVideo:am.current,transportCreatedAudio:nm.current,transportCreatedScreen:om.current,producerTransport:sm.current,localProducerTransport:im.current,videoProducer:cm.current,localVideoProducer:dm.current,params:lm.current,videoParams:um.current,audioParams:pm.current,audioProducer:mm.current,audioLevel:gm.current,localAudioProducer:hm.current,consumerTransports:fm.current,consumingTransports:bm.current,polls:ym.current,poll:xm.current,isPollModalVisible:vm,customImage:Pm.current,selectedImage:Mm.current,segmentVideo:Im.current,selfieSegmentation:Am.current,pauseSegmentation:Tm.current,processedStream:Fm.current,keepBackground:Dm.current,backgroundHasChanged:Nm.current,virtualStream:Lm.current,mainCanvas:Vm.current,prevKeepBackground:Bm.current,appliedBackground:$m.current,isBackgroundModalVisible:Em,autoClickBackground:Hm.current,breakoutRooms:Om.current,currentRoomIndex:zm.current,canStartBreakout:Um.current,breakOutRoomStarted:qm.current,breakOutRoomEnded:_m.current,hostNewRoom:Gm.current,limitedBreakRoom:Ym.current,mainRoomsLength:Km.current,memberRoom:Jm.current,isBreakoutRoomsModalVisible:Xm,whiteboardUsers:Qm.current,currentWhiteboardIndex:eg.current,canStartWhiteboard:tg.current,whiteboardStarted:rg.current,whiteboardEnded:ag.current,whiteboardLimit:ng.current,isWhiteboardModalVisible:og,isConfigureWhiteboardModalVisible:ig,shapes:dg.current,useImageBackground:lg.current,redoStack:ug.current,undoStack:pg.current,canvasStream:mg.current,canvasWhiteboard:gg.current,canvasScreenboard:hg.current,processedScreenStream:fg.current,annotateScreenStream:bg.current,mainScreenCanvas:yg.current,isScreenboardModalVisible:xg,permissionConfig:Rm.current,panelists:wm.current,panelistsFocused:km.current,muteOthersMic:Cm.current,muteOthersCamera:jm.current,validated:Pe,device:De.current,socket:Ae.current,localSocket:Te.current,checkMediaPermission:!1,onWeb:!0,mediaDevices:ua,updateRoomName:Di,updateMember:Ni,updateAdminPasscode:Li,updateYouAreCoHost:Ei,updateYouAreHost:Wi,updateIslevel:Vi,updateCoHost:Bi,updateCoHostResponsibility:$i,updateConfirmedToRecord:Hi,updateMeetingDisplayType:Oi,updateMeetingVideoOptimized:zi,updateEventType:Ui,updateParticipants:qi,updateParticipantsCounter:_i,updateParticipantsFilter:Gi,updateConsume_sockets:jc,updateRtpCapabilities:Pc,updateRoomRecvIPs:Mc,updateMeetingRoomParams:Ic,updateItemPageLimit:Ac,updateAudioOnlyRoom:Tc,updateAddForBasic:Fc,updateScreenPageLimit:Dc,updateShareScreenStarted:Nc,updateShared:Lc,updateTargetOrientation:Vc,updateTargetResolution:Bc,updateTargetResolutionHost:$c,updateVidCons:Ec,updateFrameRate:Wc,updateHParams:Hc,updateVParams:Oc,updateScreenParams:zc,updateAParams:Uc,updateRecordingAudioPausesLimit:Yi,updateRecordingAudioPausesCount:Ki,updateRecordingAudioSupport:Ji,updateRecordingAudioPeopleLimit:Xi,updateRecordingAudioParticipantsTimeLimit:Zi,updateRecordingVideoPausesCount:Qi,updateRecordingVideoPausesLimit:ec,updateRecordingVideoSupport:tc,updateRecordingVideoPeopleLimit:rc,updateRecordingVideoParticipantsTimeLimit:ac,updateRecordingAllParticipantsSupport:nc,updateRecordingVideoParticipantsSupport:oc,updateRecordingAllParticipantsFullRoomSupport:sc,updateRecordingVideoParticipantsFullRoomSupport:ic,updateRecordingPreferredOrientation:cc,updateRecordingSupportForOtherOrientation:dc,updateRecordingMultiFormatsSupport:lc,updateUserRecordingParams:uc,updateCanRecord:pc,updateStartReport:mc,updateEndReport:gc,updateRecordTimerInterval:hc,updateRecordStartTime:fc,updateRecordElapsedTime:bc,updateIsTimerRunning:yc,updateCanPauseResume:xc,updateRecordChangeSeconds:vc,updatePauseLimit:Sc,updatePauseRecordCount:Rc,updateCanLaunchRecord:wc,updateStopLaunchRecord:kc,updateParticipantsAll:Cc,updateFirstAll:qc,updateUpdateMainWindow:_c,updateFirst_round:Gc,updateLandScaped:Yc,updateLock_screen:Kc,updateScreenId:Jc,updateAllVideoStreams:Xc,updateNewLimitedStreams:Zc,updateNewLimitedStreamsIDs:Qc,updateActiveSounds:ed,updateScreenShareIDStream:td,updateScreenShareNameStream:rd,updateAdminIDStream:ad,updateAdminNameStream:nd,updateYouYouStream:od,updateYouYouStreamIDs:sd,updateLocalStream:id,updateRecordStarted:cd,updateRecordResumed:dd,updateRecordPaused:ld,updateRecordStopped:ud,updateAdminRestrictSetting:pd,updateVideoRequestState:md,updateVideoRequestTime:gd,updateVideoAction:hd,updateLocalStreamVideo:fd,updateUserDefaultVideoInputDevice:bd,updateCurrentFacingMode:yd,updateRef_participants:ou,updateDefVideoID:vd,updateAllowed:Sd,updateDispActiveNames:Rd,updateP_dispActiveNames:wd,updateActiveNames:kd,updatePrevActiveNames:Cd,updateP_activeNames:jd,updateMembersReceived:Pd,updateDeferScreenReceived:Md,updateHostFirstSwitch:Id,updateMicAction:Ad,updateScreenAction:Td,updateChatAction:Fd,updateAudioRequestState:Dd,updateScreenRequestState:Nd,updateChatRequestState:Ld,updateAudioRequestTime:Vd,updateScreenRequestTime:Bd,updateChatRequestTime:$d,updateOldSoundIds:Ed,updatehostLabel:Wd,updateMainScreenFilled:Hd,updateLocalStreamScreen:Od,updateScreenAlreadyOn:zd,updateChatAlreadyOn:Ud,updateRedirectURL:qd,updateOldAllStreams:_d,updateAdminVidID:Gd,updateStreamNames:Yd,updateNon_alVideoStreams:Kd,updateSortAudioLoudness:Jd,updateAudioDecibels:Xd,updateMixed_alVideoStreams:Zd,updateNon_alVideoStreams_muted:Qd,updatePaginatedStreams:el,updateLocalStreamAudio:tl,updateDefAudioID:rl,updateUserDefaultAudioInputDevice:al,updateUserDefaultAudioOutputDevice:nl,updatePrevAudioInputDevice:ol,updatePrevVideoInputDevice:sl,updateAudioPaused:il,updateMainScreenPerson:cl,updateAdminOnMainScreen:dl,updateScreenStates:ll,updatePrevScreenStates:ul,updateUpdateDateState:pl,updateLastUpdate:ml,updateNForReadjustRecord:gl,updateFixedPageLimit:hl,updateRemoveAltGrid:fl,updateNForReadjust:bl,updateLastReorderTime:yl,updateAudStreamNames:xl,updateCurrentUserPage:vl,updatePrevFacingMode:xd,updateMainHeightWidth:Sl,updatePrevMainHeightWidth:Rl,updatePrevDoPaginate:wl,updateDoPaginate:kl,updateShareEnded:Cl,updateLStreams:jl,updateChatRefStreams:Pl,updateControlHeight:Ml,updateIsWideScreen:Il,updateIsMediumScreen:Al,updateIsSmallScreen:Tl,updateAddGrid:Fl,updateAddAltGrid:Dl,updateGridRows:Nl,updateGridCols:Ll,updateAltGridRows:Vl,updateAltGridCols:Bl,updateNumberPages:$l,updateCurrentStreams:El,updateShowMiniView:Wl,updateNStream:Hl,updateDefer_receive:Ol,updateAllAudioStreams:zl,updateRemoteScreenStream:Ul,updateScreenProducer:ql,updateLocalScreenProducer:_l,updateGotAllVids:Gl,updatePaginationHeightWidth:Yl,updatePaginationDirection:Kl,updateGridSizes:Jl,updateScreenForceFullDisplay:Xl,updateMainGridStream:Zl,updateOtherGridStreams:Ql,updateAudioOnlyStreams:eu,updateVideoInputs:tu,updateAudioInputs:ru,updateMeetingProgressTime:au,updateMeetingElapsedTime:nu,updateMessages:Sg,updateStartDirectMessage:Rg,updateDirectMessageDetails:wg,updateShowMessagesBadge:kg,updateAudioSetting:Cg,updateVideoSetting:jg,updateScreenshareSetting:Pg,updateChatSetting:Mg,updateDisplayOption:Ig,updateAutoWave:Ag,updateForceFullDisplay:Tg,updatePrevForceFullDisplay:Fg,updatePrevMeetingDisplayType:Dg,updateWaitingRoomFilter:Lg,updateWaitingRoomList:Vg,updateWaitingRoomCounter:Ng,updateRequestFilter:$g,updateRequestList:Eg,updateRequestCounter:Bg,updateTotalReqWait:Wg,updateIsMenuModalVisible:Hg,updateIsRecordingModalVisible:Og,updateIsSettingsModalVisible:zg,updateIsRequestsModalVisible:Ug,updateIsWaitingModalVisible:qg,updateIsCoHostModalVisible:_g,updateIsMediaSettingsModalVisible:Gg,updateIsDisplaySettingsModalVisible:Yg,updateIsParticipantsModalVisible:Kg,updateIsMessagesModalVisible:Jg,updateIsConfirmExitModalVisible:Xg,updateIsConfirmHereModalVisible:Zg,updateIsLoadingModalVisible:Qg,updateRecordingMediaOptions:th,updateRecordingAudioOptions:rh,updateRecordingVideoOptions:ah,updateRecordingVideoType:nh,updateRecordingVideoOptimized:oh,updateRecordingDisplayType:sh,updateRecordingAddHLS:ih,updateRecordingAddText:ch,updateRecordingCustomText:dh,updateRecordingCustomTextPosition:lh,updateRecordingCustomTextColor:uh,updateRecordingNameTags:ph,updateRecordingBackgroundColor:mh,updateRecordingNameTagsColor:gh,updateRecordingOrientationVideo:hh,updateClearedToResume:fh,updateClearedToRecord:bh,updateRecordState:yh,updateShowRecordButtons:xh,updateRecordingProgressTime:vh,updateAudioSwitching:Sh,updateVideoSwitching:Rh,updateVideoAlreadyOn:wh,updateAudioAlreadyOn:kh,updateComponentSizes:Ch,updateHasCameraPermission:Mh,updateHasAudioPermission:Ih,updateTransportCreated:Fh,updateLocalTransportCreated:Dh,updateTransportCreatedVideo:Nh,updateTransportCreatedAudio:Lh,updateTransportCreatedScreen:Vh,updateProducerTransport:Bh,updateLocalProducerTransport:$h,updateVideoProducer:Eh,updateLocalVideoProducer:Wh,updateParams:Hh,updateVideoParams:Oh,updateAudioParams:zh,updateAudioProducer:Uh,updateAudioLevel:qh,updateLocalAudioProducer:_h,updateConsumerTransports:Gh,updateConsumingTransports:Yh,updatePolls:Kh,updatePoll:Jh,updateIsPollModalVisible:Xh,updateCustomImage:af,updateSelectedImage:nf,updateSegmentVideo:of,updateSelfieSegmentation:sf,updatePauseSegmentation:cf,updateProcessedStream:df,updateKeepBackground:lf,updateBackgroundHasChanged:uf,updateVirtualStream:pf,updateMainCanvas:mf,updatePrevKeepBackground:gf,updateAppliedBackground:hf,updateIsBackgroundModalVisible:ff,updateAutoClickBackground:bf,updateBreakoutRooms:yf,updateCurrentRoomIndex:xf,updateCanStartBreakout:vf,updateBreakOutRoomStarted:Sf,updateBreakOutRoomEnded:Rf,updateHostNewRoom:wf,updateLimitedBreakRoom:kf,updateMainRoomsLength:Cf,updateMemberRoom:jf,updateIsBreakoutRoomsModalVisible:Pf,updateWhiteboardUsers:Mf,updateCurrentWhiteboardIndex:If,updateCanStartWhiteboard:Af,updateWhiteboardStarted:Tf,updateWhiteboardEnded:Ff,updateWhiteboardLimit:Df,updateIsWhiteboardModalVisible:Nf,updateIsConfigureWhiteboardModalVisible:Lf,updateShapes:Vf,updateUseImageBackground:Bf,updateRedoStack:$f,updateUndoStack:Ef,updateCanvasStream:Wf,updateCanvasWhiteboard:Hf,updateCanvasScreenboard:Of,updateProcessedScreenStream:zf,updateAnnotateScreenStream:Uf,updateMainScreenCanvas:qf,updateIsScreenboardModalVisible:_f,updatePermissionConfig:Zh,updatePanelists:Qh,updatePanelistsFocused:ef,updateMuteOthersMic:tf,updateMuteOthersCamera:rf,checkOrientation:Gf,updateDevice:Ii,updateSocket:Pi,updateLocalSocket:Mi,updateValidated:ji,showAlert:Xf,getUpdatedAllParams:Yf,customVideoCard:g,customAudioCard:h,customMiniCard:f,customPreJoinPage:b}),Xf=({message:e,type:t,duration:r=3e3})=>{Fu(e),Nu(t),Vu(r),Au(!0)},[Zf,Qf]=(0,de.useState)(!!Up.current&&Up.current),[eb,tb]=(0,de.useState)(!!zp.current&&zp.current),[rb,ab]=(0,de.useState)(!1),[nb]=(0,de.useState)(!1),[ob]=(0,de.useState)(!1),sb=[{icon:pe.faRecordVinyl,text:"Record",onPress:()=>{sa({updateIsRecordingModalVisible:Og,isRecordingModalVisible:Hu,showAlert:Xf,stopLaunchRecord:or.current,canLaunchRecord:nr.current,recordingAudioSupport:Tt.current,recordingVideoSupport:Vt.current,updateCanRecord:pc,updateClearedToRecord:bh,recordStarted:kr.current,recordPaused:jr.current,localUIMode:Ie.current})},activeColor:"black",inActiveColor:"black",show:!0}],ib=[{icon:pe.faPlayCircle,active:!1===jr.current,onPress:()=>{so({parameters:{...Jf(),...Kf()}})},activeColor:"black",inActiveColor:"black",alternateIcon:pe.faPauseCircle,show:!0},{icon:pe.faStopCircle,active:!1,onPress:()=>{io({parameters:{...Jf(),...Kf()}})},activeColor:"green",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsx)("div",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:2},children:(0,ce.jsx)("span",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:0},children:Bp})}),show:!0},{icon:pe.faDotCircle,active:!1,onPress:()=>console.log("Status pressed"),activeColor:"black",inActiveColor:!1===jr.current?"red":"yellow",show:!0},{icon:pe.faCog,active:!1,onPress:()=>{sa({updateIsRecordingModalVisible:Og,isRecordingModalVisible:Hu,showAlert:Xf,stopLaunchRecord:or.current,canLaunchRecord:nr.current,recordingAudioSupport:Tt.current,recordingVideoSupport:Vt.current,updateCanRecord:pc,updateClearedToRecord:bh,recordStarted:kr.current,recordPaused:jr.current,localUIMode:Ie.current})},activeColor:"green",inActiveColor:"black",show:!0}],cb=[{icon:pe.faRecordVinyl,text:"Record",action:()=>{sa({updateIsRecordingModalVisible:Og,isRecordingModalVisible:Hu,showAlert:Xf,stopLaunchRecord:or.current,canLaunchRecord:nr.current,recordingAudioSupport:Tt.current,recordingVideoSupport:Vt.current,updateCanRecord:pc,updateClearedToRecord:bh,recordStarted:kr.current,recordPaused:jr.current,localUIMode:Ie.current})},show:!Lp&&"2"===_e.current},{customComponent:(0,ce.jsx)(V,{buttons:ib,direction:"horizontal",showAspect:!0}),show:Lp&&"2"===_e.current,renderAsButton:!1},{icon:pe.faCog,text:"Event Settings",action:()=>{ri({updateIsSettingsModalVisible:zg,isSettingsModalVisible:zu})},show:"2"===_e.current},{icon:pe.faUsers,text:"Requests",action:()=>{ai({updateIsRequestsModalVisible:Ug,isRequestsModalVisible:qu})},show:"2"===_e.current||Ye.current&&Ge.current&&Ge.current===Ue.current&&1==!!Ye.current.find(e=>"media"===e.name).value||!1},{icon:pe.faClock,text:"Waiting",action:()=>{Qs({updateIsWaitingModalVisible:qg,isWaitingModalVisible:Gu})},show:"2"===_e.current||Ye.current&&Ge.current&&Ge.current===Ue.current&&1==!!Ye.current.find(e=>"waiting"===e.name).value||!1},{icon:pe.faUserPlus,text:"Co-host",action:()=>{ei({updateIsCoHostModalVisible:_g,isCoHostModalVisible:Ku})},show:"2"===_e.current},{icon:pe.faTools,text:"Set Media",action:()=>{ia({updateIsMediaSettingsModalVisible:Gg,isMediaSettingsModalVisible:Xu,audioInputs:xi,videoInputs:bi,updateAudioInputs:ru,updateVideoInputs:tu,mediaDevices:ua})},show:!0},{icon:pe.faDesktop,text:"Display",action:()=>{ti({updateIsDisplaySettingsModalVisible:Yg,isDisplaySettingsModalVisible:Qu})},show:!0},{icon:pe.faPoll,text:"Poll",action:()=>{si({updateIsPollModalVisible:Xh,isPollModalVisible:vm})},show:!0},{icon:pe.faUserFriends,text:"Breakout Rooms",action:()=>{ci({updateIsBreakoutRoomsModalVisible:Pf,isBreakoutRoomsModalVisible:Xm})},show:"2"==_e.current},{icon:pe.faChalkboardTeacher,text:"Whiteboard",action:()=>{di({updateIsConfigureWhiteboardModalVisible:Lf,isConfigureWhiteboardModalVisible:ig})},show:"2"==_e.current}],db=[{icon:pe.faUsers,active:!0,alternateIcon:pe.faUsers,onPress:()=>{ni({updateIsParticipantsModalVisible:Kg,isParticipantsModalVisible:tp})},activeColor:"black",inActiveColor:"black",show:"2"===_e.current},{icon:pe.faShareAlt,active:!0,alternateIcon:pe.faShareAlt,onPress:()=>eh(!dp),activeColor:"black",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:"black"}),du&&(0,ce.jsx)("div",{style:{position:"absolute",top:-2,right:-2,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:12,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:12,fontWeight:"bold"}})})})]}),onPress:()=>oi({updateIsMessagesModalVisible:Jg,isMessagesModalVisible:ap}),show:!0},{icon:pe.faSync,active:!0,alternateIcon:pe.faSync,onPress:()=>fr({parameters:{...Jf(),...Kf()}}),activeColor:"black",inActiveColor:"black",show:"2"===_e.current},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:eb,onPress:()=>La({parameters:{...Jf(),...Kf()}}),show:"2"===_e.current,activeColor:"green",inActiveColor:"red"},{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:Zf,onPress:()=>Va({parameters:{...Jf(),...Kf()}}),activeColor:"green",inActiveColor:"red",show:"2"===_e.current},{customComponent:(0,ce.jsxs)("div",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:5,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChartBar,size:"lg",color:"black"}),(0,ce.jsx)("span",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:0},children:at.current})]}),show:!0},{icon:pe.faPhone,active:nb,onPress:()=>la({updateIsConfirmExitModalVisible:Xg,isConfirmExitModalVisible:op}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faPhone,active:nb,onPress:()=>console.log("End Call pressed"),activeColor:"transparent",inActiveColor:"transparent",backgroundColor:{default:"transparent"},show:!1}],lb=[{icon:pe.faShareAlt,active:!0,alternateIcon:pe.faShareAlt,onPress:()=>eh(!dp),activeColor:"black",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:"black"}),du&&(0,ce.jsx)("div",{style:{position:"absolute",top:-2,right:-2,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:12,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:12,fontWeight:"bold"}})})})]}),onPress:()=>oi({updateIsMessagesModalVisible:Jg,isMessagesModalVisible:ap}),show:!0},{icon:pe.faSync,active:!0,alternateIcon:pe.faSync,onPress:()=>fr({parameters:{...Jf(),...Kf()}}),activeColor:"black",inActiveColor:"black",show:!0},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:eb,onPress:()=>La({parameters:{...Jf(),...Kf()}}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:Zf,onPress:()=>Va({parameters:{...Jf(),...Kf()}}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faPhone,active:nb,onPress:()=>la({updateIsConfirmExitModalVisible:Xg,isConfirmExitModalVisible:op}),activeColor:"green",inActiveColor:"red",show:!0}],ub=[{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:Zf,onPress:()=>Va({parameters:{...Jf(),...Kf()}}),activeColor:"green",inActiveColor:"red",disabled:Ep,show:!0},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:eb,onPress:()=>La({parameters:{...Jf(),...Kf()}}),activeColor:"green",inActiveColor:"red",disabled:Hp,show:!0},{icon:pe.faDesktop,alternateIconComponent:(0,ce.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDesktop,size:"lg",style:{color:rb?"green":"black"}}),!rb&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBan,size:"lg",style:{color:"red",position:"absolute",top:0,right:0}})]}),active:!0,onPress:()=>{Ba({parameters:{...Jf(),...Kf()}})},activeColor:"green",inActiveColor:"red",disabled:!1,show:!0},{icon:pe.faPhone,active:nb,onPress:()=>la({updateIsConfirmExitModalVisible:Xg,isConfirmExitModalVisible:op}),activeColor:"green",inActiveColor:"red",disabled:!1,show:!0},{icon:pe.faUsers,active:ob,onPress:()=>ni({updateIsParticipantsModalVisible:Kg,isParticipantsModalVisible:tp}),activeColor:"black",inActiveColor:"black",disabled:!1,show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBars,size:"lg",color:"black"}),(0,ce.jsx)("div",{style:{position:"absolute",top:-8,right:-8,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold"},children:Mu.current})})})]}),onPress:()=>Zs({updateIsMenuModalVisible:Hg,isMenuModalVisible:Eu}),show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:"black"}),du&&(0,ce.jsx)("div",{style:{position:"absolute",top:-6,right:-6,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold",lineHeight:"1"},children:"*"})})})]}),onPress:()=>oi({updateIsMessagesModalVisible:Jg,isMessagesModalVisible:ap}),show:!0}];async function pb({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,isLocal:d=!1}){let l;if(d){const d=await ie({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,parameters:{imgSrc:i,showAlert:Xf,updateIsLoadingModalVisible:Qg,connectSocket:ma,connectLocalSocket:ga,updateSocket:Pi,updateLocalSocket:Mi,updateValidated:ji,updateApiUserName:Ai,updateApiToken:Ti,updateLink:Fi,updateRoomName:Di,updateMember:Ni},checkConnect:t.length>0&&!0===r&&!Oe.current.includes("mediasfu.com"),localLink:t,joinMediaSFURoom:p});l=await Go({localRoom:d})}else l=await async function(e){const{socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s}=e;try{return await fa({socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s})}catch(e){throw console.log("error",e),new Error("Failed to join the room. Please check your connection and try again.")}}({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c});async function u(e){try{(!e.roomRecvIPs||e.roomRecvIPs&&0==e.roomRecvIPs.length)&&(e.roomRecvIPs=["none"],""!==Oe.current&&Oe.current.includes("mediasfu.com")&&!d&&await Vn({community:!0,nsock:Yf().socket,parameters:{...Jf(),...Kf()}}));try{Fa({parameters:{...Jf(),...Kf(),data:e}})}catch{}if(e.isHost?Vi("2"):"2"!==n&&Vi("1"),e.secureCode&&""!=e.secureCode&&Li(e.secureCode),e.rtpCapabilities)try{let t=await Na({rtpCapabilities:e.rtpCapabilities});t&&Ii(t)}catch(e){console.log("error Device",e)}}catch(e){console.log("error updateRoomParametersClient",e)}}if(l&&l.success){if(""!==Oe.current&&Oe.current.includes("mediasfu.com")&&d)return void(Fe.current=l);""!==Oe.current&&Oe.current.includes("mediasfu.com")&&!d?Fe.current?(Fe.current.recordingParams=l.recordingParams,Fe.current.meetingRoomParams=l.meetingRoomParams):Fe.current=l:(Fe.current=l,Oe.current.includes("mediasfu.com")||(Fe.current.meetingRoomParams=l.meetingRoomParams)),await u(l)}else{if(""!==Oe.current&&Oe.current.includes("mediasfu.com")&&!d)return void await u(Fe.current);try{Xf&&Xf({message:l.reason,type:"danger",duration:3e3})}catch{}}}async function mb(){Jg(!1),Kg(!1),qg(!1),Ug(!1),_g(!1),zg(!1),Yg(!1),Gg(!1),Hg(!1),eh(!1),Xg(!1),await async function(e){for(const t of e)try{t[Object.keys(t)[0]].disconnect()}catch(e){console.log(`Error disconnecting socket with IP: ${Object.keys(t)[0]}`,e)}}(ot.current),await(async()=>{const e=me,t=Jf();for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[`update${r.charAt(0).toUpperCase()+r.slice(1)}`];if("function"==typeof a)try{a(e[r])}catch{}}})(),au("00:00:00"),nu(0),vh("00:00:00"),bc(0),xh(!1),Lf(!1),Nf(!1),Hg(!1),Og(!1),Xh(!1),Pf(!1),ff(!1),Qg(!1),Zg(!1),setTimeout(async function(){ji(!1)},500)}(0,de.useEffect)(()=>{Np(kr&&!Pr?jr?"yellow":"red":"green")},[kr,jr,Pr]);const gb=async()=>{let e=0;if("webinar"==et.current||"conference"==et.current){const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==us&&Ml(e)}else{const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==us&&Ml(e)}const{mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}=(({containerWidthFraction:e=1,containerHeightFraction:t=1,mainSize:r,doStack:a=!0,defaultFraction:n})=>{const o=window.innerWidth*e,s=window.innerHeight*t*n;let i=o>=768;return!i&&o>1.5*s&&(i=!0),Il(i),a?i?{mainHeight:s,otherHeight:s,mainWidth:Math.floor(r/100*o),otherWidth:Math.floor((100-r)/100*o)}:{mainHeight:Math.floor(r/100*s),otherHeight:Math.floor((100-r)/100*s),mainWidth:o,otherWidth:o}:{mainHeight:s,otherHeight:s,mainWidth:o,otherWidth:o}})({containerWidthFraction:1,containerHeightFraction:1,mainSize:Yo,doStack:!0,defaultFraction:"webinar"==et.current||"conference"==et.current?1-e:1});Ch({mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}),"portrait"===Gf()&&(ms.current||(bt.current||yt.current)&&Xl(!0)),await mn({name:aa.current,parameters:{...Jf(),...Kf()}}),await In({changed:!0,parameters:{...Jf(),...Kf()}})},hb=async()=>{await gb()},fb=async e=>{try{let t=(await ua.enumerateDevices()).filter(t=>t.kind===e);return t}catch{return[]}},bb=async(e="",t,r="video")=>{try{let a=null;if(e&&""!==e){if("video"===r){const t=pr.current.find(t=>t.producerId===e);t&&(a=t.stream)}else if("audio"===r){const t=Os.current.find(t=>t.producerId===e);t&&(a=t.stream)}}else if(t&&""!==t){const e=tt.current.find(e=>e.name===t);if(e){const t=e.id;if("video"===r){const e=pr.current.find(e=>e.producerId===t);e&&(a=e.stream)}else if("audio"===r){const e=Os.current.find(e=>e.producerId===t);e&&(a=e.stream)}}}return a}catch{return null}};async function yb(e,a,n=!1){const o=Ae.current,s=r&&Te.current&&Te.current.id?Te.current:o;if(o.id){n||(o.on("disconnect",async()=>{await Wo({showAlert:Xf,redirectURL:xa.current,onWeb:!0,updateValidated:ji}),zp.current&&await La({parameters:{...Jf(),...Kf()}}),Up.current&&await Va({parameters:{...Jf(),...Kf()}}),await mb()}),o.on("allMembers",async t=>{t&&await $o({apiUserName:e,apiKey:"",apiToken:a,members:t.members,requestss:t.requests?t.requests:Cu.current,coHoste:t.coHost?t.coHost:Ge.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:Ye.current,parameters:{...Jf(),...Kf()},consume_sockets:ot.current})}),o.on("allMembersRest",async t=>{t&&await Eo({apiUserName:e,apiKey:"",members:t.members,apiToken:a,settings:t.settings,coHoste:t.coHost?t.coHost:Ge.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:Ye.current,parameters:{...Jf(),...Kf()},consume_sockets:ot.current})}),o.on("userWaiting",async({name:e})=>{await co({name:e,showAlert:Xf,totalReqWait:Mu.current,updateTotalReqWait:Wg})}),o.on("personJoined",async({name:e})=>{await lo({name:e,showAlert:Xf})}),o.on("allWaitingRoomMembers",async e=>{await uo({waitingParticipants:e.waitingParticipants?e.waitingParticipants:e.waitingParticipantss?e.waitingParticipantss:Su.current,updateTotalReqWait:Wg,updateWaitingRoomList:Vg})}),o.on("ban",async({name:e})=>{await mo({name:e,parameters:{...Jf(),...Kf()}})}),o.on("updatedCoHost",async e=>{await go({coHost:e.coHost?e.coHost:Ge.current,coHostResponsibility:e.coHostResponsibilities?e.coHostResponsibilities:Ye.current,youAreCoHost:Ke.current,updateCoHost:Bi,updateCoHostResponsibility:$i,updateYouAreCoHost:Ei,showAlert:Xf,eventType:et.current,islevel:_e.current,member:Ue.current})}),o.on("participantRequested",async({userRequest:e})=>{await ho({userRequest:e,requestList:Cu.current,waitingRoomList:Su.current,updateTotalReqWait:Wg,updateRequestList:Eg})}),o.on("screenProducerId",async({producerId:e})=>{fo({producerId:e,screenId:ur.current,membersReceived:zr.current,shareScreenStarted:bt.current,deferScreenReceived:Ur.current,participants:tt.current,updateScreenId:Jc,updateShareScreenStarted:Nc,updateDeferScreenReceived:Md})}),o.on("updateMediaSettings",async({settings:e})=>{bo({settings:e,updateAudioSetting:Cg,updateVideoSetting:jg,updateScreenshareSetting:Pg,updateChatSetting:Mg})}),o.on("producer-media-paused",async({producerId:e,kind:t,name:r})=>{await yo({producerId:e,kind:t,name:r,parameters:{...Jf(),...Kf()}})}),o.on("producer-media-resumed",async({kind:e,name:t})=>{await xo({kind:e,name:t,parameters:{...Jf(),...Kf()}})}),o.on("producer-media-closed",async({producerId:e,kind:t})=>{e&&t&&await vo({producerId:e,kind:t,parameters:{...Jf(),...Kf()}})}),o.on("controlMediaHost",async({type:e})=>{await So({type:e,parameters:{...Jf(),...Kf()}})}),o.on("meetingEnded",async function(){await Ro({showAlert:Xf,redirectURL:xa.current,onWeb:!0,eventType:et.current,updateValidated:ji}),zp.current&&await La({parameters:{...Jf(),...Kf()}}),Up.current&&await Va({parameters:{...Jf(),...Kf()}}),await mb()}),o.on("disconnectUserSelf",async function(){await wo({socket:o,member:Ue.current,roomName:ze.current})}),o.on("receiveMessage",async({message:e})=>{await ko({message:e,messages:su.current,participantsAll:tt.current,member:Ue.current,eventType:et.current,islevel:_e.current,coHost:Ge.current,updateMessages:Sg,updateShowMessagesBadge:kg})}),o.on("meetingTimeRemaining",async({timeRemaining:e})=>{await Co({timeRemaining:e,showAlert:Xf,eventType:et.current})}),o.on("meetingStillThere",async()=>{await jo({updateIsConfirmHereModalVisible:Zg})}),o.on("updateConsumingDomains",async({domains:t,alt_domains:r})=>{await Ao({domains:t,alt_domains:r,apiUserName:e,apiKey:"",apiToken:a,parameters:{...Jf(),...Kf()}})}),o.on("hostRequestResponse",({requestResponse:e})=>{Bo({requestResponse:e,showAlert:Xf,requestList:Cu.current,updateRequestList:Eg,updateMicAction:Ad,updateVideoAction:hd,updateScreenAction:Td,updateChatAction:Fd,updateAudioRequestState:Dd,updateVideoRequestState:md,updateScreenRequestState:Nd,updateChatRequestState:Ld,updateAudioRequestTime:Vd,updateVideoRequestTime:gd,updateScreenRequestTime:Bd,updateChatRequestTime:$d,updateRequestIntervalSeconds:ta.current})}),o.on("pollUpdated",async e=>{try{await eo({data:e,polls:ym.current,poll:xm.current,member:Ue.current,islevel:_e.current,showAlert:Xf,updatePolls:Kh,updatePoll:Jh,updateIsPollModalVisible:Xh})}catch{}}),o.on("breakoutRoomUpdated",async e=>{try{await no({data:e,parameters:{...Jf(),...Kf()}})}catch{}})),n&&["roomRecordParams","startRecords","reInitiateRecording","RecordingNotice","timeLeftRecording","stoppedRecording"].forEach(e=>{o.off(e),s.off(e)}),s.on("roomRecordParams",async({recordParams:e})=>{await po({recordParams:e,parameters:{...Jf(),...Kf()}})}),s.on("startRecords",async()=>{await Po({roomName:ze.current,member:Ue.current,socket:s})}),s.on("reInitiateRecording",async()=>{await Mo({roomName:ze.current,member:Ue.current,socket:s,adminRestrictSetting:Mr.current})}),s.on("RecordingNotice",async({state:e,userRecordingParam:t,pauseCount:r,timeDone:a})=>{await Fo({state:e,userRecordingParam:t,pauseCount:r,timeDone:a,parameters:{...Jf(),...Kf()}})}),s.on("timeLeftRecording",async({timeLeft:e})=>{Lo({timeLeft:e,showAlert:Xf})}),s.on("stoppedRecording",async({state:e,reason:t})=>{await Vo({state:e,reason:t,showAlert:Xf})}),""!==t&&o&&!n&&await pb({socket:o,roomName:ze.current,islevel:_e.current,member:Ue.current,sec:a,apiUserName:e,isLocal:!0});let i=!1;if(i=!(!Te.current||Te.current.id==s.id),!n&&i)return await yb(e,a,!0),await An({ms:1e3}),Qg(!1),o;if(""!==Oe.current&&Oe.current.includes("mediasfu.com")){const t=Le.current;await pb({socket:r&&s&&s.id?s:o,roomName:ze.current,islevel:_e.current,member:Ue.current,sec:t,apiUserName:e})}return await Xn({socket:o,roomName:ze.current,updateMessages:Sg}),n||await mn({name:aa.current,parameters:{...Jf(),...Kf()}}),o}return null}return(0,de.useEffect)(()=>{if(!Pe)return;const e=Kp.current;e.rows<=0||e.cols<=0||e.actualRows<=0||(async()=>{const t={...Jf(),...Kf(),getUpdatedAllParams:Yf};try{await _a({rows:e.rows,cols:e.cols,defal:!0,actualRows:e.actualRows,parameters:t});const r=Jp.current;r.rows>0&&r.cols>0&&r.actualRows>0&&await _a({rows:r.rows,cols:r.cols,defal:!1,actualRows:r.actualRows,parameters:t})}catch(e){console.error("Error updating grid sizes after component resize",e)}})()},[_p,Pe]),(0,de.useEffect)(()=>(window.addEventListener("resize",hb),window.addEventListener("orientationchange",hb),()=>{window.removeEventListener("resize",hb),window.removeEventListener("orientationchange",hb)}),[hb]),(0,de.useEffect)(()=>{Pe&&(async()=>{(lr.current||yt.current)&&cr.current||await gb()})().catch(e=>{console.error("Error handling media resize",e)})},[Pe,Yo]),(0,de.useEffect)(()=>{Xc([{producerId:"youyou",stream:void 0,id:"youyou",name:"youyou"}]),Yd([{id:"youyou",name:"youyou",producerId:""}]);const e=async()=>{const e=await yb(Ne.current,Le.current);Pi(e)};if(Pe){try{!1===Ie.current?(Qg(!0),e()):Qg(!1)}catch(e){console.log("error connectAndaAddSocketMethods",e)}oo({startTime:Date.now()/1e3,parameters:{...Jf(),...Kf()}});try{null!==c&&(c={...Jf(),...Kf()},d&&d(c))}catch{console.log("error updateSourceParameters")}}},[Pe]),(0,ce.jsxs)("div",{className:"MediaSFU",style:{height:"100vh",width:"100vw",maxWidth:"100vw",maxHeight:"100vh",overflow:"hidden",...v},children:[x&&Pe?le().createElement(x,{parameters:{...Jf(),...Kf()}}):Pe?l?(0,ce.jsxs)(k,{children:[(0,ce.jsx)(C,{backgroundColor:"rgba(217, 227, 234, 0.99)",defaultFraction:1-us,updateIsWideScreen:Il,updateIsMediumScreen:Al,updateIsSmallScreen:Tl,showControls:"webinar"==et.current||"conference"==et.current,children:(0,ce.jsxs)(j,{doStack:!0,mainSize:Yo,updateComponentSizes:Ch,defaultFraction:1-us,componentSizes:_p,showControls:"webinar"==et.current||"conference"==et.current,children:[(0,ce.jsxs)(P,{height:_p.mainHeight,width:_p.mainWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",mainSize:Yo,showAspect:Yo>0,timeBackgroundColor:Dp,meetingProgressTime:Si,timerComponent:U,children:[(0,ce.jsx)(F,{customWidth:_p.mainWidth,customHeight:_p.mainHeight,rows:1,columns:1,componentsToRender:mi.current?mi.current:[],showAspect:mi.current.length>0&&!(rg.current&&!ag.current),localStreamScreen:oa.current,annotateScreenStream:bg.current,Screenboard:yt.current&&(0,ce.jsx)(E,{customWidth:_p.mainWidth,customHeight:_p.mainHeight,parameters:{...Jf(),...Kf()},showAspect:yt.current})}),(0,ce.jsx)($,{customWidth:_p.mainWidth,customHeight:_p.mainHeight,parameters:{...Jf(),...Kf()},showAspect:rg.current&&!ag.current}),(0,ce.jsx)(B,{buttons:db,position:"right",location:"bottom",direction:"vertical",showAspect:"broadcast"==et.current}),(0,ce.jsx)(B,{buttons:sb,direction:"horizontal",showAspect:"broadcast"==et.current&&!Lp&&"2"==_e.current,location:"bottom",position:"middle"}),(0,ce.jsx)(B,{buttons:ib,direction:"horizontal",showAspect:"broadcast"==et.current&&Lp&&"2"==_e.current,location:"bottom",position:"middle"})]}),(0,ce.jsxs)(I,{height:_p.otherHeight,width:_p.otherWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",showAspect:100!=Yo,timeBackgroundColor:Dp,showTimer:0==Yo,meetingProgressTime:Si,timerComponent:U,children:[(0,ce.jsx)("div",{style:{width:"horizontal"===li.current?_p.otherWidth:ii.current,height:"horizontal"===li.current?ii.current:_p.otherHeight,padding:0,margin:0,display:es.current?"flex":"none",flexDirection:"horizontal"===li.current?"row":"column",justifyContent:"center",alignItems:"center"},children:(0,ce.jsx)(N,{totalPages:Ds,currentUserPage:zo.current,showAspect:es.current,paginationHeight:ii.current,direction:li.current,parameters:{...Jf(),...Kf()}})}),(0,ce.jsx)(D,{componentsToRender:fi.current?fi.current:[]}),(0,ce.jsx)(B,{buttons:lb,position:"right",location:"bottom",direction:"vertical",showAspect:"chat"==et.current}),(0,ce.jsx)(A,{customWidth:ui.current.gridWidth,customHeight:ui.current.gridHeight,rows:Cs,columns:Ps,componentsToRender:gi[0],backgroundColor:"rgba(217, 227, 234, 0.99)"}),(0,ce.jsx)(T,{customWidth:ui.current.altGridWidth,customHeight:ui.current.altGridHeight,rows:Is,columns:Ts,componentsToRender:gi[1],backgroundColor:"rgba(217, 227, 234, 0.99)"})]})]})}),(0,ce.jsx)(M,{backgroundColor:"rgba(217, 227, 234, 0.99)",showControls:"webinar"==et.current||"conference"==et.current,defaultFractionSub:us,children:(0,ce.jsx)(L,{buttons:ub,buttonColor:"black",buttonBackgroundColor:{default:"transparent",pressed:"transparent"},alignment:"space-between",vertical:!1,buttonsContainerStyle:{marginTop:2,marginBottom:2,backgroundColor:"transparent"}})})]}):(0,ce.jsx)(ce.Fragment,{children:" "}):b?le().createElement(b,{localLink:t,connectMediaSFU:r,parameters:{imgSrc:i,showAlert:Xf,updateIsLoadingModalVisible:Qg,connectSocket:ma,connectLocalSocket:ga,updateSocket:Pi,updateLocalSocket:Mi,updateValidated:ji,updateApiUserName:Ai,updateApiToken:Ti,updateLink:Fi,updateRoomName:Di,updateMember:Ni},credentials:a,returnUI:l,noUIPreJoinOptions:u,createMediaSFURoom:m,joinMediaSFURoom:p}):R?.welcomePage?(0,ce.jsx)(ke,{parameters:{imgSrc:i,showAlert:Xf,updateIsLoadingModalVisible:Qg,connectSocket:ma,updateSocket:Pi,updateValidated:ji,updateApiUserName:Ai,updateApiToken:Ti,updateLink:Fi,updateRoomName:Di,updateMember:Ni}}):(0,ce.jsx)(je,{parameters:{imgSrc:i,showAlert:Xf,updateIsLoadingModalVisible:Qg,connectSocket:ma,connectLocalSocket:ga,updateSocket:Pi,updateLocalSocket:Mi,updateValidated:ji,updateApiUserName:Ai,updateApiToken:Ti,updateLink:Fi,updateRoomName:Di,updateMember:Ni},credentials:a,localLink:t,connectMediaSFU:r,returnUI:l,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m}),l&&!x&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(J,{backgroundColor:"rgba(181, 233, 229, 0.97)",isVisible:Eu,onClose:()=>Hg(!1),customButtons:cb,roomName:ze.current,adminPasscode:qe.current,islevel:_e.current,eventType:et.current,localLink:t}),(0,ce.jsx)(X,{backgroundColor:"rgba(217, 227, 234, 0.99)",isEventSettingsModalVisible:zu,updateIsSettingsModalVisible:zg,onEventSettingsClose:()=>zg(!1),audioSetting:uu.current,videoSetting:pu.current,screenshareSetting:mu.current,chatSetting:gu.current,updateAudioSetting:Cg,updateVideoSetting:jg,updateScreenshareSetting:Pg,updateChatSetting:Mg,roomName:ze.current,socket:Ae.current}),(0,ce.jsx)(Z,{backgroundColor:"rgba(217, 227, 234, 0.99)",isRequestsModalVisible:qu,onRequestClose:()=>Ug(!1),requestCounter:ju.current,onRequestFilterChange:e=>{if(""!==e&&e.length>0){let t=Cu.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));Pu.current=t,ju.current=t.length}else Pu.current=Cu.current,ju.current=Cu.current.length},updateRequestList:Eg,requestList:Pu.current,roomName:ze.current,socket:Ae.current,parameters:{updateRequestCounter:Bg,updateRequestFilter:$g,updateRequestList:Eg,getUpdatedAllParams:Yf}}),(0,ce.jsx)(Q,{backgroundColor:"rgba(217, 227, 234, 0.99)",isWaitingModalVisible:Gu,onWaitingRoomClose:()=>qg(!1),waitingRoomCounter:Ru.current,onWaitingRoomFilterChange:e=>{if(""!==e&&e.length>0){let t=Su.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));wu.current=t,Ru.current=t.length}else wu.current=Su.current,Ru.current=Su.current.length},waitingRoomList:wu.current,updateWaitingList:Vg,roomName:ze.current,socket:Ae.current,parameters:{filteredWaitingRoomList:wu.current,getUpdatedAllParams:Yf}}),(0,ce.jsx)(ee,{backgroundColor:"rgba(217, 227, 234, 0.99)",isCoHostModalVisible:Ku,updateIsCoHostModalVisible:_g,onCoHostClose:()=>_g(!1),coHostResponsibility:Ye.current,participants:tt.current,currentCohost:Ge.current,roomName:ze.current,showAlert:Xf,updateCoHostResponsibility:$i,updateCoHost:Bi,socket:Ae.current}),(0,ce.jsx)(te,{backgroundColor:"rgba(181, 233, 229, 0.97)",isMediaSettingsModalVisible:Xu,onMediaSettingsClose:()=>Gg(!1),parameters:{...Jf(),...Kf()}}),(0,ce.jsx)(re,{backgroundColor:"rgba(217, 227, 234, 0.99)",isParticipantsModalVisible:tp,onParticipantsClose:()=>Kg(!1),participantsCounter:at.current,onParticipantsFilterChange:e=>{if(""!==e&&e.length>0){let t=tt.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));rt.current=t,at.current=t.length}else rt.current=tt.current,at.current=tt.current.length},parameters:{updateParticipants:qi,updateIsParticipantsModalVisible:Kg,updateDirectMessageDetails:wg,updateStartDirectMessage:Rg,updateIsMessagesModalVisible:Jg,showAlert:Xf,filteredParticipants:rt.current,participants:rt.current,roomName:ze.current,islevel:_e.current,member:Ue.current,coHostResponsibility:Ye.current,coHost:Ge.current,eventType:et.current,startDirectMessage:iu.current,directMessageDetails:cu.current,socket:Ae.current,getUpdatedAllParams:Jf}}),(0,ce.jsx)(ne,{backgroundColor:"rgba(217, 227, 234, 0.99)",isDisplaySettingsModalVisible:Qu,onDisplaySettingsClose:()=>Yg(!1),parameters:{...Jf(),...Kf()}}),(0,ce.jsx)(be,{backgroundColor:"rgba(217, 227, 234, 0.99)",isRecordingModalVisible:Hu,onClose:()=>Og(!1),startRecording:ca,confirmRecording:da,parameters:{...Jf(),...Kf()}}),(0,ce.jsx)(ae,{backgroundColor:"webinar"==et.current||"conference"==et.current?"#f5f5f5":"rgba(255, 255, 255, 0.25)",isMessagesModalVisible:ap,onMessagesClose:()=>Jg(!1),messages:su.current,eventType:et.current,member:Ue.current,islevel:_e.current,coHostResponsibility:Ye.current,coHost:Ge.current,startDirectMessage:iu.current,directMessageDetails:cu.current,updateStartDirectMessage:Rg,updateDirectMessageDetails:wg,showAlert:Xf,roomName:ze.current,socket:Ae.current,chatSetting:gu.current}),(0,ce.jsx)(oe,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmExitModalVisible:op,onConfirmExitClose:()=>Xg(!1),member:Ue.current,roomName:ze.current,socket:Ae.current,islevel:_e.current}),(0,ce.jsx)(se,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmHereModalVisible:ip,onConfirmHereClose:()=>Zg(!1),member:Ue.current,roomName:ze.current,socket:Ae.current}),(0,ce.jsx)(fe,{isShareEventModalVisible:dp,onShareEventClose:()=>eh(!1),roomName:ze.current,islevel:_e.current,adminPasscode:qe.current,eventType:et.current,localLink:t}),(0,ce.jsx)(ye,{isPollModalVisible:vm,onClose:()=>Sm(!1),member:Ue.current,islevel:_e.current,polls:ym.current,poll:xm.current,socket:Ae.current,roomName:ze.current,showAlert:Xf,updateIsPollModalVisible:Sm,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro}),(0,ce.jsx)(xe,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Em,onClose:()=>ff(!1),parameters:{...Jf(),...Kf()}}),(0,ce.jsx)(Se,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Xm,onBreakoutRoomsClose:()=>Pf(!1),parameters:{...Jf(),...Kf()}}),(0,ce.jsx)(Re,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:ig,onConfigureWhiteboardClose:()=>Lf(!1),parameters:{...Jf(),...Kf()}}),(0,ce.jsx)(we,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:xg,onClose:()=>_f(!1),parameters:{...Jf(),...Kf()}}),(0,ce.jsx)(K,{visible:Iu,message:Tu,type:Du,duration:Lu,onHide:()=>Au(!1),textColor:"#ffffff"}),(0,ce.jsx)(Y,{isVisible:up,backgroundColor:"rgba(217, 227, 234, 0.99)",displayColor:"black"})]})]})},ui=({PrejoinPage:e=ks,localLink:t="",connectMediaSFU:r=!0,credentials:a={apiUserName:"",apiKey:""},useLocalUIMode:n=!1,seedData:o={},useSeed:s=!1,imgSrc:i="https://mediasfu.com/images/logo192.png",sourceParameters:c,updateSourceParameters:d,returnUI:l=!0,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m,customComponent:g,customVideoCard:h,customAudioCard:f,customMiniCard:b,containerStyle:x,uiOverrides:v})=>{const R=(0,de.useMemo)(()=>Ua(v?.mainContainer,He),[v?.mainContainer]),k=(0,de.useMemo)(()=>Ua(v?.mainAspect,ge),[v?.mainAspect]),C=(0,de.useMemo)(()=>Ua(v?.mainScreen,$e),[v?.mainScreen]),j=(0,de.useMemo)(()=>Ua(v?.mainGrid,Ee),[v?.mainGrid]),P=(0,de.useMemo)(()=>Ua(v?.flexibleVideo,Xs),[v?.flexibleVideo]),M=(0,de.useMemo)(()=>Ua(v?.controlButtonsTouch,Ce),[v?.controlButtonsTouch]),I=(0,de.useMemo)(()=>Ua(v?.audioGrid,ht),[v?.audioGrid]),A=(0,de.useMemo)(()=>Ua(v?.participantsModal,hs),[v?.participantsModal]),T=(0,de.useMemo)(()=>Ua(v?.recordingModal,ns),[v?.recordingModal]),F=(0,de.useMemo)(()=>Ua(v?.messagesModal,bs),[v?.messagesModal]),D=(0,de.useMemo)(()=>Ua(v?.confirmExitModal,xs),[v?.confirmExitModal]),N=(0,de.useMemo)(()=>Ua(v?.confirmHereModal,vs),[v?.confirmHereModal]),L=(0,de.useMemo)(()=>Ua(v?.shareEventModal,Ss),[v?.shareEventModal]),V=(0,de.useMemo)(()=>Ua(v?.loadingModal,Ko),[v?.loadingModal]),B=(0,de.useMemo)(()=>Ua(v?.alert,Xo),[v?.alert]),$=(0,de.useMemo)(()=>Ua(v?.preJoinPage,e),[v?.preJoinPage,e]),E=(0,de.useMemo)(()=>qa(v?.consumerResume,xn),[v?.consumerResume]),W=(0,de.useMemo)(()=>qa(v?.addVideosGrid,Mn),[v?.addVideosGrid]),[H,O]=(0,de.useState)(n),z=(0,de.useRef)(n),U=(0,de.useRef)({}),q=(0,de.useRef)(null),_=(0,de.useRef)(null),G=(0,de.useRef)(null),Y=(0,de.useRef)(""),K=(0,de.useRef)(""),J=(0,de.useRef)(""),X=(0,de.useRef)(""),Z=(0,de.useRef)(s&&o?.member?o?.member:""),Q=(0,de.useRef)(""),ee=(0,de.useRef)(s&&o?.member&&o.member==o?.host?"2":"1"),te=(0,de.useRef)(""),re=(0,de.useRef)([{name:"participants",value:!1,dedicated:!1},{name:"media",value:!1,dedicated:!1},{name:"waiting",value:!1,dedicated:!1},{name:"chat",value:!1,dedicated:!1}]),ae=(0,de.useRef)(!!te.current&&te.current==Z.current),ne=(0,de.useRef)(!!ee&&"2"==ee.current),oe=(0,de.useRef)(!1),se=(0,de.useRef)("media"),he=(0,de.useRef)(!1),fe=(0,de.useRef)("broadcast"),be=(0,de.useRef)(s&&o?.participants?o?.participants:[]),ye=(0,de.useRef)(be.current),xe=(0,de.useRef)(0),ve=(0,de.useRef)(""),Se=(0,de.useRef)([]),Re=(0,de.useRef)(null),we=(0,de.useRef)([]),ke=(0,de.useRef)(null),je=(0,de.useRef)(4),Pe=(0,de.useRef)(!1),Me=(0,de.useRef)(!1),Ie=(0,de.useRef)(4),Ae=(0,de.useRef)(!1),Te=(0,de.useRef)(!1),Fe=(0,de.useRef)("landscape"),De=(0,de.useRef)("sd"),Ne=(0,de.useRef)("sd"),Le=(0,de.useRef)({width:640,height:360}),Ve=(0,de.useRef)(10),Be=(0,de.useRef)({}),We=(0,de.useRef)({}),Oe=(0,de.useRef)({}),ze=(0,de.useRef)({}),Ue=(0,de.useRef)(0),qe=(0,de.useRef)(0),_e=(0,de.useRef)(!1),Ge=(0,de.useRef)(0),Ye=(0,de.useRef)(0),Ke=(0,de.useRef)(0),Je=(0,de.useRef)(0),Xe=(0,de.useRef)(!1),Ze=(0,de.useRef)(0),Qe=(0,de.useRef)(0),et=(0,de.useRef)(!1),tt=(0,de.useRef)(!1),rt=(0,de.useRef)(!1),at=(0,de.useRef)(!1),nt=(0,de.useRef)("landscape"),ot=(0,de.useRef)(!1),st=(0,de.useRef)(!1),it=(0,de.useRef)({mainSpecs:{mediaOptions:"video",audioOptions:"all",videoOptions:"all",videoType:"fullDisplay",videoOptimized:!1,recordingDisplayType:"media",addHLS:!1},dispSpecs:{nameTags:!0,backgroundColor:"#000000",nameTagsColor:"#ffffff",orientationVideo:"portrait"}}),ct=(0,de.useRef)(!1),dt=(0,de.useRef)(!1),lt=(0,de.useRef)(!1),ut=(0,de.useRef)(null),pt=(0,de.useRef)(0),mt=(0,de.useRef)(0),gt=(0,de.useRef)(!1),ft=(0,de.useRef)(!1),bt=(0,de.useRef)(15e3),yt=(0,de.useRef)(0),xt=(0,de.useRef)(0),vt=(0,de.useRef)(!0),St=(0,de.useRef)(!1),Rt=(0,de.useRef)(!1),wt=(0,de.useRef)(!1),kt=(0,de.useRef)(!1),Ct=(0,de.useRef)(!1),jt=(0,de.useRef)(!1),Pt=(0,de.useRef)(""),Mt=(0,de.useRef)([]),It=(0,de.useRef)([]),At=(0,de.useRef)([]),Tt=(0,de.useRef)([]),Ft=(0,de.useRef)(""),Dt=(0,de.useRef)(""),Nt=(0,de.useRef)(""),Lt=(0,de.useRef)(""),Vt=(0,de.useRef)([]),Bt=(0,de.useRef)([]),$t=(0,de.useRef)(null),Et=(0,de.useRef)(!1),Wt=(0,de.useRef)(!1),Ht=(0,de.useRef)(!1),Ot=(0,de.useRef)(!1),zt=(0,de.useRef)(!1),Ut=(0,de.useRef)(null),qt=(0,de.useRef)(0),_t=(0,de.useRef)(!1),Gt=(0,de.useRef)(null),Yt=(0,de.useRef)(""),Kt=(0,de.useRef)("user"),Jt=(0,de.useRef)("user"),Xt=(0,de.useRef)(""),Zt=(0,de.useRef)(!1),Qt=(0,de.useRef)([]),er=(0,de.useRef)([]),tr=(0,de.useRef)([]),rr=(0,de.useRef)([]),ar=(0,de.useRef)([]),nr=(0,de.useRef)(!1),or=(0,de.useRef)(!1),sr=(0,de.useRef)(!1),ir=(0,de.useRef)(!1),cr=(0,de.useRef)(!1),dr=(0,de.useRef)(!1),lr=(0,de.useRef)(null),ur=(0,de.useRef)(null),pr=(0,de.useRef)(null),mr=(0,de.useRef)(0),gr=(0,de.useRef)(0),hr=(0,de.useRef)(0),br=(0,de.useRef)(240),yr=(0,de.useRef)([]),xr=(0,de.useRef)("Host"),vr=(0,de.useRef)(!1),Sr=(0,de.useRef)(null),[Rr,wr]=(0,de.useState)(!1),[kr,Cr]=(0,de.useState)(!1),jr=(0,de.useRef)(""),Pr=(0,de.useRef)([]),Mr=(0,de.useRef)(""),Ir=(0,de.useRef)([]),Ar=(0,de.useRef)([]),Tr=(0,de.useRef)(!1),Fr=(0,de.useRef)([]),Dr=(0,de.useRef)([]),Nr=(0,de.useRef)([]),Lr=(0,de.useRef)([]),Vr=(0,de.useRef)(null),Br=(0,de.useRef)(""),$r=(0,de.useRef)(""),Er=(0,de.useRef)(""),Wr=(0,de.useRef)(""),Hr=(0,de.useRef)(""),Or=(0,de.useRef)(!1),zr=(0,de.useRef)(""),Ur=(0,de.useRef)(!1),qr=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),_r=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),Gr=(0,de.useRef)(null),Yr=(0,de.useRef)(null),Kr=(0,de.useRef)(0),Jr=(0,de.useRef)(4),Xr=(0,de.useRef)(!1),Zr=(0,de.useRef)(0),Qr=(0,de.useRef)(3e4),ea=(0,de.useRef)(1e4),ta=(0,de.useRef)(0),ra=(0,de.useRef)([]),aa=(0,de.useRef)(0),[na,oa]=(0,de.useState)(100),ia=(0,de.useRef)(na),pa=(0,de.useRef)(!1),ha=(0,de.useRef)(!1),ba=(0,de.useRef)(!1),ya=(0,de.useRef)([]),xa=(0,de.useRef)([]),[va,Sa]=(0,de.useState)(0),Ra=(0,de.useRef)(!1),wa=(0,de.useRef)(!1),ka=(0,de.useRef)(!1),Ca=(0,de.useRef)(!1),ja=(0,de.useRef)(!1),[Pa,Ma]=(0,de.useState)(0),[Ia,Aa]=(0,de.useState)(0),[Ta,Da]=(0,de.useState)(0),[za,en]=(0,de.useState)(0),[tn,rn]=(0,de.useState)(0),an=(0,de.useRef)([]),[nn,on]=(0,de.useState)(!1),sn=(0,de.useRef)(null),cn=(0,de.useRef)(!1),dn=(0,de.useRef)([]),ln=(0,de.useRef)([]),un=(0,de.useRef)(null),pn=(0,de.useRef)(null),bn=(0,de.useRef)(!1),yn=(0,de.useRef)(40),Hn=(0,de.useRef)("horizontal"),eo=(0,de.useRef)({gridWidth:0,gridHeight:0,altGridWidth:0,altGridHeight:0}),to=(0,de.useRef)(!1),ro=(0,de.useRef)([]),[ao,no]=(0,de.useState)([[],[]]),co=(0,de.useRef)([]),[uo,go]=(0,de.useState)([]),[ho,fo]=(0,de.useState)([]),[bo,So]=(0,de.useState)("00:00:00"),To=(0,de.useRef)(0),Do=(0,de.useRef)([]),No=(0,de.useRef)([]),Bo=e=>{O(e)},Ho=e=>{U.current=e},Oo=e=>{q.current=e},zo=e=>{G.current=e},Yo=e=>{Y.current=e},Jo=e=>{K.current=e},Zo=e=>{J.current=e},Qo=e=>{X.current=e},es=e=>{e.length>0&&e.includes("_")&&(rs(e.split("_")[1]),e=e.split("_")[0]),Z.current=e},ts=e=>{Q.current=e},rs=e=>{ee.current=e},as=e=>{te.current=e},os=e=>{re.current=e},ss=e=>{ae.current=e},is=e=>{ne.current=e},cs=e=>{oe.current=e},ds=e=>{se.current=e},ls=e=>{he.current=e},us=e=>{fe.current=e},ps=e=>{be.current=e,ye.current=e,xe.current=e.length},ms=e=>{xe.current=e},gs=e=>{ve.current=e},fs=e=>{Ue.current=e},ys=e=>{qe.current=e},Rs=e=>{_e.current=e},ws=e=>{Ge.current=e},Cs=e=>{Ye.current=e},js=e=>{Ke.current=e},Ps=e=>{Je.current=e},Ms=e=>{Xe.current=e},Is=e=>{Ze.current=e},As=e=>{Qe.current=e},Ts=e=>{et.current=e},Fs=e=>{tt.current=e},Ds=e=>{rt.current=e},Ns=e=>{at.current=e},Ls=e=>{nt.current=e},Vs=e=>{ot.current=e},Bs=e=>{st.current=e},$s=e=>{it.current=e},Es=e=>{ct.current=e},Ws=e=>{dt.current=e},Hs=e=>{lt.current=e},Os=e=>{ut.current=e},zs=e=>{pt.current=e},Us=e=>{mt.current=e},qs=e=>{gt.current=e},_s=e=>{ft.current=e},Gs=e=>{bt.current=e},Ys=e=>{yt.current=e},Ks=e=>{xt.current=e},Js=e=>{vt.current=e},Zs=e=>{St.current=e},Qs=e=>{No.current=e},ei=e=>{Se.current=e},ti=e=>{Re.current=e},ri=e=>{we.current=e},ai=e=>{ke.current=e},si=e=>{je.current=e},ii=e=>{Pe.current=e},ci=e=>{Me.current=e},di=e=>{Ie.current=e},li=e=>{Ae.current=e},ui=e=>{Te.current=e},pi=e=>{Fe.current=e},mi=e=>{De.current=e},gi=e=>{Ne.current=e},hi=e=>{Le.current=e},fi=e=>{Ve.current=e},bi=e=>{Be.current=e},yi=e=>{We.current=e},xi=e=>{Oe.current=e},vi=e=>{ze.current=e},Si=e=>{Rt.current=e},Ri=e=>{wt.current=e},wi=e=>{kt.current=e},ki=e=>{Ct.current=e},Ci=e=>{jt.current=e},ji=e=>{Pt.current=e},Pi=e=>{Mt.current=e},Mi=e=>{It.current=e},Ii=e=>{At.current=e},Ai=e=>{Tt.current=e},Ti=e=>{Ft.current=e},Fi=e=>{Dt.current=e},Di=e=>{Nt.current=e},Ni=e=>{Lt.current=e},Li=e=>{Vt.current=e},Vi=e=>{Bt.current=e},Bi=e=>{$t.current=e},$i=e=>{Et.current=e},Ei=e=>{Wt.current=e},Wi=e=>{Ht.current=e},Hi=e=>{Ot.current=e},Oi=e=>{zt.current=e},zi=e=>{Ut.current=e},Ui=e=>{qt.current=e},qi=e=>{_t.current=e},_i=e=>{Gt.current=e},Gi=e=>{Yt.current=e},Yi=e=>{Kt.current=e},Ki=e=>{Jt.current=e},Ji=e=>{Xt.current=e},Xi=e=>{Zt.current=e},Zi=e=>{Qt.current=e},Qi=e=>{er.current=e},ec=e=>{tr.current=e},tc=e=>{rr.current=e},rc=e=>{ar.current=e},ac=e=>{nr.current=e},nc=e=>{or.current=e},oc=e=>{sr.current=e},sc=e=>{ir.current=e},ic=e=>{cr.current=e},cc=e=>{dr.current=e},dc=e=>{lr.current=e},lc=e=>{ur.current=e},uc=e=>{pr.current=e},pc=e=>{mr.current=e},mc=e=>{gr.current=e},gc=e=>{hr.current=e},hc=e=>{yr.current=e},fc=e=>{xr.current=e},bc=e=>{vr.current=e},yc=e=>{Sr.current=e},xc=e=>{wr(e)},vc=e=>{Cr(e)},Sc=e=>{jr.current=e},Rc=e=>{Pr.current=e},wc=e=>{Mr.current=e},kc=e=>{Ir.current=e},Cc=e=>{Ar.current=e},jc=e=>{Tr.current=e},Pc=e=>{Fr.current=e},Mc=e=>{Dr.current=e},Ic=e=>{Nr.current=e},Ac=e=>{Lr.current=e},Tc=e=>{Vr.current=e},Fc=e=>{Br.current=e},Dc=e=>{$r.current=e},Nc=e=>{Er.current=e},Lc=e=>{Wr.current=e},Vc=e=>{Hr.current=e},Bc=e=>{Or.current=e},$c=e=>{zr.current=e},Ec=e=>{Ur.current=e},Wc=e=>{qr.current=e},Hc=e=>{_r.current=e},Oc=e=>{Gr.current=e},zc=e=>{Yr.current=e},Uc=e=>{Kr.current=e},qc=e=>{Jr.current=e},_c=e=>{Xr.current=e},Gc=e=>{Zr.current=e},Yc=e=>{ta.current=e},Kc=e=>{ra.current=e},Jc=e=>{aa.current=e},Xc=e=>{oa(e)},Zc=e=>{ia.current=e},Qc=e=>{pa.current=e},ed=e=>{ha.current=e},td=e=>{ba.current=e},rd=e=>{ya.current=e},ad=e=>{xa.current=e},nd=e=>{Sa(e)},od=e=>{Ra.current=e},sd=e=>{wa.current=e},id=e=>{ka.current=e},cd=e=>{Ca.current=e},dd=e=>{ja.current=e},ld=e=>{Ma(e)},ud=e=>{Aa(e)},pd=e=>{Da(e)},md=e=>{en(e)},gd=e=>{rn(e)},hd=e=>{an.current=e},fd=e=>{on(e)},bd=e=>{sn.current=e},yd=e=>{cn.current=e},xd=e=>{dn.current=e},vd=e=>{ln.current=e},Sd=e=>{un.current=e},Rd=e=>{pn.current=e},wd=e=>{bn.current=e},kd=e=>{yn.current=e},Cd=e=>{Hn.current=e},jd=e=>{eo.current=e},Pd=e=>{to.current=e},Md=e=>{ro.current=e},Id=e=>{no(e)},Ad=e=>{co.current=e},Td=e=>{go(e)},Fd=e=>{fo(e)},Dd=e=>{So(e)},Nd=e=>{To.current=e},Ld=e=>{Do.current=e},Vd=(0,de.useRef)(s&&o?.messages?o.messages:[]),Bd=(0,de.useRef)(!1),$d=(0,de.useRef)(null),[Ed,Wd]=(0,de.useState)(!1),Hd=(0,de.useRef)("allow"),Od=(0,de.useRef)("allow"),zd=(0,de.useRef)("allow"),Ud=(0,de.useRef)("allow"),qd=(0,de.useRef)(se.current?se.current:"media"),_d=(0,de.useRef)(!0),Gd=(0,de.useRef)("webinar"!==fe.current&&"conference"!==fe.current),Yd=(0,de.useRef)(!1),Kd=(0,de.useRef)("video"),Jd=(0,de.useRef)(""),Xd=(0,de.useRef)([]),Zd=(0,de.useRef)(0),Qd=(0,de.useRef)(Xd.current),el=(0,de.useRef)(""),tl=(0,de.useRef)([]),rl=(0,de.useRef)(0),al=(0,de.useRef)(tl.current),nl=(0,de.useRef)(0),[ol,sl]=(0,de.useState)(!1),[il,cl]=(0,de.useState)(""),[dl,ll]=(0,de.useState)("info"),[ul,pl]=(0,de.useState)(3e3),[ml]=(0,de.useState)(!0),[gl]=(0,de.useState)(0),[hl,fl]=(0,de.useState)(!1),[bl,yl]=(0,de.useState)(!1),[xl,vl]=(0,de.useState)(!1),[Sl,Rl]=(0,de.useState)(!1),[wl,kl]=(0,de.useState)(!1),[Cl,jl]=(0,de.useState)(!1),[Pl,Ml]=(0,de.useState)(!1),[Il,Al]=(0,de.useState)(!1),[Tl,Fl]=(0,de.useState)(!1),[Dl,Nl]=(0,de.useState)(!1),[Ll,Vl]=(0,de.useState)(!1),[Bl,$l]=(0,de.useState)(!1),[El,Wl]=(0,de.useState)(!1),[Hl,Ol]=(0,de.useState)(!1),zl=(0,de.useRef)("video"),Ul=(0,de.useRef)("all"),ql=(0,de.useRef)("all"),_l=(0,de.useRef)("fullDisplay"),Gl=(0,de.useRef)(!1),Yl=(0,de.useRef)("media"),Kl=(0,de.useRef)(!0),Jl=(0,de.useRef)(!0),[Xl,Zl]=(0,de.useState)("#83c0e9"),[Ql,eu]=(0,de.useState)("#ffffff"),tu=(0,de.useRef)(!1),ru=(0,de.useRef)("Add Text"),au=(0,de.useRef)("top"),[nu,ou]=(0,de.useState)("#ffffff"),su=(0,de.useRef)("landscape"),iu=(0,de.useRef)(!0),cu=(0,de.useRef)(!0),[du,lu]=(0,de.useState)("green"),[uu,pu]=(0,de.useState)(!1),[mu,gu]=(0,de.useState)("00:00:00"),[hu,fu]=(0,de.useState)(!1),[bu,yu]=(0,de.useState)(!1),xu=(0,de.useRef)(!1),vu=(0,de.useRef)(!1),Su=(0,de.useRef)({mainHeight:0,otherHeight:0,mainWidth:0,otherWidth:0}),[Ru,wu]=(0,de.useState)(!1),[ku,Cu]=(0,de.useState)(!1),ju=(0,de.useRef)(!1),Pu=(0,de.useRef)(!1),Mu=(0,de.useRef)(!1),Iu=(0,de.useRef)(!1),Au=(0,de.useRef)(!1),Tu=(0,de.useRef)(null),Fu=(0,de.useRef)(null),Du=(0,de.useRef)(null),Nu=(0,de.useRef)(null),Lu=(0,de.useRef)({}),Vu=(0,de.useRef)({}),Bu=(0,de.useRef)({}),$u=(0,de.useRef)(null),Eu=(0,de.useRef)(0),Wu=(0,de.useRef)(null),Hu=(0,de.useRef)([]),Ou=(0,de.useRef)([]),zu=(0,de.useRef)([]),Uu=(0,de.useRef)(null),[qu,_u]=(0,de.useState)(!1),Gu=(0,de.useRef)(null),Yu=(0,de.useRef)([]),Ku=(0,de.useRef)(!1),Ju=(0,de.useRef)(!1),Xu=(0,de.useRef)(!1),Zu=(0,de.useRef)(""),Qu=(0,de.useRef)(""),ep=(0,de.useRef)(null),tp=(0,de.useRef)(null),rp=(0,de.useRef)(!1),ap=(0,de.useRef)(null),np=(0,de.useRef)(!1),op=(0,de.useRef)(!1),sp=(0,de.useRef)(null),ip=(0,de.useRef)(null),cp=(0,de.useRef)(!1),dp=(0,de.useRef)(!1),[lp,up]=(0,de.useState)(!1),pp=(0,de.useRef)(!1),mp=(0,de.useRef)([]),gp=(0,de.useRef)(0),hp=(0,de.useRef)(!1),fp=(0,de.useRef)(!1),bp=(0,de.useRef)(!1),yp=(0,de.useRef)(-1),xp=(0,de.useRef)([]),vp=(0,de.useRef)(0),Sp=(0,de.useRef)(-1),[Rp,wp]=(0,de.useState)(!1),kp=(0,de.useRef)([]),Cp=(0,de.useRef)(null),jp=(0,de.useRef)(!1),Pp=(0,de.useRef)(!1),Mp=(0,de.useRef)(!1),Ip=(0,de.useRef)(je.current),[Ap,Tp]=(0,de.useState)(!1),[Fp,Dp]=(0,de.useState)(!1),Np=(0,de.useRef)([]),Lp=(0,de.useRef)(!0),Vp=(0,de.useRef)([]),Bp=(0,de.useRef)([]),$p=(0,de.useRef)(null),Ep=(0,de.useRef)(null),Wp=(0,de.useRef)(null),Hp=(0,de.useRef)(null),Op=(0,de.useRef)(!1),zp=(0,de.useRef)(null),[Up,qp]=(0,de.useState)(!1),_p=e=>{Vd.current=e},Gp=e=>{Bd.current=e},Yp=e=>{$d.current=e},Kp=e=>{Wd(e)},Jp=e=>{Hd.current=e},Xp=e=>{Od.current=e},Zp=e=>{zd.current=e},Qp=e=>{Ud.current=e},em=e=>{qd.current=e},tm=e=>{_d.current=e},rm=e=>{Gd.current=e},am=e=>{Yd.current=e},nm=e=>{Kd.current=e},om=e=>{Zd.current=e},sm=e=>{Jd.current=e},im=e=>{Xd.current=e,Qd.current=e,Zd.current=e.length},cm=e=>{rl.current=e},dm=e=>{el.current=e},lm=e=>{tl.current=e,al.current=e,rl.current=e.length},um=e=>{nl.current=e},pm=e=>{fl(e)},mm=e=>{yl(e),1==e?cs(!1):1==cu.current&&1==iu.current&&1==Et.current&&Um(!0)},gm=e=>{vl(e)},hm=e=>{Rl(e)},fm=e=>{kl(e)},bm=e=>{jl(e)},ym=e=>{Ml(e)},xm=e=>{Al(e)},vm=e=>{Fl(e)},Sm=e=>{Nl(e),0==e&&Kp(!1)},Rm=e=>{Vl(e)},wm=e=>{$l(e)},km=e=>{Ol(e)},Cm=e=>{Wl(e)},jm=e=>{zl.current=e,cu.current=!1},Pm=e=>{Ul.current=e,cu.current=!1},Mm=e=>{ql.current=e,cu.current=!1},Im=e=>{_l.current=e,cu.current=!1},Am=e=>{Gl.current=e,cu.current=!1},Tm=e=>{Yl.current=e,cu.current=!1},Fm=e=>{Kl.current=e,cu.current=!1},Dm=e=>{tu.current=e,cu.current=!1},Nm=e=>{ru.current=e,cu.current=!1},Lm=e=>{au.current=e,cu.current=!1},Vm=e=>{ou(e),cu.current=!1},Bm=e=>{Jl.current=e,cu.current=!1},$m=e=>{Zl(e),cu.current=!1},Em=e=>{eu(e),cu.current=!1},Wm=e=>{su.current=e,cu.current=!1},Hm=e=>{iu.current=e},Om=e=>{cu.current=e},zm=e=>{lu(e)},Um=e=>{pu(e)},qm=e=>{gu(e)},_m=e=>{fu(e)},Gm=e=>{yu(e)},Ym=e=>{xu.current=e,wh(e)},Km=e=>{vu.current=e,Sh(e)},Jm=e=>{Su.current=e},Xm=e=>{wu(e)},Zm=e=>{Cu(e)},Qm=async()=>"granted",eg=async()=>"granted",tg=e=>{ju.current=e},rg=e=>{Pu.current=e},ag=e=>{Mu.current=e},ng=e=>{Iu.current=e},og=e=>{Au.current=e},sg=e=>{Tu.current=e},ig=e=>{Fu.current=e},cg=e=>{Du.current=e},dg=e=>{Nu.current=e},lg=e=>{Lu.current=e},ug=e=>{Vu.current=e},pg=e=>{Bu.current=e},mg=e=>{$u.current=e},gg=e=>{Eu.current=e},hg=e=>{Wu.current=e},fg=e=>{Hu.current=e},bg=e=>{Ou.current=e},yg=e=>{zu.current=e},xg=e=>{Uu.current=e},vg=e=>{_u(e)},Sg=e=>{Gu.current=e},Rg=e=>{Yu.current=e},wg=e=>{Ku.current=e},kg=e=>{Ju.current=e},Cg=e=>{Xu.current=e},jg=e=>{Zu.current=e},Pg=e=>{Qu.current=e},Mg=e=>{ep.current=e},Ig=e=>{tp.current=e},Ag=e=>{rp.current=e},Tg=e=>{ap.current=e},Fg=e=>{np.current=e},Dg=e=>{op.current=e},Ng=e=>{sp.current=e},Lg=e=>{ip.current=e},Vg=e=>{cp.current=e},Bg=e=>{dp.current=e},$g=e=>{up(e)},Eg=e=>{pp.current=e},Wg=e=>{mp.current=e},Hg=e=>{gp.current=e},Og=e=>{hp.current=e},zg=e=>{fp.current=e},Ug=e=>{bp.current=e},qg=e=>{yp.current=e},_g=e=>{xp.current=e},Gg=e=>{vp.current=e},Yg=e=>{Sp.current=e},Kg=e=>{wp(e)},Jg=e=>{kp.current=e},Xg=e=>{Cp.current=e},Zg=e=>{jp.current=e},Qg=e=>{Pp.current=e},eh=e=>{Mp.current=e},th=e=>{Ip.current=e},rh=e=>{Tp(e)},ah=e=>{Dp(e)},nh=e=>{Np.current=e},oh=e=>{Lp.current=e},sh=e=>{Vp.current=e},ih=e=>{Bp.current=e},ch=e=>{$p.current=e},dh=e=>{Ep.current=e},lh=e=>{Wp.current=e},uh=e=>{Hp.current=e},ph=e=>{Op.current=e},mh=e=>{zp.current=e},gh=e=>{qp(e)};function hh(){return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}const fh=()=>{try{null!==c&&(c={...yh(),...bh()},d&&d(c))}catch{}return{...yh(),...bh()}},bh=()=>({updateMiniCardsGrid:_a,mixStreams:Ga,dispStreams:Ya,stopShareScreen:Ka,checkScreenShare:Ja,startShareScreen:Xa,requestScreenShare:Za,reorderStreams:Qa,prepopulateUserMedia:mn,getVideos:gn,rePort:hn,trigger:fn,consumerResume:E,connectSendTransport:Wn,connectSendTransportAudio:w,connectSendTransportVideo:vn,connectSendTransportScreen:Sn,processConsumerTransports:Rn,resumePauseStreams:wn,readjust:kn,checkGrid:Cn,getEstimate:jn,calculateRowsAndColumns:Pn,addVideosGrid:W,onScreenChanges:In,sleep:An,changeVids:Tn,compareActiveNames:Fn,compareScreenStates:Dn,createSendTransport:Nn,resumeSendTransportAudio:Ln,receiveAllPipedTransports:Vn,disconnectSendTransportVideo:Bn,disconnectSendTransportAudio:$n,disconnectSendTransportScreen:En,getPipedProducersAlt:On,signalNewConsumerTransport:y,connectRecvTransport:zn,reUpdateInter:Un,updateParticipantAudioDecibels:qn,closeAndResize:_n,autoAdjust:Gn,switchUserVideoAlt:Yn,switchUserVideo:Kn,switchUserAudio:Jn,getDomains:Io,formatNumber:Zn,connectIps:Qn,connectLocalIps:S,createDeviceClient:Na,captureCanvasStream:Uo,resumePauseAudioStreams:qo,processConsumerTransportsAudio:_o,checkPermission:Oa,streamSuccessVideo:$a,streamSuccessAudio:Ea,streamSuccessScreen:Wa,streamSuccessAudioSwitch:Ha,clickVideo:La,clickAudio:Va,clickScreenShare:Ba,switchVideoAlt:fr,requestPermissionCamera:Qm,requestPermissionAudio:eg,getMediaDevicesList:Th,getParticipantMedia:Fh}),yh=()=>({localUIMode:z.current,roomName:X.current,member:Z.current,adminPasscode:Q.current,youAreCoHost:ae.current,youAreHost:ne.current,islevel:ee.current,confirmedToRecord:oe.current,meetingDisplayType:se.current,meetingVideoOptimized:he.current,eventType:fe.current,participants:be.current,filteredParticipants:ye.current,participantsCounter:xe.current,participantsFilter:ve.current,consume_sockets:Se.current,rtpCapabilities:Re.current,roomRecvIPs:we.current,meetingRoomParams:ke.current,itemPageLimit:je.current,audioOnlyRoom:Pe.current,addForBasic:Me.current,screenPageLimit:Ie.current,shareScreenStarted:Ae.current,shared:Te.current,targetOrientation:Fe.current,targetResolution:De.current,targetResolutionHost:Ne.current,vidCons:Le.current,frameRate:Ve.current,hParams:Be.current,vParams:We.current,screenParams:Oe.current,aParams:ze.current,recordingAudioPausesLimit:Ue.current,recordingAudioPausesCount:qe.current,recordingAudioSupport:_e.current,recordingAudioPeopleLimit:Ge.current,recordingAudioParticipantsTimeLimit:Ye.current,recordingVideoPausesCount:Ke.current,recordingVideoPausesLimit:Je.current,recordingVideoSupport:Xe.current,recordingVideoPeopleLimit:Ze.current,recordingVideoParticipantsTimeLimit:Qe.current,recordingAllParticipantsSupport:et.current,recordingVideoParticipantsSupport:tt.current,recordingAllParticipantsFullRoomSupport:rt.current,recordingVideoParticipantsFullRoomSupport:at.current,recordingPreferredOrientation:nt.current,recordingSupportForOtherOrientation:ot.current,recordingMultiFormatsSupport:st.current,userRecordingParams:it.current,canRecord:ct.current,startReport:dt.current,endReport:lt.current,recordStartTime:pt.current,recordElapsedTime:mt.current,isTimerRunning:gt.current,canPauseResume:ft.current,recordChangeSeconds:bt.current,pauseLimit:yt.current,pauseRecordCount:xt.current,canLaunchRecord:vt.current,stopLaunchRecord:St.current,participantsAll:No.current,firstAll:Rt.current,updateMainWindow:wt.current,first_round:kt.current,landScaped:Ct.current,lock_screen:jt.current,screenId:Pt.current,allVideoStreams:Mt.current,newLimitedStreams:It.current,newLimitedStreamsIDs:At.current,activeSounds:Tt.current,screenShareIDStream:Ft.current,screenShareNameStream:Dt.current,adminIDStream:Nt.current,adminNameStream:Lt.current,youYouStream:Vt.current,youYouStreamIDs:Bt.current,localStream:$t.current,recordStarted:Et.current,recordResumed:Wt.current,recordPaused:Ht.current,recordStopped:Ot.current,adminRestrictSetting:zt.current,videoRequestState:Ut.current,videoRequestTime:qt.current,videoAction:_t.current,localStreamVideo:Gt.current,userDefaultVideoInputDevice:Yt.current,currentFacingMode:Kt.current,prevFacingMode:Jt.current,defVideoID:Xt.current,allowed:Zt.current,dispActiveNames:Qt.current,p_dispActiveNames:er.current,activeNames:tr.current,prevActiveNames:rr.current,p_activeNames:ar.current,membersReceived:nr.current,deferScreenReceived:or.current,hostFirstSwitch:sr.current,micAction:ir.current,screenAction:cr.current,chatAction:dr.current,audioRequestState:lr.current,screenRequestState:ur.current,chatRequestState:pr.current,audioRequestTime:mr.current,screenRequestTime:gr.current,chatRequestTime:hr.current,updateRequestIntervalSeconds:br.current,oldSoundIds:yr.current,hostLabel:xr.current,mainScreenFilled:vr.current,localStreamScreen:Sr.current,screenAlreadyOn:Rr,chatAlreadyOn:kr,redirectURL:jr.current,oldAllStreams:Pr.current,adminVidID:Mr.current,streamNames:Ir.current,non_alVideoStreams:Ar.current,sortAudioLoudness:Tr.current,audioDecibels:Fr.current,mixed_alVideoStreams:Dr.current,non_alVideoStreams_muted:Nr.current,paginatedStreams:Lr.current,localStreamAudio:Vr.current,defAudioID:Br.current,userDefaultAudioInputDevice:$r.current,userDefaultAudioOutputDevice:Er.current,prevAudioInputDevice:Wr.current,prevVideoInputDevice:Hr.current,audioPaused:Or.current,mainScreenPerson:zr.current,adminOnMainScreen:Ur.current,screenStates:qr.current,prevScreenStates:_r.current,updateDateState:Gr.current,lastUpdate:Yr.current,nForReadjustRecord:Kr.current,fixedPageLimit:Jr.current,removeAltGrid:Xr.current,nForReadjust:Zr.current,lastReorderTime:ta.current,reorderInterval:Qr.current,fastReorderInterval:ea.current,audStreamNames:ra.current,currentUserPage:aa.current,mainHeightWidth:na,prevMainHeightWidth:ia.current,prevDoPaginate:pa.current,doPaginate:ha.current,shareEnded:ba.current,lStreams:ya.current,chatRefStreams:xa.current,controlHeight:va,isWideScreen:Ra.current,isMediumScreen:wa.current,isSmallScreen:ka.current,addGrid:Ca.current,addAltGrid:ja.current,gridRows:Pa,gridCols:Ia,altGridRows:Ta,altGridCols:za,numberPages:tn,currentStreams:an,showMiniView:nn,nStream:sn.current,defer_receive:cn.current,allAudioStreams:dn.current,screenProducer:un.current,remoteScreenStream:ln.current,gotAllVids:bn.current,paginationHeightWidth:yn.current,paginationDirection:Hn.current,gridSizes:eo.current,screenForceFullDisplay:to.current,mainGridStream:ro.current,otherGridStreams:ao,audioOnlyStreams:co.current,videoInputs:uo,audioInputs:ho,meetingProgressTime:bo,meetingElapsedTime:To.current,ref_participants:Do.current,messages:Vd.current,startDirectMessage:Bd.current,directMessageDetails:$d.current,coHost:te.current,coHostResponsibility:re.current,audioSetting:Hd.current,videoSetting:Od.current,screenshareSetting:zd.current,chatSetting:Ud.current,autoWave:_d.current,forceFullDisplay:Gd.current,prevForceFullDisplay:Yd.current,prevMeetingDisplayType:Kd.current,waitingRoomFilter:Jd.current,waitingRoomList:Xd.current,waitingRoomCounter:Zd.current,filteredWaitingRoomList:Qd.current,requestFilter:el.current,requestList:tl.current,requestCounter:rl.current,filteredRequestList:al.current,totalReqWait:nl.current,alertVisible:ol,alertMessage:il,alertType:dl,alertDuration:ul,progressTimerVisible:ml,progressTimerValue:gl,isMenuModalVisible:hl,isRecordingModalVisible:bl,isSettingsModalVisible:xl,isRequestsModalVisible:Sl,isWaitingModalVisible:wl,isCoHostModalVisible:Cl,isMediaSettingsModalVisible:Pl,isDisplaySettingsModalVisible:Il,isParticipantsModalVisible:Tl,isMessagesModalVisible:Dl,isConfirmExitModalVisible:Ll,isConfirmHereModalVisible:Bl,isLoadingModalVisible:Hl,recordingMediaOptions:zl.current,recordingAudioOptions:Ul.current,recordingVideoOptions:ql.current,recordingVideoType:_l.current,recordingVideoOptimized:Gl.current,recordingDisplayType:Yl.current,recordingAddHLS:Kl.current,recordingAddText:tu.current,recordingCustomText:ru.current,recordingCustomTextPosition:au.current,recordingCustomTextColor:nu,recordingNameTags:Jl.current,recordingBackgroundColor:Xl,recordingNameTagsColor:Ql,recordingOrientationVideo:su.current,clearedToResume:iu.current,clearedToRecord:cu.current,recordState:du,showRecordButtons:uu,recordingProgressTime:mu,audioSwitching:hu,videoSwitching:bu,videoAlreadyOn:xu.current,audioAlreadyOn:vu.current,componentSizes:Su.current,hasCameraPermission:Ru,hasAudioPermission:ku,transportCreated:ju.current,localTransportCreated:Pu.current,transportCreatedVideo:Mu.current,transportCreatedAudio:Iu.current,transportCreatedScreen:Au.current,producerTransport:Tu.current,localProducerTransport:Fu.current,videoProducer:Du.current,localVideoProducer:Nu.current,params:Lu.current,videoParams:Vu.current,audioParams:Bu.current,audioProducer:$u.current,audioLevel:Eu.current,localAudioProducer:Wu.current,consumerTransports:Hu.current,consumingTransports:Ou.current,polls:zu.current,poll:Uu.current,isPollModalVisible:qu,customImage:Zu.current,selectedImage:Qu.current,segmentVideo:ep.current,selfieSegmentation:tp.current,pauseSegmentation:rp.current,processedStream:ap.current,keepBackground:np.current,backgroundHasChanged:op.current,virtualStream:sp.current,mainCanvas:ip.current,prevKeepBackground:cp.current,appliedBackground:dp.current,isBackgroundModalVisible:lp,autoClickBackground:pp.current,breakoutRooms:mp.current,currentRoomIndex:gp.current,canStartBreakout:hp.current,breakOutRoomStarted:fp.current,breakOutRoomEnded:bp.current,hostNewRoom:yp.current,limitedBreakRoom:xp.current,mainRoomsLength:vp.current,memberRoom:Sp.current,isBreakoutRoomsModalVisible:Rp,whiteboardUsers:kp.current,currentWhiteboardIndex:Cp.current,canStartWhiteboard:jp.current,whiteboardStarted:Pp.current,whiteboardEnded:Mp.current,whiteboardLimit:Ip.current,isWhiteboardModalVisible:Ap,isConfigureWhiteboardModalVisible:Fp,shapes:Np.current,useImageBackground:Lp.current,redoStack:Vp.current,undoStack:Bp.current,canvasStream:$p.current,canvasWhiteboard:Ep.current,canvasScreenboard:Wp.current,processedScreenStream:Hp.current,annotateScreenStream:Op.current,mainScreenCanvas:zp.current,isScreenboardModalVisible:Up,permissionConfig:Gu.current,panelists:Yu.current,panelistsFocused:Ku.current,muteOthersMic:Ju.current,muteOthersCamera:Xu.current,validated:H,device:G.current,socket:U.current,localSocket:q.current,checkMediaPermission:!1,onWeb:!0,mediaDevices:ua,updateRoomName:Qo,updateMember:es,updateAdminPasscode:ts,updateYouAreCoHost:ss,updateYouAreHost:is,updateIslevel:rs,updateCoHost:as,updateCoHostResponsibility:os,updateConfirmedToRecord:cs,updateMeetingDisplayType:ds,updateMeetingVideoOptimized:ls,updateEventType:us,updateParticipants:ps,updateParticipantsCounter:ms,updateParticipantsFilter:gs,updateConsume_sockets:ei,updateRtpCapabilities:ti,updateRoomRecvIPs:ri,updateMeetingRoomParams:ai,updateItemPageLimit:si,updateAudioOnlyRoom:ii,updateAddForBasic:ci,updateScreenPageLimit:di,updateShareScreenStarted:li,updateShared:ui,updateTargetOrientation:pi,updateTargetResolution:mi,updateTargetResolutionHost:gi,updateVidCons:hi,updateFrameRate:fi,updateHParams:bi,updateVParams:yi,updateScreenParams:xi,updateAParams:vi,updateRecordingAudioPausesLimit:fs,updateRecordingAudioPausesCount:ys,updateRecordingAudioSupport:Rs,updateRecordingAudioPeopleLimit:ws,updateRecordingAudioParticipantsTimeLimit:Cs,updateRecordingVideoPausesCount:js,updateRecordingVideoPausesLimit:Ps,updateRecordingVideoSupport:Ms,updateRecordingVideoPeopleLimit:Is,updateRecordingVideoParticipantsTimeLimit:As,updateRecordingAllParticipantsSupport:Ts,updateRecordingVideoParticipantsSupport:Fs,updateRecordingAllParticipantsFullRoomSupport:Ds,updateRecordingVideoParticipantsFullRoomSupport:Ns,updateRecordingPreferredOrientation:Ls,updateRecordingSupportForOtherOrientation:Vs,updateRecordingMultiFormatsSupport:Bs,updateUserRecordingParams:$s,updateCanRecord:Es,updateStartReport:Ws,updateEndReport:Hs,updateRecordTimerInterval:Os,updateRecordStartTime:zs,updateRecordElapsedTime:Us,updateIsTimerRunning:qs,updateCanPauseResume:_s,updateRecordChangeSeconds:Gs,updatePauseLimit:Ys,updatePauseRecordCount:Ks,updateCanLaunchRecord:Js,updateStopLaunchRecord:Zs,updateParticipantsAll:Qs,updateFirstAll:Si,updateUpdateMainWindow:Ri,updateFirst_round:wi,updateLandScaped:ki,updateLock_screen:Ci,updateScreenId:ji,updateAllVideoStreams:Pi,updateNewLimitedStreams:Mi,updateNewLimitedStreamsIDs:Ii,updateActiveSounds:Ai,updateScreenShareIDStream:Ti,updateScreenShareNameStream:Fi,updateAdminIDStream:Di,updateAdminNameStream:Ni,updateYouYouStream:Li,updateYouYouStreamIDs:Vi,updateLocalStream:Bi,updateRecordStarted:$i,updateRecordResumed:Ei,updateRecordPaused:Wi,updateRecordStopped:Hi,updateAdminRestrictSetting:Oi,updateVideoRequestState:zi,updateVideoRequestTime:Ui,updateVideoAction:qi,updateLocalStreamVideo:_i,updateUserDefaultVideoInputDevice:Gi,updateCurrentFacingMode:Yi,updateRef_participants:Ld,updateDefVideoID:Ji,updateAllowed:Xi,updateDispActiveNames:Zi,updateP_dispActiveNames:Qi,updateActiveNames:ec,updatePrevActiveNames:tc,updateP_activeNames:rc,updateMembersReceived:ac,updateDeferScreenReceived:nc,updateHostFirstSwitch:oc,updateMicAction:sc,updateScreenAction:ic,updateChatAction:cc,updateAudioRequestState:dc,updateScreenRequestState:lc,updateChatRequestState:uc,updateAudioRequestTime:pc,updateScreenRequestTime:mc,updateChatRequestTime:gc,updateOldSoundIds:hc,updatehostLabel:fc,updateMainScreenFilled:bc,updateLocalStreamScreen:yc,updateScreenAlreadyOn:xc,updateChatAlreadyOn:vc,updateRedirectURL:Sc,updateOldAllStreams:Rc,updateAdminVidID:wc,updateStreamNames:kc,updateNon_alVideoStreams:Cc,updateSortAudioLoudness:jc,updateAudioDecibels:Pc,updateMixed_alVideoStreams:Mc,updateNon_alVideoStreams_muted:Ic,updatePaginatedStreams:Ac,updateLocalStreamAudio:Tc,updateDefAudioID:Fc,updateUserDefaultAudioInputDevice:Dc,updateUserDefaultAudioOutputDevice:Nc,updatePrevAudioInputDevice:Lc,updatePrevVideoInputDevice:Vc,updateAudioPaused:Bc,updateMainScreenPerson:$c,updateAdminOnMainScreen:Ec,updateScreenStates:Wc,updatePrevScreenStates:Hc,updateUpdateDateState:Oc,updateLastUpdate:zc,updateNForReadjustRecord:Uc,updateFixedPageLimit:qc,updateRemoveAltGrid:_c,updateNForReadjust:Gc,updateLastReorderTime:Yc,updateAudStreamNames:Kc,updateCurrentUserPage:Jc,updatePrevFacingMode:Ki,updateMainHeightWidth:Xc,updatePrevMainHeightWidth:Zc,updatePrevDoPaginate:Qc,updateDoPaginate:ed,updateShareEnded:td,updateLStreams:rd,updateChatRefStreams:ad,updateControlHeight:nd,updateIsWideScreen:od,updateIsMediumScreen:sd,updateIsSmallScreen:id,updateAddGrid:cd,updateAddAltGrid:dd,updateGridRows:ld,updateGridCols:ud,updateAltGridRows:pd,updateAltGridCols:md,updateNumberPages:gd,updateCurrentStreams:hd,updateShowMiniView:fd,updateNStream:bd,updateDefer_receive:yd,updateAllAudioStreams:xd,updateRemoteScreenStream:vd,updateScreenProducer:Sd,updateLocalScreenProducer:Rd,updateGotAllVids:wd,updatePaginationHeightWidth:kd,updatePaginationDirection:Cd,updateGridSizes:jd,updateScreenForceFullDisplay:Pd,updateMainGridStream:Md,updateOtherGridStreams:Id,updateAudioOnlyStreams:Ad,updateVideoInputs:Td,updateAudioInputs:Fd,updateMeetingProgressTime:Dd,updateMeetingElapsedTime:Nd,updateMessages:_p,updateStartDirectMessage:Gp,updateDirectMessageDetails:Yp,updateShowMessagesBadge:Kp,updateAudioSetting:Jp,updateVideoSetting:Xp,updateScreenshareSetting:Zp,updateChatSetting:Qp,updateDisplayOption:em,updateAutoWave:tm,updateForceFullDisplay:rm,updatePrevForceFullDisplay:am,updatePrevMeetingDisplayType:nm,updateWaitingRoomFilter:sm,updateWaitingRoomList:im,updateWaitingRoomCounter:om,updateRequestFilter:dm,updateRequestList:lm,updateRequestCounter:cm,updateTotalReqWait:um,updateIsMenuModalVisible:pm,updateIsRecordingModalVisible:mm,updateIsSettingsModalVisible:gm,updateIsRequestsModalVisible:hm,updateIsWaitingModalVisible:fm,updateIsCoHostModalVisible:bm,updateIsMediaSettingsModalVisible:ym,updateIsDisplaySettingsModalVisible:xm,updateIsParticipantsModalVisible:vm,updateIsMessagesModalVisible:Sm,updateIsConfirmExitModalVisible:Rm,updateIsConfirmHereModalVisible:wm,updateIsLoadingModalVisible:km,updateRecordingMediaOptions:jm,updateRecordingAudioOptions:Pm,updateRecordingVideoOptions:Mm,updateRecordingVideoType:Im,updateRecordingVideoOptimized:Am,updateRecordingDisplayType:Tm,updateRecordingAddHLS:Fm,updateRecordingAddText:Dm,updateRecordingCustomText:Nm,updateRecordingCustomTextPosition:Lm,updateRecordingCustomTextColor:Vm,updateRecordingNameTags:Bm,updateRecordingBackgroundColor:$m,updateRecordingNameTagsColor:Em,updateRecordingOrientationVideo:Wm,updateClearedToResume:Hm,updateClearedToRecord:Om,updateRecordState:zm,updateShowRecordButtons:Um,updateRecordingProgressTime:qm,updateAudioSwitching:_m,updateVideoSwitching:Gm,updateVideoAlreadyOn:Ym,updateAudioAlreadyOn:Km,updateComponentSizes:Jm,updateHasCameraPermission:Xm,updateHasAudioPermission:Zm,updateTransportCreated:tg,updateLocalTransportCreated:rg,updateTransportCreatedVideo:ag,updateTransportCreatedAudio:ng,updateTransportCreatedScreen:og,updateProducerTransport:sg,updateLocalProducerTransport:ig,updateVideoProducer:cg,updateLocalVideoProducer:dg,updateParams:lg,updateVideoParams:ug,updateAudioParams:pg,updateAudioProducer:mg,updateAudioLevel:gg,updateLocalAudioProducer:hg,updateConsumerTransports:fg,updateConsumingTransports:bg,updatePolls:yg,updatePoll:xg,updateIsPollModalVisible:vg,updateCustomImage:jg,updateSelectedImage:Pg,updateSegmentVideo:Mg,updateSelfieSegmentation:Ig,updatePauseSegmentation:Ag,updateProcessedStream:Tg,updateKeepBackground:Fg,updateBackgroundHasChanged:Dg,updateVirtualStream:Ng,updateMainCanvas:Lg,updatePrevKeepBackground:Vg,updateAppliedBackground:Bg,updateIsBackgroundModalVisible:$g,updateAutoClickBackground:Eg,updateBreakoutRooms:Wg,updateCurrentRoomIndex:Hg,updateCanStartBreakout:Og,updateBreakOutRoomStarted:zg,updateBreakOutRoomEnded:Ug,updateHostNewRoom:qg,updateLimitedBreakRoom:_g,updateMainRoomsLength:Gg,updateMemberRoom:Yg,updateIsBreakoutRoomsModalVisible:Kg,updateWhiteboardUsers:Jg,updateCurrentWhiteboardIndex:Xg,updateCanStartWhiteboard:Zg,updateWhiteboardStarted:Qg,updateWhiteboardEnded:eh,updateWhiteboardLimit:th,updateIsWhiteboardModalVisible:rh,updateIsConfigureWhiteboardModalVisible:ah,updateShapes:nh,updateUseImageBackground:oh,updateRedoStack:sh,updateUndoStack:ih,updateCanvasStream:ch,updateCanvasWhiteboard:dh,updateCanvasScreenboard:lh,updateProcessedScreenStream:uh,updateAnnotateScreenStream:ph,updateMainScreenCanvas:mh,updateIsScreenboardModalVisible:gh,updatePermissionConfig:Sg,updatePanelists:Rg,updatePanelistsFocused:wg,updateMuteOthersMic:kg,updateMuteOthersCamera:Cg,checkOrientation:hh,updateDevice:zo,updateSocket:Ho,updateLocalSocket:Oo,updateValidated:Bo,showAlert:xh,getUpdatedAllParams:fh,customVideoCard:h,customAudioCard:f,customMiniCard:b}),xh=({message:e,type:t,duration:r=3e3})=>{cl(e),ll(t),pl(r),sl(!0)},[vh,Sh]=(0,de.useState)(!!vu.current&&vu.current),[Rh,wh]=(0,de.useState)(!!xu.current&&xu.current),[kh]=(0,de.useState)(!1),Ch=[{icon:pe.faRecordVinyl,text:"Record",onPress:()=>{sa({updateIsRecordingModalVisible:mm,isRecordingModalVisible:bl,showAlert:xh,stopLaunchRecord:St.current,canLaunchRecord:vt.current,recordingAudioSupport:_e.current,recordingVideoSupport:Xe.current,updateCanRecord:Es,updateClearedToRecord:Om,recordStarted:Et.current,recordPaused:Ht.current,localUIMode:z.current})},activeColor:"black",inActiveColor:"black",show:!0}],jh=[{icon:pe.faPlayCircle,active:!1===Ht.current,onPress:()=>{so({parameters:{...yh(),...bh()}})},activeColor:"black",inActiveColor:"black",alternateIcon:pe.faPauseCircle,show:!0},{icon:pe.faStopCircle,active:!1,onPress:()=>{io({parameters:{...yh(),...bh()}})},activeColor:"green",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsx)("div",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:2},children:(0,ce.jsx)("span",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:0},children:mu})}),show:!0},{icon:pe.faDotCircle,active:!1,onPress:()=>console.log("Status pressed"),activeColor:"black",inActiveColor:!1===Ht.current?"red":"yellow",show:!0},{icon:pe.faCog,active:!1,onPress:()=>{sa({updateIsRecordingModalVisible:mm,isRecordingModalVisible:bl,showAlert:xh,stopLaunchRecord:St.current,canLaunchRecord:vt.current,recordingAudioSupport:_e.current,recordingVideoSupport:Xe.current,updateCanRecord:Es,updateClearedToRecord:Om,recordStarted:Et.current,recordPaused:Ht.current,localUIMode:z.current})},activeColor:"green",inActiveColor:"black",show:!0}],Ph=[{icon:pe.faUsers,active:!0,alternateIcon:pe.faUsers,onPress:()=>{ni({updateIsParticipantsModalVisible:vm,isParticipantsModalVisible:Tl})},activeColor:"black",inActiveColor:"black",show:"2"===ee.current},{icon:pe.faShareAlt,active:!0,alternateIcon:pe.faShareAlt,onPress:()=>Cm(!El),activeColor:"black",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:"black"}),Ed&&(0,ce.jsx)("div",{style:{position:"absolute",top:-2,right:-2,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:12,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:12,fontWeight:"bold"}})})})]}),onPress:()=>oi({updateIsMessagesModalVisible:Sm,isMessagesModalVisible:Dl}),show:!0},{icon:pe.faSync,active:!0,alternateIcon:pe.faSync,onPress:()=>fr({parameters:{...yh(),...bh()}}),activeColor:"black",inActiveColor:"black",show:"2"===ee.current},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:Rh,onPress:()=>La({parameters:{...yh(),...bh()}}),show:"2"===ee.current,activeColor:"green",inActiveColor:"red"},{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:vh,onPress:()=>Va({parameters:{...yh(),...bh()}}),activeColor:"green",inActiveColor:"red",show:"2"===ee.current},{customComponent:(0,ce.jsxs)("div",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:5,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faChartBar,size:"lg",color:"black"}),(0,ce.jsx)("span",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:0},children:xe.current})]}),show:!0},{icon:pe.faPhone,active:kh,onPress:()=>la({updateIsConfirmExitModalVisible:Rm,isConfirmExitModalVisible:Ll}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faPhone,active:kh,onPress:()=>console.log("End Call pressed"),activeColor:"transparent",inActiveColor:"transparent",backgroundColor:{default:"transparent"},show:!1}];async function Mh({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,isLocal:d=!1}){let l;if(d){const d=await ie({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,parameters:{imgSrc:i,showAlert:xh,updateIsLoadingModalVisible:km,connectSocket:ma,connectLocalSocket:ga,updateSocket:Ho,updateLocalSocket:Oo,updateValidated:Bo,updateApiUserName:Yo,updateApiToken:Jo,updateLink:Zo,updateRoomName:Qo,updateMember:es},checkConnect:t.length>0&&!0===r&&!J.current.includes("mediasfu.com"),localLink:t,joinMediaSFURoom:p});l=await Go({localRoom:d})}else l=await async function(e){const{socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s}=e;try{return await fa({socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s})}catch(e){throw console.log("error",e),new Error("Failed to join the room. Please check your connection and try again.")}}({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c});async function u(e){try{(!e.roomRecvIPs||e.roomRecvIPs&&0==e.roomRecvIPs.length)&&(e.roomRecvIPs=["none"],""!==J.current&&J.current.includes("mediasfu.com")&&!d&&await Vn({community:!0,nsock:fh().socket,parameters:{...yh(),...bh()}}));try{Fa({parameters:{...yh(),...bh(),data:e}})}catch{}if(e.isHost?rs("2"):"2"!==n&&rs("1"),e.secureCode&&""!=e.secureCode&&ts(e.secureCode),e.rtpCapabilities)try{let t=await Na({rtpCapabilities:e.rtpCapabilities});t&&zo(t)}catch(e){console.log("error Device",e)}}catch(e){console.log("error updateRoomParametersClient",e)}}if(l&&l.success){if(""!==J.current&&J.current.includes("mediasfu.com")&&d)return void(_.current=l);""!==J.current&&J.current.includes("mediasfu.com")&&!d?_.current?(_.current.recordingParams=l.recordingParams,_.current.meetingRoomParams=l.meetingRoomParams):_.current=l:(_.current=l,J.current.includes("mediasfu.com")||(_.current.meetingRoomParams=l.meetingRoomParams)),await u(l)}else{if(""!==J.current&&J.current.includes("mediasfu.com")&&!d)return void await u(_.current);try{xh&&xh({message:l.reason,type:"danger",duration:3e3})}catch{}}}async function Ih(){Sm(!1),vm(!1),fm(!1),hm(!1),bm(!1),gm(!1),xm(!1),ym(!1),pm(!1),Cm(!1),Rm(!1),await async function(e){for(const t of e)try{t[Object.keys(t)[0]].disconnect()}catch(e){console.log(`Error disconnecting socket with IP: ${Object.keys(t)[0]}`,e)}}(Se.current),await(async()=>{const e=me,t=yh();for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[`update${r.charAt(0).toUpperCase()+r.slice(1)}`];if("function"==typeof a)try{a(e[r])}catch{}}})(),Dd("00:00:00"),Nd(0),qm("00:00:00"),Us(0),Um(!1),ah(!1),rh(!1),pm(!1),mm(!1),vg(!1),Kg(!1),$g(!1),km(!1),wm(!1),setTimeout(async function(){Bo(!1),window.location.reload()},500)}(0,de.useEffect)(()=>{lu(Et&&!Ot?Ht?"yellow":"red":"green")},[Et,Ht,Ot]);const Ah=async()=>{await(async()=>{let e=0;if("webinar"==fe.current||"conference"==fe.current){const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==va&&nd(e)}else{const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==va&&nd(e)}const{mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}=(({containerWidthFraction:e=1,containerHeightFraction:t=1,mainSize:r,doStack:a=!0,defaultFraction:n})=>{const o=window.innerWidth*e,s=window.innerHeight*t*n;let i=o>=768;return!i&&o>1.5*s&&(i=!0),od(i),a?i?{mainHeight:s,otherHeight:s,mainWidth:Math.floor(r/100*o),otherWidth:Math.floor((100-r)/100*o)}:{mainHeight:Math.floor(r/100*s),otherHeight:Math.floor((100-r)/100*s),mainWidth:o,otherWidth:o}:{mainHeight:s,otherHeight:s,mainWidth:o,otherWidth:o}})({containerWidthFraction:1,containerHeightFraction:1,mainSize:na,doStack:!0,defaultFraction:"webinar"==fe.current||"conference"==fe.current?1-e:1});Jm({mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}),"portrait"===hh()&&(Ra.current||(Ae.current||Te.current)&&Pd(!0)),await mn({name:xr.current,parameters:{...yh(),...bh()}}),await In({changed:!0,parameters:{...yh(),...bh()}})})()},Th=async e=>{try{let t=(await ua.enumerateDevices()).filter(t=>t.kind===e);return t}catch{return[]}},Fh=async(e="",t,r="video")=>{try{let a=null;if(e&&""!==e){if("video"===r){const t=Mt.current.find(t=>t.producerId===e);t&&(a=t.stream)}else if("audio"===r){const t=dn.current.find(t=>t.producerId===e);t&&(a=t.stream)}}else if(t&&""!==t){const e=be.current.find(e=>e.name===t);if(e){const t=e.id;if("video"===r){const e=Mt.current.find(e=>e.producerId===t);e&&(a=e.stream)}else if("audio"===r){const e=dn.current.find(e=>e.producerId===t);e&&(a=e.stream)}}}return a}catch{return null}};async function Dh(e,a,n=!1){const o=U.current,s=r&&q.current&&q.current.id?q.current:o;if(o.id){n||(o.on("disconnect",async()=>{await Wo({showAlert:xh,redirectURL:jr.current,onWeb:!0,updateValidated:Bo}),xu.current&&await La({parameters:{...yh(),...bh()}}),vu.current&&await Va({parameters:{...yh(),...bh()}}),await Ih()}),o.on("allMembers",async t=>{t&&await $o({apiUserName:e,apiKey:"",apiToken:a,members:t.members,requestss:t.requests?t.requests:tl.current,coHoste:t.coHost?t.coHost:te.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:re.current,parameters:{...yh(),...bh()},consume_sockets:Se.current})}),o.on("allMembersRest",async t=>{t&&await Eo({apiUserName:e,apiKey:"",members:t.members,apiToken:a,settings:t.settings,coHoste:t.coHost?t.coHost:te.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:re.current,parameters:{...yh(),...bh()},consume_sockets:Se.current})}),o.on("personJoined",async({name:e})=>{await lo({name:e,showAlert:xh})}),o.on("ban",async({name:e})=>{await mo({name:e,parameters:{...yh(),...bh()}})}),o.on("producer-media-paused",async({producerId:e,kind:t,name:r})=>{await yo({producerId:e,kind:t,name:r,parameters:{...yh(),...bh()}})}),o.on("producer-media-resumed",async({kind:e,name:t})=>{await xo({kind:e,name:t,parameters:{...yh(),...bh()}})}),o.on("producer-media-closed",async({producerId:e,kind:t})=>{e&&t&&await vo({producerId:e,kind:t,parameters:{...yh(),...bh()}})}),o.on("meetingEnded",async function(){await Ro({showAlert:xh,redirectURL:jr.current,onWeb:!0,eventType:fe.current,updateValidated:Bo}),xu.current&&await La({parameters:{...yh(),...bh()}}),vu.current&&await Va({parameters:{...yh(),...bh()}}),await Ih()}),o.on("disconnectUserSelf",async function(){await wo({socket:o,member:Z.current,roomName:X.current})}),o.on("receiveMessage",async({message:e})=>{await ko({message:e,messages:Vd.current,participantsAll:be.current,member:Z.current,eventType:fe.current,islevel:ee.current,coHost:te.current,updateMessages:_p,updateShowMessagesBadge:Kp})}),o.on("meetingTimeRemaining",async({timeRemaining:e})=>{await Co({timeRemaining:e,showAlert:xh,eventType:fe.current})}),o.on("meetingStillThere",async()=>{await jo({updateIsConfirmHereModalVisible:wm})}),o.on("updateConsumingDomains",async({domains:t,alt_domains:r})=>{await Ao({domains:t,alt_domains:r,apiUserName:e,apiKey:"",apiToken:a,parameters:{...yh(),...bh()}})})),n&&["roomRecordParams","startRecords","reInitiateRecording","RecordingNotice","timeLeftRecording","stoppedRecording"].forEach(e=>{o.off(e),s.off(e)}),s.on("roomRecordParams",async({recordParams:e})=>{await po({recordParams:e,parameters:{...yh(),...bh()}})}),s.on("startRecords",async()=>{await Po({roomName:X.current,member:Z.current,socket:s})}),s.on("reInitiateRecording",async()=>{await Mo({roomName:X.current,member:Z.current,socket:s,adminRestrictSetting:zt.current})}),s.on("RecordingNotice",async({state:e,userRecordingParam:t,pauseCount:r,timeDone:a})=>{await Fo({state:e,userRecordingParam:t,pauseCount:r,timeDone:a,parameters:{...yh(),...bh()}})}),s.on("timeLeftRecording",async({timeLeft:e})=>{Lo({timeLeft:e,showAlert:xh})}),s.on("stoppedRecording",async({state:e,reason:t})=>{await Vo({state:e,reason:t,showAlert:xh})}),""!==t&&o&&!n&&await Mh({socket:o,roomName:X.current,islevel:ee.current,member:Z.current,sec:a,apiUserName:e,isLocal:!0});let i=!1;if(i=!(!q.current||q.current.id==s.id),!n&&i)return await Dh(e,a,!0),await An({ms:1e3}),km(!1),o;if(""!==J.current&&J.current.includes("mediasfu.com")){const t=K.current;await Mh({socket:r&&s&&s.id?s:o,roomName:X.current,islevel:ee.current,member:Z.current,sec:t,apiUserName:e})}return await Xn({socket:o,roomName:X.current,updateMessages:_p}),n||await mn({name:xr.current,parameters:{...yh(),...bh()}}),o}return null}return(0,de.useEffect)(()=>(window.addEventListener("resize",Ah),window.addEventListener("orientationchange",Ah),()=>{window.removeEventListener("resize",Ah),window.removeEventListener("orientationchange",Ah)}),[Ah]),(0,de.useEffect)(()=>{(jt||Te)&&kt||mn({name:xr.current,parameters:{...yh(),...bh()}})},[na]),(0,de.useEffect)(()=>{Pi([{producerId:"youyou",stream:void 0,id:"youyou",name:"youyou"}]),kc([{id:"youyou",name:"youyou",producerId:""}]);const e=async()=>{const e=await Dh(Y.current,K.current);Ho(e)};if(H){try{!1===z.current?(km(!0),e()):km(!1)}catch(e){console.log("error connectAndaAddSocketMethods",e)}oo({startTime:Date.now()/1e3,parameters:{...yh(),...bh()}});try{null!==c&&(c={...yh(),...bh()},d&&d(c))}catch{console.log("error updateSourceParameters")}}},[H]),(0,ce.jsxs)("div",{className:"MediaSFU",style:{height:"100vh",width:"100vw",maxWidth:"100vw",maxHeight:"100vh",overflow:"hidden",...x},children:[g?le().createElement(g,{parameters:{...yh(),...bh()}}):H?l?(0,ce.jsx)(R,{children:(0,ce.jsx)(k,{backgroundColor:"rgba(217, 227, 234, 0.99)",defaultFraction:1-va,updateIsWideScreen:od,updateIsMediumScreen:sd,updateIsSmallScreen:id,showControls:"webinar"==fe.current||"conference"==fe.current,children:(0,ce.jsx)(C,{doStack:!0,mainSize:na,updateComponentSizes:Jm,defaultFraction:1-va,componentSizes:Su.current,showControls:"webinar"==fe.current||"conference"==fe.current,children:(0,ce.jsxs)(j,{height:Su.current.mainHeight,width:Su.current.mainWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",mainSize:na,showAspect:na>0,timeBackgroundColor:du,meetingProgressTime:bo,children:[(0,ce.jsx)(P,{customWidth:Su.current.mainWidth,customHeight:Su.current.mainHeight,rows:1,columns:1,componentsToRender:ro.current?ro.current:[],showAspect:ro.current.length>0&&!(Pp.current&&!Mp.current)}),(0,ce.jsx)(M,{buttons:Ph,position:"right",location:"bottom",direction:"vertical",showAspect:"broadcast"==fe.current}),(0,ce.jsx)(M,{buttons:Ch,direction:"horizontal",showAspect:"broadcast"==fe.current&&!uu&&"2"==ee.current,location:"bottom",position:"middle"}),(0,ce.jsx)(M,{buttons:jh,direction:"horizontal",showAspect:"broadcast"==fe.current&&uu&&"2"==ee.current,location:"bottom",position:"middle"}),(0,ce.jsx)(I,{componentsToRender:co.current?co.current:[]})]})})})}):(0,ce.jsx)(ce.Fragment,{}):(0,ce.jsx)($,{parameters:{imgSrc:i,showAlert:xh,updateIsLoadingModalVisible:km,connectSocket:ma,connectLocalSocket:ga,updateSocket:Ho,updateLocalSocket:Oo,updateValidated:Bo,updateApiUserName:Yo,updateApiToken:Jo,updateLink:Zo,updateRoomName:Qo,updateMember:es},credentials:a,localLink:t,connectMediaSFU:r,returnUI:l,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m}),l&&!g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(A,{backgroundColor:"rgba(217, 227, 234, 0.99)",isParticipantsModalVisible:Tl,onParticipantsClose:()=>vm(!1),participantsCounter:xe.current,onParticipantsFilterChange:e=>{if(""!==e&&e.length>0){let t=be.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));ye.current=t,xe.current=t.length}else ye.current=be.current,xe.current=be.current.length},parameters:{updateParticipants:ps,updateIsParticipantsModalVisible:vm,updateDirectMessageDetails:Yp,updateStartDirectMessage:Gp,updateIsMessagesModalVisible:Sm,showAlert:xh,filteredParticipants:ye.current,participants:ye.current,roomName:X.current,islevel:ee.current,member:Z.current,coHostResponsibility:re.current,coHost:te.current,eventType:fe.current,startDirectMessage:Bd.current,directMessageDetails:$d.current,socket:U.current,getUpdatedAllParams:yh}}),(0,ce.jsx)(T,{backgroundColor:"rgba(217, 227, 234, 0.99)",isRecordingModalVisible:bl,onClose:()=>mm(!1),startRecording:ca,confirmRecording:da,parameters:{...yh(),...bh()}}),(0,ce.jsx)(F,{backgroundColor:"webinar"==fe.current||"conference"==fe.current?"#f5f5f5":"rgba(255, 255, 255, 0.25)",isMessagesModalVisible:Dl,onMessagesClose:()=>Sm(!1),messages:Vd.current,eventType:fe.current,member:Z.current,islevel:ee.current,coHostResponsibility:re.current,coHost:te.current,startDirectMessage:Bd.current,directMessageDetails:$d.current,updateStartDirectMessage:Gp,updateDirectMessageDetails:Yp,showAlert:xh,roomName:X.current,socket:U.current,chatSetting:Ud.current}),(0,ce.jsx)(D,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmExitModalVisible:Ll,onConfirmExitClose:()=>Rm(!1),member:Z.current,roomName:X.current,socket:U.current,islevel:ee.current}),(0,ce.jsx)(N,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmHereModalVisible:Bl,onConfirmHereClose:()=>wm(!1),member:Z.current,roomName:X.current,socket:U.current}),(0,ce.jsx)(L,{isShareEventModalVisible:El,onShareEventClose:()=>Cm(!1),roomName:X.current,islevel:ee.current,adminPasscode:Q.current,eventType:fe.current,localLink:t}),(0,ce.jsx)(B,{visible:ol,message:il,type:dl,duration:ul,onHide:()=>sl(!1),textColor:"#ffffff"}),(0,ce.jsx)(V,{isVisible:Hl,backgroundColor:"rgba(217, 227, 234, 0.99)",displayColor:"black"})]})]})},pi=({PrejoinPage:e=ks,localLink:t="",connectMediaSFU:r=!0,credentials:a={apiUserName:"",apiKey:""},useLocalUIMode:n=!1,seedData:o={},useSeed:s=!1,imgSrc:i="https://mediasfu.com/images/logo192.png",sourceParameters:c,updateSourceParameters:d,returnUI:l=!0,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m,customComponent:g,customVideoCard:h,customAudioCard:f,customMiniCard:b,containerStyle:x,uiOverrides:v})=>{const R=(0,de.useMemo)(()=>Ua(v?.mainContainer,He),[v?.mainContainer]),k=(0,de.useMemo)(()=>Ua(v?.mainAspect,ge),[v?.mainAspect]),C=(0,de.useMemo)(()=>Ua(v?.mainScreen,$e),[v?.mainScreen]),j=(0,de.useMemo)(()=>Ua(v?.mainGrid,Ee),[v?.mainGrid]),P=(0,de.useMemo)(()=>Ua(v?.subAspect,We),[v?.subAspect]),M=(0,de.useMemo)(()=>Ua(v?.otherGrid,Be),[v?.otherGrid]),I=(0,de.useMemo)(()=>Ua(v?.flexibleGrid,Ks),[v?.flexibleGrid]),A=(0,de.useMemo)(()=>Ua(v?.flexibleGridAlt,Ks),[v?.flexibleGridAlt]),T=(0,de.useMemo)(()=>Ua(v?.flexibleVideo,Xs),[v?.flexibleVideo]),F=(0,de.useMemo)(()=>Ua(v?.audioGrid,ht),[v?.audioGrid]),D=(0,de.useMemo)(()=>Ua(v?.pagination,Gs),[v?.pagination]),N=(0,de.useMemo)(()=>Ua(v?.controlButtons,he),[v?.controlButtons]),L=(0,de.useMemo)(()=>Ua(v?.controlButtonsAlt,ve),[v?.controlButtonsAlt]),V=(0,de.useMemo)(()=>Ua(v?.whiteboard,ut),[v?.whiteboard]),B=(0,de.useMemo)(()=>Ua(v?.screenboard,pt),[v?.screenboard]),$=(0,de.useMemo)(()=>Ua(v?.loadingModal,Ko),[v?.loadingModal]),E=(0,de.useMemo)(()=>Ua(v?.alert,Xo),[v?.alert]),W=(0,de.useMemo)(()=>Ua(v?.menuModal,as),[v?.menuModal]),H=(0,de.useMemo)(()=>Ua(v?.eventSettingsModal,cs),[v?.eventSettingsModal]),O=(0,de.useMemo)(()=>Ua(v?.requestsModal,os),[v?.requestsModal]),z=(0,de.useMemo)(()=>Ua(v?.waitingRoomModal,ss),[v?.waitingRoomModal]),U=(0,de.useMemo)(()=>Ua(v?.coHostModal,ds),[v?.coHostModal]),q=(0,de.useMemo)(()=>Ua(v?.mediaSettingsModal,ys),[v?.mediaSettingsModal]),_=(0,de.useMemo)(()=>Ua(v?.participantsModal,hs),[v?.participantsModal]),G=(0,de.useMemo)(()=>Ua(v?.messagesModal,bs),[v?.messagesModal]),Y=(0,de.useMemo)(()=>Ua(v?.displaySettingsModal,is),[v?.displaySettingsModal]),K=(0,de.useMemo)(()=>Ua(v?.confirmExitModal,xs),[v?.confirmExitModal]),J=(0,de.useMemo)(()=>Ua(v?.confirmHereModal,vs),[v?.confirmHereModal]),X=(0,de.useMemo)(()=>Ua(v?.shareEventModal,Ss),[v?.shareEventModal]),Z=(0,de.useMemo)(()=>Ua(v?.recordingModal,ns),[v?.recordingModal]),Q=(0,de.useMemo)(()=>Ua(v?.pollModal,Ws),[v?.pollModal]),ee=(0,de.useMemo)(()=>Ua(v?.backgroundModal,Hs),[v?.backgroundModal]),te=(0,de.useMemo)(()=>Ua(v?.breakoutRoomsModal,Us),[v?.breakoutRoomsModal]),re=(0,de.useMemo)(()=>Ua(v?.configureWhiteboardModal,_s),[v?.configureWhiteboardModal]),ae=(0,de.useMemo)(()=>Ua(v?.screenboardModal,mt),[v?.screenboardModal]),ne=(0,de.useMemo)(()=>Ua(v?.preJoinPage,e),[v?.preJoinPage,e]),oe=(0,de.useMemo)(()=>qa(v?.consumerResume,xn),[v?.consumerResume]),se=(0,de.useMemo)(()=>qa(v?.addVideosGrid,Mn),[v?.addVideosGrid]),[fe,be]=(0,de.useState)(n),ye=(0,de.useRef)(n),xe=(0,de.useRef)({}),Se=(0,de.useRef)(null),Re=(0,de.useRef)(null),we=(0,de.useRef)(null),ke=(0,de.useRef)(""),Ce=(0,de.useRef)(""),je=(0,de.useRef)(""),Pe=(0,de.useRef)(""),Me=(0,de.useRef)(s&&o?.member?o?.member:""),Ie=(0,de.useRef)(""),Ae=(0,de.useRef)(s&&o?.member&&o.member==o?.host?"2":"1"),Te=(0,de.useRef)(""),Fe=(0,de.useRef)([{name:"participants",value:!1,dedicated:!1},{name:"media",value:!1,dedicated:!1},{name:"waiting",value:!1,dedicated:!1},{name:"chat",value:!1,dedicated:!1}]),De=(0,de.useRef)(!!Te.current&&Te.current==Me.current),Ne=(0,de.useRef)(!!Ae&&"2"==Ae.current),Le=(0,de.useRef)(!1),Ve=(0,de.useRef)("media"),Oe=(0,de.useRef)(!1),ze=(0,de.useRef)(s&&o?.eventType?o?.eventType:"webinar"),Ue=(0,de.useRef)(s&&o?.participants?o?.participants:[]),qe=(0,de.useRef)(Ue.current),_e=(0,de.useRef)(0),Ge=(0,de.useRef)(""),Ye=(0,de.useRef)([]),Ke=(0,de.useRef)(null),Je=(0,de.useRef)([]),Xe=(0,de.useRef)(null),Ze=(0,de.useRef)(4),Qe=(0,de.useRef)(!1),et=(0,de.useRef)(!1),tt=(0,de.useRef)(4),rt=(0,de.useRef)(!1),at=(0,de.useRef)(!1),nt=(0,de.useRef)("landscape"),ot=(0,de.useRef)("sd"),st=(0,de.useRef)("sd"),it=(0,de.useRef)({width:640,height:360}),ct=(0,de.useRef)(10),dt=(0,de.useRef)({}),lt=(0,de.useRef)({}),gt=(0,de.useRef)({}),ft=(0,de.useRef)({}),bt=(0,de.useRef)(0),yt=(0,de.useRef)(0),xt=(0,de.useRef)(!1),vt=(0,de.useRef)(0),St=(0,de.useRef)(0),Rt=(0,de.useRef)(0),wt=(0,de.useRef)(0),kt=(0,de.useRef)(!1),Ct=(0,de.useRef)(0),jt=(0,de.useRef)(0),Pt=(0,de.useRef)(!1),Mt=(0,de.useRef)(!1),It=(0,de.useRef)(!1),At=(0,de.useRef)(!1),Tt=(0,de.useRef)("landscape"),Ft=(0,de.useRef)(!1),Dt=(0,de.useRef)(!1),Nt=(0,de.useRef)({mainSpecs:{mediaOptions:"video",audioOptions:"all",videoOptions:"all",videoType:"fullDisplay",videoOptimized:!1,recordingDisplayType:"media",addHLS:!1},dispSpecs:{nameTags:!0,backgroundColor:"#000000",nameTagsColor:"#ffffff",orientationVideo:"portrait"}}),Lt=(0,de.useRef)(!1),Vt=(0,de.useRef)(!1),Bt=(0,de.useRef)(!1),$t=(0,de.useRef)(null),Et=(0,de.useRef)(0),Wt=(0,de.useRef)(0),Ht=(0,de.useRef)(!1),Ot=(0,de.useRef)(!1),zt=(0,de.useRef)(15e3),Ut=(0,de.useRef)(0),qt=(0,de.useRef)(0),_t=(0,de.useRef)(!0),Gt=(0,de.useRef)(!1),Yt=(0,de.useRef)(!1),Kt=(0,de.useRef)(!1),Jt=(0,de.useRef)(!1),Xt=(0,de.useRef)(!1),Zt=(0,de.useRef)(!1),Qt=(0,de.useRef)(""),er=(0,de.useRef)([]),tr=(0,de.useRef)([]),rr=(0,de.useRef)([]),ar=(0,de.useRef)([]),nr=(0,de.useRef)(""),or=(0,de.useRef)(""),sr=(0,de.useRef)(""),ir=(0,de.useRef)(""),cr=(0,de.useRef)([]),dr=(0,de.useRef)([]),lr=(0,de.useRef)(null),ur=(0,de.useRef)(!1),pr=(0,de.useRef)(!1),mr=(0,de.useRef)(!1),gr=(0,de.useRef)(!1),hr=(0,de.useRef)(!1),fr=(0,de.useRef)(null),br=(0,de.useRef)(0),yr=(0,de.useRef)(!1),xr=(0,de.useRef)(null),vr=(0,de.useRef)(""),Sr=(0,de.useRef)("user"),Rr=(0,de.useRef)("user"),wr=(0,de.useRef)(""),kr=(0,de.useRef)(!1),Cr=(0,de.useRef)([]),jr=(0,de.useRef)([]),Pr=(0,de.useRef)([]),Mr=(0,de.useRef)([]),Ir=(0,de.useRef)([]),Ar=(0,de.useRef)(!1),Tr=(0,de.useRef)(!1),Fr=(0,de.useRef)(!1),Dr=(0,de.useRef)(!1),Nr=(0,de.useRef)(!1),Lr=(0,de.useRef)(!1),Vr=(0,de.useRef)(null),Br=(0,de.useRef)(null),$r=(0,de.useRef)(null),Er=(0,de.useRef)(0),Wr=(0,de.useRef)(0),Hr=(0,de.useRef)(0),Or=(0,de.useRef)(240),zr=(0,de.useRef)([]),Ur=(0,de.useRef)("Host"),qr=(0,de.useRef)(!1),_r=(0,de.useRef)(null),[Gr,Yr]=(0,de.useState)(!1),[Kr,Jr]=(0,de.useState)(!1),Xr=(0,de.useRef)(""),Zr=(0,de.useRef)([]),Qr=(0,de.useRef)(""),ea=(0,de.useRef)([]),ta=(0,de.useRef)([]),ra=(0,de.useRef)(!1),aa=(0,de.useRef)([]),na=(0,de.useRef)([]),oa=(0,de.useRef)([]),pa=(0,de.useRef)([]),ha=(0,de.useRef)(null),ba=(0,de.useRef)(""),ya=(0,de.useRef)(""),xa=(0,de.useRef)(""),va=(0,de.useRef)(""),Sa=(0,de.useRef)(""),Ra=(0,de.useRef)(!1),wa=(0,de.useRef)(""),ka=(0,de.useRef)(!1),Ca=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),ja=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),Pa=(0,de.useRef)(null),Ma=(0,de.useRef)(null),Ia=(0,de.useRef)(0),Aa=(0,de.useRef)(4),Ta=(0,de.useRef)(!1),Da=(0,de.useRef)(0),za=(0,de.useRef)(3e4),en=(0,de.useRef)(1e4),tn=(0,de.useRef)(0),rn=(0,de.useRef)([]),an=(0,de.useRef)(0),[nn,on]=(0,de.useState)("webinar"===ze.current?67:"broadcast"===ze.current?100:0),sn=(0,de.useRef)(nn),cn=(0,de.useRef)(!1),dn=(0,de.useRef)(!1),ln=(0,de.useRef)(!1),un=(0,de.useRef)([]),pn=(0,de.useRef)([]),[bn,yn]=(0,de.useState)(0),Hn=(0,de.useRef)(!1),To=(0,de.useRef)(!1),Do=(0,de.useRef)(!1),No=(0,de.useRef)(!1),Ho=(0,de.useRef)(!1),[Oo,zo]=(0,de.useState)(0),[Yo,Jo]=(0,de.useState)(0),[Zo,Qo]=(0,de.useState)(0),[es,ts]=(0,de.useState)(0),[rs,ls]=(0,de.useState)(0),us=(0,de.useRef)([]),[ps,ms]=(0,de.useState)(!1),gs=(0,de.useRef)(null),fs=(0,de.useRef)(!1),Rs=(0,de.useRef)([]),ws=(0,de.useRef)([]),Cs=(0,de.useRef)(null),js=(0,de.useRef)(null),Ps=(0,de.useRef)(!1),Ms=(0,de.useRef)(40),Is=(0,de.useRef)("horizontal"),As=(0,de.useRef)({gridWidth:0,gridHeight:0,altGridWidth:0,altGridHeight:0}),Ts=(0,de.useRef)(!1),Fs=(0,de.useRef)([]),[Ds,Ns]=(0,de.useState)([[],[]]),Ls=(0,de.useRef)([]),[Vs,Bs]=(0,de.useState)([]),[$s,Es]=(0,de.useState)([]),[Os,zs]=(0,de.useState)("00:00:00"),qs=(0,de.useRef)(0),Ys=(0,de.useRef)([]),Js=(0,de.useRef)([]),ii=e=>{be(e)},li=e=>{xe.current=e},ui=e=>{Se.current=e},pi=e=>{we.current=e},mi=e=>{ke.current=e},gi=e=>{Ce.current=e},hi=e=>{je.current=e},fi=e=>{Pe.current=e},bi=e=>{e.length>0&&e.includes("_")&&(xi(e.split("_")[1]),e=e.split("_")[0]),Me.current=e},yi=e=>{Ie.current=e},xi=e=>{Ae.current=e},vi=e=>{Te.current=e},Si=e=>{Fe.current=e},Ri=e=>{De.current=e},wi=e=>{Ne.current=e},ki=e=>{Le.current=e},Ci=e=>{Ve.current=e},ji=e=>{Oe.current=e},Pi=e=>{if(ze.current=e,"none"!=e)try{setTimeout(()=>{Hf()},1e3)}catch{}},Mi=e=>{Ue.current=e,qe.current=e,_e.current=e.length},Ii=e=>{_e.current=e},Ai=e=>{Ge.current=e},Ti=e=>{bt.current=e},Fi=e=>{yt.current=e},Di=e=>{xt.current=e},Ni=e=>{vt.current=e},Li=e=>{St.current=e},Vi=e=>{Rt.current=e},Bi=e=>{wt.current=e},$i=e=>{kt.current=e},Ei=e=>{Ct.current=e},Wi=e=>{jt.current=e},Hi=e=>{Pt.current=e},Oi=e=>{Mt.current=e},zi=e=>{It.current=e},Ui=e=>{At.current=e},qi=e=>{Tt.current=e},_i=e=>{Ft.current=e},Gi=e=>{Dt.current=e},Yi=e=>{Nt.current=e},Ki=e=>{Lt.current=e},Ji=e=>{Vt.current=e},Xi=e=>{Bt.current=e},Zi=e=>{$t.current=e},Qi=e=>{Et.current=e},ec=e=>{Wt.current=e},tc=e=>{Ht.current=e},rc=e=>{Ot.current=e},ac=e=>{zt.current=e},nc=e=>{Ut.current=e},oc=e=>{qt.current=e},sc=e=>{_t.current=e},ic=e=>{Gt.current=e},cc=e=>{Js.current=e},dc=e=>{Ye.current=e},lc=e=>{Ke.current=e},uc=e=>{Je.current=e},pc=e=>{Xe.current=e},mc=e=>{Ze.current=e},gc=e=>{Qe.current=e},hc=e=>{et.current=e},fc=e=>{tt.current=e},bc=e=>{rt.current=e},yc=e=>{at.current=e,Df(e),e&&setTimeout(async()=>{window.dispatchEvent(new Event("resize"))},2e3)},xc=e=>{nt.current=e},vc=e=>{ot.current=e},Sc=e=>{st.current=e},Rc=e=>{it.current=e},wc=e=>{ct.current=e},kc=e=>{dt.current=e},Cc=e=>{lt.current=e},jc=e=>{gt.current=e},Pc=e=>{ft.current=e},Mc=e=>{Yt.current=e},Ic=e=>{Kt.current=e},Ac=e=>{Jt.current=e},Tc=e=>{Xt.current=e},Fc=e=>{Zt.current=e},Dc=e=>{Qt.current=e},Nc=e=>{er.current=e},Lc=e=>{tr.current=e},Vc=e=>{rr.current=e},Bc=e=>{ar.current=e},$c=e=>{nr.current=e},Ec=e=>{or.current=e},Wc=e=>{sr.current=e},Hc=e=>{ir.current=e},Oc=e=>{cr.current=e},zc=e=>{dr.current=e},Uc=e=>{lr.current=e},qc=e=>{ur.current=e},_c=e=>{pr.current=e},Gc=e=>{mr.current=e},Yc=e=>{gr.current=e},Kc=e=>{hr.current=e},Jc=e=>{fr.current=e},Xc=e=>{br.current=e},Zc=e=>{yr.current=e},Qc=e=>{xr.current=e},ed=e=>{vr.current=e},td=e=>{Sr.current=e},rd=e=>{Rr.current=e},ad=e=>{wr.current=e},nd=e=>{kr.current=e},od=e=>{Cr.current=e},sd=e=>{jr.current=e},id=e=>{Pr.current=e},cd=e=>{Mr.current=e},dd=e=>{Ir.current=e},ld=e=>{Ar.current=e},ud=e=>{Tr.current=e},pd=e=>{Fr.current=e},md=e=>{Dr.current=e},gd=e=>{Nr.current=e},hd=e=>{Lr.current=e},fd=e=>{Vr.current=e},bd=e=>{Br.current=e},yd=e=>{$r.current=e},xd=e=>{Er.current=e},vd=e=>{Wr.current=e},Sd=e=>{Hr.current=e},Rd=e=>{zr.current=e},wd=e=>{Ur.current=e},kd=e=>{qr.current=e},Cd=e=>{_r.current=e},jd=e=>{Yr(e)},Pd=e=>{Jr(e)},Md=e=>{Xr.current=e},Id=e=>{Zr.current=e},Ad=e=>{Qr.current=e},Td=e=>{ea.current=e},Fd=e=>{ta.current=e},Dd=e=>{ra.current=e},Nd=e=>{aa.current=e},Ld=e=>{na.current=e},Vd=e=>{oa.current=e},Bd=e=>{pa.current=e},$d=e=>{ha.current=e},Ed=e=>{ba.current=e},Wd=e=>{ya.current=e},Hd=e=>{xa.current=e},Od=e=>{va.current=e},zd=e=>{Sa.current=e},Ud=e=>{Ra.current=e},qd=e=>{wa.current=e},_d=e=>{ka.current=e},Gd=e=>{Ca.current=e},Yd=e=>{ja.current=e},Kd=e=>{Pa.current=e},Jd=e=>{Ma.current=e},Xd=e=>{Ia.current=e},Zd=e=>{Aa.current=e},Qd=e=>{Ta.current=e},el=e=>{Da.current=e},tl=e=>{tn.current=e},rl=e=>{rn.current=e},al=e=>{an.current=e},nl=e=>{on(e)},ol=e=>{sn.current=e},sl=e=>{cn.current=e},il=e=>{dn.current=e},cl=e=>{ln.current=e},dl=e=>{un.current=e},ll=e=>{pn.current=e},ul=e=>{yn(e)},pl=e=>{Hn.current=e},ml=e=>{To.current=e},gl=e=>{Do.current=e},hl=e=>{No.current=e},fl=e=>{Ho.current=e},bl=e=>{zo(e)},yl=e=>{Jo(e)},xl=e=>{Qo(e)},vl=e=>{ts(e)},Sl=e=>{ls(e)},Rl=e=>{us.current=e},wl=e=>{ms(e)},kl=e=>{gs.current=e},Cl=e=>{fs.current=e},jl=e=>{Rs.current=e},Pl=e=>{ws.current=e},Ml=e=>{Cs.current=e},Il=e=>{js.current=e},Al=e=>{Ps.current=e},Tl=e=>{Ms.current=e},Fl=e=>{Is.current=e},Dl=e=>{As.current=e},Nl=e=>{Ts.current=e},Ll=e=>{Fs.current=e},Vl=e=>{Ns(e)},Bl=e=>{Ls.current=e},$l=e=>{Bs(e)},El=e=>{Es(e)},Wl=e=>{zs(e)},Hl=e=>{qs.current=e},Ol=e=>{Ys.current=e},zl=(0,de.useRef)(s&&o?.messages?o.messages:[]),Ul=(0,de.useRef)(!1),ql=(0,de.useRef)(null),[_l,Gl]=(0,de.useState)(!1),Yl=(0,de.useRef)("allow"),Kl=(0,de.useRef)("allow"),Jl=(0,de.useRef)("allow"),Xl=(0,de.useRef)("allow"),Zl=(0,de.useRef)(Ve.current?Ve.current:"media"),Ql=(0,de.useRef)(!0),eu=(0,de.useRef)("webinar"!==ze.current&&"conference"!==ze.current),tu=(0,de.useRef)(!1),ru=(0,de.useRef)("video"),au=(0,de.useRef)(""),nu=(0,de.useRef)(s&&o?.waitingList?o.waitingList:[]),ou=(0,de.useRef)(0),su=(0,de.useRef)(nu.current),iu=(0,de.useRef)(""),cu=(0,de.useRef)(s&&o?.requests?o.requests:[]),du=(0,de.useRef)(0),lu=(0,de.useRef)(cu.current),uu=(0,de.useRef)(0),[pu,mu]=(0,de.useState)(!1),[gu,hu]=(0,de.useState)(""),[fu,bu]=(0,de.useState)("info"),[yu,xu]=(0,de.useState)(3e3),[vu]=(0,de.useState)(!0),[Su]=(0,de.useState)(0),[Ru,wu]=(0,de.useState)(!1),[ku,Cu]=(0,de.useState)(!1),[ju,Pu]=(0,de.useState)(!1),[Mu,Iu]=(0,de.useState)(!1),[Au,Tu]=(0,de.useState)(!1),[Fu,Du]=(0,de.useState)(!1),[Nu,Lu]=(0,de.useState)(!1),[Vu,Bu]=(0,de.useState)(!1),[$u,Eu]=(0,de.useState)(!1),[Wu,Hu]=(0,de.useState)(!1),[Ou,zu]=(0,de.useState)(!1),[Uu,qu]=(0,de.useState)(!1),[_u,Gu]=(0,de.useState)(!1),[Yu,Ku]=(0,de.useState)(!1),Ju=(0,de.useRef)("video"),Xu=(0,de.useRef)("all"),Zu=(0,de.useRef)("all"),Qu=(0,de.useRef)("fullDisplay"),ep=(0,de.useRef)(!1),tp=(0,de.useRef)("media"),rp=(0,de.useRef)(!0),ap=(0,de.useRef)(!0),[np,op]=(0,de.useState)("#83c0e9"),[sp,ip]=(0,de.useState)("#ffffff"),cp=(0,de.useRef)(!1),dp=(0,de.useRef)("Add Text"),lp=(0,de.useRef)("top"),[up,pp]=(0,de.useState)("#ffffff"),mp=(0,de.useRef)("landscape"),gp=(0,de.useRef)(!0),hp=(0,de.useRef)(!0),[fp,bp]=(0,de.useState)("green"),[yp,xp]=(0,de.useState)(!1),[vp,Sp]=(0,de.useState)("00:00:00"),[Rp,wp]=(0,de.useState)(!1),[kp,Cp]=(0,de.useState)(!1),jp=(0,de.useRef)(!1),Pp=(0,de.useRef)(!1),Mp=(0,de.useRef)({mainHeight:0,otherHeight:0,mainWidth:0,otherWidth:0}),[Ip,Ap]=(0,de.useState)(!1),[Tp,Fp]=(0,de.useState)(!1),Dp=(0,de.useRef)(!1),Np=(0,de.useRef)(!1),Lp=(0,de.useRef)(!1),Vp=(0,de.useRef)(!1),Bp=(0,de.useRef)(!1),$p=(0,de.useRef)(null),Ep=(0,de.useRef)(null),Wp=(0,de.useRef)(null),Hp=(0,de.useRef)(null),Op=(0,de.useRef)({}),zp=(0,de.useRef)({}),Up=(0,de.useRef)({}),qp=(0,de.useRef)(null),_p=(0,de.useRef)(0),Gp=(0,de.useRef)(null),Yp=(0,de.useRef)([]),Kp=(0,de.useRef)([]),Jp=(0,de.useRef)(s&&o?.polls?o.polls:[]),Xp=(0,de.useRef)(null),[Zp,Qp]=(0,de.useState)(!1),em=(0,de.useRef)(null),tm=(0,de.useRef)([]),rm=(0,de.useRef)(!1),am=(0,de.useRef)(!1),nm=(0,de.useRef)(!1),om=(0,de.useRef)(""),sm=(0,de.useRef)(""),im=(0,de.useRef)(null),cm=(0,de.useRef)(null),dm=(0,de.useRef)(!1),lm=(0,de.useRef)(null),um=(0,de.useRef)(!1),pm=(0,de.useRef)(!1),mm=(0,de.useRef)(null),gm=(0,de.useRef)(null),hm=(0,de.useRef)(!1),fm=(0,de.useRef)(!1),[bm,ym]=(0,de.useState)(!1),xm=(0,de.useRef)(!1),vm=(0,de.useRef)(s&&o?.breakoutRooms?o.breakoutRooms:[]),Sm=(0,de.useRef)(0),Rm=(0,de.useRef)(!1),wm=(0,de.useRef)(!1),km=(0,de.useRef)(!1),Cm=(0,de.useRef)(-1),jm=(0,de.useRef)([]),Pm=(0,de.useRef)(0),Mm=(0,de.useRef)(-1),[Im,Am]=(0,de.useState)(!1),Tm=(0,de.useRef)(s&&o?.whiteboardUsers?o.whiteboardUsers:[]),Fm=(0,de.useRef)(null),Dm=(0,de.useRef)(!1),Nm=(0,de.useRef)(!1),Lm=(0,de.useRef)(!1),Vm=(0,de.useRef)(Ze.current),[Bm,$m]=(0,de.useState)(!1),[Em,Wm]=(0,de.useState)(!1),Hm=(0,de.useRef)([]),Om=(0,de.useRef)(!0),zm=(0,de.useRef)([]),Um=(0,de.useRef)([]),qm=(0,de.useRef)(null),_m=(0,de.useRef)(null),Gm=(0,de.useRef)(null),Ym=(0,de.useRef)(null),Km=(0,de.useRef)(!1),Jm=(0,de.useRef)(null),[Xm,Zm]=(0,de.useState)(!1),Qm=e=>{zl.current=e},eg=e=>{Ul.current=e},tg=e=>{ql.current=e},rg=e=>{Gl(e)},ag=e=>{Yl.current=e},ng=e=>{Kl.current=e},og=e=>{Jl.current=e},sg=e=>{Xl.current=e},ig=e=>{Zl.current=e},cg=e=>{Ql.current=e},dg=e=>{eu.current=e},lg=e=>{tu.current=e},ug=e=>{ru.current=e},pg=e=>{ou.current=e},mg=e=>{au.current=e},gg=e=>{nu.current=e,su.current=e,ou.current=e.length},hg=e=>{du.current=e},fg=e=>{iu.current=e},bg=e=>{cu.current=e,lu.current=e,du.current=e.length},yg=e=>{uu.current=e},xg=e=>{wu(e)},vg=e=>{Cu(e),1==e?ki(!1):1==hp.current&&1==gp.current&&1==ur.current&&Xg(!0)},Sg=e=>{Pu(e)},Rg=e=>{Iu(e)},wg=e=>{Tu(e)},kg=e=>{Du(e)},Cg=e=>{Lu(e)},jg=e=>{Bu(e)},Pg=e=>{Eu(e)},Mg=e=>{Hu(e),0==e&&rg(!1)},Ig=e=>{zu(e)},Ag=e=>{qu(e)},Tg=e=>{Ku(e)},Fg=e=>{Gu(e)},Dg=e=>{Ju.current=e,hp.current=!1},Ng=e=>{Xu.current=e,hp.current=!1},Lg=e=>{Zu.current=e,hp.current=!1},Vg=e=>{Qu.current=e,hp.current=!1},Bg=e=>{ep.current=e,hp.current=!1},$g=e=>{tp.current=e,hp.current=!1},Eg=e=>{rp.current=e,hp.current=!1},Wg=e=>{cp.current=e,hp.current=!1},Hg=e=>{dp.current=e,hp.current=!1},Og=e=>{lp.current=e,hp.current=!1},zg=e=>{pp(e),hp.current=!1},Ug=e=>{ap.current=e,hp.current=!1},qg=e=>{op(e),hp.current=!1},_g=e=>{ip(e),hp.current=!1},Gg=e=>{mp.current=e,hp.current=!1},Yg=e=>{gp.current=e},Kg=e=>{hp.current=e},Jg=e=>{bp(e)},Xg=e=>{xp(e)},Zg=e=>{Sp(e)},Qg=e=>{wp(e)},eh=e=>{Cp(e)},th=e=>{jp.current=e,Tf(e)},rh=e=>{Pp.current=e,If(e)},ah=e=>{Mp.current=e},nh=e=>{Ap(e)},oh=e=>{Fp(e)},sh=async()=>"granted",ih=async()=>"granted",ch=e=>{Dp.current=e},dh=e=>{Np.current=e},lh=e=>{Lp.current=e},uh=e=>{Vp.current=e},ph=e=>{Bp.current=e},mh=e=>{$p.current=e},gh=e=>{Ep.current=e},hh=e=>{Wp.current=e},fh=e=>{Hp.current=e},bh=e=>{Op.current=e},yh=e=>{zp.current=e},xh=e=>{Up.current=e},vh=e=>{qp.current=e},Sh=e=>{_p.current=e},Rh=e=>{Gp.current=e},wh=e=>{Yp.current=e},kh=e=>{Kp.current=e},Ch=e=>{Jp.current=e},jh=e=>{Xp.current=e},Ph=e=>{Qp(e)},Mh=e=>{em.current=e},Ih=e=>{tm.current=e},Ah=e=>{rm.current=e},Th=e=>{am.current=e},Fh=e=>{nm.current=e},Dh=e=>{om.current=e},Nh=e=>{sm.current=e},Lh=e=>{im.current=e},Vh=e=>{cm.current=e},Bh=e=>{dm.current=e},$h=e=>{lm.current=e},Eh=e=>{um.current=e},Wh=e=>{pm.current=e},Hh=e=>{mm.current=e},Oh=e=>{gm.current=e},zh=e=>{hm.current=e},Uh=e=>{fm.current=e},qh=e=>{ym(e)},_h=e=>{xm.current=e},Gh=e=>{vm.current=e},Yh=e=>{Sm.current=e},Kh=e=>{Rm.current=e},Jh=e=>{wm.current=e},Xh=e=>{km.current=e},Zh=e=>{Cm.current=e},Qh=e=>{jm.current=e},ef=e=>{Pm.current=e},tf=e=>{Mm.current=e},rf=e=>{Am(e)},af=e=>{Tm.current=e},nf=e=>{Fm.current=e},of=e=>{Dm.current=e},sf=e=>{Nm.current=e},cf=e=>{Lm.current=e},df=e=>{Vm.current=e},lf=e=>{$m(e)},uf=e=>{Wm(e)},pf=e=>{Hm.current=e},mf=e=>{Om.current=e},gf=e=>{zm.current=e},hf=e=>{Um.current=e},ff=e=>{qm.current=e},bf=e=>{_m.current=e},yf=e=>{Gm.current=e},xf=e=>{Ym.current=e},vf=e=>{Km.current=e},Sf=e=>{Jm.current=e},Rf=e=>{Zm(e)};function wf(){return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}const kf=()=>{try{null!==c&&(c={...jf(),...Cf()},d&&d(c))}catch{}return{...jf(),...Cf()}},Cf=()=>({updateMiniCardsGrid:_a,mixStreams:Ga,dispStreams:Ya,stopShareScreen:Ka,checkScreenShare:Ja,startShareScreen:Xa,requestScreenShare:Za,reorderStreams:Qa,prepopulateUserMedia:mn,getVideos:gn,rePort:hn,trigger:fn,consumerResume:oe,connectSendTransport:Wn,connectSendTransportAudio:w,connectSendTransportVideo:vn,connectSendTransportScreen:Sn,processConsumerTransports:Rn,resumePauseStreams:wn,readjust:kn,checkGrid:Cn,getEstimate:jn,calculateRowsAndColumns:Pn,addVideosGrid:se,onScreenChanges:In,sleep:An,changeVids:Tn,compareActiveNames:Fn,compareScreenStates:Dn,createSendTransport:Nn,resumeSendTransportAudio:Ln,receiveAllPipedTransports:Vn,disconnectSendTransportVideo:Bn,disconnectSendTransportAudio:$n,disconnectSendTransportScreen:En,getPipedProducersAlt:On,signalNewConsumerTransport:y,connectRecvTransport:zn,reUpdateInter:Un,updateParticipantAudioDecibels:qn,closeAndResize:_n,autoAdjust:Gn,switchUserVideoAlt:Yn,switchUserVideo:Kn,switchUserAudio:Jn,getDomains:Io,formatNumber:Zn,connectIps:Qn,connectLocalIps:S,createDeviceClient:Na,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro,captureCanvasStream:Uo,resumePauseAudioStreams:qo,processConsumerTransportsAudio:_o,checkPermission:Oa,streamSuccessVideo:$a,streamSuccessAudio:Ea,streamSuccessScreen:Wa,streamSuccessAudioSwitch:Ha,clickVideo:La,clickAudio:Va,clickScreenShare:Ba,requestPermissionCamera:sh,requestPermissionAudio:ih,getMediaDevicesList:Of,getParticipantMedia:zf}),jf=()=>({localUIMode:ye.current,roomName:Pe.current,member:Me.current,adminPasscode:Ie.current,youAreCoHost:De.current,youAreHost:Ne.current,islevel:Ae.current,confirmedToRecord:Le.current,meetingDisplayType:Ve.current,meetingVideoOptimized:Oe.current,eventType:ze.current,participants:Ue.current,filteredParticipants:qe.current,participantsCounter:_e.current,participantsFilter:Ge.current,consume_sockets:Ye.current,rtpCapabilities:Ke.current,roomRecvIPs:Je.current,meetingRoomParams:Xe.current,itemPageLimit:Ze.current,audioOnlyRoom:Qe.current,addForBasic:et.current,screenPageLimit:tt.current,shareScreenStarted:rt.current,shared:at.current,targetOrientation:nt.current,targetResolution:ot.current,targetResolutionHost:st.current,vidCons:it.current,frameRate:ct.current,hParams:dt.current,vParams:lt.current,screenParams:gt.current,aParams:ft.current,recordingAudioPausesLimit:bt.current,recordingAudioPausesCount:yt.current,recordingAudioSupport:xt.current,recordingAudioPeopleLimit:vt.current,recordingAudioParticipantsTimeLimit:St.current,recordingVideoPausesCount:Rt.current,recordingVideoPausesLimit:wt.current,recordingVideoSupport:kt.current,recordingVideoPeopleLimit:Ct.current,recordingVideoParticipantsTimeLimit:jt.current,recordingAllParticipantsSupport:Pt.current,recordingVideoParticipantsSupport:Mt.current,recordingAllParticipantsFullRoomSupport:It.current,recordingVideoParticipantsFullRoomSupport:At.current,recordingPreferredOrientation:Tt.current,recordingSupportForOtherOrientation:Ft.current,recordingMultiFormatsSupport:Dt.current,userRecordingParams:Nt.current,canRecord:Lt.current,startReport:Vt.current,endReport:Bt.current,recordStartTime:Et.current,recordElapsedTime:Wt.current,isTimerRunning:Ht.current,canPauseResume:Ot.current,recordChangeSeconds:zt.current,pauseLimit:Ut.current,pauseRecordCount:qt.current,canLaunchRecord:_t.current,stopLaunchRecord:Gt.current,participantsAll:Js.current,firstAll:Yt.current,updateMainWindow:Kt.current,first_round:Jt.current,landScaped:Xt.current,lock_screen:Zt.current,screenId:Qt.current,allVideoStreams:er.current,newLimitedStreams:tr.current,newLimitedStreamsIDs:rr.current,activeSounds:ar.current,screenShareIDStream:nr.current,screenShareNameStream:or.current,adminIDStream:sr.current,adminNameStream:ir.current,youYouStream:cr.current,youYouStreamIDs:dr.current,localStream:lr.current,recordStarted:ur.current,recordResumed:pr.current,recordPaused:mr.current,recordStopped:gr.current,adminRestrictSetting:hr.current,videoRequestState:fr.current,videoRequestTime:br.current,videoAction:yr.current,localStreamVideo:xr.current,userDefaultVideoInputDevice:vr.current,currentFacingMode:Sr.current,prevFacingMode:Rr.current,defVideoID:wr.current,allowed:kr.current,dispActiveNames:Cr.current,p_dispActiveNames:jr.current,activeNames:Pr.current,prevActiveNames:Mr.current,p_activeNames:Ir.current,membersReceived:Ar.current,deferScreenReceived:Tr.current,hostFirstSwitch:Fr.current,micAction:Dr.current,screenAction:Nr.current,chatAction:Lr.current,audioRequestState:Vr.current,screenRequestState:Br.current,chatRequestState:$r.current,audioRequestTime:Er.current,screenRequestTime:Wr.current,chatRequestTime:Hr.current,updateRequestIntervalSeconds:Or.current,oldSoundIds:zr.current,hostLabel:Ur.current,mainScreenFilled:qr.current,localStreamScreen:_r.current,screenAlreadyOn:Gr,chatAlreadyOn:Kr,redirectURL:Xr.current,oldAllStreams:Zr.current,adminVidID:Qr.current,streamNames:ea.current,non_alVideoStreams:ta.current,sortAudioLoudness:ra.current,audioDecibels:aa.current,mixed_alVideoStreams:na.current,non_alVideoStreams_muted:oa.current,paginatedStreams:pa.current,localStreamAudio:ha.current,defAudioID:ba.current,userDefaultAudioInputDevice:ya.current,userDefaultAudioOutputDevice:xa.current,prevAudioInputDevice:va.current,prevVideoInputDevice:Sa.current,audioPaused:Ra.current,mainScreenPerson:wa.current,adminOnMainScreen:ka.current,screenStates:Ca.current,prevScreenStates:ja.current,updateDateState:Pa.current,lastUpdate:Ma.current,nForReadjustRecord:Ia.current,fixedPageLimit:Aa.current,removeAltGrid:Ta.current,nForReadjust:Da.current,lastReorderTime:tn.current,reorderInterval:za.current,fastReorderInterval:en.current,audStreamNames:rn.current,currentUserPage:an.current,mainHeightWidth:nn,prevMainHeightWidth:sn.current,prevDoPaginate:cn.current,doPaginate:dn.current,shareEnded:ln.current,lStreams:un.current,chatRefStreams:pn.current,controlHeight:bn,isWideScreen:Hn.current,isMediumScreen:To.current,isSmallScreen:Do.current,addGrid:No.current,addAltGrid:Ho.current,gridRows:Oo,gridCols:Yo,altGridRows:Zo,altGridCols:es,numberPages:rs,currentStreams:us,showMiniView:ps,nStream:gs.current,defer_receive:fs.current,allAudioStreams:Rs.current,screenProducer:Cs.current,remoteScreenStream:ws.current,gotAllVids:Ps.current,paginationHeightWidth:Ms.current,paginationDirection:Is.current,gridSizes:As.current,screenForceFullDisplay:Ts.current,mainGridStream:Fs.current,otherGridStreams:Ds,audioOnlyStreams:Ls.current,videoInputs:Vs,audioInputs:$s,meetingProgressTime:Os,meetingElapsedTime:qs.current,ref_participants:Ys.current,messages:zl.current,startDirectMessage:Ul.current,directMessageDetails:ql.current,coHost:Te.current,coHostResponsibility:Fe.current,audioSetting:Yl.current,videoSetting:Kl.current,screenshareSetting:Jl.current,chatSetting:Xl.current,autoWave:Ql.current,forceFullDisplay:eu.current,prevForceFullDisplay:tu.current,prevMeetingDisplayType:ru.current,waitingRoomFilter:au.current,waitingRoomList:nu.current,waitingRoomCounter:ou.current,filteredWaitingRoomList:su.current,requestFilter:iu.current,requestList:cu.current,requestCounter:du.current,filteredRequestList:lu.current,totalReqWait:uu.current,alertVisible:pu,alertMessage:gu,alertType:fu,alertDuration:yu,progressTimerVisible:vu,progressTimerValue:Su,isMenuModalVisible:Ru,isRecordingModalVisible:ku,isSettingsModalVisible:ju,isRequestsModalVisible:Mu,isWaitingModalVisible:Au,isCoHostModalVisible:Fu,isMediaSettingsModalVisible:Nu,isDisplaySettingsModalVisible:Vu,isParticipantsModalVisible:$u,isMessagesModalVisible:Wu,isConfirmExitModalVisible:Ou,isConfirmHereModalVisible:Uu,isLoadingModalVisible:Yu,recordingMediaOptions:Ju.current,recordingAudioOptions:Xu.current,recordingVideoOptions:Zu.current,recordingVideoType:Qu.current,recordingVideoOptimized:ep.current,recordingDisplayType:tp.current,recordingAddHLS:rp.current,recordingAddText:cp.current,recordingCustomText:dp.current,recordingCustomTextPosition:lp.current,recordingCustomTextColor:up,recordingNameTags:ap.current,recordingBackgroundColor:np,recordingNameTagsColor:sp,recordingOrientationVideo:mp.current,clearedToResume:gp.current,clearedToRecord:hp.current,recordState:fp,showRecordButtons:yp,recordingProgressTime:vp,audioSwitching:Rp,videoSwitching:kp,videoAlreadyOn:jp.current,audioAlreadyOn:Pp.current,componentSizes:Mp.current,hasCameraPermission:Ip,hasAudioPermission:Tp,transportCreated:Dp.current,localTransportCreated:Np.current,transportCreatedVideo:Lp.current,transportCreatedAudio:Vp.current,transportCreatedScreen:Bp.current,producerTransport:$p.current,localProducerTransport:Ep.current,videoProducer:Wp.current,localVideoProducer:Hp.current,params:Op.current,videoParams:zp.current,audioParams:Up.current,audioProducer:qp.current,audioLevel:_p.current,localAudioProducer:Gp.current,consumerTransports:Yp.current,consumingTransports:Kp.current,polls:Jp.current,poll:Xp.current,isPollModalVisible:Zp,customImage:om.current,selectedImage:sm.current,segmentVideo:im.current,selfieSegmentation:cm.current,pauseSegmentation:dm.current,processedStream:lm.current,keepBackground:um.current,backgroundHasChanged:pm.current,virtualStream:mm.current,mainCanvas:gm.current,prevKeepBackground:hm.current,appliedBackground:fm.current,isBackgroundModalVisible:bm,autoClickBackground:xm.current,breakoutRooms:vm.current,currentRoomIndex:Sm.current,canStartBreakout:Rm.current,breakOutRoomStarted:wm.current,breakOutRoomEnded:km.current,hostNewRoom:Cm.current,limitedBreakRoom:jm.current,mainRoomsLength:Pm.current,memberRoom:Mm.current,isBreakoutRoomsModalVisible:Im,whiteboardUsers:Tm.current,currentWhiteboardIndex:Fm.current,canStartWhiteboard:Dm.current,whiteboardStarted:Nm.current,whiteboardEnded:Lm.current,whiteboardLimit:Vm.current,isWhiteboardModalVisible:Bm,isConfigureWhiteboardModalVisible:Em,shapes:Hm.current,useImageBackground:Om.current,redoStack:zm.current,undoStack:Um.current,canvasStream:qm.current,canvasWhiteboard:_m.current,canvasScreenboard:Gm.current,processedScreenStream:Ym.current,annotateScreenStream:Km.current,mainScreenCanvas:Jm.current,isScreenboardModalVisible:Xm,permissionConfig:em.current,panelists:tm.current,panelistsFocused:rm.current,muteOthersMic:am.current,muteOthersCamera:nm.current,validated:fe,device:we.current,socket:xe.current,localSocket:Se.current,checkMediaPermission:!1,onWeb:!0,mediaDevices:ua,updateRoomName:fi,updateMember:bi,updateAdminPasscode:yi,updateYouAreCoHost:Ri,updateYouAreHost:wi,updateIslevel:xi,updateCoHost:vi,updateCoHostResponsibility:Si,updateConfirmedToRecord:ki,updateMeetingDisplayType:Ci,updateMeetingVideoOptimized:ji,updateEventType:Pi,updateParticipants:Mi,updateParticipantsCounter:Ii,updateParticipantsFilter:Ai,updateConsume_sockets:dc,updateRtpCapabilities:lc,updateRoomRecvIPs:uc,updateMeetingRoomParams:pc,updateItemPageLimit:mc,updateAudioOnlyRoom:gc,updateAddForBasic:hc,updateScreenPageLimit:fc,updateShareScreenStarted:bc,updateShared:yc,updateTargetOrientation:xc,updateTargetResolution:vc,updateTargetResolutionHost:Sc,updateVidCons:Rc,updateFrameRate:wc,updateHParams:kc,updateVParams:Cc,updateScreenParams:jc,updateAParams:Pc,updateRecordingAudioPausesLimit:Ti,updateRecordingAudioPausesCount:Fi,updateRecordingAudioSupport:Di,updateRecordingAudioPeopleLimit:Ni,updateRecordingAudioParticipantsTimeLimit:Li,updateRecordingVideoPausesCount:Vi,updateRecordingVideoPausesLimit:Bi,updateRecordingVideoSupport:$i,updateRecordingVideoPeopleLimit:Ei,updateRecordingVideoParticipantsTimeLimit:Wi,updateRecordingAllParticipantsSupport:Hi,updateRecordingVideoParticipantsSupport:Oi,updateRecordingAllParticipantsFullRoomSupport:zi,updateRecordingVideoParticipantsFullRoomSupport:Ui,updateRecordingPreferredOrientation:qi,updateRecordingSupportForOtherOrientation:_i,updateRecordingMultiFormatsSupport:Gi,updateUserRecordingParams:Yi,updateCanRecord:Ki,updateStartReport:Ji,updateEndReport:Xi,updateRecordTimerInterval:Zi,updateRecordStartTime:Qi,updateRecordElapsedTime:ec,updateIsTimerRunning:tc,updateCanPauseResume:rc,updateRecordChangeSeconds:ac,updatePauseLimit:nc,updatePauseRecordCount:oc,updateCanLaunchRecord:sc,updateStopLaunchRecord:ic,updateParticipantsAll:cc,updateFirstAll:Mc,updateUpdateMainWindow:Ic,updateFirst_round:Ac,updateLandScaped:Tc,updateLock_screen:Fc,updateScreenId:Dc,updateAllVideoStreams:Nc,updateNewLimitedStreams:Lc,updateNewLimitedStreamsIDs:Vc,updateActiveSounds:Bc,updateScreenShareIDStream:$c,updateScreenShareNameStream:Ec,updateAdminIDStream:Wc,updateAdminNameStream:Hc,updateYouYouStream:Oc,updateYouYouStreamIDs:zc,updateLocalStream:Uc,updateRecordStarted:qc,updateRecordResumed:_c,updateRecordPaused:Gc,updateRecordStopped:Yc,updateAdminRestrictSetting:Kc,updateVideoRequestState:Jc,updateVideoRequestTime:Xc,updateVideoAction:Zc,updateLocalStreamVideo:Qc,updateUserDefaultVideoInputDevice:ed,updateCurrentFacingMode:td,updateRef_participants:Ol,updateDefVideoID:ad,updateAllowed:nd,updateDispActiveNames:od,updateP_dispActiveNames:sd,updateActiveNames:id,updatePrevActiveNames:cd,updateP_activeNames:dd,updateMembersReceived:ld,updateDeferScreenReceived:ud,updateHostFirstSwitch:pd,updateMicAction:md,updateScreenAction:gd,updateChatAction:hd,updateAudioRequestState:fd,updateScreenRequestState:bd,updateChatRequestState:yd,updateAudioRequestTime:xd,updateScreenRequestTime:vd,updateChatRequestTime:Sd,updateOldSoundIds:Rd,updatehostLabel:wd,updateMainScreenFilled:kd,updateLocalStreamScreen:Cd,updateScreenAlreadyOn:jd,updateChatAlreadyOn:Pd,updateRedirectURL:Md,updateOldAllStreams:Id,updateAdminVidID:Ad,updateStreamNames:Td,updateNon_alVideoStreams:Fd,updateSortAudioLoudness:Dd,updateAudioDecibels:Nd,updateMixed_alVideoStreams:Ld,updateNon_alVideoStreams_muted:Vd,updatePaginatedStreams:Bd,updateLocalStreamAudio:$d,updateDefAudioID:Ed,updateUserDefaultAudioInputDevice:Wd,updateUserDefaultAudioOutputDevice:Hd,updatePrevAudioInputDevice:Od,updatePrevVideoInputDevice:zd,updateAudioPaused:Ud,updateMainScreenPerson:qd,updateAdminOnMainScreen:_d,updateScreenStates:Gd,updatePrevScreenStates:Yd,updateUpdateDateState:Kd,updateLastUpdate:Jd,updateNForReadjustRecord:Xd,updateFixedPageLimit:Zd,updateRemoveAltGrid:Qd,updateNForReadjust:el,updateLastReorderTime:tl,updateAudStreamNames:rl,updateCurrentUserPage:al,updatePrevFacingMode:rd,updateMainHeightWidth:nl,updatePrevMainHeightWidth:ol,updatePrevDoPaginate:sl,updateDoPaginate:il,updateShareEnded:cl,updateLStreams:dl,updateChatRefStreams:ll,updateControlHeight:ul,updateIsWideScreen:pl,updateIsMediumScreen:ml,updateIsSmallScreen:gl,updateAddGrid:hl,updateAddAltGrid:fl,updateGridRows:bl,updateGridCols:yl,updateAltGridRows:xl,updateAltGridCols:vl,updateNumberPages:Sl,updateCurrentStreams:Rl,updateShowMiniView:wl,updateNStream:kl,updateDefer_receive:Cl,updateAllAudioStreams:jl,updateRemoteScreenStream:Pl,updateScreenProducer:Ml,updateLocalScreenProducer:Il,updateGotAllVids:Al,updatePaginationHeightWidth:Tl,updatePaginationDirection:Fl,updateGridSizes:Dl,updateScreenForceFullDisplay:Nl,updateMainGridStream:Ll,updateOtherGridStreams:Vl,updateAudioOnlyStreams:Bl,updateVideoInputs:$l,updateAudioInputs:El,updateMeetingProgressTime:Wl,updateMeetingElapsedTime:Hl,updateMessages:Qm,updateStartDirectMessage:eg,updateDirectMessageDetails:tg,updateShowMessagesBadge:rg,updateAudioSetting:ag,updateVideoSetting:ng,updateScreenshareSetting:og,updateChatSetting:sg,updateDisplayOption:ig,updateAutoWave:cg,updateForceFullDisplay:dg,updatePrevForceFullDisplay:lg,updatePrevMeetingDisplayType:ug,updateWaitingRoomFilter:mg,updateWaitingRoomList:gg,updateWaitingRoomCounter:pg,updateRequestFilter:fg,updateRequestList:bg,updateRequestCounter:hg,updateTotalReqWait:yg,updateIsMenuModalVisible:xg,updateIsRecordingModalVisible:vg,updateIsSettingsModalVisible:Sg,updateIsRequestsModalVisible:Rg,updateIsWaitingModalVisible:wg,updateIsCoHostModalVisible:kg,updateIsMediaSettingsModalVisible:Cg,updateIsDisplaySettingsModalVisible:jg,updateIsParticipantsModalVisible:Pg,updateIsMessagesModalVisible:Mg,updateIsConfirmExitModalVisible:Ig,updateIsConfirmHereModalVisible:Ag,updateIsLoadingModalVisible:Tg,updateRecordingMediaOptions:Dg,updateRecordingAudioOptions:Ng,updateRecordingVideoOptions:Lg,updateRecordingVideoType:Vg,updateRecordingVideoOptimized:Bg,updateRecordingDisplayType:$g,updateRecordingAddHLS:Eg,updateRecordingAddText:Wg,updateRecordingCustomText:Hg,updateRecordingCustomTextPosition:Og,updateRecordingCustomTextColor:zg,updateRecordingNameTags:Ug,updateRecordingBackgroundColor:qg,updateRecordingNameTagsColor:_g,updateRecordingOrientationVideo:Gg,updateClearedToResume:Yg,updateClearedToRecord:Kg,updateRecordState:Jg,updateShowRecordButtons:Xg,updateRecordingProgressTime:Zg,updateAudioSwitching:Qg,updateVideoSwitching:eh,updateVideoAlreadyOn:th,updateAudioAlreadyOn:rh,updateComponentSizes:ah,updateHasCameraPermission:nh,updateHasAudioPermission:oh,updateTransportCreated:ch,updateLocalTransportCreated:dh,updateTransportCreatedVideo:lh,updateTransportCreatedAudio:uh,updateTransportCreatedScreen:ph,updateProducerTransport:mh,updateLocalProducerTransport:gh,updateVideoProducer:hh,updateLocalVideoProducer:fh,updateParams:bh,updateVideoParams:yh,updateAudioParams:xh,updateAudioProducer:vh,updateAudioLevel:Sh,updateLocalAudioProducer:Rh,updateConsumerTransports:wh,updateConsumingTransports:kh,updatePolls:Ch,updatePoll:jh,updateIsPollModalVisible:Ph,updateCustomImage:Dh,updateSelectedImage:Nh,updateSegmentVideo:Lh,updateSelfieSegmentation:Vh,updatePauseSegmentation:Bh,updateProcessedStream:$h,updateKeepBackground:Eh,updateBackgroundHasChanged:Wh,updateVirtualStream:Hh,updateMainCanvas:Oh,updatePrevKeepBackground:zh,updateAppliedBackground:Uh,updateIsBackgroundModalVisible:qh,updateAutoClickBackground:_h,updateBreakoutRooms:Gh,updateCurrentRoomIndex:Yh,updateCanStartBreakout:Kh,updateBreakOutRoomStarted:Jh,updateBreakOutRoomEnded:Xh,updateHostNewRoom:Zh,updateLimitedBreakRoom:Qh,updateMainRoomsLength:ef,updateMemberRoom:tf,updateIsBreakoutRoomsModalVisible:rf,updateWhiteboardUsers:af,updateCurrentWhiteboardIndex:nf,updateCanStartWhiteboard:of,updateWhiteboardStarted:sf,updateWhiteboardEnded:cf,updateWhiteboardLimit:df,updateIsWhiteboardModalVisible:lf,updateIsConfigureWhiteboardModalVisible:uf,updateShapes:pf,updateUseImageBackground:mf,updateRedoStack:gf,updateUndoStack:hf,updateCanvasStream:ff,updateCanvasWhiteboard:bf,updateCanvasScreenboard:yf,updateProcessedScreenStream:xf,updateAnnotateScreenStream:vf,updateMainScreenCanvas:Sf,updateIsScreenboardModalVisible:Rf,updatePermissionConfig:Mh,updatePanelists:Ih,updatePanelistsFocused:Ah,updateMuteOthersMic:Th,updateMuteOthersCamera:Fh,checkOrientation:wf,updateDevice:pi,updateSocket:li,updateLocalSocket:ui,updateValidated:ii,showAlert:Pf,getUpdatedAllParams:kf,customVideoCard:h,customAudioCard:f,customMiniCard:b}),Pf=({message:e,type:t,duration:r=3e3})=>{hu(e),bu(t),xu(r),mu(!0)},[Mf,If]=(0,de.useState)(!!Pp.current&&Pp.current),[Af,Tf]=(0,de.useState)(!!jp.current&&jp.current),[Ff,Df]=(0,de.useState)(!1),[Nf]=(0,de.useState)(!1),[Lf]=(0,de.useState)(!1),Vf=[{icon:pe.faPlayCircle,active:!1===mr.current,onPress:()=>{so({parameters:{...jf(),...Cf()}})},activeColor:"black",inActiveColor:"black",alternateIcon:pe.faPauseCircle,show:!0},{icon:pe.faStopCircle,active:!1,onPress:()=>{io({parameters:{...jf(),...Cf()}})},activeColor:"green",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsx)("div",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:2},children:(0,ce.jsx)("span",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:0},children:vp})}),show:!0},{icon:pe.faDotCircle,active:!1,onPress:()=>console.log("Status pressed"),activeColor:"black",inActiveColor:!1===mr.current?"red":"yellow",show:!0},{icon:pe.faCog,active:!1,onPress:()=>{sa({updateIsRecordingModalVisible:vg,isRecordingModalVisible:ku,showAlert:Pf,stopLaunchRecord:Gt.current,canLaunchRecord:_t.current,recordingAudioSupport:xt.current,recordingVideoSupport:kt.current,updateCanRecord:Ki,updateClearedToRecord:Kg,recordStarted:ur.current,recordPaused:mr.current,localUIMode:ye.current})},activeColor:"green",inActiveColor:"black",show:!0}],Bf=[{icon:pe.faRecordVinyl,text:"Record",action:()=>{sa({updateIsRecordingModalVisible:vg,isRecordingModalVisible:ku,showAlert:Pf,stopLaunchRecord:Gt.current,canLaunchRecord:_t.current,recordingAudioSupport:xt.current,recordingVideoSupport:kt.current,updateCanRecord:Ki,updateClearedToRecord:Kg,recordStarted:ur.current,recordPaused:mr.current,localUIMode:ye.current})},show:!yp&&"2"===Ae.current},{customComponent:(0,ce.jsx)(L,{buttons:Vf,direction:"horizontal",showAspect:!0}),show:yp&&"2"===Ae.current,renderAsButton:!1},{icon:pe.faCog,text:"Event Settings",action:()=>{ri({updateIsSettingsModalVisible:Sg,isSettingsModalVisible:ju})},show:"2"===Ae.current},{icon:pe.faUsers,text:"Requests",action:()=>{ai({updateIsRequestsModalVisible:Rg,isRequestsModalVisible:Mu})},show:"2"===Ae.current||Fe.current&&Te.current&&Te.current===Me.current&&1==!!Fe.current.find(e=>"media"===e.name).value||!1},{icon:pe.faClock,text:"Waiting",action:()=>{Qs({updateIsWaitingModalVisible:wg,isWaitingModalVisible:Au})},show:"2"===Ae.current||Fe.current&&Te.current&&Te.current===Me.current&&1==!!Fe.current.find(e=>"waiting"===e.name).value||!1},{icon:pe.faUserPlus,text:"Co-host",action:()=>{ei({updateIsCoHostModalVisible:kg,isCoHostModalVisible:Fu})},show:"2"===Ae.current},{icon:pe.faTools,text:"Set Media",action:()=>{ia({updateIsMediaSettingsModalVisible:Cg,isMediaSettingsModalVisible:Nu,audioInputs:$s,videoInputs:Vs,updateAudioInputs:El,updateVideoInputs:$l,mediaDevices:ua})},show:!0},{icon:pe.faDesktop,text:"Display",action:()=>{ti({updateIsDisplaySettingsModalVisible:jg,isDisplaySettingsModalVisible:Vu})},show:!0},{icon:pe.faPoll,text:"Poll",action:()=>{si({updateIsPollModalVisible:Ph,isPollModalVisible:Zp})},show:!0},{icon:pe.faUserFriends,text:"Breakout Rooms",action:()=>{ci({updateIsBreakoutRoomsModalVisible:rf,isBreakoutRoomsModalVisible:Im})},show:"2"==Ae.current},{icon:pe.faChalkboardTeacher,text:"Whiteboard",action:()=>{di({updateIsConfigureWhiteboardModalVisible:uf,isConfigureWhiteboardModalVisible:Em})},show:"2"==Ae.current}],$f=[{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:Mf,onPress:()=>Va({parameters:{...jf(),...Cf()}}),activeColor:"green",inActiveColor:"red",disabled:Rp,show:!0},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:Af,onPress:()=>La({parameters:{...jf(),...Cf()}}),activeColor:"green",inActiveColor:"red",disabled:kp,show:!0},{icon:pe.faDesktop,alternateIconComponent:(0,ce.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDesktop,size:"lg",style:{color:Ff?"green":"black"}}),!Ff&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBan,size:"lg",style:{color:"red",position:"absolute",top:0,right:0}})]}),active:!0,onPress:()=>{Ba({parameters:{...jf(),...Cf()}})},activeColor:"green",inActiveColor:"red",disabled:!1,show:!0},{icon:pe.faPhone,active:Nf,onPress:()=>la({updateIsConfirmExitModalVisible:Ig,isConfirmExitModalVisible:Ou}),activeColor:"green",inActiveColor:"red",disabled:!1,show:!0},{icon:pe.faUsers,active:Lf,onPress:()=>ni({updateIsParticipantsModalVisible:Pg,isParticipantsModalVisible:$u}),activeColor:"black",inActiveColor:"black",disabled:!1,show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBars,size:"lg",color:"black"}),(0,ce.jsx)("div",{style:{position:"absolute",top:-8,right:-8,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold"},children:uu.current})})})]}),onPress:()=>Zs({updateIsMenuModalVisible:xg,isMenuModalVisible:Ru}),show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:"black"}),_l&&(0,ce.jsx)("div",{style:{position:"absolute",top:-6,right:-6,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold",lineHeight:"1"},children:"*"})})})]}),onPress:()=>oi({updateIsMessagesModalVisible:Mg,isMessagesModalVisible:Wu}),show:!0}];async function Ef({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,isLocal:d=!1}){let l;if(d){const d=await ie({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,parameters:{imgSrc:i,showAlert:Pf,updateIsLoadingModalVisible:Tg,connectSocket:ma,connectLocalSocket:ga,updateSocket:li,updateLocalSocket:ui,updateValidated:ii,updateApiUserName:mi,updateApiToken:gi,updateLink:hi,updateRoomName:fi,updateMember:bi},checkConnect:t.length>0&&!0===r&&!je.current.includes("mediasfu.com"),localLink:t,joinMediaSFURoom:p});l=await Go({localRoom:d})}else l=await async function(e){const{socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s}=e;try{return await fa({socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s})}catch(e){throw console.log("error",e),new Error("Failed to join the room. Please check your connection and try again.")}}({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c});async function u(e){try{(!e.roomRecvIPs||e.roomRecvIPs&&0==e.roomRecvIPs.length)&&(e.roomRecvIPs=["none"],""!==je.current&&je.current.includes("mediasfu.com")&&!d&&await Vn({community:!0,nsock:kf().socket,parameters:{...jf(),...Cf()}}));try{Fa({parameters:{...jf(),...Cf(),data:e}})}catch{}if(e.isHost?xi("2"):"2"!==n&&xi("1"),e.secureCode&&""!=e.secureCode&&yi(e.secureCode),e.rtpCapabilities)try{let t=await Na({rtpCapabilities:e.rtpCapabilities});t&&pi(t)}catch(e){console.log("error Device",e)}}catch(e){console.log("error updateRoomParametersClient",e)}}if(l&&l.success){if(""!==je.current&&je.current.includes("mediasfu.com")&&d)return void(Re.current=l);""!==je.current&&je.current.includes("mediasfu.com")&&!d?Re.current?(Re.current.recordingParams=l.recordingParams,Re.current.meetingRoomParams=l.meetingRoomParams):Re.current=l:(Re.current=l,je.current.includes("mediasfu.com")||(Re.current.meetingRoomParams=l.meetingRoomParams)),await u(l)}else{if(""!==je.current&&je.current.includes("mediasfu.com")&&!d)return void await u(Re.current);try{Pf&&Pf({message:l.reason,type:"danger",duration:3e3})}catch{}}}async function Wf(){Mg(!1),Pg(!1),wg(!1),Rg(!1),kg(!1),Sg(!1),jg(!1),Cg(!1),xg(!1),Fg(!1),Ig(!1),await async function(e){for(const t of e)try{t[Object.keys(t)[0]].disconnect()}catch(e){console.log(`Error disconnecting socket with IP: ${Object.keys(t)[0]}`,e)}}(Ye.current),await(async()=>{const e=me,t=jf();for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[`update${r.charAt(0).toUpperCase()+r.slice(1)}`];if("function"==typeof a)try{a(e[r])}catch{}}})(),Wl("00:00:00"),Hl(0),Zg("00:00:00"),ec(0),Xg(!1),uf(!1),lf(!1),xg(!1),vg(!1),Ph(!1),rf(!1),qh(!1),Tg(!1),Ag(!1),setTimeout(async function(){ii(!1),window.location.reload()},500)}(0,de.useEffect)(()=>{bp(ur&&!gr?mr?"yellow":"red":"green")},[ur,mr,gr]);const Hf=async()=>{await(async()=>{let e=0;if("webinar"==ze.current||"conference"==ze.current){const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==bn&&ul(e)}else{const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==bn&&ul(e)}const{mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}=(({containerWidthFraction:e=1,containerHeightFraction:t=1,mainSize:r,doStack:a=!0,defaultFraction:n})=>{const o=window.innerWidth*e,s=window.innerHeight*t*n;let i=o>=768;return!i&&o>1.5*s&&(i=!0),pl(i),a?i?{mainHeight:s,otherHeight:s,mainWidth:Math.floor(r/100*o),otherWidth:Math.floor((100-r)/100*o)}:{mainHeight:Math.floor(r/100*s),otherHeight:Math.floor((100-r)/100*s),mainWidth:o,otherWidth:o}:{mainHeight:s,otherHeight:s,mainWidth:o,otherWidth:o}})({containerWidthFraction:1,containerHeightFraction:1,mainSize:nn,doStack:!0,defaultFraction:"webinar"==ze.current||"conference"==ze.current?1-e:1});ah({mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}),"portrait"===wf()&&(Hn.current||(rt.current||at.current)&&Nl(!0)),await mn({name:Ur.current,parameters:{...jf(),...Cf()}}),await In({changed:!0,parameters:{...jf(),...Cf()}})})()},Of=async e=>{try{return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind===e)}catch(e){return console.error("Error getting media devices:",e),[]}},zf=async({id:e,name:t,kind:r})=>{try{const a=Ue.current||[];let n;if(e&&(n=a.find(t=>t.id===e)),n||(n=a.find(e=>e.name===t)),n){if("video"===r){const e=er.current?.find(e=>e.producerId===n.videoID);return e?e.stream:null}{const e=Rs.current?.find(e=>e.producerId===n.audioID);return e?e.stream:null}}return null}catch(e){return console.error("Error getting participant media:",e),null}};async function Uf(e,a,n=!1){const o=xe.current,s=r&&Se.current&&Se.current.id?Se.current:o;if(o.id){n||(o.on("disconnect",async()=>{await Wo({showAlert:Pf,redirectURL:Xr.current,onWeb:!0,updateValidated:ii}),jp.current&&await La({parameters:{...jf(),...Cf()}}),Pp.current&&await Va({parameters:{...jf(),...Cf()}}),await Wf()}),o.on("allMembers",async t=>{t&&await $o({apiUserName:e,apiKey:"",apiToken:a,members:t.members,requestss:t.requests?t.requests:cu.current,coHoste:t.coHost?t.coHost:Te.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:Fe.current,parameters:{...jf(),...Cf()},consume_sockets:Ye.current})}),o.on("allMembersRest",async t=>{t&&await Eo({apiUserName:e,apiKey:"",members:t.members,apiToken:a,settings:t.settings,coHoste:t.coHost?t.coHost:Te.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:Fe.current,parameters:{...jf(),...Cf()},consume_sockets:Ye.current})}),o.on("userWaiting",async({name:e})=>{await co({name:e,showAlert:Pf,totalReqWait:uu.current,updateTotalReqWait:yg})}),o.on("personJoined",async({name:e})=>{await lo({name:e,showAlert:Pf})}),o.on("allWaitingRoomMembers",async e=>{await uo({waitingParticipants:e.waitingParticipants?e.waitingParticipants:e.waitingParticipantss?e.waitingParticipantss:nu.current,updateTotalReqWait:yg,updateWaitingRoomList:gg})}),o.on("ban",async({name:e})=>{await mo({name:e,parameters:{...jf(),...Cf()}})}),o.on("updatedCoHost",async e=>{await go({coHost:e.coHost?e.coHost:Te.current,coHostResponsibility:e.coHostResponsibilities?e.coHostResponsibilities:Fe.current,youAreCoHost:De.current,updateCoHost:vi,updateCoHostResponsibility:Si,updateYouAreCoHost:Ri,showAlert:Pf,eventType:ze.current,islevel:Ae.current,member:Me.current})}),o.on("participantRequested",async({userRequest:e})=>{await ho({userRequest:e,requestList:cu.current,waitingRoomList:nu.current,updateTotalReqWait:yg,updateRequestList:bg})}),o.on("screenProducerId",async({producerId:e})=>{fo({producerId:e,screenId:Qt.current,membersReceived:Ar.current,shareScreenStarted:rt.current,deferScreenReceived:Tr.current,participants:Ue.current,updateScreenId:Dc,updateShareScreenStarted:bc,updateDeferScreenReceived:ud})}),o.on("updateMediaSettings",async({settings:e})=>{bo({settings:e,updateAudioSetting:ag,updateVideoSetting:ng,updateScreenshareSetting:og,updateChatSetting:sg})}),o.on("producer-media-paused",async({producerId:e,kind:t,name:r})=>{await yo({producerId:e,kind:t,name:r,parameters:{...jf(),...Cf()}})}),o.on("producer-media-resumed",async({kind:e,name:t})=>{await xo({kind:e,name:t,parameters:{...jf(),...Cf()}})}),o.on("producer-media-closed",async({producerId:e,kind:t})=>{e&&t&&await vo({producerId:e,kind:t,parameters:{...jf(),...Cf()}})}),o.on("controlMediaHost",async({type:e})=>{await So({type:e,parameters:{...jf(),...Cf()}})}),o.on("meetingEnded",async function(){await Ro({showAlert:Pf,redirectURL:Xr.current,onWeb:!0,eventType:ze.current,updateValidated:ii}),jp.current&&await La({parameters:{...jf(),...Cf()}}),Pp.current&&await Va({parameters:{...jf(),...Cf()}}),await Wf()}),o.on("disconnectUserSelf",async function(){await wo({socket:o,member:Me.current,roomName:Pe.current})}),o.on("receiveMessage",async({message:e})=>{await ko({message:e,messages:zl.current,participantsAll:Ue.current,member:Me.current,eventType:ze.current,islevel:Ae.current,coHost:Te.current,updateMessages:Qm,updateShowMessagesBadge:rg})}),o.on("meetingTimeRemaining",async({timeRemaining:e})=>{await Co({timeRemaining:e,showAlert:Pf,eventType:ze.current})}),o.on("meetingStillThere",async()=>{await jo({updateIsConfirmHereModalVisible:Ag})}),o.on("updateConsumingDomains",async({domains:t,alt_domains:r})=>{await Ao({domains:t,alt_domains:r,apiUserName:e,apiKey:"",apiToken:a,parameters:{...jf(),...Cf()}})}),o.on("hostRequestResponse",({requestResponse:e})=>{Bo({requestResponse:e,showAlert:Pf,requestList:cu.current,updateRequestList:bg,updateMicAction:md,updateVideoAction:Zc,updateScreenAction:gd,updateChatAction:hd,updateAudioRequestState:fd,updateVideoRequestState:Jc,updateScreenRequestState:bd,updateChatRequestState:yd,updateAudioRequestTime:xd,updateVideoRequestTime:Xc,updateScreenRequestTime:vd,updateChatRequestTime:Sd,updateRequestIntervalSeconds:Or.current})}),o.on("pollUpdated",async e=>{try{await eo({data:e,polls:Jp.current,poll:Xp.current,member:Me.current,islevel:Ae.current,showAlert:Pf,updatePolls:Ch,updatePoll:jh,updateIsPollModalVisible:Ph})}catch{}}),o.on("breakoutRoomUpdated",async e=>{try{await no({data:e,parameters:{...jf(),...Cf()}})}catch{}})),n&&["roomRecordParams","startRecords","reInitiateRecording","RecordingNotice","timeLeftRecording","stoppedRecording"].forEach(e=>{o.off(e),s.off(e)}),s.on("roomRecordParams",async({recordParams:e})=>{await po({recordParams:e,parameters:{...jf(),...Cf()}})}),s.on("startRecords",async()=>{await Po({roomName:Pe.current,member:Me.current,socket:s})}),s.on("reInitiateRecording",async()=>{await Mo({roomName:Pe.current,member:Me.current,socket:s,adminRestrictSetting:hr.current})}),s.on("RecordingNotice",async({state:e,userRecordingParam:t,pauseCount:r,timeDone:a})=>{await Fo({state:e,userRecordingParam:t,pauseCount:r,timeDone:a,parameters:{...jf(),...Cf()}})}),s.on("timeLeftRecording",async({timeLeft:e})=>{Lo({timeLeft:e,showAlert:Pf})}),s.on("stoppedRecording",async({state:e,reason:t})=>{await Vo({state:e,reason:t,showAlert:Pf})}),""!==t&&o&&!n&&await Ef({socket:o,roomName:Pe.current,islevel:Ae.current,member:Me.current,sec:a,apiUserName:e,isLocal:!0});let i=!1;if(i=!(!Se.current||Se.current.id==s.id),!n&&i)return await Uf(e,a,!0),await An({ms:1e3}),Tg(!1),o;if(""!==je.current&&je.current.includes("mediasfu.com")){const t=Ce.current;await Ef({socket:r&&s&&s.id?s:o,roomName:Pe.current,islevel:Ae.current,member:Me.current,sec:t,apiUserName:e})}return await Xn({socket:o,roomName:Pe.current,updateMessages:Qm}),n||await mn({name:Ur.current,parameters:{...jf(),...Cf()}}),o}return null}return(0,de.useEffect)(()=>(window.addEventListener("resize",Hf),window.addEventListener("orientationchange",Hf),()=>{window.removeEventListener("resize",Hf),window.removeEventListener("orientationchange",Hf)}),[Hf]),(0,de.useEffect)(()=>{(Zt||at)&&Jt||mn({name:Ur.current,parameters:{...jf(),...Cf()}})},[nn]),(0,de.useEffect)(()=>{Nc([{producerId:"youyou",stream:void 0,id:"youyou",name:"youyou"}]),Td([{id:"youyou",name:"youyou",producerId:""}]);const e=async()=>{const e=await Uf(ke.current,Ce.current);li(e)};if(fe){try{!1===ye.current?(Tg(!0),e()):Tg(!1)}catch(e){console.log("error connectAndaAddSocketMethods",e)}oo({startTime:Date.now()/1e3,parameters:{...jf(),...Cf()}});try{null!==c&&(c={...jf(),...Cf()},d&&d(c))}catch{console.log("error updateSourceParameters")}}},[fe]),(0,ce.jsxs)("div",{className:"MediaSFU",style:{height:"100vh",width:"100vw",maxWidth:"100vw",maxHeight:"100vh",overflow:"hidden",...x},children:[g?le().createElement(g,{parameters:{...jf(),...Cf()}}):fe?l?(0,ce.jsxs)(R,{children:[(0,ce.jsx)(k,{backgroundColor:"rgba(217, 227, 234, 0.99)",defaultFraction:1-bn,updateIsWideScreen:pl,updateIsMediumScreen:ml,updateIsSmallScreen:gl,showControls:"webinar"==ze.current||"conference"==ze.current,children:(0,ce.jsxs)(C,{doStack:!0,mainSize:nn,updateComponentSizes:ah,defaultFraction:1-bn,componentSizes:Mp.current,showControls:"webinar"==ze.current||"conference"==ze.current,children:[(0,ce.jsxs)(j,{height:Mp.current.mainHeight,width:Mp.current.mainWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",mainSize:nn,showAspect:nn>0,timeBackgroundColor:fp,meetingProgressTime:Os,children:[(0,ce.jsx)(T,{customWidth:Mp.current.mainWidth,customHeight:Mp.current.mainHeight,rows:1,columns:1,componentsToRender:Fs.current?Fs.current:[],showAspect:Fs.current.length>0&&!(Nm.current&&!Lm.current),localStreamScreen:_r.current,annotateScreenStream:Km.current,Screenboard:at.current&&(0,ce.jsx)(B,{customWidth:Mp.current.mainWidth,customHeight:Mp.current.mainHeight,parameters:{...jf(),...Cf()},showAspect:at.current})}),(0,ce.jsx)(V,{customWidth:Mp.current.mainWidth,customHeight:Mp.current.mainHeight,parameters:{...jf(),...Cf()},showAspect:Nm.current&&!Lm.current})]}),(0,ce.jsxs)(M,{height:Mp.current.otherHeight,width:Mp.current.otherWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",showAspect:100!=nn,timeBackgroundColor:fp,showTimer:0==nn,meetingProgressTime:Os,children:[(0,ce.jsx)("div",{style:{width:"horizontal"===Is.current?Mp.current.otherWidth:Ms.current,height:"horizontal"===Is.current?Ms.current:Mp.current.otherHeight,padding:0,margin:0,display:dn.current?"flex":"none",flexDirection:"horizontal"===Is.current?"row":"column",justifyContent:"center",alignItems:"center"},children:(0,ce.jsx)(D,{totalPages:rs,currentUserPage:an.current,showAspect:dn.current,paginationHeight:Ms.current,direction:Is.current,parameters:{...jf(),...Cf()}})}),(0,ce.jsx)(F,{componentsToRender:Ls.current?Ls.current:[]}),(0,ce.jsx)(I,{customWidth:As.current.gridWidth,customHeight:As.current.gridHeight,rows:Oo,columns:Yo,componentsToRender:Ds[0],backgroundColor:"rgba(217, 227, 234, 0.99)"}),(0,ce.jsx)(A,{customWidth:As.current.altGridWidth,customHeight:As.current.altGridHeight,rows:Zo,columns:es,componentsToRender:Ds[1],backgroundColor:"rgba(217, 227, 234, 0.99)"})]})]})}),(0,ce.jsx)(P,{backgroundColor:"rgba(217, 227, 234, 0.99)",showControls:"webinar"==ze.current||"conference"==ze.current,defaultFractionSub:bn,children:(0,ce.jsx)(N,{buttons:$f,buttonColor:"black",buttonBackgroundColor:{default:"transparent",pressed:"transparent"},alignment:"space-between",vertical:!1,buttonsContainerStyle:{marginTop:2,marginBottom:2,backgroundColor:"transparent"}})})]}):(0,ce.jsx)(ce.Fragment,{children:" "}):(0,ce.jsx)(ne,{parameters:{imgSrc:i,showAlert:Pf,updateIsLoadingModalVisible:Tg,connectSocket:ma,connectLocalSocket:ga,updateSocket:li,updateLocalSocket:ui,updateValidated:ii,updateApiUserName:mi,updateApiToken:gi,updateLink:hi,updateRoomName:fi,updateMember:bi},credentials:a,localLink:t,connectMediaSFU:r,returnUI:l,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m}),l&&!g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(W,{backgroundColor:"rgba(181, 233, 229, 0.97)",isVisible:Ru,onClose:()=>xg(!1),customButtons:Bf,roomName:Pe.current,adminPasscode:Ie.current,islevel:Ae.current,eventType:ze.current,localLink:t}),(0,ce.jsx)(H,{backgroundColor:"rgba(217, 227, 234, 0.99)",isEventSettingsModalVisible:ju,updateIsSettingsModalVisible:Sg,onEventSettingsClose:()=>Sg(!1),audioSetting:Yl.current,videoSetting:Kl.current,screenshareSetting:Jl.current,chatSetting:Xl.current,updateAudioSetting:ag,updateVideoSetting:ng,updateScreenshareSetting:og,updateChatSetting:sg,roomName:Pe.current,socket:xe.current}),(0,ce.jsx)(O,{backgroundColor:"rgba(217, 227, 234, 0.99)",isRequestsModalVisible:Mu,onRequestClose:()=>Rg(!1),requestCounter:du.current,onRequestFilterChange:e=>{if(""!==e&&e.length>0){let t=cu.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));lu.current=t,du.current=t.length}else lu.current=cu.current,du.current=cu.current.length},updateRequestList:bg,requestList:lu.current,roomName:Pe.current,socket:xe.current,parameters:{updateRequestCounter:hg,updateRequestFilter:fg,updateRequestList:bg,getUpdatedAllParams:kf}}),(0,ce.jsx)(z,{backgroundColor:"rgba(217, 227, 234, 0.99)",isWaitingModalVisible:Au,onWaitingRoomClose:()=>wg(!1),waitingRoomCounter:ou.current,onWaitingRoomFilterChange:e=>{if(""!==e&&e.length>0){let t=nu.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));su.current=t,ou.current=t.length}else su.current=nu.current,ou.current=nu.current.length},waitingRoomList:su.current,updateWaitingList:gg,roomName:Pe.current,socket:xe.current,parameters:{filteredWaitingRoomList:su.current,getUpdatedAllParams:kf}}),(0,ce.jsx)(U,{backgroundColor:"rgba(217, 227, 234, 0.99)",isCoHostModalVisible:Fu,updateIsCoHostModalVisible:kg,onCoHostClose:()=>kg(!1),coHostResponsibility:Fe.current,participants:Ue.current,currentCohost:Te.current,roomName:Pe.current,showAlert:Pf,updateCoHostResponsibility:Si,updateCoHost:vi,socket:xe.current}),(0,ce.jsx)(q,{backgroundColor:"rgba(181, 233, 229, 0.97)",isMediaSettingsModalVisible:Nu,onMediaSettingsClose:()=>Cg(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(_,{backgroundColor:"rgba(217, 227, 234, 0.99)",isParticipantsModalVisible:$u,onParticipantsClose:()=>Pg(!1),participantsCounter:_e.current,onParticipantsFilterChange:e=>{if(""!==e&&e.length>0){let t=Ue.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));qe.current=t,_e.current=t.length}else qe.current=Ue.current,_e.current=Ue.current.length},parameters:{updateParticipants:Mi,updateIsParticipantsModalVisible:Pg,updateDirectMessageDetails:tg,updateStartDirectMessage:eg,updateIsMessagesModalVisible:Mg,showAlert:Pf,filteredParticipants:qe.current,participants:qe.current,roomName:Pe.current,islevel:Ae.current,member:Me.current,coHostResponsibility:Fe.current,coHost:Te.current,eventType:ze.current,startDirectMessage:Ul.current,directMessageDetails:ql.current,socket:xe.current,getUpdatedAllParams:jf}}),(0,ce.jsx)(Y,{backgroundColor:"rgba(217, 227, 234, 0.99)",isDisplaySettingsModalVisible:Vu,onDisplaySettingsClose:()=>jg(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(Z,{backgroundColor:"rgba(217, 227, 234, 0.99)",isRecordingModalVisible:ku,onClose:()=>vg(!1),startRecording:ca,confirmRecording:da,parameters:{...jf(),...Cf()}}),(0,ce.jsx)(G,{backgroundColor:"webinar"==ze.current||"conference"==ze.current?"#f5f5f5":"rgba(255, 255, 255, 0.25)",isMessagesModalVisible:Wu,onMessagesClose:()=>Mg(!1),messages:zl.current,eventType:ze.current,member:Me.current,islevel:Ae.current,coHostResponsibility:Fe.current,coHost:Te.current,startDirectMessage:Ul.current,directMessageDetails:ql.current,updateStartDirectMessage:eg,updateDirectMessageDetails:tg,showAlert:Pf,roomName:Pe.current,socket:xe.current,chatSetting:Xl.current}),(0,ce.jsx)(K,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmExitModalVisible:Ou,onConfirmExitClose:()=>Ig(!1),member:Me.current,roomName:Pe.current,socket:xe.current,islevel:Ae.current}),(0,ce.jsx)(J,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmHereModalVisible:Uu,onConfirmHereClose:()=>Ag(!1),member:Me.current,roomName:Pe.current,socket:xe.current}),(0,ce.jsx)(X,{isShareEventModalVisible:_u,onShareEventClose:()=>Fg(!1),roomName:Pe.current,islevel:Ae.current,adminPasscode:Ie.current,eventType:ze.current,localLink:t}),(0,ce.jsx)(Q,{isPollModalVisible:Zp,onClose:()=>Qp(!1),member:Me.current,islevel:Ae.current,polls:Jp.current,poll:Xp.current,socket:xe.current,roomName:Pe.current,showAlert:Pf,updateIsPollModalVisible:Qp,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro}),(0,ce.jsx)(ee,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:bm,onClose:()=>qh(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(te,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Im,onBreakoutRoomsClose:()=>rf(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(re,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Em,onConfigureWhiteboardClose:()=>uf(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(ae,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Xm,onClose:()=>Rf(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(E,{visible:pu,message:gu,type:fu,duration:yu,onHide:()=>mu(!1),textColor:"#ffffff"}),(0,ce.jsx)($,{isVisible:Yu,backgroundColor:"rgba(217, 227, 234, 0.99)",displayColor:"black"})]})]})},mi=({PrejoinPage:e=ks,localLink:t="",connectMediaSFU:r=!0,credentials:a={apiUserName:"",apiKey:""},useLocalUIMode:n=!1,seedData:o={},useSeed:s=!1,imgSrc:i="https://mediasfu.com/images/logo192.png",sourceParameters:c,updateSourceParameters:d,returnUI:l=!0,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m,customComponent:g,customVideoCard:h,customAudioCard:f,customMiniCard:b,containerStyle:x,uiOverrides:v})=>{const R=(0,de.useMemo)(()=>Ua(v?.mainContainer,He),[v?.mainContainer]),k=(0,de.useMemo)(()=>Ua(v?.mainAspect,ge),[v?.mainAspect]),C=(0,de.useMemo)(()=>Ua(v?.mainScreen,$e),[v?.mainScreen]),j=(0,de.useMemo)(()=>Ua(v?.mainGrid,Ee),[v?.mainGrid]),P=(0,de.useMemo)(()=>Ua(v?.subAspect,We),[v?.subAspect]),M=(0,de.useMemo)(()=>Ua(v?.otherGrid,Be),[v?.otherGrid]),I=(0,de.useMemo)(()=>Ua(v?.flexibleGrid,Ks),[v?.flexibleGrid]),A=(0,de.useMemo)(()=>Ua(v?.flexibleGridAlt,Ks),[v?.flexibleGridAlt]),T=(0,de.useMemo)(()=>Ua(v?.flexibleVideo,Xs),[v?.flexibleVideo]),F=(0,de.useMemo)(()=>Ua(v?.audioGrid,ht),[v?.audioGrid]),D=(0,de.useMemo)(()=>Ua(v?.pagination,Gs),[v?.pagination]),N=(0,de.useMemo)(()=>Ua(v?.controlButtons,he),[v?.controlButtons]),L=(0,de.useMemo)(()=>Ua(v?.controlButtonsAlt,ve),[v?.controlButtonsAlt]),V=(0,de.useMemo)(()=>Ua(v?.whiteboard,ut),[v?.whiteboard]),B=(0,de.useMemo)(()=>Ua(v?.screenboard,pt),[v?.screenboard]),$=(0,de.useMemo)(()=>Ua(v?.loadingModal,Ko),[v?.loadingModal]),E=(0,de.useMemo)(()=>Ua(v?.alert,Xo),[v?.alert]),W=(0,de.useMemo)(()=>Ua(v?.menuModal,as),[v?.menuModal]),H=(0,de.useMemo)(()=>Ua(v?.eventSettingsModal,cs),[v?.eventSettingsModal]),O=(0,de.useMemo)(()=>Ua(v?.requestsModal,os),[v?.requestsModal]),z=(0,de.useMemo)(()=>Ua(v?.waitingRoomModal,ss),[v?.waitingRoomModal]),U=(0,de.useMemo)(()=>Ua(v?.coHostModal,ds),[v?.coHostModal]),q=(0,de.useMemo)(()=>Ua(v?.mediaSettingsModal,ys),[v?.mediaSettingsModal]),_=(0,de.useMemo)(()=>Ua(v?.participantsModal,hs),[v?.participantsModal]),G=(0,de.useMemo)(()=>Ua(v?.messagesModal,bs),[v?.messagesModal]),Y=(0,de.useMemo)(()=>Ua(v?.displaySettingsModal,is),[v?.displaySettingsModal]),K=(0,de.useMemo)(()=>Ua(v?.confirmExitModal,xs),[v?.confirmExitModal]),J=(0,de.useMemo)(()=>Ua(v?.confirmHereModal,vs),[v?.confirmHereModal]),X=(0,de.useMemo)(()=>Ua(v?.shareEventModal,Ss),[v?.shareEventModal]),Z=(0,de.useMemo)(()=>Ua(v?.recordingModal,ns),[v?.recordingModal]),Q=(0,de.useMemo)(()=>Ua(v?.pollModal,Ws),[v?.pollModal]),ee=(0,de.useMemo)(()=>Ua(v?.backgroundModal,Hs),[v?.backgroundModal]),te=(0,de.useMemo)(()=>Ua(v?.breakoutRoomsModal,Us),[v?.breakoutRoomsModal]),re=(0,de.useMemo)(()=>Ua(v?.configureWhiteboardModal,_s),[v?.configureWhiteboardModal]),ae=(0,de.useMemo)(()=>Ua(v?.screenboardModal,mt),[v?.screenboardModal]),ne=(0,de.useMemo)(()=>Ua(v?.preJoinPage,e),[v?.preJoinPage,e]),oe=(0,de.useMemo)(()=>qa(v?.consumerResume,xn),[v?.consumerResume]),se=(0,de.useMemo)(()=>qa(v?.addVideosGrid,Mn),[v?.addVideosGrid]),[fe,be]=(0,de.useState)(n),ye=(0,de.useRef)(n),xe=(0,de.useRef)({}),Se=(0,de.useRef)(null),Re=(0,de.useRef)(null),we=(0,de.useRef)(null),ke=(0,de.useRef)(""),Ce=(0,de.useRef)(""),je=(0,de.useRef)(""),Pe=(0,de.useRef)(""),Me=(0,de.useRef)(s&&o?.member?o?.member:""),Ie=(0,de.useRef)(""),Ae=(0,de.useRef)(s&&o?.member&&o.member==o?.host?"2":"1"),Te=(0,de.useRef)(""),Fe=(0,de.useRef)([{name:"participants",value:!1,dedicated:!1},{name:"media",value:!1,dedicated:!1},{name:"waiting",value:!1,dedicated:!1},{name:"chat",value:!1,dedicated:!1}]),De=(0,de.useRef)(!!Te.current&&Te.current==Me.current),Ne=(0,de.useRef)(!!Ae&&"2"==Ae.current),Le=(0,de.useRef)(!1),Ve=(0,de.useRef)("media"),Oe=(0,de.useRef)(!1),ze=(0,de.useRef)(s&&o?.eventType?o?.eventType:"conference"),Ue=(0,de.useRef)(s&&o?.participants?o?.participants:[]),qe=(0,de.useRef)(Ue.current),_e=(0,de.useRef)(0),Ge=(0,de.useRef)(""),Ye=(0,de.useRef)([]),Ke=(0,de.useRef)(null),Je=(0,de.useRef)([]),Xe=(0,de.useRef)(null),Ze=(0,de.useRef)(4),Qe=(0,de.useRef)(!1),et=(0,de.useRef)(!1),tt=(0,de.useRef)(4),rt=(0,de.useRef)(!1),at=(0,de.useRef)(!1),nt=(0,de.useRef)("landscape"),ot=(0,de.useRef)("sd"),st=(0,de.useRef)("sd"),it=(0,de.useRef)({width:640,height:360}),ct=(0,de.useRef)(10),dt=(0,de.useRef)({}),lt=(0,de.useRef)({}),gt=(0,de.useRef)({}),ft=(0,de.useRef)({}),bt=(0,de.useRef)(0),yt=(0,de.useRef)(0),xt=(0,de.useRef)(!1),vt=(0,de.useRef)(0),St=(0,de.useRef)(0),Rt=(0,de.useRef)(0),wt=(0,de.useRef)(0),kt=(0,de.useRef)(!1),Ct=(0,de.useRef)(0),jt=(0,de.useRef)(0),Pt=(0,de.useRef)(!1),Mt=(0,de.useRef)(!1),It=(0,de.useRef)(!1),At=(0,de.useRef)(!1),Tt=(0,de.useRef)("landscape"),Ft=(0,de.useRef)(!1),Dt=(0,de.useRef)(!1),Nt=(0,de.useRef)({mainSpecs:{mediaOptions:"video",audioOptions:"all",videoOptions:"all",videoType:"fullDisplay",videoOptimized:!1,recordingDisplayType:"media",addHLS:!1},dispSpecs:{nameTags:!0,backgroundColor:"#000000",nameTagsColor:"#ffffff",orientationVideo:"portrait"}}),Lt=(0,de.useRef)(!1),Vt=(0,de.useRef)(!1),Bt=(0,de.useRef)(!1),$t=(0,de.useRef)(null),Et=(0,de.useRef)(0),Wt=(0,de.useRef)(0),Ht=(0,de.useRef)(!1),Ot=(0,de.useRef)(!1),zt=(0,de.useRef)(15e3),Ut=(0,de.useRef)(0),qt=(0,de.useRef)(0),_t=(0,de.useRef)(!0),Gt=(0,de.useRef)(!1),Yt=(0,de.useRef)(!1),Kt=(0,de.useRef)(!1),Jt=(0,de.useRef)(!1),Xt=(0,de.useRef)(!1),Zt=(0,de.useRef)(!1),Qt=(0,de.useRef)(""),er=(0,de.useRef)([]),tr=(0,de.useRef)([]),rr=(0,de.useRef)([]),ar=(0,de.useRef)([]),nr=(0,de.useRef)(""),or=(0,de.useRef)(""),sr=(0,de.useRef)(""),ir=(0,de.useRef)(""),cr=(0,de.useRef)([]),dr=(0,de.useRef)([]),lr=(0,de.useRef)(null),ur=(0,de.useRef)(!1),pr=(0,de.useRef)(!1),mr=(0,de.useRef)(!1),gr=(0,de.useRef)(!1),hr=(0,de.useRef)(!1),fr=(0,de.useRef)(null),br=(0,de.useRef)(0),yr=(0,de.useRef)(!1),xr=(0,de.useRef)(null),vr=(0,de.useRef)(""),Sr=(0,de.useRef)("user"),Rr=(0,de.useRef)("user"),wr=(0,de.useRef)(""),kr=(0,de.useRef)(!1),Cr=(0,de.useRef)([]),jr=(0,de.useRef)([]),Pr=(0,de.useRef)([]),Mr=(0,de.useRef)([]),Ir=(0,de.useRef)([]),Ar=(0,de.useRef)(!1),Tr=(0,de.useRef)(!1),Fr=(0,de.useRef)(!1),Dr=(0,de.useRef)(!1),Nr=(0,de.useRef)(!1),Lr=(0,de.useRef)(!1),Vr=(0,de.useRef)(null),Br=(0,de.useRef)(null),$r=(0,de.useRef)(null),Er=(0,de.useRef)(0),Wr=(0,de.useRef)(0),Hr=(0,de.useRef)(0),Or=(0,de.useRef)(240),zr=(0,de.useRef)([]),Ur=(0,de.useRef)("Host"),qr=(0,de.useRef)(!1),_r=(0,de.useRef)(null),[Gr,Yr]=(0,de.useState)(!1),[Kr,Jr]=(0,de.useState)(!1),Xr=(0,de.useRef)(""),Zr=(0,de.useRef)([]),Qr=(0,de.useRef)(""),ea=(0,de.useRef)([]),ta=(0,de.useRef)([]),ra=(0,de.useRef)(!1),aa=(0,de.useRef)([]),na=(0,de.useRef)([]),oa=(0,de.useRef)([]),pa=(0,de.useRef)([]),ha=(0,de.useRef)(null),ba=(0,de.useRef)(""),ya=(0,de.useRef)(""),xa=(0,de.useRef)(""),va=(0,de.useRef)(""),Sa=(0,de.useRef)(""),Ra=(0,de.useRef)(!1),wa=(0,de.useRef)(""),ka=(0,de.useRef)(!1),Ca=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),ja=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),Pa=(0,de.useRef)(null),Ma=(0,de.useRef)(null),Ia=(0,de.useRef)(0),Aa=(0,de.useRef)(4),Ta=(0,de.useRef)(!1),Da=(0,de.useRef)(0),za=(0,de.useRef)(3e4),en=(0,de.useRef)(1e4),tn=(0,de.useRef)(0),rn=(0,de.useRef)([]),an=(0,de.useRef)(0),[nn,on]=(0,de.useState)("webinar"===ze.current?67:"broadcast"===ze.current?100:0),sn=(0,de.useRef)(nn),cn=(0,de.useRef)(!1),dn=(0,de.useRef)(!1),ln=(0,de.useRef)(!1),un=(0,de.useRef)([]),pn=(0,de.useRef)([]),[bn,yn]=(0,de.useState)(0),Hn=(0,de.useRef)(!1),To=(0,de.useRef)(!1),Do=(0,de.useRef)(!1),No=(0,de.useRef)(!1),Ho=(0,de.useRef)(!1),[Oo,zo]=(0,de.useState)(0),[Yo,Jo]=(0,de.useState)(0),[Zo,Qo]=(0,de.useState)(0),[es,ts]=(0,de.useState)(0),[rs,ls]=(0,de.useState)(0),us=(0,de.useRef)([]),[ps,ms]=(0,de.useState)(!1),gs=(0,de.useRef)(null),fs=(0,de.useRef)(!1),Rs=(0,de.useRef)([]),ws=(0,de.useRef)([]),Cs=(0,de.useRef)(null),js=(0,de.useRef)(null),Ps=(0,de.useRef)(!1),Ms=(0,de.useRef)(40),Is=(0,de.useRef)("horizontal"),As=(0,de.useRef)({gridWidth:0,gridHeight:0,altGridWidth:0,altGridHeight:0}),Ts=(0,de.useRef)(!1),Fs=(0,de.useRef)([]),[Ds,Ns]=(0,de.useState)([[],[]]),Ls=(0,de.useRef)([]),[Vs,Bs]=(0,de.useState)([]),[$s,Es]=(0,de.useState)([]),[Os,zs]=(0,de.useState)("00:00:00"),qs=(0,de.useRef)(0),Ys=(0,de.useRef)([]),Js=(0,de.useRef)([]),ii=e=>{be(e)},li=e=>{xe.current=e},ui=e=>{Se.current=e},pi=e=>{we.current=e},mi=e=>{ke.current=e},gi=e=>{Ce.current=e},hi=e=>{je.current=e},fi=e=>{Pe.current=e},bi=e=>{e.length>0&&e.includes("_")&&(xi(e.split("_")[1]),e=e.split("_")[0]),Me.current=e},yi=e=>{Ie.current=e},xi=e=>{Ae.current=e},vi=e=>{Te.current=e},Si=e=>{Fe.current=e},Ri=e=>{De.current=e},wi=e=>{Ne.current=e},ki=e=>{Le.current=e},Ci=e=>{Ve.current=e},ji=e=>{Oe.current=e},Pi=e=>{if(ze.current=e,"none"!=e)try{setTimeout(()=>{Hf()},1e3)}catch{}},Mi=e=>{Ue.current=e,qe.current=e,_e.current=e.length},Ii=e=>{_e.current=e},Ai=e=>{Ge.current=e},Ti=e=>{bt.current=e},Fi=e=>{yt.current=e},Di=e=>{xt.current=e},Ni=e=>{vt.current=e},Li=e=>{St.current=e},Vi=e=>{Rt.current=e},Bi=e=>{wt.current=e},$i=e=>{kt.current=e},Ei=e=>{Ct.current=e},Wi=e=>{jt.current=e},Hi=e=>{Pt.current=e},Oi=e=>{Mt.current=e},zi=e=>{It.current=e},Ui=e=>{At.current=e},qi=e=>{Tt.current=e},_i=e=>{Ft.current=e},Gi=e=>{Dt.current=e},Yi=e=>{Nt.current=e},Ki=e=>{Lt.current=e},Ji=e=>{Vt.current=e},Xi=e=>{Bt.current=e},Zi=e=>{$t.current=e},Qi=e=>{Et.current=e},ec=e=>{Wt.current=e},tc=e=>{Ht.current=e},rc=e=>{Ot.current=e},ac=e=>{zt.current=e},nc=e=>{Ut.current=e},oc=e=>{qt.current=e},sc=e=>{_t.current=e},ic=e=>{Gt.current=e},cc=e=>{Js.current=e},dc=e=>{Ye.current=e},lc=e=>{Ke.current=e},uc=e=>{Je.current=e},pc=e=>{Xe.current=e},mc=e=>{Ze.current=e},gc=e=>{Qe.current=e},hc=e=>{et.current=e},fc=e=>{tt.current=e},bc=e=>{rt.current=e},yc=e=>{at.current=e,Df(e),e&&setTimeout(async()=>{window.dispatchEvent(new Event("resize"))},2e3)},xc=e=>{nt.current=e},vc=e=>{ot.current=e},Sc=e=>{st.current=e},Rc=e=>{it.current=e},wc=e=>{ct.current=e},kc=e=>{dt.current=e},Cc=e=>{lt.current=e},jc=e=>{gt.current=e},Pc=e=>{ft.current=e},Mc=e=>{Yt.current=e},Ic=e=>{Kt.current=e},Ac=e=>{Jt.current=e},Tc=e=>{Xt.current=e},Fc=e=>{Zt.current=e},Dc=e=>{Qt.current=e},Nc=e=>{er.current=e},Lc=e=>{tr.current=e},Vc=e=>{rr.current=e},Bc=e=>{ar.current=e},$c=e=>{nr.current=e},Ec=e=>{or.current=e},Wc=e=>{sr.current=e},Hc=e=>{ir.current=e},Oc=e=>{cr.current=e},zc=e=>{dr.current=e},Uc=e=>{lr.current=e},qc=e=>{ur.current=e},_c=e=>{pr.current=e},Gc=e=>{mr.current=e},Yc=e=>{gr.current=e},Kc=e=>{hr.current=e},Jc=e=>{fr.current=e},Xc=e=>{br.current=e},Zc=e=>{yr.current=e},Qc=e=>{xr.current=e},ed=e=>{vr.current=e},td=e=>{Sr.current=e},rd=e=>{Rr.current=e},ad=e=>{wr.current=e},nd=e=>{kr.current=e},od=e=>{Cr.current=e},sd=e=>{jr.current=e},id=e=>{Pr.current=e},cd=e=>{Mr.current=e},dd=e=>{Ir.current=e},ld=e=>{Ar.current=e},ud=e=>{Tr.current=e},pd=e=>{Fr.current=e},md=e=>{Dr.current=e},gd=e=>{Nr.current=e},hd=e=>{Lr.current=e},fd=e=>{Vr.current=e},bd=e=>{Br.current=e},yd=e=>{$r.current=e},xd=e=>{Er.current=e},vd=e=>{Wr.current=e},Sd=e=>{Hr.current=e},Rd=e=>{zr.current=e},wd=e=>{Ur.current=e},kd=e=>{qr.current=e},Cd=e=>{_r.current=e},jd=e=>{Yr(e)},Pd=e=>{Jr(e)},Md=e=>{Xr.current=e},Id=e=>{Zr.current=e},Ad=e=>{Qr.current=e},Td=e=>{ea.current=e},Fd=e=>{ta.current=e},Dd=e=>{ra.current=e},Nd=e=>{aa.current=e},Ld=e=>{na.current=e},Vd=e=>{oa.current=e},Bd=e=>{pa.current=e},$d=e=>{ha.current=e},Ed=e=>{ba.current=e},Wd=e=>{ya.current=e},Hd=e=>{xa.current=e},Od=e=>{va.current=e},zd=e=>{Sa.current=e},Ud=e=>{Ra.current=e},qd=e=>{wa.current=e},_d=e=>{ka.current=e},Gd=e=>{Ca.current=e},Yd=e=>{ja.current=e},Kd=e=>{Pa.current=e},Jd=e=>{Ma.current=e},Xd=e=>{Ia.current=e},Zd=e=>{Aa.current=e},Qd=e=>{Ta.current=e},el=e=>{Da.current=e},tl=e=>{tn.current=e},rl=e=>{rn.current=e},al=e=>{an.current=e},nl=e=>{on(e)},ol=e=>{sn.current=e},sl=e=>{cn.current=e},il=e=>{dn.current=e},cl=e=>{ln.current=e},dl=e=>{un.current=e},ll=e=>{pn.current=e},ul=e=>{yn(e)},pl=e=>{Hn.current=e},ml=e=>{To.current=e},gl=e=>{Do.current=e},hl=e=>{No.current=e},fl=e=>{Ho.current=e},bl=e=>{zo(e)},yl=e=>{Jo(e)},xl=e=>{Qo(e)},vl=e=>{ts(e)},Sl=e=>{ls(e)},Rl=e=>{us.current=e},wl=e=>{ms(e)},kl=e=>{gs.current=e},Cl=e=>{fs.current=e},jl=e=>{Rs.current=e},Pl=e=>{ws.current=e},Ml=e=>{Cs.current=e},Il=e=>{js.current=e},Al=e=>{Ps.current=e},Tl=e=>{Ms.current=e},Fl=e=>{Is.current=e},Dl=e=>{As.current=e},Nl=e=>{Ts.current=e},Ll=e=>{Fs.current=e},Vl=e=>{Ns(e)},Bl=e=>{Ls.current=e},$l=e=>{Bs(e)},El=e=>{Es(e)},Wl=e=>{zs(e)},Hl=e=>{qs.current=e},Ol=e=>{Ys.current=e},zl=(0,de.useRef)(s&&o?.messages?o.messages:[]),Ul=(0,de.useRef)(!1),ql=(0,de.useRef)(null),[_l,Gl]=(0,de.useState)(!1),Yl=(0,de.useRef)("allow"),Kl=(0,de.useRef)("allow"),Jl=(0,de.useRef)("allow"),Xl=(0,de.useRef)("allow"),Zl=(0,de.useRef)(Ve.current?Ve.current:"media"),Ql=(0,de.useRef)(!0),eu=(0,de.useRef)("webinar"!==ze.current&&"conference"!==ze.current),tu=(0,de.useRef)(!1),ru=(0,de.useRef)("video"),au=(0,de.useRef)(""),nu=(0,de.useRef)(s&&o?.waitingList?o.waitingList:[]),ou=(0,de.useRef)(0),su=(0,de.useRef)(nu.current),iu=(0,de.useRef)(""),cu=(0,de.useRef)(s&&o?.requests?o.requests:[]),du=(0,de.useRef)(0),lu=(0,de.useRef)(cu.current),uu=(0,de.useRef)(0),[pu,mu]=(0,de.useState)(!1),[gu,hu]=(0,de.useState)(""),[fu,bu]=(0,de.useState)("info"),[yu,xu]=(0,de.useState)(3e3),[vu]=(0,de.useState)(!0),[Su]=(0,de.useState)(0),[Ru,wu]=(0,de.useState)(!1),[ku,Cu]=(0,de.useState)(!1),[ju,Pu]=(0,de.useState)(!1),[Mu,Iu]=(0,de.useState)(!1),[Au,Tu]=(0,de.useState)(!1),[Fu,Du]=(0,de.useState)(!1),[Nu,Lu]=(0,de.useState)(!1),[Vu,Bu]=(0,de.useState)(!1),[$u,Eu]=(0,de.useState)(!1),[Wu,Hu]=(0,de.useState)(!1),[Ou,zu]=(0,de.useState)(!1),[Uu,qu]=(0,de.useState)(!1),[_u,Gu]=(0,de.useState)(!1),[Yu,Ku]=(0,de.useState)(!1),Ju=(0,de.useRef)("video"),Xu=(0,de.useRef)("all"),Zu=(0,de.useRef)("all"),Qu=(0,de.useRef)("fullDisplay"),ep=(0,de.useRef)(!1),tp=(0,de.useRef)("media"),rp=(0,de.useRef)(!0),ap=(0,de.useRef)(!0),[np,op]=(0,de.useState)("#83c0e9"),[sp,ip]=(0,de.useState)("#ffffff"),cp=(0,de.useRef)(!1),dp=(0,de.useRef)("Add Text"),lp=(0,de.useRef)("top"),[up,pp]=(0,de.useState)("#ffffff"),mp=(0,de.useRef)("landscape"),gp=(0,de.useRef)(!0),hp=(0,de.useRef)(!0),[fp,bp]=(0,de.useState)("green"),[yp,xp]=(0,de.useState)(!1),[vp,Sp]=(0,de.useState)("00:00:00"),[Rp,wp]=(0,de.useState)(!1),[kp,Cp]=(0,de.useState)(!1),jp=(0,de.useRef)(!1),Pp=(0,de.useRef)(!1),Mp=(0,de.useRef)({mainHeight:0,otherHeight:0,mainWidth:0,otherWidth:0}),[Ip,Ap]=(0,de.useState)(!1),[Tp,Fp]=(0,de.useState)(!1),Dp=(0,de.useRef)(!1),Np=(0,de.useRef)(!1),Lp=(0,de.useRef)(!1),Vp=(0,de.useRef)(!1),Bp=(0,de.useRef)(!1),$p=(0,de.useRef)(null),Ep=(0,de.useRef)(null),Wp=(0,de.useRef)(null),Hp=(0,de.useRef)(null),Op=(0,de.useRef)({}),zp=(0,de.useRef)({}),Up=(0,de.useRef)({}),qp=(0,de.useRef)(null),_p=(0,de.useRef)(0),Gp=(0,de.useRef)(null),Yp=(0,de.useRef)([]),Kp=(0,de.useRef)([]),Jp=(0,de.useRef)(s&&o?.polls?o.polls:[]),Xp=(0,de.useRef)(null),[Zp,Qp]=(0,de.useState)(!1),em=(0,de.useRef)(null),tm=(0,de.useRef)([]),rm=(0,de.useRef)(!1),am=(0,de.useRef)(!1),nm=(0,de.useRef)(!1),om=(0,de.useRef)(""),sm=(0,de.useRef)(""),im=(0,de.useRef)(null),cm=(0,de.useRef)(null),dm=(0,de.useRef)(!1),lm=(0,de.useRef)(null),um=(0,de.useRef)(!1),pm=(0,de.useRef)(!1),mm=(0,de.useRef)(null),gm=(0,de.useRef)(null),hm=(0,de.useRef)(!1),fm=(0,de.useRef)(!1),[bm,ym]=(0,de.useState)(!1),xm=(0,de.useRef)(!1),vm=(0,de.useRef)(s&&o?.breakoutRooms?o.breakoutRooms:[]),Sm=(0,de.useRef)(0),Rm=(0,de.useRef)(!1),wm=(0,de.useRef)(!1),km=(0,de.useRef)(!1),Cm=(0,de.useRef)(-1),jm=(0,de.useRef)([]),Pm=(0,de.useRef)(0),Mm=(0,de.useRef)(-1),[Im,Am]=(0,de.useState)(!1),Tm=(0,de.useRef)(s&&o?.whiteboardUsers?o.whiteboardUsers:[]),Fm=(0,de.useRef)(null),Dm=(0,de.useRef)(!1),Nm=(0,de.useRef)(!1),Lm=(0,de.useRef)(!1),Vm=(0,de.useRef)(Ze.current),[Bm,$m]=(0,de.useState)(!1),[Em,Wm]=(0,de.useState)(!1),Hm=(0,de.useRef)([]),Om=(0,de.useRef)(!0),zm=(0,de.useRef)([]),Um=(0,de.useRef)([]),qm=(0,de.useRef)(null),_m=(0,de.useRef)(null),Gm=(0,de.useRef)(null),Ym=(0,de.useRef)(null),Km=(0,de.useRef)(!1),Jm=(0,de.useRef)(null),[Xm,Zm]=(0,de.useState)(!1),Qm=e=>{zl.current=e},eg=e=>{Ul.current=e},tg=e=>{ql.current=e},rg=e=>{Gl(e)},ag=e=>{Yl.current=e},ng=e=>{Kl.current=e},og=e=>{Jl.current=e},sg=e=>{Xl.current=e},ig=e=>{Zl.current=e},cg=e=>{Ql.current=e},dg=e=>{eu.current=e},lg=e=>{tu.current=e},ug=e=>{ru.current=e},pg=e=>{ou.current=e},mg=e=>{au.current=e},gg=e=>{nu.current=e,su.current=e,ou.current=e.length},hg=e=>{du.current=e},fg=e=>{iu.current=e},bg=e=>{cu.current=e,lu.current=e,du.current=e.length},yg=e=>{uu.current=e},xg=e=>{wu(e)},vg=e=>{Cu(e),1==e?ki(!1):1==hp.current&&1==gp.current&&1==ur.current&&Xg(!0)},Sg=e=>{Pu(e)},Rg=e=>{Iu(e)},wg=e=>{Tu(e)},kg=e=>{Du(e)},Cg=e=>{Lu(e)},jg=e=>{Bu(e)},Pg=e=>{Eu(e)},Mg=e=>{Hu(e),0==e&&rg(!1)},Ig=e=>{zu(e)},Ag=e=>{qu(e)},Tg=e=>{Ku(e)},Fg=e=>{Gu(e)},Dg=e=>{Ju.current=e,hp.current=!1},Ng=e=>{Xu.current=e,hp.current=!1},Lg=e=>{Zu.current=e,hp.current=!1},Vg=e=>{Qu.current=e,hp.current=!1},Bg=e=>{ep.current=e,hp.current=!1},$g=e=>{tp.current=e,hp.current=!1},Eg=e=>{rp.current=e,hp.current=!1},Wg=e=>{cp.current=e,hp.current=!1},Hg=e=>{dp.current=e,hp.current=!1},Og=e=>{lp.current=e,hp.current=!1},zg=e=>{pp(e),hp.current=!1},Ug=e=>{ap.current=e,hp.current=!1},qg=e=>{op(e),hp.current=!1},_g=e=>{ip(e),hp.current=!1},Gg=e=>{mp.current=e,hp.current=!1},Yg=e=>{gp.current=e},Kg=e=>{hp.current=e},Jg=e=>{bp(e)},Xg=e=>{xp(e)},Zg=e=>{Sp(e)},Qg=e=>{wp(e)},eh=e=>{Cp(e)},th=e=>{jp.current=e,Tf(e)},rh=e=>{Pp.current=e,If(e)},ah=e=>{Mp.current=e},nh=e=>{Ap(e)},oh=e=>{Fp(e)},sh=async()=>"granted",ih=async()=>"granted",ch=e=>{Dp.current=e},dh=e=>{Np.current=e},lh=e=>{Lp.current=e},uh=e=>{Vp.current=e},ph=e=>{Bp.current=e},mh=e=>{$p.current=e},gh=e=>{Ep.current=e},hh=e=>{Wp.current=e},fh=e=>{Hp.current=e},bh=e=>{Op.current=e},yh=e=>{zp.current=e},xh=e=>{Up.current=e},vh=e=>{qp.current=e},Sh=e=>{_p.current=e},Rh=e=>{Gp.current=e},wh=e=>{Yp.current=e},kh=e=>{Kp.current=e},Ch=e=>{Jp.current=e},jh=e=>{Xp.current=e},Ph=e=>{Qp(e)},Mh=e=>{em.current=e},Ih=e=>{tm.current=e},Ah=e=>{rm.current=e},Th=e=>{am.current=e},Fh=e=>{nm.current=e},Dh=e=>{om.current=e},Nh=e=>{sm.current=e},Lh=e=>{im.current=e},Vh=e=>{cm.current=e},Bh=e=>{dm.current=e},$h=e=>{lm.current=e},Eh=e=>{um.current=e},Wh=e=>{pm.current=e},Hh=e=>{mm.current=e},Oh=e=>{gm.current=e},zh=e=>{hm.current=e},Uh=e=>{fm.current=e},qh=e=>{ym(e)},_h=e=>{xm.current=e},Gh=e=>{vm.current=e},Yh=e=>{Sm.current=e},Kh=e=>{Rm.current=e},Jh=e=>{wm.current=e},Xh=e=>{km.current=e},Zh=e=>{Cm.current=e},Qh=e=>{jm.current=e},ef=e=>{Pm.current=e},tf=e=>{Mm.current=e},rf=e=>{Am(e)},af=e=>{Tm.current=e},nf=e=>{Fm.current=e},of=e=>{Dm.current=e},sf=e=>{Nm.current=e},cf=e=>{Lm.current=e},df=e=>{Vm.current=e},lf=e=>{$m(e)},uf=e=>{Wm(e)},pf=e=>{Hm.current=e},mf=e=>{Om.current=e},gf=e=>{zm.current=e},hf=e=>{Um.current=e},ff=e=>{qm.current=e},bf=e=>{_m.current=e},yf=e=>{Gm.current=e},xf=e=>{Ym.current=e},vf=e=>{Km.current=e},Sf=e=>{Jm.current=e},Rf=e=>{Zm(e)};function wf(){return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}const kf=()=>{try{null!==c&&(c={...jf(),...Cf()},d&&d(c))}catch{}return{...jf(),...Cf()}},Cf=()=>({updateMiniCardsGrid:_a,mixStreams:Ga,dispStreams:Ya,stopShareScreen:Ka,checkScreenShare:Ja,startShareScreen:Xa,requestScreenShare:Za,reorderStreams:Qa,prepopulateUserMedia:mn,getVideos:gn,rePort:hn,trigger:fn,consumerResume:oe,connectSendTransport:Wn,connectSendTransportAudio:w,connectSendTransportVideo:vn,connectSendTransportScreen:Sn,processConsumerTransports:Rn,resumePauseStreams:wn,readjust:kn,checkGrid:Cn,getEstimate:jn,calculateRowsAndColumns:Pn,addVideosGrid:se,onScreenChanges:In,sleep:An,changeVids:Tn,compareActiveNames:Fn,compareScreenStates:Dn,createSendTransport:Nn,resumeSendTransportAudio:Ln,receiveAllPipedTransports:Vn,disconnectSendTransportVideo:Bn,disconnectSendTransportAudio:$n,disconnectSendTransportScreen:En,getPipedProducersAlt:On,signalNewConsumerTransport:y,connectRecvTransport:zn,reUpdateInter:Un,updateParticipantAudioDecibels:qn,closeAndResize:_n,autoAdjust:Gn,switchUserVideoAlt:Yn,switchUserVideo:Kn,switchUserAudio:Jn,getDomains:Io,formatNumber:Zn,connectIps:Qn,connectLocalIps:S,createDeviceClient:Na,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro,captureCanvasStream:Uo,resumePauseAudioStreams:qo,processConsumerTransportsAudio:_o,checkPermission:Oa,streamSuccessVideo:$a,streamSuccessAudio:Ea,streamSuccessScreen:Wa,streamSuccessAudioSwitch:Ha,clickVideo:La,clickAudio:Va,clickScreenShare:Ba,requestPermissionCamera:sh,requestPermissionAudio:ih,getMediaDevicesList:Of,getParticipantMedia:zf}),jf=()=>({localUIMode:ye.current,roomName:Pe.current,member:Me.current,adminPasscode:Ie.current,youAreCoHost:De.current,youAreHost:Ne.current,islevel:Ae.current,confirmedToRecord:Le.current,meetingDisplayType:Ve.current,meetingVideoOptimized:Oe.current,eventType:ze.current,participants:Ue.current,filteredParticipants:qe.current,participantsCounter:_e.current,participantsFilter:Ge.current,consume_sockets:Ye.current,rtpCapabilities:Ke.current,roomRecvIPs:Je.current,meetingRoomParams:Xe.current,itemPageLimit:Ze.current,audioOnlyRoom:Qe.current,addForBasic:et.current,screenPageLimit:tt.current,shareScreenStarted:rt.current,shared:at.current,targetOrientation:nt.current,targetResolution:ot.current,targetResolutionHost:st.current,vidCons:it.current,frameRate:ct.current,hParams:dt.current,vParams:lt.current,screenParams:gt.current,aParams:ft.current,recordingAudioPausesLimit:bt.current,recordingAudioPausesCount:yt.current,recordingAudioSupport:xt.current,recordingAudioPeopleLimit:vt.current,recordingAudioParticipantsTimeLimit:St.current,recordingVideoPausesCount:Rt.current,recordingVideoPausesLimit:wt.current,recordingVideoSupport:kt.current,recordingVideoPeopleLimit:Ct.current,recordingVideoParticipantsTimeLimit:jt.current,recordingAllParticipantsSupport:Pt.current,recordingVideoParticipantsSupport:Mt.current,recordingAllParticipantsFullRoomSupport:It.current,recordingVideoParticipantsFullRoomSupport:At.current,recordingPreferredOrientation:Tt.current,recordingSupportForOtherOrientation:Ft.current,recordingMultiFormatsSupport:Dt.current,userRecordingParams:Nt.current,canRecord:Lt.current,startReport:Vt.current,endReport:Bt.current,recordStartTime:Et.current,recordElapsedTime:Wt.current,isTimerRunning:Ht.current,canPauseResume:Ot.current,recordChangeSeconds:zt.current,pauseLimit:Ut.current,pauseRecordCount:qt.current,canLaunchRecord:_t.current,stopLaunchRecord:Gt.current,participantsAll:Js.current,firstAll:Yt.current,updateMainWindow:Kt.current,first_round:Jt.current,landScaped:Xt.current,lock_screen:Zt.current,screenId:Qt.current,allVideoStreams:er.current,newLimitedStreams:tr.current,newLimitedStreamsIDs:rr.current,activeSounds:ar.current,screenShareIDStream:nr.current,screenShareNameStream:or.current,adminIDStream:sr.current,adminNameStream:ir.current,youYouStream:cr.current,youYouStreamIDs:dr.current,localStream:lr.current,recordStarted:ur.current,recordResumed:pr.current,recordPaused:mr.current,recordStopped:gr.current,adminRestrictSetting:hr.current,videoRequestState:fr.current,videoRequestTime:br.current,videoAction:yr.current,localStreamVideo:xr.current,userDefaultVideoInputDevice:vr.current,currentFacingMode:Sr.current,prevFacingMode:Rr.current,defVideoID:wr.current,allowed:kr.current,dispActiveNames:Cr.current,p_dispActiveNames:jr.current,activeNames:Pr.current,prevActiveNames:Mr.current,p_activeNames:Ir.current,membersReceived:Ar.current,deferScreenReceived:Tr.current,hostFirstSwitch:Fr.current,micAction:Dr.current,screenAction:Nr.current,chatAction:Lr.current,audioRequestState:Vr.current,screenRequestState:Br.current,chatRequestState:$r.current,audioRequestTime:Er.current,screenRequestTime:Wr.current,chatRequestTime:Hr.current,updateRequestIntervalSeconds:Or.current,oldSoundIds:zr.current,hostLabel:Ur.current,mainScreenFilled:qr.current,localStreamScreen:_r.current,screenAlreadyOn:Gr,chatAlreadyOn:Kr,redirectURL:Xr.current,oldAllStreams:Zr.current,adminVidID:Qr.current,streamNames:ea.current,non_alVideoStreams:ta.current,sortAudioLoudness:ra.current,audioDecibels:aa.current,mixed_alVideoStreams:na.current,non_alVideoStreams_muted:oa.current,paginatedStreams:pa.current,localStreamAudio:ha.current,defAudioID:ba.current,userDefaultAudioInputDevice:ya.current,userDefaultAudioOutputDevice:xa.current,prevAudioInputDevice:va.current,prevVideoInputDevice:Sa.current,audioPaused:Ra.current,mainScreenPerson:wa.current,adminOnMainScreen:ka.current,screenStates:Ca.current,prevScreenStates:ja.current,updateDateState:Pa.current,lastUpdate:Ma.current,nForReadjustRecord:Ia.current,fixedPageLimit:Aa.current,removeAltGrid:Ta.current,nForReadjust:Da.current,lastReorderTime:tn.current,reorderInterval:za.current,fastReorderInterval:en.current,audStreamNames:rn.current,currentUserPage:an.current,mainHeightWidth:nn,prevMainHeightWidth:sn.current,prevDoPaginate:cn.current,doPaginate:dn.current,shareEnded:ln.current,lStreams:un.current,chatRefStreams:pn.current,controlHeight:bn,isWideScreen:Hn.current,isMediumScreen:To.current,isSmallScreen:Do.current,addGrid:No.current,addAltGrid:Ho.current,gridRows:Oo,gridCols:Yo,altGridRows:Zo,altGridCols:es,numberPages:rs,currentStreams:us,showMiniView:ps,nStream:gs.current,defer_receive:fs.current,allAudioStreams:Rs.current,screenProducer:Cs.current,remoteScreenStream:ws.current,gotAllVids:Ps.current,paginationHeightWidth:Ms.current,paginationDirection:Is.current,gridSizes:As.current,screenForceFullDisplay:Ts.current,mainGridStream:Fs.current,otherGridStreams:Ds,audioOnlyStreams:Ls.current,videoInputs:Vs,audioInputs:$s,meetingProgressTime:Os,meetingElapsedTime:qs.current,ref_participants:Ys.current,messages:zl.current,startDirectMessage:Ul.current,directMessageDetails:ql.current,coHost:Te.current,coHostResponsibility:Fe.current,audioSetting:Yl.current,videoSetting:Kl.current,screenshareSetting:Jl.current,chatSetting:Xl.current,autoWave:Ql.current,forceFullDisplay:eu.current,prevForceFullDisplay:tu.current,prevMeetingDisplayType:ru.current,waitingRoomFilter:au.current,waitingRoomList:nu.current,waitingRoomCounter:ou.current,filteredWaitingRoomList:su.current,requestFilter:iu.current,requestList:cu.current,requestCounter:du.current,filteredRequestList:lu.current,totalReqWait:uu.current,alertVisible:pu,alertMessage:gu,alertType:fu,alertDuration:yu,progressTimerVisible:vu,progressTimerValue:Su,isMenuModalVisible:Ru,isRecordingModalVisible:ku,isSettingsModalVisible:ju,isRequestsModalVisible:Mu,isWaitingModalVisible:Au,isCoHostModalVisible:Fu,isMediaSettingsModalVisible:Nu,isDisplaySettingsModalVisible:Vu,isParticipantsModalVisible:$u,isMessagesModalVisible:Wu,isConfirmExitModalVisible:Ou,isConfirmHereModalVisible:Uu,isLoadingModalVisible:Yu,recordingMediaOptions:Ju.current,recordingAudioOptions:Xu.current,recordingVideoOptions:Zu.current,recordingVideoType:Qu.current,recordingVideoOptimized:ep.current,recordingDisplayType:tp.current,recordingAddHLS:rp.current,recordingAddText:cp.current,recordingCustomText:dp.current,recordingCustomTextPosition:lp.current,recordingCustomTextColor:up,recordingNameTags:ap.current,recordingBackgroundColor:np,recordingNameTagsColor:sp,recordingOrientationVideo:mp.current,clearedToResume:gp.current,clearedToRecord:hp.current,recordState:fp,showRecordButtons:yp,recordingProgressTime:vp,audioSwitching:Rp,videoSwitching:kp,videoAlreadyOn:jp.current,audioAlreadyOn:Pp.current,componentSizes:Mp.current,hasCameraPermission:Ip,hasAudioPermission:Tp,transportCreated:Dp.current,localTransportCreated:Np.current,transportCreatedVideo:Lp.current,transportCreatedAudio:Vp.current,transportCreatedScreen:Bp.current,producerTransport:$p.current,localProducerTransport:Ep.current,videoProducer:Wp.current,localVideoProducer:Hp.current,params:Op.current,videoParams:zp.current,audioParams:Up.current,audioProducer:qp.current,audioLevel:_p.current,localAudioProducer:Gp.current,consumerTransports:Yp.current,consumingTransports:Kp.current,polls:Jp.current,poll:Xp.current,isPollModalVisible:Zp,customImage:om.current,selectedImage:sm.current,segmentVideo:im.current,selfieSegmentation:cm.current,pauseSegmentation:dm.current,processedStream:lm.current,keepBackground:um.current,backgroundHasChanged:pm.current,virtualStream:mm.current,mainCanvas:gm.current,prevKeepBackground:hm.current,appliedBackground:fm.current,isBackgroundModalVisible:bm,autoClickBackground:xm.current,breakoutRooms:vm.current,currentRoomIndex:Sm.current,canStartBreakout:Rm.current,breakOutRoomStarted:wm.current,breakOutRoomEnded:km.current,hostNewRoom:Cm.current,limitedBreakRoom:jm.current,mainRoomsLength:Pm.current,memberRoom:Mm.current,isBreakoutRoomsModalVisible:Im,whiteboardUsers:Tm.current,currentWhiteboardIndex:Fm.current,canStartWhiteboard:Dm.current,whiteboardStarted:Nm.current,whiteboardEnded:Lm.current,whiteboardLimit:Vm.current,isWhiteboardModalVisible:Bm,isConfigureWhiteboardModalVisible:Em,shapes:Hm.current,useImageBackground:Om.current,redoStack:zm.current,undoStack:Um.current,canvasStream:qm.current,canvasWhiteboard:_m.current,canvasScreenboard:Gm.current,processedScreenStream:Ym.current,annotateScreenStream:Km.current,mainScreenCanvas:Jm.current,isScreenboardModalVisible:Xm,permissionConfig:em.current,panelists:tm.current,panelistsFocused:rm.current,muteOthersMic:am.current,muteOthersCamera:nm.current,validated:fe,device:we.current,socket:xe.current,localSocket:Se.current,checkMediaPermission:!1,onWeb:!0,mediaDevices:ua,updateRoomName:fi,updateMember:bi,updateAdminPasscode:yi,updateYouAreCoHost:Ri,updateYouAreHost:wi,updateIslevel:xi,updateCoHost:vi,updateCoHostResponsibility:Si,updateConfirmedToRecord:ki,updateMeetingDisplayType:Ci,updateMeetingVideoOptimized:ji,updateEventType:Pi,updateParticipants:Mi,updateParticipantsCounter:Ii,updateParticipantsFilter:Ai,updateConsume_sockets:dc,updateRtpCapabilities:lc,updateRoomRecvIPs:uc,updateMeetingRoomParams:pc,updateItemPageLimit:mc,updateAudioOnlyRoom:gc,updateAddForBasic:hc,updateScreenPageLimit:fc,updateShareScreenStarted:bc,updateShared:yc,updateTargetOrientation:xc,updateTargetResolution:vc,updateTargetResolutionHost:Sc,updateVidCons:Rc,updateFrameRate:wc,updateHParams:kc,updateVParams:Cc,updateScreenParams:jc,updateAParams:Pc,updateRecordingAudioPausesLimit:Ti,updateRecordingAudioPausesCount:Fi,updateRecordingAudioSupport:Di,updateRecordingAudioPeopleLimit:Ni,updateRecordingAudioParticipantsTimeLimit:Li,updateRecordingVideoPausesCount:Vi,updateRecordingVideoPausesLimit:Bi,updateRecordingVideoSupport:$i,updateRecordingVideoPeopleLimit:Ei,updateRecordingVideoParticipantsTimeLimit:Wi,updateRecordingAllParticipantsSupport:Hi,updateRecordingVideoParticipantsSupport:Oi,updateRecordingAllParticipantsFullRoomSupport:zi,updateRecordingVideoParticipantsFullRoomSupport:Ui,updateRecordingPreferredOrientation:qi,updateRecordingSupportForOtherOrientation:_i,updateRecordingMultiFormatsSupport:Gi,updateUserRecordingParams:Yi,updateCanRecord:Ki,updateStartReport:Ji,updateEndReport:Xi,updateRecordTimerInterval:Zi,updateRecordStartTime:Qi,updateRecordElapsedTime:ec,updateIsTimerRunning:tc,updateCanPauseResume:rc,updateRecordChangeSeconds:ac,updatePauseLimit:nc,updatePauseRecordCount:oc,updateCanLaunchRecord:sc,updateStopLaunchRecord:ic,updateParticipantsAll:cc,updateFirstAll:Mc,updateUpdateMainWindow:Ic,updateFirst_round:Ac,updateLandScaped:Tc,updateLock_screen:Fc,updateScreenId:Dc,updateAllVideoStreams:Nc,updateNewLimitedStreams:Lc,updateNewLimitedStreamsIDs:Vc,updateActiveSounds:Bc,updateScreenShareIDStream:$c,updateScreenShareNameStream:Ec,updateAdminIDStream:Wc,updateAdminNameStream:Hc,updateYouYouStream:Oc,updateYouYouStreamIDs:zc,updateLocalStream:Uc,updateRecordStarted:qc,updateRecordResumed:_c,updateRecordPaused:Gc,updateRecordStopped:Yc,updateAdminRestrictSetting:Kc,updateVideoRequestState:Jc,updateVideoRequestTime:Xc,updateVideoAction:Zc,updateLocalStreamVideo:Qc,updateUserDefaultVideoInputDevice:ed,updateCurrentFacingMode:td,updateRef_participants:Ol,updateDefVideoID:ad,updateAllowed:nd,updateDispActiveNames:od,updateP_dispActiveNames:sd,updateActiveNames:id,updatePrevActiveNames:cd,updateP_activeNames:dd,updateMembersReceived:ld,updateDeferScreenReceived:ud,updateHostFirstSwitch:pd,updateMicAction:md,updateScreenAction:gd,updateChatAction:hd,updateAudioRequestState:fd,updateScreenRequestState:bd,updateChatRequestState:yd,updateAudioRequestTime:xd,updateScreenRequestTime:vd,updateChatRequestTime:Sd,updateOldSoundIds:Rd,updatehostLabel:wd,updateMainScreenFilled:kd,updateLocalStreamScreen:Cd,updateScreenAlreadyOn:jd,updateChatAlreadyOn:Pd,updateRedirectURL:Md,updateOldAllStreams:Id,updateAdminVidID:Ad,updateStreamNames:Td,updateNon_alVideoStreams:Fd,updateSortAudioLoudness:Dd,updateAudioDecibels:Nd,updateMixed_alVideoStreams:Ld,updateNon_alVideoStreams_muted:Vd,updatePaginatedStreams:Bd,updateLocalStreamAudio:$d,updateDefAudioID:Ed,updateUserDefaultAudioInputDevice:Wd,updateUserDefaultAudioOutputDevice:Hd,updatePrevAudioInputDevice:Od,updatePrevVideoInputDevice:zd,updateAudioPaused:Ud,updateMainScreenPerson:qd,updateAdminOnMainScreen:_d,updateScreenStates:Gd,updatePrevScreenStates:Yd,updateUpdateDateState:Kd,updateLastUpdate:Jd,updateNForReadjustRecord:Xd,updateFixedPageLimit:Zd,updateRemoveAltGrid:Qd,updateNForReadjust:el,updateLastReorderTime:tl,updateAudStreamNames:rl,updateCurrentUserPage:al,updatePrevFacingMode:rd,updateMainHeightWidth:nl,updatePrevMainHeightWidth:ol,updatePrevDoPaginate:sl,updateDoPaginate:il,updateShareEnded:cl,updateLStreams:dl,updateChatRefStreams:ll,updateControlHeight:ul,updateIsWideScreen:pl,updateIsMediumScreen:ml,updateIsSmallScreen:gl,updateAddGrid:hl,updateAddAltGrid:fl,updateGridRows:bl,updateGridCols:yl,updateAltGridRows:xl,updateAltGridCols:vl,updateNumberPages:Sl,updateCurrentStreams:Rl,updateShowMiniView:wl,updateNStream:kl,updateDefer_receive:Cl,updateAllAudioStreams:jl,updateRemoteScreenStream:Pl,updateScreenProducer:Ml,updateLocalScreenProducer:Il,updateGotAllVids:Al,updatePaginationHeightWidth:Tl,updatePaginationDirection:Fl,updateGridSizes:Dl,updateScreenForceFullDisplay:Nl,updateMainGridStream:Ll,updateOtherGridStreams:Vl,updateAudioOnlyStreams:Bl,updateVideoInputs:$l,updateAudioInputs:El,updateMeetingProgressTime:Wl,updateMeetingElapsedTime:Hl,updateMessages:Qm,updateStartDirectMessage:eg,updateDirectMessageDetails:tg,updateShowMessagesBadge:rg,updateAudioSetting:ag,updateVideoSetting:ng,updateScreenshareSetting:og,updateChatSetting:sg,updateDisplayOption:ig,updateAutoWave:cg,updateForceFullDisplay:dg,updatePrevForceFullDisplay:lg,updatePrevMeetingDisplayType:ug,updateWaitingRoomFilter:mg,updateWaitingRoomList:gg,updateWaitingRoomCounter:pg,updateRequestFilter:fg,updateRequestList:bg,updateRequestCounter:hg,updateTotalReqWait:yg,updateIsMenuModalVisible:xg,updateIsRecordingModalVisible:vg,updateIsSettingsModalVisible:Sg,updateIsRequestsModalVisible:Rg,updateIsWaitingModalVisible:wg,updateIsCoHostModalVisible:kg,updateIsMediaSettingsModalVisible:Cg,updateIsDisplaySettingsModalVisible:jg,updateIsParticipantsModalVisible:Pg,updateIsMessagesModalVisible:Mg,updateIsConfirmExitModalVisible:Ig,updateIsConfirmHereModalVisible:Ag,updateIsLoadingModalVisible:Tg,updateRecordingMediaOptions:Dg,updateRecordingAudioOptions:Ng,updateRecordingVideoOptions:Lg,updateRecordingVideoType:Vg,updateRecordingVideoOptimized:Bg,updateRecordingDisplayType:$g,updateRecordingAddHLS:Eg,updateRecordingAddText:Wg,updateRecordingCustomText:Hg,updateRecordingCustomTextPosition:Og,updateRecordingCustomTextColor:zg,updateRecordingNameTags:Ug,updateRecordingBackgroundColor:qg,updateRecordingNameTagsColor:_g,updateRecordingOrientationVideo:Gg,updateClearedToResume:Yg,updateClearedToRecord:Kg,updateRecordState:Jg,updateShowRecordButtons:Xg,updateRecordingProgressTime:Zg,updateAudioSwitching:Qg,updateVideoSwitching:eh,updateVideoAlreadyOn:th,updateAudioAlreadyOn:rh,updateComponentSizes:ah,updateHasCameraPermission:nh,updateHasAudioPermission:oh,updateTransportCreated:ch,updateLocalTransportCreated:dh,updateTransportCreatedVideo:lh,updateTransportCreatedAudio:uh,updateTransportCreatedScreen:ph,updateProducerTransport:mh,updateLocalProducerTransport:gh,updateVideoProducer:hh,updateLocalVideoProducer:fh,updateParams:bh,updateVideoParams:yh,updateAudioParams:xh,updateAudioProducer:vh,updateAudioLevel:Sh,updateLocalAudioProducer:Rh,updateConsumerTransports:wh,updateConsumingTransports:kh,updatePolls:Ch,updatePoll:jh,updateIsPollModalVisible:Ph,updateCustomImage:Dh,updateSelectedImage:Nh,updateSegmentVideo:Lh,updateSelfieSegmentation:Vh,updatePauseSegmentation:Bh,updateProcessedStream:$h,updateKeepBackground:Eh,updateBackgroundHasChanged:Wh,updateVirtualStream:Hh,updateMainCanvas:Oh,updatePrevKeepBackground:zh,updateAppliedBackground:Uh,updateIsBackgroundModalVisible:qh,updateAutoClickBackground:_h,updateBreakoutRooms:Gh,updateCurrentRoomIndex:Yh,updateCanStartBreakout:Kh,updateBreakOutRoomStarted:Jh,updateBreakOutRoomEnded:Xh,updateHostNewRoom:Zh,updateLimitedBreakRoom:Qh,updateMainRoomsLength:ef,updateMemberRoom:tf,updateIsBreakoutRoomsModalVisible:rf,updateWhiteboardUsers:af,updateCurrentWhiteboardIndex:nf,updateCanStartWhiteboard:of,updateWhiteboardStarted:sf,updateWhiteboardEnded:cf,updateWhiteboardLimit:df,updateIsWhiteboardModalVisible:lf,updateIsConfigureWhiteboardModalVisible:uf,updateShapes:pf,updateUseImageBackground:mf,updateRedoStack:gf,updateUndoStack:hf,updateCanvasStream:ff,updateCanvasWhiteboard:bf,updateCanvasScreenboard:yf,updateProcessedScreenStream:xf,updateAnnotateScreenStream:vf,updateMainScreenCanvas:Sf,updateIsScreenboardModalVisible:Rf,updatePermissionConfig:Mh,updatePanelists:Ih,updatePanelistsFocused:Ah,updateMuteOthersMic:Th,updateMuteOthersCamera:Fh,checkOrientation:wf,updateDevice:pi,updateSocket:li,updateLocalSocket:ui,updateValidated:ii,showAlert:Pf,getUpdatedAllParams:kf,customVideoCard:h,customAudioCard:f,customMiniCard:b}),Pf=({message:e,type:t,duration:r=3e3})=>{hu(e),bu(t),xu(r),mu(!0)},[Mf,If]=(0,de.useState)(!!Pp.current&&Pp.current),[Af,Tf]=(0,de.useState)(!!jp.current&&jp.current),[Ff,Df]=(0,de.useState)(!1),[Nf]=(0,de.useState)(!1),[Lf]=(0,de.useState)(!1),Vf=[{icon:pe.faPlayCircle,active:!1===mr.current,onPress:()=>{so({parameters:{...jf(),...Cf()}})},activeColor:"black",inActiveColor:"black",alternateIcon:pe.faPauseCircle,show:!0},{icon:pe.faStopCircle,active:!1,onPress:()=>{io({parameters:{...jf(),...Cf()}})},activeColor:"green",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsx)("div",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:2},children:(0,ce.jsx)("span",{style:{backgroundColor:"transparent",borderWidth:0,padding:0,margin:0},children:vp})}),show:!0},{icon:pe.faDotCircle,active:!1,onPress:()=>console.log("Status pressed"),activeColor:"black",inActiveColor:!1===mr.current?"red":"yellow",show:!0},{icon:pe.faCog,active:!1,onPress:()=>{sa({updateIsRecordingModalVisible:vg,isRecordingModalVisible:ku,showAlert:Pf,stopLaunchRecord:Gt.current,canLaunchRecord:_t.current,recordingAudioSupport:xt.current,recordingVideoSupport:kt.current,updateCanRecord:Ki,updateClearedToRecord:Kg,recordStarted:ur.current,recordPaused:mr.current,localUIMode:ye.current})},activeColor:"green",inActiveColor:"black",show:!0}],Bf=[{icon:pe.faRecordVinyl,text:"Record",action:()=>{sa({updateIsRecordingModalVisible:vg,isRecordingModalVisible:ku,showAlert:Pf,stopLaunchRecord:Gt.current,canLaunchRecord:_t.current,recordingAudioSupport:xt.current,recordingVideoSupport:kt.current,updateCanRecord:Ki,updateClearedToRecord:Kg,recordStarted:ur.current,recordPaused:mr.current,localUIMode:ye.current})},show:!yp&&"2"===Ae.current},{customComponent:(0,ce.jsx)(L,{buttons:Vf,direction:"horizontal",showAspect:!0}),show:yp&&"2"===Ae.current,renderAsButton:!1},{icon:pe.faCog,text:"Event Settings",action:()=>{ri({updateIsSettingsModalVisible:Sg,isSettingsModalVisible:ju})},show:"2"===Ae.current},{icon:pe.faUsers,text:"Requests",action:()=>{ai({updateIsRequestsModalVisible:Rg,isRequestsModalVisible:Mu})},show:"2"===Ae.current||Fe.current&&Te.current&&Te.current===Me.current&&1==!!Fe.current.find(e=>"media"===e.name).value||!1},{icon:pe.faClock,text:"Waiting",action:()=>{Qs({updateIsWaitingModalVisible:wg,isWaitingModalVisible:Au})},show:"2"===Ae.current||Fe.current&&Te.current&&Te.current===Me.current&&1==!!Fe.current.find(e=>"waiting"===e.name).value||!1},{icon:pe.faUserPlus,text:"Co-host",action:()=>{ei({updateIsCoHostModalVisible:kg,isCoHostModalVisible:Fu})},show:"2"===Ae.current},{icon:pe.faTools,text:"Set Media",action:()=>{ia({updateIsMediaSettingsModalVisible:Cg,isMediaSettingsModalVisible:Nu,audioInputs:$s,videoInputs:Vs,updateAudioInputs:El,updateVideoInputs:$l,mediaDevices:ua})},show:!0},{icon:pe.faDesktop,text:"Display",action:()=>{ti({updateIsDisplaySettingsModalVisible:jg,isDisplaySettingsModalVisible:Vu})},show:!0},{icon:pe.faPoll,text:"Poll",action:()=>{si({updateIsPollModalVisible:Ph,isPollModalVisible:Zp})},show:!0},{icon:pe.faUserFriends,text:"Breakout Rooms",action:()=>{ci({updateIsBreakoutRoomsModalVisible:rf,isBreakoutRoomsModalVisible:Im})},show:"2"==Ae.current},{icon:pe.faChalkboardTeacher,text:"Whiteboard",action:()=>{di({updateIsConfigureWhiteboardModalVisible:uf,isConfigureWhiteboardModalVisible:Em})},show:"2"==Ae.current}],$f=[{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:Mf,onPress:()=>Va({parameters:{...jf(),...Cf()}}),activeColor:"green",inActiveColor:"red",disabled:Rp,show:!0},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:Af,onPress:()=>La({parameters:{...jf(),...Cf()}}),activeColor:"green",inActiveColor:"red",disabled:kp,show:!0},{icon:pe.faDesktop,alternateIconComponent:(0,ce.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faDesktop,size:"lg",style:{color:Ff?"green":"black"}}),!Ff&&(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBan,size:"lg",style:{color:"red",position:"absolute",top:0,right:0}})]}),active:!0,onPress:()=>{Ba({parameters:{...jf(),...Cf()}})},activeColor:"green",inActiveColor:"red",disabled:!1,show:!0},{icon:pe.faPhone,active:Nf,onPress:()=>la({updateIsConfirmExitModalVisible:Ig,isConfirmExitModalVisible:Ou}),activeColor:"green",inActiveColor:"red",disabled:!1,show:!0},{icon:pe.faUsers,active:Lf,onPress:()=>ni({updateIsParticipantsModalVisible:Pg,isParticipantsModalVisible:$u}),activeColor:"black",inActiveColor:"black",disabled:!1,show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faBars,size:"lg",color:"black"}),(0,ce.jsx)("div",{style:{position:"absolute",top:-8,right:-8,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold"},children:uu.current})})})]}),onPress:()=>Zs({updateIsMenuModalVisible:xg,isMenuModalVisible:Ru}),show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:"black"}),_l&&(0,ce.jsx)("div",{style:{position:"absolute",top:-6,right:-6,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:"50%",padding:"4px 4px",minWidth:"8px",minHeight:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:10,fontWeight:"bold",lineHeight:"1"},children:"*"})})})]}),onPress:()=>oi({updateIsMessagesModalVisible:Mg,isMessagesModalVisible:Wu}),show:!0}];async function Ef({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,isLocal:d=!1}){let l;if(d){const d=await ie({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,parameters:{imgSrc:i,showAlert:Pf,updateIsLoadingModalVisible:Tg,connectSocket:ma,connectLocalSocket:ga,updateSocket:li,updateLocalSocket:ui,updateValidated:ii,updateApiUserName:mi,updateApiToken:gi,updateLink:hi,updateRoomName:fi,updateMember:bi},checkConnect:t.length>0&&!0===r&&!je.current.includes("mediasfu.com"),localLink:t,joinMediaSFURoom:p});l=await Go({localRoom:d})}else l=await async function(e){const{socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s}=e;try{return await fa({socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s})}catch(e){throw console.log("error",e),new Error("Failed to join the room. Please check your connection and try again.")}}({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c});async function u(e){try{(!e.roomRecvIPs||e.roomRecvIPs&&0==e.roomRecvIPs.length)&&(e.roomRecvIPs=["none"],""!==je.current&&je.current.includes("mediasfu.com")&&!d&&await Vn({community:!0,nsock:kf().socket,parameters:{...jf(),...Cf()}}));try{Fa({parameters:{...jf(),...Cf(),data:e}})}catch{}if(e.isHost?xi("2"):"2"!==n&&xi("1"),e.secureCode&&""!=e.secureCode&&yi(e.secureCode),e.rtpCapabilities)try{let t=await Na({rtpCapabilities:e.rtpCapabilities});t&&pi(t)}catch(e){console.log("error Device",e)}}catch(e){console.log("error updateRoomParametersClient",e)}}if(l&&l.success){if(""!==je.current&&je.current.includes("mediasfu.com")&&d)return void(Re.current=l);""!==je.current&&je.current.includes("mediasfu.com")&&!d?Re.current?(Re.current.recordingParams=l.recordingParams,Re.current.meetingRoomParams=l.meetingRoomParams):Re.current=l:(Re.current=l,je.current.includes("mediasfu.com")||(Re.current.meetingRoomParams=l.meetingRoomParams)),await u(l)}else{if(""!==je.current&&je.current.includes("mediasfu.com")&&!d)return void await u(Re.current);try{Pf&&Pf({message:l.reason,type:"danger",duration:3e3})}catch{}}}async function Wf(){Mg(!1),Pg(!1),wg(!1),Rg(!1),kg(!1),Sg(!1),jg(!1),Cg(!1),xg(!1),Fg(!1),Ig(!1),await async function(e){for(const t of e)try{t[Object.keys(t)[0]].disconnect()}catch(e){console.log(`Error disconnecting socket with IP: ${Object.keys(t)[0]}`,e)}}(Ye.current),await(async()=>{const e=me,t=jf();for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[`update${r.charAt(0).toUpperCase()+r.slice(1)}`];if("function"==typeof a)try{a(e[r])}catch{}}})(),Wl("00:00:00"),Hl(0),Zg("00:00:00"),ec(0),Xg(!1),uf(!1),lf(!1),xg(!1),vg(!1),Ph(!1),rf(!1),qh(!1),Tg(!1),Ag(!1),setTimeout(async function(){ii(!1),window.location.reload()},500)}(0,de.useEffect)(()=>{bp(ur&&!gr?mr?"yellow":"red":"green")},[ur,mr,gr]);const Hf=async()=>{await(async()=>{let e=0;if("webinar"==ze.current||"conference"==ze.current){const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==bn&&ul(e)}else{const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==bn&&ul(e)}const{mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}=(({containerWidthFraction:e=1,containerHeightFraction:t=1,mainSize:r,doStack:a=!0,defaultFraction:n})=>{const o=window.innerWidth*e,s=window.innerHeight*t*n;let i=o>=768;return!i&&o>1.5*s&&(i=!0),pl(i),a?i?{mainHeight:s,otherHeight:s,mainWidth:Math.floor(r/100*o),otherWidth:Math.floor((100-r)/100*o)}:{mainHeight:Math.floor(r/100*s),otherHeight:Math.floor((100-r)/100*s),mainWidth:o,otherWidth:o}:{mainHeight:s,otherHeight:s,mainWidth:o,otherWidth:o}})({containerWidthFraction:1,containerHeightFraction:1,mainSize:nn,doStack:!0,defaultFraction:"webinar"==ze.current||"conference"==ze.current?1-e:1});ah({mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}),"portrait"===wf()&&(Hn.current||(rt.current||at.current)&&Nl(!0)),await mn({name:Ur.current,parameters:{...jf(),...Cf()}}),await In({changed:!0,parameters:{...jf(),...Cf()}})})()},Of=async e=>{try{return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind===e)}catch(e){return console.error("Error getting media devices:",e),[]}},zf=async({id:e,name:t,kind:r})=>{try{const a=Ue.current||[];let n;if(e&&(n=a.find(t=>t.id===e)),n||(n=a.find(e=>e.name===t)),n){if("video"===r){const e=er.current?.find(e=>e.producerId===n.videoID);return e?e.stream:null}{const e=Rs.current?.find(e=>e.producerId===n.audioID);return e?e.stream:null}}return null}catch(e){return console.error("Error getting participant media:",e),null}};async function Uf(e,a,n=!1){const o=xe.current,s=r&&Se.current&&Se.current.id?Se.current:o;if(o.id){n||(o.on("disconnect",async()=>{await Wo({showAlert:Pf,redirectURL:Xr.current,onWeb:!0,updateValidated:ii}),jp.current&&await La({parameters:{...jf(),...Cf()}}),Pp.current&&await Va({parameters:{...jf(),...Cf()}}),await Wf()}),o.on("allMembers",async t=>{t&&await $o({apiUserName:e,apiKey:"",apiToken:a,members:t.members,requestss:t.requests?t.requests:cu.current,coHoste:t.coHost?t.coHost:Te.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:Fe.current,parameters:{...jf(),...Cf()},consume_sockets:Ye.current})}),o.on("allMembersRest",async t=>{t&&await Eo({apiUserName:e,apiKey:"",members:t.members,apiToken:a,settings:t.settings,coHoste:t.coHost?t.coHost:Te.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:Fe.current,parameters:{...jf(),...Cf()},consume_sockets:Ye.current})}),o.on("userWaiting",async({name:e})=>{await co({name:e,showAlert:Pf,totalReqWait:uu.current,updateTotalReqWait:yg})}),o.on("personJoined",async({name:e})=>{await lo({name:e,showAlert:Pf})}),o.on("allWaitingRoomMembers",async e=>{await uo({waitingParticipants:e.waitingParticipants?e.waitingParticipants:e.waitingParticipantss?e.waitingParticipantss:nu.current,updateTotalReqWait:yg,updateWaitingRoomList:gg})}),o.on("ban",async({name:e})=>{await mo({name:e,parameters:{...jf(),...Cf()}})}),o.on("updatedCoHost",async e=>{await go({coHost:e.coHost?e.coHost:Te.current,coHostResponsibility:e.coHostResponsibilities?e.coHostResponsibilities:Fe.current,youAreCoHost:De.current,updateCoHost:vi,updateCoHostResponsibility:Si,updateYouAreCoHost:Ri,showAlert:Pf,eventType:ze.current,islevel:Ae.current,member:Me.current})}),o.on("participantRequested",async({userRequest:e})=>{await ho({userRequest:e,requestList:cu.current,waitingRoomList:nu.current,updateTotalReqWait:yg,updateRequestList:bg})}),o.on("screenProducerId",async({producerId:e})=>{fo({producerId:e,screenId:Qt.current,membersReceived:Ar.current,shareScreenStarted:rt.current,deferScreenReceived:Tr.current,participants:Ue.current,updateScreenId:Dc,updateShareScreenStarted:bc,updateDeferScreenReceived:ud})}),o.on("updateMediaSettings",async({settings:e})=>{bo({settings:e,updateAudioSetting:ag,updateVideoSetting:ng,updateScreenshareSetting:og,updateChatSetting:sg})}),o.on("producer-media-paused",async({producerId:e,kind:t,name:r})=>{await yo({producerId:e,kind:t,name:r,parameters:{...jf(),...Cf()}})}),o.on("producer-media-resumed",async({kind:e,name:t})=>{await xo({kind:e,name:t,parameters:{...jf(),...Cf()}})}),o.on("producer-media-closed",async({producerId:e,kind:t})=>{e&&t&&await vo({producerId:e,kind:t,parameters:{...jf(),...Cf()}})}),o.on("controlMediaHost",async({type:e})=>{await So({type:e,parameters:{...jf(),...Cf()}})}),o.on("meetingEnded",async function(){await Ro({showAlert:Pf,redirectURL:Xr.current,onWeb:!0,eventType:ze.current,updateValidated:ii}),jp.current&&await La({parameters:{...jf(),...Cf()}}),Pp.current&&await Va({parameters:{...jf(),...Cf()}}),await Wf()}),o.on("disconnectUserSelf",async function(){await wo({socket:o,member:Me.current,roomName:Pe.current})}),o.on("receiveMessage",async({message:e})=>{await ko({message:e,messages:zl.current,participantsAll:Ue.current,member:Me.current,eventType:ze.current,islevel:Ae.current,coHost:Te.current,updateMessages:Qm,updateShowMessagesBadge:rg})}),o.on("meetingTimeRemaining",async({timeRemaining:e})=>{await Co({timeRemaining:e,showAlert:Pf,eventType:ze.current})}),o.on("meetingStillThere",async()=>{await jo({updateIsConfirmHereModalVisible:Ag})}),o.on("updateConsumingDomains",async({domains:t,alt_domains:r})=>{await Ao({domains:t,alt_domains:r,apiUserName:e,apiKey:"",apiToken:a,parameters:{...jf(),...Cf()}})}),o.on("hostRequestResponse",({requestResponse:e})=>{Bo({requestResponse:e,showAlert:Pf,requestList:cu.current,updateRequestList:bg,updateMicAction:md,updateVideoAction:Zc,updateScreenAction:gd,updateChatAction:hd,updateAudioRequestState:fd,updateVideoRequestState:Jc,updateScreenRequestState:bd,updateChatRequestState:yd,updateAudioRequestTime:xd,updateVideoRequestTime:Xc,updateScreenRequestTime:vd,updateChatRequestTime:Sd,updateRequestIntervalSeconds:Or.current})}),o.on("pollUpdated",async e=>{try{await eo({data:e,polls:Jp.current,poll:Xp.current,member:Me.current,islevel:Ae.current,showAlert:Pf,updatePolls:Ch,updatePoll:jh,updateIsPollModalVisible:Ph})}catch{}}),o.on("breakoutRoomUpdated",async e=>{try{await no({data:e,parameters:{...jf(),...Cf()}})}catch{}})),n&&["roomRecordParams","startRecords","reInitiateRecording","RecordingNotice","timeLeftRecording","stoppedRecording"].forEach(e=>{o.off(e),s.off(e)}),s.on("roomRecordParams",async({recordParams:e})=>{await po({recordParams:e,parameters:{...jf(),...Cf()}})}),s.on("startRecords",async()=>{await Po({roomName:Pe.current,member:Me.current,socket:s})}),s.on("reInitiateRecording",async()=>{await Mo({roomName:Pe.current,member:Me.current,socket:s,adminRestrictSetting:hr.current})}),s.on("RecordingNotice",async({state:e,userRecordingParam:t,pauseCount:r,timeDone:a})=>{await Fo({state:e,userRecordingParam:t,pauseCount:r,timeDone:a,parameters:{...jf(),...Cf()}})}),s.on("timeLeftRecording",async({timeLeft:e})=>{Lo({timeLeft:e,showAlert:Pf})}),s.on("stoppedRecording",async({state:e,reason:t})=>{await Vo({state:e,reason:t,showAlert:Pf})}),""!==t&&o&&!n&&await Ef({socket:o,roomName:Pe.current,islevel:Ae.current,member:Me.current,sec:a,apiUserName:e,isLocal:!0});let i=!1;if(i=!(!Se.current||Se.current.id==s.id),!n&&i)return await Uf(e,a,!0),await An({ms:1e3}),Tg(!1),o;if(""!==je.current&&je.current.includes("mediasfu.com")){const t=Ce.current;await Ef({socket:r&&s&&s.id?s:o,roomName:Pe.current,islevel:Ae.current,member:Me.current,sec:t,apiUserName:e})}return await Xn({socket:o,roomName:Pe.current,updateMessages:Qm}),n||await mn({name:Ur.current,parameters:{...jf(),...Cf()}}),o}return null}return(0,de.useEffect)(()=>(window.addEventListener("resize",Hf),window.addEventListener("orientationchange",Hf),()=>{window.removeEventListener("resize",Hf),window.removeEventListener("orientationchange",Hf)}),[Hf]),(0,de.useEffect)(()=>{(Zt||at)&&Jt||mn({name:Ur.current,parameters:{...jf(),...Cf()}})},[nn]),(0,de.useEffect)(()=>{Nc([{producerId:"youyou",stream:void 0,id:"youyou",name:"youyou"}]),Td([{id:"youyou",name:"youyou",producerId:""}]);const e=async()=>{const e=await Uf(ke.current,Ce.current);li(e)};if(fe){try{!1===ye.current?(Tg(!0),e()):Tg(!1)}catch(e){console.log("error connectAndaAddSocketMethods",e)}oo({startTime:Date.now()/1e3,parameters:{...jf(),...Cf()}});try{null!==c&&(c={...jf(),...Cf()},d&&d(c))}catch{console.log("error updateSourceParameters")}}},[fe]),(0,ce.jsxs)("div",{className:"MediaSFU",style:{height:"100vh",width:"100vw",maxWidth:"100vw",maxHeight:"100vh",overflow:"hidden",...x},children:[g?le().createElement(g,{parameters:{...jf(),...Cf()}}):fe?l?(0,ce.jsxs)(R,{children:[(0,ce.jsx)(k,{backgroundColor:"rgba(217, 227, 234, 0.99)",defaultFraction:1-bn,updateIsWideScreen:pl,updateIsMediumScreen:ml,updateIsSmallScreen:gl,showControls:"webinar"==ze.current||"conference"==ze.current,children:(0,ce.jsxs)(C,{doStack:!0,mainSize:nn,updateComponentSizes:ah,defaultFraction:1-bn,componentSizes:Mp.current,showControls:"webinar"==ze.current||"conference"==ze.current,children:[(0,ce.jsxs)(j,{height:Mp.current.mainHeight,width:Mp.current.mainWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",mainSize:nn,showAspect:nn>0,timeBackgroundColor:fp,meetingProgressTime:Os,children:[(0,ce.jsx)(T,{customWidth:Mp.current.mainWidth,customHeight:Mp.current.mainHeight,rows:1,columns:1,componentsToRender:Fs.current?Fs.current:[],showAspect:Fs.current.length>0&&!(Nm.current&&!Lm.current),localStreamScreen:_r.current,annotateScreenStream:Km.current,Screenboard:at.current&&(0,ce.jsx)(B,{customWidth:Mp.current.mainWidth,customHeight:Mp.current.mainHeight,parameters:{...jf(),...Cf()},showAspect:at.current})}),(0,ce.jsx)(V,{customWidth:Mp.current.mainWidth,customHeight:Mp.current.mainHeight,parameters:{...jf(),...Cf()},showAspect:Nm.current&&!Lm.current})]}),(0,ce.jsxs)(M,{height:Mp.current.otherHeight,width:Mp.current.otherWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",showAspect:100!=nn,timeBackgroundColor:fp,showTimer:0==nn,meetingProgressTime:Os,children:[(0,ce.jsx)("div",{style:{width:"horizontal"===Is.current?Mp.current.otherWidth:Ms.current,height:"horizontal"===Is.current?Ms.current:Mp.current.otherHeight,padding:0,margin:0,display:dn.current?"flex":"none",flexDirection:"horizontal"===Is.current?"row":"column",justifyContent:"center",alignItems:"center"},children:(0,ce.jsx)(D,{totalPages:rs,currentUserPage:an.current,showAspect:dn.current,paginationHeight:Ms.current,direction:Is.current,parameters:{...jf(),...Cf()}})}),(0,ce.jsx)(F,{componentsToRender:Ls.current?Ls.current:[]}),(0,ce.jsx)(I,{customWidth:As.current.gridWidth,customHeight:As.current.gridHeight,rows:Oo,columns:Yo,componentsToRender:Ds[0],backgroundColor:"rgba(217, 227, 234, 0.99)"}),(0,ce.jsx)(A,{customWidth:As.current.altGridWidth,customHeight:As.current.altGridHeight,rows:Zo,columns:es,componentsToRender:Ds[1],backgroundColor:"rgba(217, 227, 234, 0.99)"})]})]})}),(0,ce.jsx)(P,{backgroundColor:"rgba(217, 227, 234, 0.99)",showControls:"webinar"==ze.current||"conference"==ze.current,defaultFractionSub:bn,children:(0,ce.jsx)(N,{buttons:$f,buttonColor:"black",buttonBackgroundColor:{default:"transparent",pressed:"transparent"},alignment:"space-between",vertical:!1,buttonsContainerStyle:{marginTop:2,marginBottom:2,backgroundColor:"transparent"}})})]}):(0,ce.jsx)(ce.Fragment,{children:" "}):(0,ce.jsx)(ne,{parameters:{imgSrc:i,showAlert:Pf,updateIsLoadingModalVisible:Tg,connectSocket:ma,connectLocalSocket:ga,updateSocket:li,updateLocalSocket:ui,updateValidated:ii,updateApiUserName:mi,updateApiToken:gi,updateLink:hi,updateRoomName:fi,updateMember:bi},credentials:a,localLink:t,connectMediaSFU:r,returnUI:l,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m}),l&&!g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(W,{backgroundColor:"rgba(181, 233, 229, 0.97)",isVisible:Ru,onClose:()=>xg(!1),customButtons:Bf,roomName:Pe.current,adminPasscode:Ie.current,islevel:Ae.current,eventType:ze.current,localLink:t}),(0,ce.jsx)(H,{backgroundColor:"rgba(217, 227, 234, 0.99)",isEventSettingsModalVisible:ju,updateIsSettingsModalVisible:Sg,onEventSettingsClose:()=>Sg(!1),audioSetting:Yl.current,videoSetting:Kl.current,screenshareSetting:Jl.current,chatSetting:Xl.current,updateAudioSetting:ag,updateVideoSetting:ng,updateScreenshareSetting:og,updateChatSetting:sg,roomName:Pe.current,socket:xe.current}),(0,ce.jsx)(O,{backgroundColor:"rgba(217, 227, 234, 0.99)",isRequestsModalVisible:Mu,onRequestClose:()=>Rg(!1),requestCounter:du.current,onRequestFilterChange:e=>{if(""!==e&&e.length>0){let t=cu.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));lu.current=t,du.current=t.length}else lu.current=cu.current,du.current=cu.current.length},updateRequestList:bg,requestList:lu.current,roomName:Pe.current,socket:xe.current,parameters:{updateRequestCounter:hg,updateRequestFilter:fg,updateRequestList:bg,getUpdatedAllParams:kf}}),(0,ce.jsx)(z,{backgroundColor:"rgba(217, 227, 234, 0.99)",isWaitingModalVisible:Au,onWaitingRoomClose:()=>wg(!1),waitingRoomCounter:ou.current,onWaitingRoomFilterChange:e=>{if(""!==e&&e.length>0){let t=nu.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));su.current=t,ou.current=t.length}else su.current=nu.current,ou.current=nu.current.length},waitingRoomList:su.current,updateWaitingList:gg,roomName:Pe.current,socket:xe.current,parameters:{filteredWaitingRoomList:su.current,getUpdatedAllParams:kf}}),(0,ce.jsx)(U,{backgroundColor:"rgba(217, 227, 234, 0.99)",isCoHostModalVisible:Fu,updateIsCoHostModalVisible:kg,onCoHostClose:()=>kg(!1),coHostResponsibility:Fe.current,participants:Ue.current,currentCohost:Te.current,roomName:Pe.current,showAlert:Pf,updateCoHostResponsibility:Si,updateCoHost:vi,socket:xe.current}),(0,ce.jsx)(q,{backgroundColor:"rgba(181, 233, 229, 0.97)",isMediaSettingsModalVisible:Nu,onMediaSettingsClose:()=>Cg(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(_,{backgroundColor:"rgba(217, 227, 234, 0.99)",isParticipantsModalVisible:$u,onParticipantsClose:()=>Pg(!1),participantsCounter:_e.current,onParticipantsFilterChange:e=>{if(""!==e&&e.length>0){let t=Ue.current.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()));qe.current=t,_e.current=t.length}else qe.current=Ue.current,_e.current=Ue.current.length},parameters:{updateParticipants:Mi,updateIsParticipantsModalVisible:Pg,updateDirectMessageDetails:tg,updateStartDirectMessage:eg,updateIsMessagesModalVisible:Mg,showAlert:Pf,filteredParticipants:qe.current,participants:qe.current,roomName:Pe.current,islevel:Ae.current,member:Me.current,coHostResponsibility:Fe.current,coHost:Te.current,eventType:ze.current,startDirectMessage:Ul.current,directMessageDetails:ql.current,socket:xe.current,getUpdatedAllParams:jf}}),(0,ce.jsx)(Y,{backgroundColor:"rgba(217, 227, 234, 0.99)",isDisplaySettingsModalVisible:Vu,onDisplaySettingsClose:()=>jg(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(Z,{backgroundColor:"rgba(217, 227, 234, 0.99)",isRecordingModalVisible:ku,onClose:()=>vg(!1),startRecording:ca,confirmRecording:da,parameters:{...jf(),...Cf()}}),(0,ce.jsx)(G,{backgroundColor:"webinar"==ze.current||"conference"==ze.current?"#f5f5f5":"rgba(255, 255, 255, 0.25)",isMessagesModalVisible:Wu,onMessagesClose:()=>Mg(!1),messages:zl.current,eventType:ze.current,member:Me.current,islevel:Ae.current,coHostResponsibility:Fe.current,coHost:Te.current,startDirectMessage:Ul.current,directMessageDetails:ql.current,updateStartDirectMessage:eg,updateDirectMessageDetails:tg,showAlert:Pf,roomName:Pe.current,socket:xe.current,chatSetting:Xl.current}),(0,ce.jsx)(K,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmExitModalVisible:Ou,onConfirmExitClose:()=>Ig(!1),member:Me.current,roomName:Pe.current,socket:xe.current,islevel:Ae.current}),(0,ce.jsx)(J,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmHereModalVisible:Uu,onConfirmHereClose:()=>Ag(!1),member:Me.current,roomName:Pe.current,socket:xe.current}),(0,ce.jsx)(X,{isShareEventModalVisible:_u,onShareEventClose:()=>Fg(!1),roomName:Pe.current,islevel:Ae.current,adminPasscode:Ie.current,eventType:ze.current,localLink:t}),(0,ce.jsx)(Q,{isPollModalVisible:Zp,onClose:()=>Qp(!1),member:Me.current,islevel:Ae.current,polls:Jp.current,poll:Xp.current,socket:xe.current,roomName:Pe.current,showAlert:Pf,updateIsPollModalVisible:Qp,handleCreatePoll:to,handleEndPoll:ao,handleVotePoll:ro}),(0,ce.jsx)(ee,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:bm,onClose:()=>qh(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(te,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Im,onBreakoutRoomsClose:()=>rf(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(re,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Em,onConfigureWhiteboardClose:()=>uf(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(ae,{backgroundColor:"rgba(217, 227, 234, 0.99)",isVisible:Xm,onClose:()=>Rf(!1),parameters:{...jf(),...Cf()}}),(0,ce.jsx)(E,{visible:pu,message:gu,type:fu,duration:yu,onHide:()=>mu(!1),textColor:"#ffffff"}),(0,ce.jsx)($,{isVisible:Yu,backgroundColor:"rgba(217, 227, 234, 0.99)",displayColor:"black"})]})]})},gi=({PrejoinPage:e=ks,localLink:t="",connectMediaSFU:r=!0,credentials:a={apiUserName:"",apiKey:""},useLocalUIMode:n=!1,seedData:o={},useSeed:s=!1,imgSrc:i="https://mediasfu.com/images/logo192.png",sourceParameters:c,updateSourceParameters:d,returnUI:l=!0,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m,customComponent:g,customVideoCard:h,customAudioCard:f,customMiniCard:b,containerStyle:x,uiOverrides:v})=>{const R=(0,de.useMemo)(()=>Ua(v?.mainContainer,He),[v?.mainContainer]),k=(0,de.useMemo)(()=>Ua(v?.mainAspect,ge),[v?.mainAspect]),C=(0,de.useMemo)(()=>Ua(v?.mainScreen,$e),[v?.mainScreen]),j=(0,de.useMemo)(()=>Ua(v?.otherGrid,Be),[v?.otherGrid]),P=(0,de.useMemo)(()=>Ua(v?.flexibleGrid,Ks),[v?.flexibleGrid]),M=(0,de.useMemo)(()=>Ua(v?.audioGrid,ht),[v?.audioGrid]),I=(0,de.useMemo)(()=>Ua(v?.controlButtonsTouch,Ce),[v?.controlButtonsTouch]),A=(0,de.useMemo)(()=>Ua(v?.loadingModal,Ko),[v?.loadingModal]),T=(0,de.useMemo)(()=>Ua(v?.alert,Xo),[v?.alert]),F=(0,de.useMemo)(()=>Ua(v?.messagesModal,bs),[v?.messagesModal]),D=(0,de.useMemo)(()=>Ua(v?.confirmExitModal,xs),[v?.confirmExitModal]),N=(0,de.useMemo)(()=>Ua(v?.confirmHereModal,vs),[v?.confirmHereModal]),L=(0,de.useMemo)(()=>Ua(v?.shareEventModal,Ss),[v?.shareEventModal]),V=(0,de.useMemo)(()=>Ua(v?.preJoinPage,e),[v?.preJoinPage,e]),B=(0,de.useMemo)(()=>qa(v?.consumerResume,xn),[v?.consumerResume]),$=(0,de.useMemo)(()=>qa(v?.addVideosGrid,Mn),[v?.addVideosGrid]),[E,W]=(0,de.useState)(n),H=(0,de.useRef)(n),O=(0,de.useRef)({}),z=(0,de.useRef)(null),U=(0,de.useRef)(null),q=(0,de.useRef)(null),_=(0,de.useRef)(""),G=(0,de.useRef)(""),Y=(0,de.useRef)(""),K=(0,de.useRef)(""),J=(0,de.useRef)(s&&o?.member?o?.member:""),X=(0,de.useRef)(""),Z=(0,de.useRef)(s&&o?.member&&o.member==o?.host?"2":"1"),Q=(0,de.useRef)(""),ee=(0,de.useRef)([{name:"participants",value:!1,dedicated:!1},{name:"media",value:!1,dedicated:!1},{name:"waiting",value:!1,dedicated:!1},{name:"chat",value:!1,dedicated:!1}]),te=(0,de.useRef)(!!Q.current&&Q.current==J.current),re=(0,de.useRef)(!!Z&&"2"==Z.current),ae=(0,de.useRef)(!1),ne=(0,de.useRef)("media"),oe=(0,de.useRef)(!1),se=(0,de.useRef)("chat"),he=(0,de.useRef)(s&&o?.participants?o?.participants:[]),fe=(0,de.useRef)(he.current),be=(0,de.useRef)(0),ye=(0,de.useRef)(""),xe=(0,de.useRef)([]),ve=(0,de.useRef)(null),Se=(0,de.useRef)([]),Re=(0,de.useRef)(null),we=(0,de.useRef)(4),ke=(0,de.useRef)(!1),je=(0,de.useRef)(!1),Pe=(0,de.useRef)(4),Me=(0,de.useRef)(!1),Ie=(0,de.useRef)(!1),Ae=(0,de.useRef)("landscape"),Te=(0,de.useRef)("sd"),Fe=(0,de.useRef)("sd"),De=(0,de.useRef)({width:640,height:360}),Ne=(0,de.useRef)(10),Le=(0,de.useRef)({}),Ve=(0,de.useRef)({}),Ee=(0,de.useRef)({}),We=(0,de.useRef)({}),Oe=(0,de.useRef)(0),ze=(0,de.useRef)(0),Ue=(0,de.useRef)(!1),qe=(0,de.useRef)(0),_e=(0,de.useRef)(0),Ge=(0,de.useRef)(0),Ye=(0,de.useRef)(0),Ke=(0,de.useRef)(!1),Je=(0,de.useRef)(0),Xe=(0,de.useRef)(0),Ze=(0,de.useRef)(!1),Qe=(0,de.useRef)(!1),et=(0,de.useRef)(!1),tt=(0,de.useRef)(!1),rt=(0,de.useRef)("landscape"),at=(0,de.useRef)(!1),nt=(0,de.useRef)(!1),ot=(0,de.useRef)({mainSpecs:{mediaOptions:"video",audioOptions:"all",videoOptions:"all",videoType:"fullDisplay",videoOptimized:!1,recordingDisplayType:"media",addHLS:!1},dispSpecs:{nameTags:!0,backgroundColor:"#000000",nameTagsColor:"#ffffff",orientationVideo:"portrait"}}),st=(0,de.useRef)(!1),it=(0,de.useRef)(!1),ct=(0,de.useRef)(!1),dt=(0,de.useRef)(null),lt=(0,de.useRef)(0),ut=(0,de.useRef)(0),pt=(0,de.useRef)(!1),mt=(0,de.useRef)(!1),gt=(0,de.useRef)(15e3),ft=(0,de.useRef)(0),bt=(0,de.useRef)(0),yt=(0,de.useRef)(!0),xt=(0,de.useRef)(!1),vt=(0,de.useRef)(!1),St=(0,de.useRef)(!1),Rt=(0,de.useRef)(!1),wt=(0,de.useRef)(!1),kt=(0,de.useRef)(!1),Ct=(0,de.useRef)(""),jt=(0,de.useRef)([]),Pt=(0,de.useRef)([]),Mt=(0,de.useRef)([]),It=(0,de.useRef)([]),At=(0,de.useRef)(""),Tt=(0,de.useRef)(""),Ft=(0,de.useRef)(""),Dt=(0,de.useRef)(""),Nt=(0,de.useRef)([]),Lt=(0,de.useRef)([]),Vt=(0,de.useRef)(null),Bt=(0,de.useRef)(!1),$t=(0,de.useRef)(!1),Et=(0,de.useRef)(!1),Wt=(0,de.useRef)(!1),Ht=(0,de.useRef)(!1),Ot=(0,de.useRef)(null),zt=(0,de.useRef)(0),Ut=(0,de.useRef)(!1),qt=(0,de.useRef)(null),_t=(0,de.useRef)(""),Gt=(0,de.useRef)("user"),Yt=(0,de.useRef)("user"),Kt=(0,de.useRef)(""),Jt=(0,de.useRef)(!1),Xt=(0,de.useRef)([]),Zt=(0,de.useRef)([]),Qt=(0,de.useRef)([]),er=(0,de.useRef)([]),tr=(0,de.useRef)([]),rr=(0,de.useRef)(!1),ar=(0,de.useRef)(!1),nr=(0,de.useRef)(!1),or=(0,de.useRef)(!1),sr=(0,de.useRef)(!1),ir=(0,de.useRef)(!1),cr=(0,de.useRef)(null),dr=(0,de.useRef)(null),lr=(0,de.useRef)(null),ur=(0,de.useRef)(0),pr=(0,de.useRef)(0),mr=(0,de.useRef)(0),gr=(0,de.useRef)(240),hr=(0,de.useRef)([]),br=(0,de.useRef)("Host"),yr=(0,de.useRef)(!1),xr=(0,de.useRef)(null),[vr,Sr]=(0,de.useState)(!1),[Rr,wr]=(0,de.useState)(!1),kr=(0,de.useRef)(""),Cr=(0,de.useRef)([]),jr=(0,de.useRef)(""),Pr=(0,de.useRef)([]),Mr=(0,de.useRef)([]),Ir=(0,de.useRef)(!1),Ar=(0,de.useRef)([]),Tr=(0,de.useRef)([]),Fr=(0,de.useRef)([]),Dr=(0,de.useRef)([]),Nr=(0,de.useRef)(null),Lr=(0,de.useRef)(""),Vr=(0,de.useRef)(""),Br=(0,de.useRef)(""),$r=(0,de.useRef)(""),Er=(0,de.useRef)(""),Wr=(0,de.useRef)(!1),Hr=(0,de.useRef)(""),Or=(0,de.useRef)(!1),zr=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),Ur=(0,de.useRef)([{mainScreenPerson:"",mainScreenProducerId:"",mainScreenFilled:!1,adminOnMainScreen:!1}]),qr=(0,de.useRef)(null),_r=(0,de.useRef)(null),Gr=(0,de.useRef)(0),Yr=(0,de.useRef)(4),Kr=(0,de.useRef)(!1),Jr=(0,de.useRef)(0),Xr=(0,de.useRef)(3e4),Zr=(0,de.useRef)(1e4),Qr=(0,de.useRef)(0),ea=(0,de.useRef)([]),ta=(0,de.useRef)(0),[ra,aa]=(0,de.useState)(0),na=(0,de.useRef)(ra),oa=(0,de.useRef)(!1),sa=(0,de.useRef)(!1),ia=(0,de.useRef)(!1),ca=(0,de.useRef)([]),da=(0,de.useRef)([]),[pa,ha]=(0,de.useState)(0),ba=(0,de.useRef)(!1),ya=(0,de.useRef)(!1),xa=(0,de.useRef)(!1),va=(0,de.useRef)(!1),Sa=(0,de.useRef)(!1),[Ra,wa]=(0,de.useState)(0),[ka,Ca]=(0,de.useState)(0),[ja,Pa]=(0,de.useState)(0),[Ma,Ia]=(0,de.useState)(0),[Aa,Ta]=(0,de.useState)(0),Da=(0,de.useRef)([]),[za,en]=(0,de.useState)(!1),tn=(0,de.useRef)(null),rn=(0,de.useRef)(!1),an=(0,de.useRef)([]),nn=(0,de.useRef)([]),on=(0,de.useRef)(null),sn=(0,de.useRef)(null),cn=(0,de.useRef)(!1),dn=(0,de.useRef)(40),ln=(0,de.useRef)("horizontal"),un=(0,de.useRef)({gridWidth:0,gridHeight:0,altGridWidth:0,altGridHeight:0}),pn=(0,de.useRef)(!1),bn=(0,de.useRef)([]),[yn,Hn]=(0,de.useState)([[],[]]),eo=(0,de.useRef)([]),[to,ro]=(0,de.useState)([]),[ao,no]=(0,de.useState)([]),[so,io]=(0,de.useState)("00:00:00"),co=(0,de.useRef)(0),lo=(0,de.useRef)([]),uo=(0,de.useRef)([]),po=e=>{W(e)},mo=e=>{O.current=e},go=e=>{z.current=e},ho=e=>{q.current=e},fo=e=>{_.current=e},bo=e=>{G.current=e},So=e=>{Y.current=e},Po=e=>{K.current=e},Mo=e=>{e.length>0&&e.includes("_")&&(Fo(e.split("_")[1]),e=e.split("_")[0]),J.current=e},To=e=>{X.current=e},Fo=e=>{Z.current=e},Do=e=>{Q.current=e},No=e=>{ee.current=e},Lo=e=>{te.current=e},Vo=e=>{re.current=e},Bo=e=>{ae.current=e},Ho=e=>{ne.current=e},Oo=e=>{oe.current=e},zo=e=>{se.current=e},Yo=e=>{he.current=e,fe.current=e,be.current=e.length},Jo=e=>{be.current=e},Zo=e=>{ye.current=e},Qo=e=>{Oe.current=e},es=e=>{ze.current=e},ts=e=>{Ue.current=e},rs=e=>{qe.current=e},as=e=>{_e.current=e},ns=e=>{Ge.current=e},os=e=>{Ye.current=e},ss=e=>{Ke.current=e},is=e=>{Je.current=e},cs=e=>{Xe.current=e},ds=e=>{Ze.current=e},ls=e=>{Qe.current=e},us=e=>{et.current=e},ps=e=>{tt.current=e},ms=e=>{rt.current=e},gs=e=>{at.current=e},hs=e=>{nt.current=e},fs=e=>{ot.current=e},ys=e=>{st.current=e},Rs=e=>{it.current=e},ws=e=>{ct.current=e},Cs=e=>{dt.current=e},js=e=>{lt.current=e},Ps=e=>{ut.current=e},Ms=e=>{pt.current=e},Is=e=>{mt.current=e},As=e=>{gt.current=e},Ts=e=>{ft.current=e},Fs=e=>{bt.current=e},Ds=e=>{yt.current=e},Ns=e=>{xt.current=e},Ls=e=>{uo.current=e},Vs=e=>{xe.current=e},Bs=e=>{ve.current=e},$s=e=>{Se.current=e},Es=e=>{Re.current=e},Ws=e=>{we.current=e},Hs=e=>{ke.current=e},Os=e=>{je.current=e},zs=e=>{Pe.current=e},Us=e=>{Me.current=e},qs=e=>{Ie.current=e},_s=e=>{Ae.current=e},Gs=e=>{Te.current=e},Ys=e=>{Fe.current=e},Js=e=>{De.current=e},Xs=e=>{Ne.current=e},Zs=e=>{Le.current=e},Qs=e=>{Ve.current=e},ei=e=>{Ee.current=e},ti=e=>{We.current=e},ri=e=>{vt.current=e},ai=e=>{St.current=e},ni=e=>{Rt.current=e},si=e=>{wt.current=e},ii=e=>{kt.current=e},ci=e=>{Ct.current=e},di=e=>{jt.current=e},li=e=>{Pt.current=e},ui=e=>{Mt.current=e},pi=e=>{It.current=e},mi=e=>{At.current=e},gi=e=>{Tt.current=e},hi=e=>{Ft.current=e},fi=e=>{Dt.current=e},bi=e=>{Nt.current=e},yi=e=>{Lt.current=e},xi=e=>{Vt.current=e},vi=e=>{Bt.current=e},Si=e=>{$t.current=e},Ri=e=>{Et.current=e},wi=e=>{Wt.current=e},ki=e=>{Ht.current=e},Ci=e=>{Ot.current=e},ji=e=>{zt.current=e},Pi=e=>{Ut.current=e},Mi=e=>{qt.current=e},Ii=e=>{_t.current=e},Ai=e=>{Gt.current=e},Ti=e=>{Yt.current=e},Fi=e=>{Kt.current=e},Di=e=>{Jt.current=e},Ni=e=>{Xt.current=e},Li=e=>{Zt.current=e},Vi=e=>{Qt.current=e},Bi=e=>{er.current=e},$i=e=>{tr.current=e},Ei=e=>{rr.current=e},Wi=e=>{ar.current=e},Hi=e=>{nr.current=e},Oi=e=>{or.current=e},zi=e=>{sr.current=e},Ui=e=>{ir.current=e},qi=e=>{cr.current=e},_i=e=>{dr.current=e},Gi=e=>{lr.current=e},Yi=e=>{ur.current=e},Ki=e=>{pr.current=e},Ji=e=>{mr.current=e},Xi=e=>{hr.current=e},Zi=e=>{br.current=e},Qi=e=>{yr.current=e},ec=e=>{xr.current=e},tc=e=>{Sr(e)},rc=e=>{wr(e)},ac=e=>{kr.current=e},nc=e=>{Cr.current=e},oc=e=>{jr.current=e},sc=e=>{Pr.current=e},ic=e=>{Mr.current=e},cc=e=>{Ir.current=e},dc=e=>{Ar.current=e},lc=e=>{Tr.current=e},uc=e=>{Fr.current=e},pc=e=>{Dr.current=e},mc=e=>{Nr.current=e},gc=e=>{Lr.current=e},hc=e=>{Vr.current=e},fc=e=>{Br.current=e},bc=e=>{$r.current=e},yc=e=>{Er.current=e},xc=e=>{Wr.current=e},vc=e=>{Hr.current=e},Sc=e=>{Or.current=e},Rc=e=>{zr.current=e},wc=e=>{Ur.current=e},kc=e=>{qr.current=e},Cc=e=>{_r.current=e},jc=e=>{Gr.current=e},Pc=e=>{Yr.current=e},Mc=e=>{Kr.current=e},Ic=e=>{Jr.current=e},Ac=e=>{Qr.current=e},Tc=e=>{ea.current=e},Fc=e=>{ta.current=e},Dc=e=>{aa(e)},Nc=e=>{na.current=e},Lc=e=>{oa.current=e},Vc=e=>{sa.current=e},Bc=e=>{ia.current=e},$c=e=>{ca.current=e},Ec=e=>{da.current=e},Wc=e=>{ha(e)},Hc=e=>{ba.current=e},Oc=e=>{ya.current=e},zc=e=>{xa.current=e},Uc=e=>{va.current=e},qc=e=>{Sa.current=e},_c=e=>{wa(e)},Gc=e=>{Ca(e)},Yc=e=>{Pa(e)},Kc=e=>{Ia(e)},Jc=e=>{Ta(e)},Xc=e=>{Da.current=e},Zc=e=>{en(e)},Qc=e=>{tn.current=e},ed=e=>{rn.current=e},td=e=>{an.current=e},rd=e=>{nn.current=e},ad=e=>{on.current=e},nd=e=>{sn.current=e},od=e=>{cn.current=e},sd=e=>{dn.current=e},id=e=>{ln.current=e},cd=e=>{un.current=e},dd=e=>{pn.current=e},ld=e=>{bn.current=e},ud=e=>{Hn(e)},pd=e=>{eo.current=e},md=e=>{ro(e)},gd=e=>{no(e)},hd=e=>{io(e)},fd=e=>{co.current=e},bd=e=>{lo.current=e},yd=(0,de.useRef)(s&&o?.messages?o.messages:[]),xd=(0,de.useRef)(!1),vd=(0,de.useRef)(null),[Sd,Rd]=(0,de.useState)(!1),wd=(0,de.useRef)("allow"),kd=(0,de.useRef)("allow"),Cd=(0,de.useRef)("allow"),jd=(0,de.useRef)("allow"),Pd=(0,de.useRef)(ne.current?ne.current:"media"),Md=(0,de.useRef)(!0),Id=(0,de.useRef)("webinar"!==se.current&&"conference"!==se.current),Ad=(0,de.useRef)(!1),Td=(0,de.useRef)("video"),Fd=(0,de.useRef)(""),Dd=(0,de.useRef)([]),Nd=(0,de.useRef)(0),Ld=(0,de.useRef)(Dd.current),Vd=(0,de.useRef)(""),Bd=(0,de.useRef)([]),$d=(0,de.useRef)(0),Ed=(0,de.useRef)(Bd.current),Wd=(0,de.useRef)(0),[Hd,Od]=(0,de.useState)(!1),[zd,Ud]=(0,de.useState)(""),[qd,_d]=(0,de.useState)("info"),[Gd,Yd]=(0,de.useState)(3e3),[Kd]=(0,de.useState)(!0),[Jd]=(0,de.useState)(0),[Xd,Zd]=(0,de.useState)(!1),[Qd,el]=(0,de.useState)(!1),[tl,rl]=(0,de.useState)(!1),[al,nl]=(0,de.useState)(!1),[ol,sl]=(0,de.useState)(!1),[il,cl]=(0,de.useState)(!1),[dl,ll]=(0,de.useState)(!1),[ul,pl]=(0,de.useState)(!1),[ml,gl]=(0,de.useState)(!1),[hl,fl]=(0,de.useState)(!1),[bl,yl]=(0,de.useState)(!1),[xl,vl]=(0,de.useState)(!1),[Sl,Rl]=(0,de.useState)(!1),[wl,kl]=(0,de.useState)(!1),Cl=(0,de.useRef)("video"),jl=(0,de.useRef)("all"),Pl=(0,de.useRef)("all"),Ml=(0,de.useRef)("fullDisplay"),Il=(0,de.useRef)(!1),Al=(0,de.useRef)("media"),Tl=(0,de.useRef)(!0),Fl=(0,de.useRef)(!0),[Dl,Nl]=(0,de.useState)("#83c0e9"),[Ll,Vl]=(0,de.useState)("#ffffff"),Bl=(0,de.useRef)(!1),$l=(0,de.useRef)("Add Text"),El=(0,de.useRef)("top"),[Wl,Hl]=(0,de.useState)("#ffffff"),Ol=(0,de.useRef)("landscape"),zl=(0,de.useRef)(!0),Ul=(0,de.useRef)(!0),[ql,_l]=(0,de.useState)("green"),[Gl,Yl]=(0,de.useState)(!1),[Kl,Jl]=(0,de.useState)("00:00:00"),[Xl,Zl]=(0,de.useState)(!1),[Ql,eu]=(0,de.useState)(!1),tu=(0,de.useRef)(!1),ru=(0,de.useRef)(!1),au=(0,de.useRef)({mainHeight:0,otherHeight:0,mainWidth:0,otherWidth:0}),[nu,ou]=(0,de.useState)(!1),[su,iu]=(0,de.useState)(!1),cu=(0,de.useRef)(!1),du=(0,de.useRef)(!1),lu=(0,de.useRef)(!1),uu=(0,de.useRef)(!1),pu=(0,de.useRef)(!1),mu=(0,de.useRef)(null),gu=(0,de.useRef)(null),hu=(0,de.useRef)(null),fu=(0,de.useRef)(null),bu=(0,de.useRef)({}),yu=(0,de.useRef)({}),xu=(0,de.useRef)({}),vu=(0,de.useRef)(null),Su=(0,de.useRef)(0),Ru=(0,de.useRef)(null),wu=(0,de.useRef)([]),ku=(0,de.useRef)([]),Cu=(0,de.useRef)(s&&o?.polls?o.polls:[]),ju=(0,de.useRef)(null),[Pu,Mu]=(0,de.useState)(!1),Iu=(0,de.useRef)(null),Au=(0,de.useRef)([]),Tu=(0,de.useRef)(!1),Fu=(0,de.useRef)(!1),Du=(0,de.useRef)(!1),Nu=(0,de.useRef)(""),Lu=(0,de.useRef)(""),Vu=(0,de.useRef)(null),Bu=(0,de.useRef)(null),$u=(0,de.useRef)(!1),Eu=(0,de.useRef)(null),Wu=(0,de.useRef)(!1),Hu=(0,de.useRef)(!1),Ou=(0,de.useRef)(null),zu=(0,de.useRef)(null),Uu=(0,de.useRef)(!1),qu=(0,de.useRef)(!1),[_u,Gu]=(0,de.useState)(!1),Yu=(0,de.useRef)(!1),Ku=(0,de.useRef)(s&&o?.breakoutRooms?o.breakoutRooms:[]),Ju=(0,de.useRef)(0),Xu=(0,de.useRef)(!1),Zu=(0,de.useRef)(!1),Qu=(0,de.useRef)(!1),ep=(0,de.useRef)(-1),tp=(0,de.useRef)([]),rp=(0,de.useRef)(0),ap=(0,de.useRef)(-1),[np,op]=(0,de.useState)(!1),sp=(0,de.useRef)(s&&o?.whiteboardUsers?o.whiteboardUsers:[]),ip=(0,de.useRef)(null),cp=(0,de.useRef)(!1),dp=(0,de.useRef)(!1),lp=(0,de.useRef)(!1),up=(0,de.useRef)(we.current),[pp,mp]=(0,de.useState)(!1),[gp,hp]=(0,de.useState)(!1),fp=(0,de.useRef)([]),bp=(0,de.useRef)(!0),yp=(0,de.useRef)([]),xp=(0,de.useRef)([]),vp=(0,de.useRef)(null),Sp=(0,de.useRef)(null),Rp=(0,de.useRef)(null),wp=(0,de.useRef)(null),kp=(0,de.useRef)(!1),Cp=(0,de.useRef)(null),[jp,Pp]=(0,de.useState)(!1),Mp=e=>{yd.current=e},Ip=e=>{xd.current=e},Ap=e=>{vd.current=e},Tp=e=>{Rd(e)},Fp=e=>{wd.current=e},Dp=e=>{kd.current=e},Np=e=>{Cd.current=e},Lp=e=>{jd.current=e},Vp=e=>{Pd.current=e},Bp=e=>{Md.current=e},$p=e=>{Id.current=e},Ep=e=>{Ad.current=e},Wp=e=>{Td.current=e},Hp=e=>{Nd.current=e},Op=e=>{Fd.current=e},zp=e=>{Dd.current=e,Ld.current=e,Nd.current=e.length},Up=e=>{$d.current=e},qp=e=>{Vd.current=e},_p=e=>{Bd.current=e,Ed.current=e,$d.current=e.length},Gp=e=>{Wd.current=e},Yp=e=>{Zd(e)},Kp=e=>{el(e),1==e?Bo(!1):1==Ul.current&&1==zl.current&&1==Bt.current&&jm(!0)},Jp=e=>{rl(e)},Xp=e=>{nl(e)},Zp=e=>{sl(e)},Qp=e=>{cl(e)},em=e=>{ll(e)},tm=e=>{pl(e)},rm=e=>{gl(e)},am=e=>{fl(e),0==e&&Tp(!1)},nm=e=>{yl(e)},om=e=>{vl(e)},sm=e=>{kl(e)},im=e=>{Rl(e)},cm=e=>{Cl.current=e,Ul.current=!1},dm=e=>{jl.current=e,Ul.current=!1},lm=e=>{Pl.current=e,Ul.current=!1},um=e=>{Ml.current=e,Ul.current=!1},pm=e=>{Il.current=e,Ul.current=!1},mm=e=>{Al.current=e,Ul.current=!1},gm=e=>{Tl.current=e,Ul.current=!1},hm=e=>{Bl.current=e,Ul.current=!1},fm=e=>{$l.current=e,Ul.current=!1},bm=e=>{El.current=e,Ul.current=!1},ym=e=>{Hl(e),Ul.current=!1},xm=e=>{Fl.current=e,Ul.current=!1},vm=e=>{Nl(e),Ul.current=!1},Sm=e=>{Vl(e),Ul.current=!1},Rm=e=>{Ol.current=e,Ul.current=!1},wm=e=>{zl.current=e},km=e=>{Ul.current=e},Cm=e=>{_l(e)},jm=e=>{Yl(e)},Pm=e=>{Jl(e)},Mm=e=>{Zl(e)},Im=e=>{eu(e)},Am=e=>{tu.current=e,oh(e)},Tm=e=>{ru.current=e,ah(e)},Fm=e=>{au.current=e},Dm=e=>{ou(e)},Nm=e=>{iu(e)},Lm=async()=>"granted",Vm=async()=>"granted",Bm=e=>{cu.current=e},$m=e=>{du.current=e},Em=e=>{lu.current=e},Wm=e=>{uu.current=e},Hm=e=>{pu.current=e},Om=e=>{mu.current=e},zm=e=>{gu.current=e},Um=e=>{hu.current=e},qm=e=>{fu.current=e},_m=e=>{bu.current=e},Gm=e=>{yu.current=e},Ym=e=>{xu.current=e},Km=e=>{vu.current=e},Jm=e=>{Su.current=e},Xm=e=>{Ru.current=e},Zm=e=>{wu.current=e},Qm=e=>{ku.current=e},eg=e=>{Cu.current=e},tg=e=>{ju.current=e},rg=e=>{Mu(e)},ag=e=>{Iu.current=e},ng=e=>{Au.current=e},og=e=>{Tu.current=e},sg=e=>{Fu.current=e},ig=e=>{Du.current=e},cg=e=>{Nu.current=e},dg=e=>{Lu.current=e},lg=e=>{Vu.current=e},ug=e=>{Bu.current=e},pg=e=>{$u.current=e},mg=e=>{Eu.current=e},gg=e=>{Wu.current=e},hg=e=>{Hu.current=e},fg=e=>{Ou.current=e},bg=e=>{zu.current=e},yg=e=>{Uu.current=e},xg=e=>{qu.current=e},vg=e=>{Gu(e)},Sg=e=>{Yu.current=e},Rg=e=>{Ku.current=e},wg=e=>{Ju.current=e},kg=e=>{Xu.current=e},Cg=e=>{Zu.current=e},jg=e=>{Qu.current=e},Pg=e=>{ep.current=e},Mg=e=>{tp.current=e},Ig=e=>{rp.current=e},Ag=e=>{ap.current=e},Tg=e=>{op(e)},Fg=e=>{sp.current=e},Dg=e=>{ip.current=e},Ng=e=>{cp.current=e},Lg=e=>{dp.current=e},Vg=e=>{lp.current=e},Bg=e=>{up.current=e},$g=e=>{mp(e)},Eg=e=>{hp(e)},Wg=e=>{fp.current=e},Hg=e=>{bp.current=e},Og=e=>{yp.current=e},zg=e=>{xp.current=e},Ug=e=>{vp.current=e},qg=e=>{Sp.current=e},_g=e=>{Rp.current=e},Gg=e=>{wp.current=e},Yg=e=>{kp.current=e},Kg=e=>{Cp.current=e},Jg=e=>{Pp(e)};function Xg(){return window.matchMedia("(orientation: portrait)").matches?"portrait":"landscape"}const Zg=()=>{try{null!==c&&(c={...eh(),...Qg()},d&&d(c))}catch{}return{...eh(),...Qg()}},Qg=()=>({updateMiniCardsGrid:_a,mixStreams:Ga,dispStreams:Ya,stopShareScreen:Ka,checkScreenShare:Ja,startShareScreen:Xa,requestScreenShare:Za,reorderStreams:Qa,prepopulateUserMedia:mn,getVideos:gn,rePort:hn,trigger:fn,consumerResume:B,connectSendTransport:Wn,connectSendTransportAudio:w,connectSendTransportVideo:vn,connectSendTransportScreen:Sn,processConsumerTransports:Rn,resumePauseStreams:wn,readjust:kn,checkGrid:Cn,getEstimate:jn,calculateRowsAndColumns:Pn,addVideosGrid:$,onScreenChanges:In,sleep:An,changeVids:Tn,compareActiveNames:Fn,compareScreenStates:Dn,createSendTransport:Nn,resumeSendTransportAudio:Ln,receiveAllPipedTransports:Vn,disconnectSendTransportVideo:Bn,disconnectSendTransportAudio:$n,disconnectSendTransportScreen:En,getPipedProducersAlt:On,signalNewConsumerTransport:y,connectRecvTransport:zn,reUpdateInter:Un,updateParticipantAudioDecibels:qn,closeAndResize:_n,autoAdjust:Gn,switchUserVideoAlt:Yn,switchUserVideo:Kn,switchUserAudio:Jn,getDomains:Io,formatNumber:Zn,connectIps:Qn,connectLocalIps:S,createDeviceClient:Na,captureCanvasStream:Uo,resumePauseAudioStreams:qo,processConsumerTransportsAudio:_o,checkPermission:Oa,streamSuccessVideo:$a,streamSuccessAudio:Ea,streamSuccessScreen:Wa,streamSuccessAudioSwitch:Ha,clickVideo:La,clickAudio:Va,clickScreenShare:Ba,requestPermissionCamera:Lm,requestPermissionAudio:Vm,getMediaDevicesList:uh,getParticipantMedia:ph}),eh=()=>({localUIMode:H.current,roomName:K.current,member:J.current,adminPasscode:X.current,youAreCoHost:te.current,youAreHost:re.current,islevel:Z.current,confirmedToRecord:ae.current,meetingDisplayType:ne.current,meetingVideoOptimized:oe.current,eventType:se.current,participants:he.current,filteredParticipants:fe.current,participantsCounter:be.current,participantsFilter:ye.current,consume_sockets:xe.current,rtpCapabilities:ve.current,roomRecvIPs:Se.current,meetingRoomParams:Re.current,itemPageLimit:we.current,audioOnlyRoom:ke.current,addForBasic:je.current,screenPageLimit:Pe.current,shareScreenStarted:Me.current,shared:Ie.current,targetOrientation:Ae.current,targetResolution:Te.current,targetResolutionHost:Fe.current,vidCons:De.current,frameRate:Ne.current,hParams:Le.current,vParams:Ve.current,screenParams:Ee.current,aParams:We.current,recordingAudioPausesLimit:Oe.current,recordingAudioPausesCount:ze.current,recordingAudioSupport:Ue.current,recordingAudioPeopleLimit:qe.current,recordingAudioParticipantsTimeLimit:_e.current,recordingVideoPausesCount:Ge.current,recordingVideoPausesLimit:Ye.current,recordingVideoSupport:Ke.current,recordingVideoPeopleLimit:Je.current,recordingVideoParticipantsTimeLimit:Xe.current,recordingAllParticipantsSupport:Ze.current,recordingVideoParticipantsSupport:Qe.current,recordingAllParticipantsFullRoomSupport:et.current,recordingVideoParticipantsFullRoomSupport:tt.current,recordingPreferredOrientation:rt.current,recordingSupportForOtherOrientation:at.current,recordingMultiFormatsSupport:nt.current,userRecordingParams:ot.current,canRecord:st.current,startReport:it.current,endReport:ct.current,recordStartTime:lt.current,recordElapsedTime:ut.current,isTimerRunning:pt.current,canPauseResume:mt.current,recordChangeSeconds:gt.current,pauseLimit:ft.current,pauseRecordCount:bt.current,canLaunchRecord:yt.current,stopLaunchRecord:xt.current,participantsAll:uo.current,firstAll:vt.current,updateMainWindow:St.current,first_round:Rt.current,landScaped:wt.current,lock_screen:kt.current,screenId:Ct.current,allVideoStreams:jt.current,newLimitedStreams:Pt.current,newLimitedStreamsIDs:Mt.current,activeSounds:It.current,screenShareIDStream:At.current,screenShareNameStream:Tt.current,adminIDStream:Ft.current,adminNameStream:Dt.current,youYouStream:Nt.current,youYouStreamIDs:Lt.current,localStream:Vt.current,recordStarted:Bt.current,recordResumed:$t.current,recordPaused:Et.current,recordStopped:Wt.current,adminRestrictSetting:Ht.current,videoRequestState:Ot.current,videoRequestTime:zt.current,videoAction:Ut.current,localStreamVideo:qt.current,userDefaultVideoInputDevice:_t.current,currentFacingMode:Gt.current,prevFacingMode:Yt.current,defVideoID:Kt.current,allowed:Jt.current,dispActiveNames:Xt.current,p_dispActiveNames:Zt.current,activeNames:Qt.current,prevActiveNames:er.current,p_activeNames:tr.current,membersReceived:rr.current,deferScreenReceived:ar.current,hostFirstSwitch:nr.current,micAction:or.current,screenAction:sr.current,chatAction:ir.current,audioRequestState:cr.current,screenRequestState:dr.current,chatRequestState:lr.current,audioRequestTime:ur.current,screenRequestTime:pr.current,chatRequestTime:mr.current,updateRequestIntervalSeconds:gr.current,oldSoundIds:hr.current,hostLabel:br.current,mainScreenFilled:yr.current,localStreamScreen:xr.current,screenAlreadyOn:vr,chatAlreadyOn:Rr,redirectURL:kr.current,oldAllStreams:Cr.current,adminVidID:jr.current,streamNames:Pr.current,non_alVideoStreams:Mr.current,sortAudioLoudness:Ir.current,audioDecibels:Ar.current,mixed_alVideoStreams:Tr.current,non_alVideoStreams_muted:Fr.current,paginatedStreams:Dr.current,localStreamAudio:Nr.current,defAudioID:Lr.current,userDefaultAudioInputDevice:Vr.current,userDefaultAudioOutputDevice:Br.current,prevAudioInputDevice:$r.current,prevVideoInputDevice:Er.current,audioPaused:Wr.current,mainScreenPerson:Hr.current,adminOnMainScreen:Or.current,screenStates:zr.current,prevScreenStates:Ur.current,updateDateState:qr.current,lastUpdate:_r.current,nForReadjustRecord:Gr.current,fixedPageLimit:Yr.current,removeAltGrid:Kr.current,nForReadjust:Jr.current,lastReorderTime:Qr.current,reorderInterval:Xr.current,fastReorderInterval:Zr.current,audStreamNames:ea.current,currentUserPage:ta.current,mainHeightWidth:ra,prevMainHeightWidth:na.current,prevDoPaginate:oa.current,doPaginate:sa.current,shareEnded:ia.current,lStreams:ca.current,chatRefStreams:da.current,controlHeight:pa,isWideScreen:ba.current,isMediumScreen:ya.current,isSmallScreen:xa.current,addGrid:va.current,addAltGrid:Sa.current,gridRows:Ra,gridCols:ka,altGridRows:ja,altGridCols:Ma,numberPages:Aa,currentStreams:Da,showMiniView:za,nStream:tn.current,defer_receive:rn.current,allAudioStreams:an.current,screenProducer:on.current,remoteScreenStream:nn.current,gotAllVids:cn.current,paginationHeightWidth:dn.current,paginationDirection:ln.current,gridSizes:un.current,screenForceFullDisplay:pn.current,mainGridStream:bn.current,otherGridStreams:yn,audioOnlyStreams:eo.current,videoInputs:to,audioInputs:ao,meetingProgressTime:so,meetingElapsedTime:co.current,ref_participants:lo.current,messages:yd.current,startDirectMessage:xd.current,directMessageDetails:vd.current,coHost:Q.current,coHostResponsibility:ee.current,audioSetting:wd.current,videoSetting:kd.current,screenshareSetting:Cd.current,chatSetting:jd.current,autoWave:Md.current,forceFullDisplay:Id.current,prevForceFullDisplay:Ad.current,prevMeetingDisplayType:Td.current,waitingRoomFilter:Fd.current,waitingRoomList:Dd.current,waitingRoomCounter:Nd.current,filteredWaitingRoomList:Ld.current,requestFilter:Vd.current,requestList:Bd.current,requestCounter:$d.current,filteredRequestList:Ed.current,totalReqWait:Wd.current,alertVisible:Hd,alertMessage:zd,alertType:qd,alertDuration:Gd,progressTimerVisible:Kd,progressTimerValue:Jd,isMenuModalVisible:Xd,isRecordingModalVisible:Qd,isSettingsModalVisible:tl,isRequestsModalVisible:al,isWaitingModalVisible:ol,isCoHostModalVisible:il,isMediaSettingsModalVisible:dl,isDisplaySettingsModalVisible:ul,isParticipantsModalVisible:ml,isMessagesModalVisible:hl,isConfirmExitModalVisible:bl,isConfirmHereModalVisible:xl,isLoadingModalVisible:wl,recordingMediaOptions:Cl.current,recordingAudioOptions:jl.current,recordingVideoOptions:Pl.current,recordingVideoType:Ml.current,recordingVideoOptimized:Il.current,recordingDisplayType:Al.current,recordingAddHLS:Tl.current,recordingAddText:Bl.current,recordingCustomText:$l.current,recordingCustomTextPosition:El.current,recordingCustomTextColor:Wl,recordingNameTags:Fl.current,recordingBackgroundColor:Dl,recordingNameTagsColor:Ll,recordingOrientationVideo:Ol.current,clearedToResume:zl.current,clearedToRecord:Ul.current,recordState:ql,showRecordButtons:Gl,recordingProgressTime:Kl,audioSwitching:Xl,videoSwitching:Ql,videoAlreadyOn:tu.current,audioAlreadyOn:ru.current,componentSizes:au.current,hasCameraPermission:nu,hasAudioPermission:su,transportCreated:cu.current,localTransportCreated:du.current,transportCreatedVideo:lu.current,transportCreatedAudio:uu.current,transportCreatedScreen:pu.current,producerTransport:mu.current,localProducerTransport:gu.current,videoProducer:hu.current,localVideoProducer:fu.current,params:bu.current,videoParams:yu.current,audioParams:xu.current,audioProducer:vu.current,audioLevel:Su.current,localAudioProducer:Ru.current,consumerTransports:wu.current,consumingTransports:ku.current,polls:Cu.current,poll:ju.current,isPollModalVisible:Pu,customImage:Nu.current,selectedImage:Lu.current,segmentVideo:Vu.current,selfieSegmentation:Bu.current,pauseSegmentation:$u.current,processedStream:Eu.current,keepBackground:Wu.current,backgroundHasChanged:Hu.current,virtualStream:Ou.current,mainCanvas:zu.current,prevKeepBackground:Uu.current,appliedBackground:qu.current,isBackgroundModalVisible:_u,autoClickBackground:Yu.current,breakoutRooms:Ku.current,currentRoomIndex:Ju.current,canStartBreakout:Xu.current,breakOutRoomStarted:Zu.current,breakOutRoomEnded:Qu.current,hostNewRoom:ep.current,limitedBreakRoom:tp.current,mainRoomsLength:rp.current,memberRoom:ap.current,isBreakoutRoomsModalVisible:np,whiteboardUsers:sp.current,currentWhiteboardIndex:ip.current,canStartWhiteboard:cp.current,whiteboardStarted:dp.current,whiteboardEnded:lp.current,whiteboardLimit:up.current,isWhiteboardModalVisible:pp,isConfigureWhiteboardModalVisible:gp,shapes:fp.current,useImageBackground:bp.current,redoStack:yp.current,undoStack:xp.current,canvasStream:vp.current,canvasWhiteboard:Sp.current,canvasScreenboard:Rp.current,processedScreenStream:wp.current,annotateScreenStream:kp.current,mainScreenCanvas:Cp.current,isScreenboardModalVisible:jp,permissionConfig:Iu.current,panelists:Au.current,panelistsFocused:Tu.current,muteOthersMic:Fu.current,muteOthersCamera:Du.current,validated:E,device:q.current,socket:O.current,localSocket:z.current,checkMediaPermission:!1,onWeb:!0,mediaDevices:ua,updateRoomName:Po,updateMember:Mo,updateAdminPasscode:To,updateYouAreCoHost:Lo,updateYouAreHost:Vo,updateIslevel:Fo,updateCoHost:Do,updateCoHostResponsibility:No,updateConfirmedToRecord:Bo,updateMeetingDisplayType:Ho,updateMeetingVideoOptimized:Oo,updateEventType:zo,updateParticipants:Yo,updateParticipantsCounter:Jo,updateParticipantsFilter:Zo,updateConsume_sockets:Vs,updateRtpCapabilities:Bs,updateRoomRecvIPs:$s,updateMeetingRoomParams:Es,updateItemPageLimit:Ws,updateAudioOnlyRoom:Hs,updateAddForBasic:Os,updateScreenPageLimit:zs,updateShareScreenStarted:Us,updateShared:qs,updateTargetOrientation:_s,updateTargetResolution:Gs,updateTargetResolutionHost:Ys,updateVidCons:Js,updateFrameRate:Xs,updateHParams:Zs,updateVParams:Qs,updateScreenParams:ei,updateAParams:ti,updateRecordingAudioPausesLimit:Qo,updateRecordingAudioPausesCount:es,updateRecordingAudioSupport:ts,updateRecordingAudioPeopleLimit:rs,updateRecordingAudioParticipantsTimeLimit:as,updateRecordingVideoPausesCount:ns,updateRecordingVideoPausesLimit:os,updateRecordingVideoSupport:ss,updateRecordingVideoPeopleLimit:is,updateRecordingVideoParticipantsTimeLimit:cs,updateRecordingAllParticipantsSupport:ds,updateRecordingVideoParticipantsSupport:ls,updateRecordingAllParticipantsFullRoomSupport:us,updateRecordingVideoParticipantsFullRoomSupport:ps,updateRecordingPreferredOrientation:ms,updateRecordingSupportForOtherOrientation:gs,updateRecordingMultiFormatsSupport:hs,updateUserRecordingParams:fs,updateCanRecord:ys,updateStartReport:Rs,updateEndReport:ws,updateRecordTimerInterval:Cs,updateRecordStartTime:js,updateRecordElapsedTime:Ps,updateIsTimerRunning:Ms,updateCanPauseResume:Is,updateRecordChangeSeconds:As,updatePauseLimit:Ts,updatePauseRecordCount:Fs,updateCanLaunchRecord:Ds,updateStopLaunchRecord:Ns,updateParticipantsAll:Ls,updateFirstAll:ri,updateUpdateMainWindow:ai,updateFirst_round:ni,updateLandScaped:si,updateLock_screen:ii,updateScreenId:ci,updateAllVideoStreams:di,updateNewLimitedStreams:li,updateNewLimitedStreamsIDs:ui,updateActiveSounds:pi,updateScreenShareIDStream:mi,updateScreenShareNameStream:gi,updateAdminIDStream:hi,updateAdminNameStream:fi,updateYouYouStream:bi,updateYouYouStreamIDs:yi,updateLocalStream:xi,updateRecordStarted:vi,updateRecordResumed:Si,updateRecordPaused:Ri,updateRecordStopped:wi,updateAdminRestrictSetting:ki,updateVideoRequestState:Ci,updateVideoRequestTime:ji,updateVideoAction:Pi,updateLocalStreamVideo:Mi,updateUserDefaultVideoInputDevice:Ii,updateCurrentFacingMode:Ai,updateRef_participants:bd,updateDefVideoID:Fi,updateAllowed:Di,updateDispActiveNames:Ni,updateP_dispActiveNames:Li,updateActiveNames:Vi,updatePrevActiveNames:Bi,updateP_activeNames:$i,updateMembersReceived:Ei,updateDeferScreenReceived:Wi,updateHostFirstSwitch:Hi,updateMicAction:Oi,updateScreenAction:zi,updateChatAction:Ui,updateAudioRequestState:qi,updateScreenRequestState:_i,updateChatRequestState:Gi,updateAudioRequestTime:Yi,updateScreenRequestTime:Ki,updateChatRequestTime:Ji,updateOldSoundIds:Xi,updatehostLabel:Zi,updateMainScreenFilled:Qi,updateLocalStreamScreen:ec,updateScreenAlreadyOn:tc,updateChatAlreadyOn:rc,updateRedirectURL:ac,updateOldAllStreams:nc,updateAdminVidID:oc,updateStreamNames:sc,updateNon_alVideoStreams:ic,updateSortAudioLoudness:cc,updateAudioDecibels:dc,updateMixed_alVideoStreams:lc,updateNon_alVideoStreams_muted:uc,updatePaginatedStreams:pc,updateLocalStreamAudio:mc,updateDefAudioID:gc,updateUserDefaultAudioInputDevice:hc,updateUserDefaultAudioOutputDevice:fc,updatePrevAudioInputDevice:bc,updatePrevVideoInputDevice:yc,updateAudioPaused:xc,updateMainScreenPerson:vc,updateAdminOnMainScreen:Sc,updateScreenStates:Rc,updatePrevScreenStates:wc,updateUpdateDateState:kc,updateLastUpdate:Cc,updateNForReadjustRecord:jc,updateFixedPageLimit:Pc,updateRemoveAltGrid:Mc,updateNForReadjust:Ic,updateLastReorderTime:Ac,updateAudStreamNames:Tc,updateCurrentUserPage:Fc,updatePrevFacingMode:Ti,updateMainHeightWidth:Dc,updatePrevMainHeightWidth:Nc,updatePrevDoPaginate:Lc,updateDoPaginate:Vc,updateShareEnded:Bc,updateLStreams:$c,updateChatRefStreams:Ec,updateControlHeight:Wc,updateIsWideScreen:Hc,updateIsMediumScreen:Oc,updateIsSmallScreen:zc,updateAddGrid:Uc,updateAddAltGrid:qc,updateGridRows:_c,updateGridCols:Gc,updateAltGridRows:Yc,updateAltGridCols:Kc,updateNumberPages:Jc,updateCurrentStreams:Xc,updateShowMiniView:Zc,updateNStream:Qc,updateDefer_receive:ed,updateAllAudioStreams:td,updateRemoteScreenStream:rd,updateScreenProducer:ad,updateLocalScreenProducer:nd,updateGotAllVids:od,updatePaginationHeightWidth:sd,updatePaginationDirection:id,updateGridSizes:cd,updateScreenForceFullDisplay:dd,updateMainGridStream:ld,updateOtherGridStreams:ud,updateAudioOnlyStreams:pd,updateVideoInputs:md,updateAudioInputs:gd,updateMeetingProgressTime:hd,updateMeetingElapsedTime:fd,updateMessages:Mp,updateStartDirectMessage:Ip,updateDirectMessageDetails:Ap,updateShowMessagesBadge:Tp,updateAudioSetting:Fp,updateVideoSetting:Dp,updateScreenshareSetting:Np,updateChatSetting:Lp,updateDisplayOption:Vp,updateAutoWave:Bp,updateForceFullDisplay:$p,updatePrevForceFullDisplay:Ep,updatePrevMeetingDisplayType:Wp,updateWaitingRoomFilter:Op,updateWaitingRoomList:zp,updateWaitingRoomCounter:Hp,updateRequestFilter:qp,updateRequestList:_p,updateRequestCounter:Up,updateTotalReqWait:Gp,updateIsMenuModalVisible:Yp,updateIsRecordingModalVisible:Kp,updateIsSettingsModalVisible:Jp,updateIsRequestsModalVisible:Xp,updateIsWaitingModalVisible:Zp,updateIsCoHostModalVisible:Qp,updateIsMediaSettingsModalVisible:em,updateIsDisplaySettingsModalVisible:tm,updateIsParticipantsModalVisible:rm,updateIsMessagesModalVisible:am,updateIsConfirmExitModalVisible:nm,updateIsConfirmHereModalVisible:om,updateIsLoadingModalVisible:sm,updateRecordingMediaOptions:cm,updateRecordingAudioOptions:dm,updateRecordingVideoOptions:lm,updateRecordingVideoType:um,updateRecordingVideoOptimized:pm,updateRecordingDisplayType:mm,updateRecordingAddHLS:gm,updateRecordingAddText:hm,updateRecordingCustomText:fm,updateRecordingCustomTextPosition:bm,updateRecordingCustomTextColor:ym,updateRecordingNameTags:xm,updateRecordingBackgroundColor:vm,updateRecordingNameTagsColor:Sm,updateRecordingOrientationVideo:Rm,updateClearedToResume:wm,updateClearedToRecord:km,updateRecordState:Cm,updateShowRecordButtons:jm,updateRecordingProgressTime:Pm,updateAudioSwitching:Mm,updateVideoSwitching:Im,updateVideoAlreadyOn:Am,updateAudioAlreadyOn:Tm,updateComponentSizes:Fm,updateHasCameraPermission:Dm,updateHasAudioPermission:Nm,updateTransportCreated:Bm,updateLocalTransportCreated:$m,updateTransportCreatedVideo:Em,updateTransportCreatedAudio:Wm,updateTransportCreatedScreen:Hm,updateProducerTransport:Om,updateLocalProducerTransport:zm,updateVideoProducer:Um,updateLocalVideoProducer:qm,updateParams:_m,updateVideoParams:Gm,updateAudioParams:Ym,updateAudioProducer:Km,updateAudioLevel:Jm,updateLocalAudioProducer:Xm,updateConsumerTransports:Zm,updateConsumingTransports:Qm,updatePolls:eg,updatePoll:tg,updateIsPollModalVisible:rg,updateCustomImage:cg,updateSelectedImage:dg,updateSegmentVideo:lg,updateSelfieSegmentation:ug,updatePauseSegmentation:pg,updateProcessedStream:mg,updateKeepBackground:gg,updateBackgroundHasChanged:hg,updateVirtualStream:fg,updateMainCanvas:bg,updatePrevKeepBackground:yg,updateAppliedBackground:xg,updateIsBackgroundModalVisible:vg,updateAutoClickBackground:Sg,updateBreakoutRooms:Rg,updateCurrentRoomIndex:wg,updateCanStartBreakout:kg,updateBreakOutRoomStarted:Cg,updateBreakOutRoomEnded:jg,updateHostNewRoom:Pg,updateLimitedBreakRoom:Mg,updateMainRoomsLength:Ig,updateMemberRoom:Ag,updateIsBreakoutRoomsModalVisible:Tg,updateWhiteboardUsers:Fg,updateCurrentWhiteboardIndex:Dg,updateCanStartWhiteboard:Ng,updateWhiteboardStarted:Lg,updateWhiteboardEnded:Vg,updateWhiteboardLimit:Bg,updateIsWhiteboardModalVisible:$g,updateIsConfigureWhiteboardModalVisible:Eg,updateShapes:Wg,updateUseImageBackground:Hg,updateRedoStack:Og,updateUndoStack:zg,updateCanvasStream:Ug,updateCanvasWhiteboard:qg,updateCanvasScreenboard:_g,updateProcessedScreenStream:Gg,updateAnnotateScreenStream:Yg,updateMainScreenCanvas:Kg,updateIsScreenboardModalVisible:Jg,updatePermissionConfig:ag,updatePanelists:ng,updatePanelistsFocused:og,updateMuteOthersMic:sg,updateMuteOthersCamera:ig,checkOrientation:Xg,updateDevice:ho,updateSocket:mo,updateLocalSocket:go,updateValidated:po,showAlert:th,getUpdatedAllParams:Zg,customVideoCard:h,customAudioCard:f,customMiniCard:b}),th=({message:e,type:t,duration:r=3e3})=>{Ud(e),_d(t),Yd(r),Od(!0)},[rh,ah]=(0,de.useState)(!!ru.current&&ru.current),[nh,oh]=(0,de.useState)(!!tu.current&&tu.current),[sh]=(0,de.useState)(!1),ih=[{icon:pe.faShareAlt,active:!0,alternateIcon:pe.faShareAlt,onPress:()=>im(!Sl),activeColor:"black",inActiveColor:"black",show:!0},{customComponent:(0,ce.jsxs)("div",{style:{position:"relative"},children:[(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faComments,size:"lg",color:"black"}),Sd&&(0,ce.jsx)("div",{style:{position:"absolute",top:-2,right:-2,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:(0,ce.jsx)("div",{style:{backgroundColor:"red",borderRadius:12,paddingLeft:4,paddingRight:4,paddingTop:4,paddingBottom:4},children:(0,ce.jsx)("span",{style:{color:"white",fontSize:12,fontWeight:"bold"}})})})]}),onPress:()=>oi({updateIsMessagesModalVisible:am,isMessagesModalVisible:hl}),show:!0},{icon:pe.faSync,active:!0,alternateIcon:pe.faSync,onPress:()=>fr({parameters:{...eh(),...Qg()}}),activeColor:"black",inActiveColor:"black",show:!0},{icon:pe.faVideoSlash,alternateIcon:pe.faVideo,active:nh,onPress:()=>La({parameters:{...eh(),...Qg()}}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faMicrophoneSlash,alternateIcon:pe.faMicrophone,active:rh,onPress:()=>Va({parameters:{...eh(),...Qg()}}),activeColor:"green",inActiveColor:"red",show:!0},{icon:pe.faPhone,active:sh,onPress:()=>la({updateIsConfirmExitModalVisible:nm,isConfirmExitModalVisible:bl}),activeColor:"green",inActiveColor:"red",show:!0}];async function ch({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,isLocal:d=!1}){let l;if(d){const d=await ie({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c,parameters:{imgSrc:i,showAlert:th,updateIsLoadingModalVisible:sm,connectSocket:ma,connectLocalSocket:ga,updateSocket:mo,updateLocalSocket:go,updateValidated:po,updateApiUserName:fo,updateApiToken:bo,updateLink:So,updateRoomName:Po,updateMember:Mo},checkConnect:t.length>0&&!0===r&&!Y.current.includes("mediasfu.com"),localLink:t,joinMediaSFURoom:p});l=await Go({localRoom:d})}else l=await async function(e){const{socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s}=e;try{return await fa({socket:t,roomName:r,islevel:a,member:n,sec:o,apiUserName:s})}catch(e){throw console.log("error",e),new Error("Failed to join the room. Please check your connection and try again.")}}({socket:e,roomName:a,islevel:n,member:o,sec:s,apiUserName:c});async function u(e){try{(!e.roomRecvIPs||e.roomRecvIPs&&0==e.roomRecvIPs.length)&&(e.roomRecvIPs=["none"],""!==Y.current&&Y.current.includes("mediasfu.com")&&!d&&await Vn({community:!0,nsock:Zg().socket,parameters:{...eh(),...Qg()}}));try{Fa({parameters:{...eh(),...Qg(),data:e}})}catch{}if(e.isHost?Fo("2"):"2"!==n&&Fo("1"),e.secureCode&&""!=e.secureCode&&To(e.secureCode),e.rtpCapabilities)try{let t=await Na({rtpCapabilities:e.rtpCapabilities});t&&ho(t)}catch(e){console.log("error Device",e)}}catch(e){console.log("error updateRoomParametersClient",e)}}if(l&&l.success){if(""!==Y.current&&Y.current.includes("mediasfu.com")&&d)return void(U.current=l);""!==Y.current&&Y.current.includes("mediasfu.com")&&!d?U.current?(U.current.recordingParams=l.recordingParams,U.current.meetingRoomParams=l.meetingRoomParams):U.current=l:(U.current=l,Y.current.includes("mediasfu.com")||(U.current.meetingRoomParams=l.meetingRoomParams)),await u(l)}else{if(""!==Y.current&&Y.current.includes("mediasfu.com")&&!d)return void await u(U.current);try{th&&th({message:l.reason,type:"danger",duration:3e3})}catch{}}}async function dh(){am(!1),rm(!1),Zp(!1),Xp(!1),Qp(!1),Jp(!1),tm(!1),em(!1),Yp(!1),im(!1),nm(!1),await async function(e){for(const t of e)try{t[Object.keys(t)[0]].disconnect()}catch(e){console.log(`Error disconnecting socket with IP: ${Object.keys(t)[0]}`,e)}}(xe.current),await(async()=>{const e=me,t=eh();for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[`update${r.charAt(0).toUpperCase()+r.slice(1)}`];if("function"==typeof a)try{a(e[r])}catch{}}})(),hd("00:00:00"),fd(0),Pm("00:00:00"),Ps(0),jm(!1),Eg(!1),$g(!1),Yp(!1),Kp(!1),rg(!1),Tg(!1),vg(!1),sm(!1),om(!1),setTimeout(async function(){po(!1),window.location.reload()},500)}(0,de.useEffect)(()=>{_l(Bt&&!Wt?Et?"yellow":"red":"green")},[Bt,Et,Wt]);const lh=async()=>{await(async()=>{let e=0;if("webinar"==se.current||"conference"==se.current){const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==pa&&Wc(e)}else{const t=window.innerHeight;e=Number((40/t).toFixed(3)),e!==pa&&Wc(e)}const{mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}=(({containerWidthFraction:e=1,containerHeightFraction:t=1,mainSize:r,doStack:a=!0,defaultFraction:n})=>{const o=window.innerWidth*e,s=window.innerHeight*t*n;let i=o>=768;return!i&&o>1.5*s&&(i=!0),Hc(i),a?i?{mainHeight:s,otherHeight:s,mainWidth:Math.floor(r/100*o),otherWidth:Math.floor((100-r)/100*o)}:{mainHeight:Math.floor(r/100*s),otherHeight:Math.floor((100-r)/100*s),mainWidth:o,otherWidth:o}:{mainHeight:s,otherHeight:s,mainWidth:o,otherWidth:o}})({containerWidthFraction:1,containerHeightFraction:1,mainSize:ra,doStack:!0,defaultFraction:"webinar"==se.current||"conference"==se.current?1-e:1});Fm({mainHeight:t,otherHeight:r,mainWidth:a,otherWidth:n}),"portrait"===Xg()&&(ba.current||(Me.current||Ie.current)&&dd(!0)),await mn({name:br.current,parameters:{...eh(),...Qg()}}),await In({changed:!0,parameters:{...eh(),...Qg()}})})()},uh=async e=>{try{return(await navigator.mediaDevices.enumerateDevices()).filter(t=>t.kind===e)}catch(e){return console.error("Error getting media devices:",e),[]}},ph=async({id:e,name:t,kind:r})=>{try{const a=he.current||[];let n;if(e&&(n=a.find(t=>t.id===e)),n||(n=a.find(e=>e.name===t)),n){if("video"===r){const e=jt.current?.find(e=>e.producerId===n.videoID);return e?e.stream:null}{const e=an.current?.find(e=>e.producerId===n.audioID);return e?e.stream:null}}return null}catch(e){return console.error("Error getting participant media:",e),null}};async function mh(e,a,n=!1){const o=O.current,s=r&&z.current&&z.current.id?z.current:o;if(o.id){n||(o.on("disconnect",async()=>{await Wo({showAlert:th,redirectURL:kr.current,onWeb:!0,updateValidated:po}),tu.current&&await La({parameters:{...eh(),...Qg()}}),ru.current&&await Va({parameters:{...eh(),...Qg()}}),await dh()}),o.on("allMembers",async t=>{t&&await $o({apiUserName:e,apiKey:"",apiToken:a,members:t.members,requestss:t.requests?t.requests:Bd.current,coHoste:t.coHost?t.coHost:Q.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:ee.current,parameters:{...eh(),...Qg()},consume_sockets:xe.current})}),o.on("allMembersRest",async t=>{t&&await Eo({apiUserName:e,apiKey:"",members:t.members,apiToken:a,settings:t.settings,coHoste:t.coHost?t.coHost:Q.current,coHostRes:t.coHostResponsibilities?t.coHostResponsibilities:ee.current,parameters:{...eh(),...Qg()},consume_sockets:xe.current})}),o.on("producer-media-paused",async({producerId:e,kind:t,name:r})=>{await yo({producerId:e,kind:t,name:r,parameters:{...eh(),...Qg()}})}),o.on("producer-media-resumed",async({kind:e,name:t})=>{await xo({kind:e,name:t,parameters:{...eh(),...Qg()}})}),o.on("producer-media-closed",async({producerId:e,kind:t})=>{e&&t&&await vo({producerId:e,kind:t,parameters:{...eh(),...Qg()}})}),o.on("meetingEnded",async function(){await Ro({showAlert:th,redirectURL:kr.current,onWeb:!0,eventType:se.current,updateValidated:po}),tu.current&&await La({parameters:{...eh(),...Qg()}}),ru.current&&await Va({parameters:{...eh(),...Qg()}}),await dh()}),o.on("disconnectUserSelf",async function(){await wo({socket:o,member:J.current,roomName:K.current})}),o.on("receiveMessage",async({message:e})=>{await ko({message:e,messages:yd.current,participantsAll:he.current,member:J.current,eventType:se.current,islevel:Z.current,coHost:Q.current,updateMessages:Mp,updateShowMessagesBadge:Tp})}),o.on("meetingTimeRemaining",async({timeRemaining:e})=>{await Co({timeRemaining:e,showAlert:th,eventType:se.current})}),o.on("meetingStillThere",async()=>{await jo({updateIsConfirmHereModalVisible:om})}),o.on("updateConsumingDomains",async({domains:t,alt_domains:r})=>{await Ao({domains:t,alt_domains:r,apiUserName:e,apiKey:"",apiToken:a,parameters:{...eh(),...Qg()}})})),""!==t&&o&&!n&&await ch({socket:o,roomName:K.current,islevel:Z.current,member:J.current,sec:a,apiUserName:e,isLocal:!0});let i=!1;if(i=!(!z.current||z.current.id==s.id),!n&&i)return await mh(e,a,!0),await An({ms:1e3}),sm(!1),o;if(""!==Y.current&&Y.current.includes("mediasfu.com")){const t=G.current;await ch({socket:r&&s&&s.id?s:o,roomName:K.current,islevel:Z.current,member:J.current,sec:t,apiUserName:e})}return await Xn({socket:o,roomName:K.current,updateMessages:Mp}),n||await mn({name:br.current,parameters:{...eh(),...Qg()}}),o}return null}return(0,de.useEffect)(()=>(window.addEventListener("resize",lh),window.addEventListener("orientationchange",lh),()=>{window.removeEventListener("resize",lh),window.removeEventListener("orientationchange",lh)}),[lh]),(0,de.useEffect)(()=>{(kt||Ie)&&Rt||mn({name:br.current,parameters:{...eh(),...Qg()}})},[ra]),(0,de.useEffect)(()=>{di([{producerId:"youyou",stream:void 0,id:"youyou",name:"youyou"}]),sc([{id:"youyou",name:"youyou",producerId:""}]);const e=async()=>{const e=await mh(_.current,G.current);mo(e)};if(E){try{!1===H.current?(sm(!0),e()):sm(!1)}catch(e){console.log("error connectAndaAddSocketMethods",e)}oo({startTime:Date.now()/1e3,parameters:{...eh(),...Qg()}});try{null!==c&&(c={...eh(),...Qg()},d&&d(c))}catch{console.log("error updateSourceParameters")}}},[E]),(0,ce.jsxs)("div",{className:"MediaSFU",style:{height:"100vh",width:"100vw",maxWidth:"100vw",maxHeight:"100vh",overflow:"hidden",...x},children:[g?le().createElement(g,{parameters:{...eh(),...Qg()}}):E?l?(0,ce.jsx)(R,{children:(0,ce.jsx)(k,{backgroundColor:"rgba(217, 227, 234, 0.99)",defaultFraction:1-pa,updateIsWideScreen:Hc,updateIsMediumScreen:Oc,updateIsSmallScreen:zc,showControls:"webinar"==se.current||"conference"==se.current,children:(0,ce.jsx)(C,{doStack:!0,mainSize:ra,updateComponentSizes:Fm,defaultFraction:1-pa,componentSizes:au.current,showControls:"webinar"==se.current||"conference"==se.current,children:(0,ce.jsxs)(j,{height:au.current.otherHeight,width:au.current.otherWidth,backgroundColor:"rgba(217, 227, 234, 0.99)",showAspect:100!=ra,timeBackgroundColor:ql,showTimer:0==ra,meetingProgressTime:so,children:[(0,ce.jsx)(M,{componentsToRender:eo.current?eo.current:[]}),(0,ce.jsx)(I,{buttons:ih,position:"right",location:"bottom",direction:"vertical",showAspect:"chat"==se.current}),(0,ce.jsx)(P,{customWidth:un.current.gridWidth,customHeight:un.current.gridHeight,rows:Ra,columns:ka,componentsToRender:yn[0],backgroundColor:"rgba(217, 227, 234, 0.99)"})]})})})}):(0,ce.jsx)(ce.Fragment,{}):(0,ce.jsx)(V,{parameters:{imgSrc:i,showAlert:th,updateIsLoadingModalVisible:sm,connectSocket:ma,connectLocalSocket:ga,updateSocket:mo,updateLocalSocket:go,updateValidated:po,updateApiUserName:fo,updateApiToken:bo,updateLink:So,updateRoomName:Po,updateMember:Mo},credentials:a,localLink:t,connectMediaSFU:r,returnUI:l,noUIPreJoinOptions:u,joinMediaSFURoom:p,createMediaSFURoom:m}),l&&!g&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(F,{backgroundColor:"webinar"==se.current||"conference"==se.current?"#f5f5f5":"rgba(255, 255, 255, 0.25)",isMessagesModalVisible:hl,onMessagesClose:()=>am(!1),messages:yd.current,eventType:se.current,member:J.current,islevel:Z.current,coHostResponsibility:ee.current,coHost:Q.current,startDirectMessage:xd.current,directMessageDetails:vd.current,updateStartDirectMessage:Ip,updateDirectMessageDetails:Ap,showAlert:th,roomName:K.current,socket:O.current,chatSetting:jd.current}),(0,ce.jsx)(D,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmExitModalVisible:bl,onConfirmExitClose:()=>nm(!1),member:J.current,roomName:K.current,socket:O.current,islevel:Z.current}),(0,ce.jsx)(N,{backgroundColor:"rgba(181, 233, 229, 0.97)",isConfirmHereModalVisible:xl,onConfirmHereClose:()=>om(!1),member:J.current,roomName:K.current,socket:O.current}),(0,ce.jsx)(L,{isShareEventModalVisible:Sl,onShareEventClose:()=>im(!1),roomName:K.current,islevel:Z.current,adminPasscode:X.current,eventType:se.current,localLink:t}),(0,ce.jsx)(T,{visible:Hd,message:zd,type:qd,duration:Gd,onHide:()=>Od(!1),textColor:"#ffffff"}),(0,ce.jsx)(A,{isVisible:wl,backgroundColor:"rgba(217, 227, 234, 0.99)",displayColor:"black"})]})]})},hi=({member:e,coHost:t="",host:r,forChatBroadcast:a=!1})=>{const n=[];let o=["Alice","Bob","Charlie","David","Eve","Frank","Grace","Hank","Ivy","Jack","Kate","Liam","Mia","Nina","Olivia","Pete","Quinn","Rachel","Steve","Tina","Ursula","Vince","Wendy","Xander","Yvonne","Zack"];a&&o.splice(2),o.includes(e)||o.unshift(e),o.includes(t)||a||o.unshift(t),o.includes(r)||o.unshift(r),a&&o.splice(2),o=o.filter(e=>e.length>1);const s=[...o];for(let e=s.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[s[e],s[t]]=[s[t],s[e]]}let i=!1;for(let e=0;e<s.length;e++){const t=s[e],o=i?"1":t===r?"2":"1",c=!!a||Math.random()<.5;"2"===o&&(i=!0),n.push({name:t,islevel:o,muted:c,id:e.toString(),audioID:`audio-${e}`,videoID:`video-${e}`})}return n},fi=({participants:e,member:t,coHost:r="",host:a,forChatBroadcast:n=!1})=>{const o=[],s=t=>{const r=e.filter(e=>e.name!==t);return r[Math.floor(Math.random()*r.length)].name||""};let i=[];i=n?[t,a]:r?[t,r,a,...e.map(e=>e.name).filter(e=>void 0!==e)]:[t,a,...e.map(e=>e.name).filter(e=>void 0!==e)],i=[...new Set(i)];let c=0;return i.forEach(t=>{const r={sender:t,receivers:[s(t)],message:`Direct message from ${t}`,timestamp:new Date(Date.now()+c).toLocaleTimeString(),group:!1};o.push(r);const a={sender:t,receivers:e.map(e=>e.name).filter(e=>void 0!==e),message:`Group message from ${t}`,timestamp:new Date(Date.now()+c).toLocaleTimeString(),group:!0};o.push(a),c+=15e3}),o},bi=({participants:e,hostName:t,coHostName:r,numberOfRequests:a})=>{const n=e.filter(e=>e.name!==t&&e.name!==r),o=["fa-video","fa-desktop","fa-microphone"];for(let e=o.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[o[e],o[t]]=[o[t],o[e]]}return n.flatMap(e=>{const t=new Set,r=[];for(let n=0;n<a;n++){let a;do{a=o[Math.floor(Math.random()*o.length)]}while(t.has(a));t.add(a),r.push({id:e.id||"",name:e.name?e.name.toLowerCase().replace(/\s/g,"_"):"",icon:a,username:e.name?e.name.toLowerCase().replace(/\s/g,"_"):""})}return r})},yi=()=>{const e=["Dimen","Nore","Ker","Lor","Mik"],t=[];for(let r=0;r<e.length;r++){const a=e[r];t.push({name:a,id:r.toString()})}return t},xi=({numberOfPolls:e})=>{const t=["trueFalse","yesNo","custom"],r=[];for(let a=0;a<e;a++){const e=t[Math.floor(Math.random()*t.length)];let n;switch(e){case"trueFalse":n=["True","False"];break;case"yesNo":n=["Yes","No"];break;case"custom":n=Array.from({length:Math.floor(5*Math.random())+2},(e,t)=>`Option ${t+1}`);break;default:n=[]}const o={id:`${a+1}`,question:`Random Question ${a+1}`,type:e,options:n,votes:Array(n.length).fill(0),status:"inactive",voters:{}};r.push(o)}return r},vi={card:{width:"100%",height:"100%",margin:0,padding:0,backgroundColor:"#2c678f"},overlayMobile:{position:"absolute",width:"auto",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"},overlayWeb:{position:"absolute",minWidth:"50%",minHeight:"5%",maxHeight:"100%",display:"grid",gridTemplateColumns:"4fr 2fr",gridGap:"3px"},nameColumn:{justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",paddingVertical:5,paddingHorizontal:10,marginEnd:2,fontSize:14},nameText:{fontSize:14,color:"white"},waveformWeb:{display:"flex",justifyContent:"left",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",padding:0,flexDirection:"row"},waveformMobile:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.05)",paddingVertical:5,marginLeft:5,maxWidth:"25%"},bar:{flex:1,opacity:.35,marginHorizontal:1},backgroundImage:{position:"absolute",width:80,height:80,justifyContent:"center",alignItems:"center",alignSelf:"center",top:"50%",left:"50%",transform:"translate(-40px, -40px)"},roundedImage:{borderRadius:20}},Si=({customStyle:e,name:t,showWaveform:r,overlayPosition:a,barColor:n="white",textColor:o="white",imageSource:s,roundedImage:i=!1,imageStyle:c})=>{const[d,l]=(0,de.useState)(Array.from({length:9},()=>0)),u=()=>{l(d.map(()=>0))};(0,de.useEffect)(()=>(r?d.map((e,t)=>setInterval(()=>{l(e=>{const r=[...e];return r[t]=(r[t]+1)%2,r})},p(t))):u(),()=>u()),[r]);const p=e=>[474,433,407,458,400,427,441,419,487][e]||0;return(0,ce.jsxs)("div",{style:{...vi.card,...e},children:[s&&(0,ce.jsx)("img",{src:s,style:{...vi.backgroundImage,...i&&vi.roundedImage,...c},alt:"Background"}),(0,ce.jsxs)("div",{style:{...F({position:a}),...vi.overlayWeb},children:[(0,ce.jsx)("div",{style:vi.nameColumn,children:(0,ce.jsx)("span",{style:{...vi.nameText,color:o},children:t})}),(0,ce.jsx)("div",{style:{...vi.waveformWeb},children:d.map((e,t)=>(0,ce.jsx)("div",{style:{...vi.bar,height:0===e?1:16,backgroundColor:n}},t))})]})]})},Ri={glowEnabled:!1,glowIntensity:.3,neumorphicEnabled:!1,neumorphicDepth:1,pulseBorderEnabled:!1,showSkeleton:!1,animationsEnabled:!0,disabledOpacity:.5,backdropBlurEnabled:!1,adaptiveStyling:!0};function wi(e,t){return t?{...e,...t}:e}function ki(e,t=!1){const r={};if(e.backgroundGradient?r.background=e.backgroundGradient:e.backgroundColor&&(r.backgroundColor=e.backgroundColor),void 0!==e.borderRadius&&(r.borderRadius="number"==typeof e.borderRadius?`${e.borderRadius}px`:e.borderRadius),e.border&&(r.border=e.border),e.boxShadow&&(r.boxShadow=e.boxShadow),void 0!==e.width&&(r.width="number"==typeof e.width?`${e.width}px`:e.width),void 0!==e.height&&(r.height="number"==typeof e.height?`${e.height}px`:e.height),void 0!==e.minWidth&&(r.minWidth="number"==typeof e.minWidth?`${e.minWidth}px`:e.minWidth),void 0!==e.minHeight&&(r.minHeight="number"==typeof e.minHeight?`${e.minHeight}px`:e.minHeight),void 0!==e.maxWidth&&(r.maxWidth="number"==typeof e.maxWidth?`${e.maxWidth}px`:e.maxWidth),void 0!==e.maxHeight&&(r.maxHeight="number"==typeof e.maxHeight?`${e.maxHeight}px`:e.maxHeight),void 0!==e.padding&&("object"==typeof e.padding?Object.assign(r,e.padding):r.padding="number"==typeof e.padding?`${e.padding}px`:e.padding),void 0!==e.margin&&("object"==typeof e.margin?Object.assign(r,e.margin):r.margin="number"==typeof e.margin?`${e.margin}px`:e.margin),e.transform&&(r.transform=e.transform),e.alignment&&(r.alignItems=e.alignment),e.justifyContent&&(r.justifyContent=e.justifyContent),e.overflow&&(r.overflow=e.overflow),e.backdropBlurEnabled&&e.blurAmount&&(r.backdropFilter=`blur(${e.blurAmount}px)`,r.WebkitBackdropFilter=`blur(${e.blurAmount}px)`),!1!==e.animationsEnabled&&e.animationDuration){const t=e.animationEasing||"ease-in-out";r.transition=`all ${e.animationDuration}ms ${t}`}return e.customStyles&&Object.assign(r,e.customStyles),r}const Ci=({children:e,title:t,subtitle:r,borderRadius:a=20,padding:n,gradient:o,onClick:s,isDarkMode:i=!0,className:c,style:d,hoverEffect:l=!0,elevation:u=2,animateOnMount:p=!1,animationDuration:m=st.normal,titleStyle:g,subtitleStyle:h,alignment:f="start"})=>{const[b,y]=(0,de.useState)(!1),[x,v]=(0,de.useState)(!p);(0,de.useEffect)(()=>{if(Mt(),p){const e=setTimeout(()=>v(!0),10);return()=>clearTimeout(e)}},[p]);const S={...n?"number"==typeof n?{padding:`${n}px`}:"string"==typeof n?{padding:n}:n:{padding:`${rt.md}px`},alignItems:{start:"flex-start",center:"center",end:"flex-end"}[f],background:o||Pe.brandGradient(i),borderRadius:`${a}px`,boxShadow:Pe.elevation(u,i),display:"flex",flexDirection:"column",transition:`all ${m}ms ${st.smooth}`,cursor:s?"pointer":"default",opacity:x?1:0,transform:x?b&&l&&s?"scale(1.02) translateY(-2px)":"scale(1)":"scale(0.98) translateY(10px)",...d},R=b&&l&&s?{boxShadow:Pe.elevation(Math.min(u+1,5),i)}:{},w={...nt.toStyle(nt.titleMedium),color:"#FFFFFF",marginBottom:r||e?`${rt.xs}px`:0,...g},k={...nt.toStyle(nt.bodyMedium),color:"rgba(255, 255, 255, 0.8)",marginBottom:e?`${rt.sm}px`:0,...h},C=(0,de.useCallback)(()=>{l&&y(!0)},[l]),j=(0,de.useCallback)(()=>{l&&y(!1)},[l]),P=(0,de.useCallback)(()=>{s&&s()},[s]),M=(0,de.useCallback)(e=>{!s||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s())},[s]);return(0,ce.jsxs)("div",{className:c,style:{...S,...R},onClick:P,onMouseEnter:C,onMouseLeave:j,onKeyDown:s?M:void 0,role:s?"button":void 0,tabIndex:s?0:void 0,children:[t&&(0,ce.jsx)("div",{style:w,children:t}),r&&(0,ce.jsx)("div",{style:k,children:r}),e]})},ji=({children:e,glowColor:t,glowIntensity:r=.5,backgroundColor:a,borderRadius:n=16,padding:o,margin:s,isPulsing:i=!1,pulseDuration:c=1500,isNeon:d=!1,width:l,height:u,glowOnHover:p=!1,onClick:m,isDarkMode:g=!0,className:h,style:f,animateOnMount:b=!1})=>{const[y,x]=(0,de.useState)(!1),[v,S]=(0,de.useState)(0),[R,w]=(0,de.useState)(!b),k=(0,de.useRef)(null);(0,de.useEffect)(()=>{if(Mt(),b){const e=setTimeout(()=>w(!0),10);return()=>clearTimeout(e)}},[b]),(0,de.useEffect)(()=>{if(!i)return void S(0);let e=null;const t=r=>{e||(e=r);const a=(r-e)%c/c,n=Math.sin(a*Math.PI);S(n),k.current=requestAnimationFrame(t)};return k.current=requestAnimationFrame(t),()=>{k.current&&cancelAnimationFrame(k.current)}},[i,c]);const C=t||(g?Pe.primaryDark:Pe.primary),j=a||(g?Pe.surfaceDark:Pe.surface),P=p?y?r:0:r,M={...o?"number"==typeof o?{padding:`${o}px`}:"string"==typeof o?{padding:o}:o:{padding:`${rt.md}px`},width:l,height:u,margin:"number"==typeof s?`${s}px`:s,background:j,borderRadius:`${n}px`,border:`1px solid ${Pe.hexToRgba(C,.3)}`,boxShadow:(()=>{if(d)return`\n        0 0 5px ${Pe.hexToRgba(C,.8)},\n        0 0 10px ${Pe.hexToRgba(C,.6)},\n        0 0 20px ${Pe.hexToRgba(C,.4)},\n        0 0 40px ${Pe.hexToRgba(C,.2)}\n      `;if(i){const e=P*(.3+.7*v);return`\n        0 0 ${10+20*v}px ${Pe.hexToRgba(C,.6*e)},\n        0 0 ${20+40*v}px ${Pe.hexToRgba(C,.3*e)}\n      `}return`0 0 ${15*P}px ${5*P}px ${Pe.hexToRgba(C,.5*P)}`})(),cursor:m?"pointer":"default",opacity:R?1:0,transform:R?"scale(1)":"scale(0.98)",transition:`all ${st.fast}ms ${st.smooth}`,...f},I=(0,de.useCallback)(()=>{x(!0)},[]),A=(0,de.useCallback)(()=>{x(!1)},[]),T=(0,de.useCallback)(()=>{m&&m()},[m]),F=(0,de.useCallback)(e=>{!m||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},[m]);return(0,ce.jsx)("div",{className:h,style:M,onClick:T,onMouseEnter:I,onMouseLeave:A,onKeyDown:m?F:void 0,role:m?"button":void 0,tabIndex:m?0:void 0,children:e})},Pi=({children:e,backgroundColor:t,borderRadius:r=16,padding:a,margin:n,depth:o=2,isPressed:s=!1,isInteractive:i=!1,onTap:c,onLongPress:d,width:l,height:u,isDarkMode:p=!0,className:m,style:g,animateOnMount:h=!1})=>{const[f,b]=(0,de.useState)(!1),[y,x]=(0,de.useState)(!h),v=le().useRef(null);(0,de.useEffect)(()=>{if(Mt(),h){const e=setTimeout(()=>x(!0),10);return()=>clearTimeout(e)}},[h]);const S=t||(p?"#1E1E2E":"#E0E5EC"),R={...a?"number"==typeof a?{padding:`${a}px`}:"string"==typeof a?{padding:a}:a:{padding:`${rt.md}px`},width:l,height:u,margin:"number"==typeof n?`${n}px`:n,background:S,borderRadius:`${r}px`,boxShadow:(e=>{const t=Math.max(1,Math.min(3,o)),r=4*t,a=8*t;return e||s?p?`\n          inset ${-r/2}px ${-r/2}px ${a/2}px rgba(0, 0, 0, 0.4),\n          inset ${r/2}px ${r/2}px ${a/2}px rgba(45, 58, 79, 0.2)\n        `:`\n          inset ${-r/2}px ${-r/2}px ${a/2}px rgba(0, 0, 0, 0.08),\n          inset ${r/2}px ${r/2}px ${a/2}px rgba(255, 255, 255, 0.5)\n        `:p?`\n        ${r}px ${r}px ${a}px rgba(0, 0, 0, 0.5),\n        ${-r}px ${-r}px ${a}px rgba(45, 58, 79, 0.3)\n      `:`\n        ${r}px ${r}px ${a}px rgba(163, 177, 198, 0.6),\n        ${-r}px ${-r}px ${a}px rgba(255, 255, 255, 0.8)\n      `})(f),cursor:i||c?"pointer":"default",opacity:y?1:0,transform:y?f?"scale(0.98)":"scale(1)":"scale(0.98)",transition:`all ${st.fast}ms ${st.snappy}`,userSelect:"none",...g},w=(0,de.useCallback)(()=>{(i||c)&&(b(!0),d&&(v.current=setTimeout(()=>{d()},500)))},[i,c,d]),k=(0,de.useCallback)(()=>{b(!1),v.current&&(clearTimeout(v.current),v.current=null)},[]),C=(0,de.useCallback)(()=>{b(!1),v.current&&(clearTimeout(v.current),v.current=null)},[]),j=(0,de.useCallback)(()=>{c&&c()},[c]),P=(0,de.useCallback)(e=>{!i&&!c||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),b(!0))},[i,c]),M=(0,de.useCallback)(e=>{!i&&!c||"Enter"!==e.key&&" "!==e.key||(b(!1),c&&c())},[i,c]);return(0,ce.jsx)("div",{className:m,style:R,onClick:j,onMouseDown:w,onMouseUp:k,onMouseLeave:C,onKeyDown:P,onKeyUp:M,role:i||c?"button":void 0,tabIndex:i||c?0:void 0,children:e})},Mi=({children:e,pulseColor:t,gradientColors:r,backgroundColor:a,borderRadius:n=16,borderWidth:o=2,padding:s,margin:i,pulseDuration:c=1500,isPulsing:d=!0,pulseWaves:l=1,width:u,height:p,onTap:m,isDarkMode:g=!0,className:h,style:f})=>{const[b,y]=(0,de.useState)(0),x=(0,de.useRef)(null);(0,de.useEffect)(()=>{Mt()},[]);const v=t||(g?Pe.primaryDark:Pe.primary),S=a||(g?Pe.surfaceDark:Pe.surface);(0,de.useEffect)(()=>{if(!d)return void y(0);let e=null;const t=r=>{e||(e=r),y((r-e)%c/c),x.current=requestAnimationFrame(t)};return x.current=requestAnimationFrame(t),()=>{x.current&&cancelAnimationFrame(x.current)}},[d,c]);const R={...s?"number"==typeof s?{padding:`${s}px`}:"string"==typeof s?{padding:s}:s:{padding:`${rt.md}px`},width:u,height:p,margin:"number"==typeof i?`${i}px`:i,background:S,borderRadius:`${n}px`,cursor:m?"pointer":"default",transition:`background ${st.fast}ms ${st.smooth}`,...(()=>{if(!d)return{border:`${o}px solid ${Pe.hexToRgba(v,.5)}`};const e=.5*Math.sin(b*Math.PI*2)+.5,t=[];for(let e=0;e<l;e++){const a=(b+e/l)%1,n=.5*Math.sin(a*Math.PI*2)+.5,o=3+8*n;if(r&&r.length>0){const a=r[e%r.length];t.push(`0 0 ${o}px ${Pe.hexToRgba(a,.6*n)}`)}else t.push(`0 0 ${o}px ${Pe.hexToRgba(v,.6*n)}`)}return r&&r.length>=2?{border:`${o}px solid transparent`,backgroundImage:`linear-gradient(${S}, ${S}), linear-gradient(135deg, ${r.join(", ")})`,backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box",boxShadow:t.join(", ")}:{border:`${o}px solid ${Pe.hexToRgba(v,.3+.5*e)}`,boxShadow:t.join(", ")}})(),...f};return(0,ce.jsx)("div",{className:h,style:R,onClick:()=>{m&&m()},onKeyDown:m?e=>{!m||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())}:void 0,role:m?"button":void 0,tabIndex:m?0:void 0,children:e})},Ii=({children:e,styleOptions:t,decoration:r,padding:a,margin:n,width:o,height:s,borderRadius:i=16,enableGlow:c=!1,glowIntensity:d=.3,glowColor:l,enableNeumorphism:u=!1,neumorphicDepth:p=1,enableGlassmorphism:m=!1,blurAmount:g=10,enablePulseBorder:h=!1,pulseBorderColor:f,backgroundColor:b,gradient:y,shadows:x,animationDuration:v=200,animationsEnabled:S=!0,onTap:R,onLongPress:w,isPressed:k=!1,isHovered:C=!1,isDarkMode:j=!0,pressedScale:P=.98,hoveredScale:M=1.02,alignment:I,className:A,style:T})=>{const[F,D]=(0,de.useState)(k),[N,L]=(0,de.useState)(C),[V,B]=(0,de.useState)(0),$=le().useRef(null),E=le().useRef(null);(0,de.useEffect)(()=>{Mt()},[]),(0,de.useEffect)(()=>{D(k)},[k]),(0,de.useEffect)(()=>{L(C)},[C]),(0,de.useEffect)(()=>{if(!h)return;let e=null;const t=r=>{e||(e=r),B((r-e)%1500/1500),E.current=requestAnimationFrame(t)};return E.current=requestAnimationFrame(t),()=>{E.current&&cancelAnimationFrame(E.current)}},[h]);const W=t?ki(t,j):{},H={...a?"number"==typeof a?{padding:`${a}px`}:"string"==typeof a?{padding:a}:a:{padding:`${rt.md}px`},...(()=>{if(!I)return{};const e={start:"flex-start",center:"center",end:"flex-end",stretch:"stretch"};return{display:"flex",alignItems:e[I],justifyContent:e[I]}})(),width:o,height:s,margin:"number"==typeof n?`${n}px`:n,background:y||(m?Pe.glassBackground(j):u?j?"#1E1E2E":"#E0E5EC":b||(j?Pe.surfaceDark:Pe.surface)),borderRadius:`${i}px`,boxShadow:(()=>{const e=[];return x&&e.push(x),u&&e.push((()=>{if(!u)return"";const e=Math.max(1,Math.min(3,p)),t=4*e,r=8*e;return F?j?`inset ${-t/2}px ${-t/2}px ${r/2}px rgba(0, 0, 0, 0.4), inset ${t/2}px ${t/2}px ${r/2}px rgba(45, 58, 79, 0.2)`:`inset ${-t/2}px ${-t/2}px ${r/2}px rgba(0, 0, 0, 0.08), inset ${t/2}px ${t/2}px ${r/2}px rgba(255, 255, 255, 0.5)`:j?`${t}px ${t}px ${r}px rgba(0, 0, 0, 0.5), ${-t}px ${-t}px ${r}px rgba(45, 58, 79, 0.3)`:`${t}px ${t}px ${r}px rgba(163, 177, 198, 0.6), ${-t}px ${-t}px ${r}px rgba(255, 255, 255, 0.8)`})()),c&&e.push((()=>{if(!c)return"";const e=l||Pe.primary,t=N?1.2*d:d;return`0 0 ${15*t}px ${5*t}px ${Pe.hexToRgba(e,.5*t)}`})()),h&&e.push((()=>{if(!h)return"";const e=f||Pe.primary,t=.5*Math.sin(V*Math.PI*2)+.5;return`0 0 ${3+8*t}px ${Pe.hexToRgba(e,.6*t)}`})()),e.filter(Boolean).join(", ")||"none"})(),backdropFilter:m?`blur(${g}px)`:void 0,WebkitBackdropFilter:m?`blur(${g}px)`:void 0,border:m?`1px solid ${Pe.glassBorder(j)}`:h?`2px solid ${Pe.hexToRgba(f||Pe.primary,.3+.25*Math.sin(V*Math.PI*2)+.25)}`:void 0,cursor:R||w?"pointer":"default",transform:S?F?`scale(${P})`:N&&(R||w)?`scale(${M})`:"scale(1)":"none",transition:S?`all ${v}ms ${st.smooth}`:"none",userSelect:"none",...W,...r,...T},O=(0,de.useCallback)(()=>{(R||w)&&(D(!0),w&&($.current=setTimeout(()=>{w()},500)))},[R,w]),z=(0,de.useCallback)(()=>{D(!1),$.current&&(clearTimeout($.current),$.current=null)},[]),U=(0,de.useCallback)(()=>{L(!0)},[]),q=(0,de.useCallback)(()=>{L(!1),D(!1),$.current&&(clearTimeout($.current),$.current=null)},[]),_=(0,de.useCallback)(()=>{R&&R()},[R]),G=(0,de.useCallback)(e=>{!R&&!w||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),D(!0))},[R,w]),Y=(0,de.useCallback)(e=>{!R&&!w||"Enter"!==e.key&&" "!==e.key||(D(!1),R&&R())},[R,w]);return(0,ce.jsx)("div",{className:A,style:H,onClick:_,onMouseDown:O,onMouseUp:z,onMouseEnter:U,onMouseLeave:q,onKeyDown:G,onKeyUp:Y,role:R||w?"button":void 0,tabIndex:R||w?0:void 0,children:e})},Ai=({value:e="",onChangeText:t,onSubmit:r,onFocus:a,onBlur:n,variant:o="outlined",label:s,placeholder:i,helperText:c,errorText:d,hasError:l=!1,disabled:u=!1,readOnly:p=!1,type:m="text",prefixIcon:g,suffixIcon:h,isDarkMode:f=!0,className:b,style:y,containerStyle:x,borderRadius:v,fullWidth:S=!1,autoFocus:R=!1,maxLength:w,min:k,max:C,name:j,id:P,autoComplete:M,required:I=!1,animateOnMount:A=!1})=>{const[T,F]=(0,de.useState)(!1),[D,N]=(0,de.useState)(!A),[L,V]=(0,de.useState)(!1),B=(0,de.useRef)(null),$=l||!!d,E=d||c,W="password"===m&&L?"text":m;(0,de.useEffect)(()=>{if(Mt(),A){const e=setTimeout(()=>N(!0),10);return()=>clearTimeout(e)}},[A]);const H=(()=>{const e=v??ct.md,t=$?Pe.danger:Pe.primary,r=$?Pe.danger:T?t:f?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)";switch(o){case"filled":return{container:{background:f?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.06)",borderRadius:`${e}px`,border:"none",borderBottom:`2px solid ${r}`},input:{}};case"outlined":return{container:{background:"transparent",borderRadius:`${e}px`,border:`2px solid ${r}`},input:{}};case"underline":return{container:{background:"transparent",borderRadius:0,border:"none",borderBottom:`2px solid ${r}`},input:{}};case"glass":return{container:{background:Pe.glassBackground(f),borderRadius:`${e}px`,border:`1px solid ${T?t:Pe.glassBorder(f)}`,backdropFilter:"blur(12px)",WebkitBackdropFilter:"blur(12px)",boxShadow:T?`0 0 0 3px ${Pe.hexToRgba(t,.2)}`:"none"},input:{}};case"neumorphic":{const r=f?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.8)",a=f?"rgba(0, 0, 0, 0.5)":"rgba(163, 177, 198, 0.6)";return{container:{background:f?"#1E1E2E":"#E0E5EC",borderRadius:`${e}px`,border:"none",boxShadow:T?`inset 3px 3px 6px ${a}, inset -3px -3px 6px ${r}, 0 0 0 3px ${Pe.hexToRgba(t,.3)}`:`inset 3px 3px 6px ${a}, inset -3px -3px 6px ${r}`},input:{}}}default:return{container:{},input:{}}}})(),O={display:"flex",flexDirection:"column",width:S?"100%":"auto",opacity:D?1:0,transform:D?"translateY(0)":"translateY(8px)",transition:`all ${st.normal}ms ${st.smooth}`,...y},z={...nt.getLabelMedium(f),marginBottom:`${rt.xs}px`,color:$?Pe.danger:f?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.7)",transition:`color ${st.fast}ms ${st.smooth}`},U={display:"flex",alignItems:"center",gap:`${rt.sm}px`,padding:`${rt.sm}px ${rt.md}px`,transition:`all ${st.fast}ms ${st.smooth}`,opacity:u?.5:1,cursor:u?"not-allowed":"text",...H.container,...x},q={flex:1,background:"transparent",border:"none",outline:"none",fontSize:"14px",fontFamily:nt.fontFamily,color:f?"#FFFFFF":"#1F2937",cursor:u?"not-allowed":"text",...H.input},_={display:"flex",alignItems:"center",justifyContent:"center",color:$?Pe.danger:T?Pe.primary:f?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)",transition:`color ${st.fast}ms ${st.smooth}`,width:"20px",height:"20px"},G={...nt.getBodySmall(f),marginTop:`${rt.xs}px`,color:$?Pe.danger:f?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)"},Y={background:"transparent",border:"none",cursor:"pointer",padding:0,display:"flex",alignItems:"center",justifyContent:"center",color:f?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"},K=(0,de.useCallback)(()=>{F(!0),a?.()},[a]),J=(0,de.useCallback)(()=>{F(!1),n?.()},[n]),X=(0,de.useCallback)(e=>{t?.(e.target.value)},[t]),Z=(0,de.useCallback)(e=>{"Enter"===e.key&&r&&r()},[r]),Q=(0,de.useCallback)(()=>{B.current?.focus()},[]),ee=(0,de.useCallback)(()=>{V(e=>!e)},[]);return(0,ce.jsxs)("div",{className:b,style:O,children:[s&&(0,ce.jsxs)("label",{style:z,children:[s,I&&(0,ce.jsx)("span",{style:{color:Pe.danger},children:" *"})]}),(0,ce.jsxs)("div",{style:U,onClick:Q,role:"presentation",children:[g&&(0,ce.jsx)("span",{style:_,children:g}),(0,ce.jsx)("input",{ref:B,type:W,value:e,onChange:X,onFocus:K,onBlur:J,onKeyDown:Z,placeholder:i,disabled:u,readOnly:p,maxLength:w,min:k,max:C,name:j,id:P,autoComplete:M,autoFocus:R,required:I,"aria-invalid":$,"aria-describedby":E?`${P||j}-helper`:void 0,style:q}),"password"===m&&(0,ce.jsx)(()=>(0,ce.jsx)("button",{type:"button",style:Y,onClick:ee,tabIndex:-1,"aria-label":L?"Hide password":"Show password",children:L?"":""}),{}),h&&"password"!==m&&(0,ce.jsx)("span",{style:_,children:h})]}),E&&(0,ce.jsx)("span",{id:`${P||j}-helper`,style:G,role:$?"alert":void 0,children:E})]})},Ti=({icon:e,onPress:t,isActive:r=!1,tooltip:a,size:n=24,duration:o=220,backgroundColor:s,activeColor:i,isDarkMode:c=!0,className:d,style:l,disabled:u=!1,circular:p=!0,animateOnMount:m=!1})=>{const[g,h]=(0,de.useState)(!1),f=le().useRef(!1),[b,y]=(0,de.useState)(!1),[x,v]=(0,de.useState)(!m);(0,de.useEffect)(()=>{if(Mt(),m){const e=setTimeout(()=>v(!0),10);return()=>clearTimeout(e)}},[m]);const S=i||Pe.primary,R=r?"#FFFFFF":c?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.8)",w=s||(r?S:c?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.06)"),k={display:"inline-flex",alignItems:"center",justifyContent:"center",padding:`${rt.sm}px`,background:r?Pe.brandGradient(c):w,borderRadius:p?"9999px":`${rt.sm}px`,boxShadow:r?Pe.elevation(2,c):"none",cursor:u?"not-allowed":"pointer",opacity:u?.5:x?1:0,transform:x?g?"scale(0.94)":"scale(1)":"scale(0.9)",transition:`all ${o}ms ${st.smooth}`,outline:"none",border:"none",position:"relative",...l},C={display:"flex",alignItems:"center",justifyContent:"center",width:`${n}px`,height:`${n}px`,color:r?"#FFFFFF":R,transition:`color ${o}ms ${st.smooth}`},j={position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:`${rt.xs}px`,padding:`${rt.xs}px ${rt.sm}px`,background:c?"rgba(0, 0, 0, 0.9)":"rgba(255, 255, 255, 0.95)",color:c?"#FFFFFF":"#1F2937",fontSize:"12px",borderRadius:`${rt.xs}px`,whiteSpace:"nowrap",pointerEvents:"none",opacity:b?1:0,visibility:b?"visible":"hidden",transition:`all ${st.fast}ms ${st.smooth}`,boxShadow:Pe.elevation(2,c),zIndex:1e3},P=(0,de.useCallback)(()=>{u||h(!0)},[u]),M=(0,de.useCallback)(()=>{h(!1)},[]),I=(0,de.useCallback)(()=>{if(!u&&(f.current=!0,a)){const e=setTimeout(()=>y(!0),500);return()=>clearTimeout(e)}},[u,a]),A=(0,de.useCallback)(()=>{f.current=!1,h(!1),y(!1)},[]),T=(0,de.useCallback)(()=>{u||t()},[u,t]);return(0,ce.jsxs)("button",{type:"button",className:d,style:k,onClick:T,onMouseDown:P,onMouseUp:M,onMouseEnter:I,onMouseLeave:A,disabled:u,"aria-label":a,"aria-pressed":r,children:[(0,ce.jsx)("span",{style:C,children:e}),a&&(0,ce.jsx)("span",{style:j,children:a})]})},Fi=({width:e,height:t=16,borderRadius:r=8,isDarkMode:a=!0,className:n,style:o})=>{const[s,i]=(0,de.useState)(0),c=(0,de.useRef)(null),d=a?"#334155":"#E2E8F0",l=a?"#475569":"#F1F5F9";(0,de.useEffect)(()=>{let e=null;const t=r=>{e||(e=r),i((r-e)%1200/1200),c.current=requestAnimationFrame(t)};return c.current=requestAnimationFrame(t),()=>{c.current&&cancelAnimationFrame(c.current)}},[]);const u={width:e??"100%",height:`${t}px`,borderRadius:`${r}px`,background:`linear-gradient(90deg, ${d} ${100*Math.max(0,s-.3)}%, ${l} ${100*s}%, ${d} ${100*Math.min(1,s+.3)}%)`,...o};return(0,ce.jsx)("div",{className:n,style:u,role:"presentation","aria-hidden":"true"})},Di=({isDarkMode:e=!0,className:t,style:r,imageHeight:a=140})=>{const n={display:"flex",flexDirection:"column",alignItems:"flex-start",...r};return(0,ce.jsxs)("div",{className:t,style:n,children:[(0,ce.jsx)(Fi,{height:a,borderRadius:16,isDarkMode:e}),(0,ce.jsx)("div",{style:{height:`${rt.sm}px`}}),(0,ce.jsx)(Fi,{width:100,height:14,isDarkMode:e}),(0,ce.jsx)("div",{style:{height:`${rt.xs}px`}}),(0,ce.jsx)(Fi,{width:60,height:12,isDarkMode:e})]})},Ni=({lines:e=3,isDarkMode:t=!0,className:r,style:a,lineHeight:n=14,gap:o=8})=>{const s={display:"flex",flexDirection:"column",gap:`${o}px`,...a},i=[100,95,85,90,75,80,70];return(0,ce.jsx)("div",{className:r,style:s,children:Array.from({length:e}).map((e,r)=>(0,ce.jsx)(Fi,{width:`${i[r%i.length]}%`,height:n,isDarkMode:t},r))})},Li=({size:e=48,isDarkMode:t=!0,className:r,style:a})=>(0,ce.jsx)(Fi,{width:e,height:e,borderRadius:9999,isDarkMode:t,className:r,style:a}),Vi=({children:e,colors:t,duration:r=5e3,animationType:a="colorShift",animate:n=!0,borderRadius:o,stops:s,isDarkMode:i=!0,className:c,style:d})=>{const[l,u]=(0,de.useState)(0),p=(0,de.useRef)(null);(0,de.useEffect)(()=>{Mt()},[]);const m=t??(i?[Pe.primaryDark,Pe.accentDark,Pe.secondaryDark]:[Pe.primary,Pe.accent,Pe.secondary]);(0,de.useEffect)(()=>{if(!n)return void(p.current&&cancelAnimationFrame(p.current));let e=null;const t=a=>{e||(e=a),u((a-e)%r/r),p.current=requestAnimationFrame(t)};return p.current=requestAnimationFrame(t),()=>{p.current&&cancelAnimationFrame(p.current)}},[n,r]);const g={background:(()=>{switch(a){case"colorShift":default:return(()=>{const e=Math.floor(l*m.length),t=l*m.length%1,r=m.map((r,a)=>{const n=(a+e)%m.length,o=(a+e+1)%m.length;return((e,t,r)=>{const a=e.replace("#",""),n=t.replace("#",""),o=parseInt(a.substring(0,2),16),s=parseInt(a.substring(2,4),16),i=parseInt(a.substring(4,6),16),c=parseInt(n.substring(0,2),16),d=parseInt(n.substring(2,4),16),l=parseInt(n.substring(4,6),16);return`rgb(${Math.round(o+(c-o)*r)}, ${Math.round(s+(d-s)*r)}, ${Math.round(i+(l-i)*r)})`})(m[n],m[o],t)});return`linear-gradient(135deg, ${s?r.map((e,t)=>`${e} ${100*s[t]}%`).join(", "):r.join(", ")})`})();case"rotate":return`linear-gradient(${360*l}deg, ${s?m.map((e,t)=>`${e} ${100*s[t]}%`).join(", "):m.join(", ")})`;case"wave":return`linear-gradient(${135+25*Math.sin(l*Math.PI*2)}deg, ${s?m.map((e,t)=>`${e} ${100*s[t]}%`).join(", "):m.join(", ")})`;case"radialPulse":return`radial-gradient(circle at center, transparent 0%, transparent ${30+20*Math.sin(l*Math.PI*2)}%, ${s?m.map((e,t)=>`${e} ${100*s[t]}%`).join(", "):m.join(", ")})`;case"sweep":return(()=>{const e=360*l,t=[...m,m[0]],r=s??t.map((e,r)=>r/(t.length-1));return`conic-gradient(from ${e}deg at center, ${t.map((e,t)=>`${e} ${100*r[t]}%`).join(", ")})`})()}})(),borderRadius:null!=o?`${o}px`:void 0,...d};return(0,ce.jsx)("div",{className:c,style:g,children:e})},Bi=({activeSidebarContent:e,canNavigateBack:t,onNavigateBack:r,onClose:a,width:n,isDarkMode:o=!0,children:s})=>{if("none"===e||0===n)return null;const i={none:"",menu:"Menu",participants:"Participants",messages:"Messages",requests:"Requests",waiting:"Waiting Room",coHost:"Co-Host Settings",mediaSettings:"Media Settings",displaySettings:"Display Settings",eventSettings:"Event Settings",recording:"Recording",polls:"Polls",breakoutRooms:"Breakout Rooms",shareEvent:"Share Event",configureWhiteboard:"Whiteboard",background:"Background"}[e]||"",c=(0,de.useMemo)(()=>({position:"fixed",top:0,right:0,width:`${n}px`,height:"100vh",display:"flex",flexDirection:"column",background:o?"linear-gradient(180deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.95) 100%)":"linear-gradient(180deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderLeft:`1px solid ${Pe.glassBorder(o)}`,boxShadow:o?"-8px 0 32px rgba(0, 0, 0, 0.4)":"-8px 0 32px rgba(0, 0, 0, 0.1)",zIndex:100,animation:`slideInRight ${st.normal}ms ${st.smooth}`}),[n,o]),d=(0,de.useMemo)(()=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:`${rt.md}px ${rt.lg}px`,borderBottom:`1px solid ${Pe.glassBorder(o)}`,minHeight:56,flexShrink:0}),[o]),l={display:"flex",alignItems:"center",gap:rt.sm},u=(0,de.useMemo)(()=>({...nt.getTitleMedium(o),margin:0}),[o]),p=(0,de.useMemo)(()=>({width:36,height:36,display:"flex",alignItems:"center",justifyContent:"center",background:o?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)",border:"none",borderRadius:ct.md,cursor:"pointer",color:o?Pe.textPrimaryDark:Pe.textPrimary,transition:`all ${st.fast}ms ${st.smooth}`}),[o]),m={flex:1,overflow:"auto",padding:rt.md};return(0,ce.jsxs)("div",{style:c,children:[(0,ce.jsxs)("div",{style:d,children:[(0,ce.jsxs)("div",{style:l,children:[t&&(0,ce.jsx)("button",{style:p,onClick:r,onMouseEnter:e=>{e.currentTarget.style.background=o?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.background=o?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"},"aria-label":"Go back",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faArrowLeft,size:"sm"})}),(0,ce.jsx)("h2",{style:u,children:i})]}),(0,ce.jsx)("button",{style:p,onClick:a,onMouseEnter:e=>{e.currentTarget.style.background=o?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.background=o?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"},"aria-label":"Close sidebar",children:(0,ce.jsx)(ue.FontAwesomeIcon,{icon:pe.faTimes,size:"sm"})})]}),(0,ce.jsx)("div",{style:m,children:s})]})},$i="modal",Ei="sidebar",Wi="inline",Hi=e=>e?"sidebar":"modal",Oi=(e={})=>{const{minWidth:t=1200,initialContent:r="none"}=e,[a,n]=(0,de.useState)(r),[o,s]=(0,de.useState)([]),[i,c]=(0,de.useState)("undefined"!=typeof window?window.innerWidth:0);(0,de.useEffect)(()=>{if("undefined"==typeof window)return;const e=()=>{c(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const d=(0,de.useMemo)(()=>i>=t,[i,t]),l=(0,de.useMemo)(()=>"none"!==a,[a]),u=(0,de.useCallback)((e,t=!1)=>{a===e?(n("none"),s([])):(t&&"none"!==a?s(e=>[...e,a]):t||s([]),n(e))},[a]),p=(0,de.useCallback)(()=>{if(o.length>0){const e=[...o],t=e.pop();s(e),n(t)}else n("none")},[o]),m=(0,de.useCallback)(()=>{n("none"),s([])},[]),g=(0,de.useCallback)(e=>{if(!d||"none"===a)return 0;const t=.2*e;return t<280?280:t>420?420:t},[d,a]),h=(0,de.useCallback)(e=>e-g(e),[g]);return{activeSidebarContent:a,sidebarNavigationStack:o,updateActiveSidebarContent:u,sidebarNavigateBack:p,closeSidebar:m,shouldUseSidebar:d,getSidebarWidth:g,getEffectiveContentWidth:h,isSidebarOpen:l}},zi=({button:e,isDarkMode:t,iconSize:r,activeIconColor:a,inactiveIconColor:n})=>{const[o,s]=(0,de.useState)(!1),[i,c]=(0,de.useState)(!1);if(e.customComponent)return(0,ce.jsx)(ce.Fragment,{children:e.customComponent});const d=e.active??!1,l=e.disabled??!1,u=d&&e.alternateIcon?e.alternateIcon:e.icon,p=e.activeColor||a||Pe.primary,m=e.inactiveColor||n||(t?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.7)"),g=e.backgroundColor||(d?p:t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.06)"),h=d?p:"transparent",f={display:"flex",alignItems:"center",justifyContent:"center",width:r+16,height:r+16,borderRadius:"50%",background:d?Pe.brandGradient(t):g,boxShadow:d?`0 0 15px ${Pe.hexToRgba(h,.4)}, ${Pe.elevation(2,t)}`:i?Pe.elevation(1,t):"none",cursor:l?"not-allowed":"pointer",opacity:l?.5:1,transform:o?"scale(0.9)":i?"scale(1.05)":"scale(1)",transition:`all ${st.fast}ms ${st.snappy}`,border:"none",outline:"none",padding:0,position:"relative"},b={width:r,height:r,color:d?"#FFFFFF":m,display:"flex",alignItems:"center",justifyContent:"center"},y=e.tooltip||e.name,x={position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",marginBottom:"8px",padding:"4px 8px",background:t?"rgba(0, 0, 0, 0.9)":"rgba(255, 255, 255, 0.95)",color:t?"#FFFFFF":"#1F2937",fontSize:"12px",borderRadius:"6px",whiteSpace:"nowrap",pointerEvents:"none",opacity:i&&y?1:0,visibility:i&&y?"visible":"hidden",transition:`all ${st.fast}ms ${st.smooth}`,boxShadow:Pe.elevation(2,t),zIndex:1e3},v=(0,de.useCallback)(()=>{!l&&e.onPress&&e.onPress()},[l,e]);return(0,ce.jsxs)("button",{type:"button",style:f,onClick:v,onMouseDown:()=>!l&&s(!0),onMouseUp:()=>s(!1),onMouseEnter:()=>!l&&c(!0),onMouseLeave:()=>{c(!1),s(!1)},disabled:l,"aria-label":e.tooltip||e.name,"aria-pressed":d,children:[(0,ce.jsx)("span",{style:b,children:u}),(e.tooltip||e.name)&&(0,ce.jsx)("span",{style:x,children:e.tooltip||e.name})]})},Ui=({options:e,buttons:t,direction:r,alignment:a,isDarkMode:n=!0,className:o,style:s,iconSize:i=24,animateOnMount:c=!0})=>{const d=e?.buttons??t??[],l=e?.direction??r??"horizontal",u=e?.alignment??a??"center",p=e?.activeIconColor,m=e?.inactiveIconColor,[g,h]=(0,de.useState)(!c);(0,de.useEffect)(()=>{if(Mt(),c){const e=setTimeout(()=>h(!0),10);return()=>clearTimeout(e)}},[c]);const f=d.filter(e=>!1!==e.show);if(0===f.length)return null;const b={opacity:g?1:0,transform:g?"scale(1)":"scale(0.8)",transition:`all ${st.normal}ms ${st.snappy}`,boxShadow:`0 0 20px ${Pe.hexToRgba(Pe.primary,.15)}`,borderRadius:32},y={display:"flex",flexDirection:"vertical"===l?"column":"row",alignItems:"center",justifyContent:{start:"flex-start",center:"center",end:"flex-end","space-between":"space-between","space-around":"space-around"}[u]||"center",gap:`${rt.sm}px`};return(0,ce.jsx)("div",{className:o,style:{...b,...s},children:(0,ce.jsx)(It,{borderRadius:32,blur:20,padding:{paddingLeft:rt.md,paddingRight:rt.md,paddingTop:rt.sm,paddingBottom:rt.sm},isDarkMode:n,children:(0,ce.jsx)("div",{style:y,children:f.map((e,t)=>(0,ce.jsx)(zi,{button:e,isDarkMode:n,iconSize:i,activeIconColor:p,inactiveIconColor:m,index:t},e.name))})})})},qi=({backgroundColor:e,children:t,containerWidthFraction:r=1,containerHeightFraction:a=1,marginLeft:n=0,marginRight:o=0,marginTop:s=0,marginBottom:i=0,padding:c=0,containerProps:d,renderContent:l,renderContainer:u,isDarkMode:p=!0,enableGlassmorphism:m=!1,enableGradientBackground:g=!1,borderRadius:h=0,showBorder:f=!1,enableShadow:b=!1})=>{const[y,x]=(0,de.useState)({width:"undefined"!=typeof window?window.innerWidth*r:800,height:"undefined"!=typeof window?window.innerHeight*a:600}),[v,S]=(0,de.useState)(!1);(0,de.useEffect)(()=>{const e=()=>{x({width:window.innerWidth*r,height:window.innerHeight*a})};return window.addEventListener("resize",e),window.addEventListener("orientationchange",e),e(),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[r,a]),(0,de.useEffect)(()=>{const e=setTimeout(()=>S(!0),50);return()=>clearTimeout(e)},[]);const R={position:"relative",width:y.width-n-o,height:y.height-s-i,marginLeft:n,marginRight:o,marginTop:s,marginBottom:i,padding:c,borderRadius:h>0?`${h}px`:void 0,background:e||(g?p?"linear-gradient(135deg, #0F172A 0%, #1E293B 50%, #0F172A 100%)":"linear-gradient(135deg, #F8FAFC 0%, #E2E8F0 50%, #F8FAFC 100%)":m?Pe.glassBackground(p):p?"#0F172A":"#F8FAFC"),backdropFilter:m?"blur(20px)":void 0,WebkitBackdropFilter:m?"blur(20px)":void 0,border:f?`1px solid ${m?Pe.glassBorder(p):p?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"}`:void 0,boxShadow:b?Pe.elevation(3,p):void 0,overflow:"hidden",opacity:v?1:0,transition:`opacity ${st.normal}ms ${st.smooth}`},w=(0,ce.jsx)(ce.Fragment,{children:t}),k=l?l({defaultContent:w,dimensions:y}):w,C=(0,ce.jsx)("div",{style:R,...d,children:k});return u?(0,ce.jsx)(ce.Fragment,{children:u({defaultContainer:C,dimensions:y})}):C};return m})());
//# sourceMappingURL=main.js.map